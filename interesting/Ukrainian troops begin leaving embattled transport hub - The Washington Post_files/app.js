/**
 * Copyright 2012-2014 Echo.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Version: 1.3.8 (2014-08-21 14:18:35 UTC)
 */
!function(a){"use strict";if(!Echo.App.isDefined("Echo.Apps.Conversations")){var b=Echo.App.manifest("Echo.Apps.Conversations");b.config={targetURL:"",bozoFilter:!1,viewportChangeTimeout:50,streamingControl:{pauseOnHover:!0,displayStreamingStateHeader:!1,enablePausePlayToggle:!0},postComposer:{visible:!0,displaySharingOnPost:!0,contentTypes:{comments:{visible:!0,prompt:"What's on your mind?",resolveURLs:!0,attachments:{visible:!1,sources:""}}},confirmation:{enable:!0,message:"Thanks, your post has been submitted for review",timeout:5e3,hidingTimeout:300},plugins:[]},replyComposer:{visible:!0,displaySharingOnPost:!0,displayCompactForm:!0,contentTypes:{comments:{visible:!0,prompt:"What's on your mind?",resolveURLs:!0,attachments:{visible:!1,sources:""}}},confirmation:{enable:!0,message:"Thanks, your post has been submitted for review",timeout:5e3},plugins:[]},topPosts:{visible:!0,label:"Top Posts",markItemsAsReadOn:"viewportenter",queryOverride:"",collapsedContentHeight:110,initialItemsPerPage:5,initialSortOrder:"reverseChronological",includeTopContributors:!0,displaySourceIcons:!0,displaySortOrderPulldown:!0,displayCounter:!0,displayTopPostHighlight:!0,displaySharingIntent:!0,displayLikeIntent:!0,displayReplyIntent:!0,displayEditIntent:!0,displayCommunityFlagIntent:!1,displayTweets:!0,likesDisplayStyle:"facepile",replyNestingLevels:2,itemStates:["Untouched","ModeratorApproved"],itemMarkers:[],itemTypes:[],openLinksInNewWindow:!0,sortOrderEntries:[{title:"Newest First",value:"reverseChronological"},{title:"Oldest First",value:"chronological"},{title:"Most popular",value:"repliesDescending"},{title:"Most likes",value:"likesDescending"}],moderation:{displayCommunityFlaggedPosts:!0,displaySystemFlaggedPosts:!0},events:{onPostCountUpdate:null},plugins:[]},allPosts:{visible:!0,label:"All Posts",markItemsAsReadOn:"viewportenter",queryOverride:"",collapsedContentHeight:110,initialItemsPerPage:15,initialSortOrder:"reverseChronological",displaySourceIcons:!0,displaySortOrderPulldown:!0,displayCounter:!0,displayTopPostHighlight:!0,displaySharingIntent:!0,displayLikeIntent:!0,displayReplyIntent:!0,displayEditIntent:!0,displayCommunityFlagIntent:!0,displayTweets:!0,likesDisplayStyle:"facepile",replyNestingLevels:2,noPostsMessage:"There are no posts yet.<br>Be the first to chime in!",itemStates:["Untouched","ModeratorApproved"],itemMarkers:[],itemTypes:[],openLinksInNewWindow:!0,sortOrderEntries:[{title:"Newest First",value:"reverseChronological"},{title:"Oldest First",value:"chronological"},{title:"Most popular",value:"repliesDescending"},{title:"Most likes",value:"likesDescending"}],moderation:{displayCommunityFlaggedPosts:!1,displaySystemFlaggedPosts:!0,premoderation:{enable:!1,approvedUserBypass:!0,markers:["Conversations.Premoderation"]}},events:{onPostCountUpdate:null},plugins:[]},moderationQueue:{label:"Moderation Queue",displayReplyIntent:!1,displaySharingIntent:!1,events:{onPostCountUpdate:null}},auth:{enableBundledIdentity:!0,hideLoginButtons:!1,allowAnonymousSubmission:!1,authWidgetConfig:{},sharingWidgetConfig:{},plugins:[]},dependencies:{Janrain:{appId:void 0},StreamServer:{appkey:void 0,apiBaseURL:"//api.echoenabled.com/v1/",submissionProxyURL:"https://apps.echoenabled.com/v2/esp/activity",liveUpdates:{transport:"websockets",websockets:{URL:"//live.echoenabled.com/v1/"}}},FilePicker:{apiKey:"AFLWUBllDRwWZl7sQO1V1z"}},topMarkers:{item:"Conversations.TopPost",user:"Conversations.TopContributor"},presentation:{minimumWidth:320,maximumHeight:void 0,maximumWidth:void 0,maximumMediaWidth:void 0}},b.vars={streamingState:"live",changeStateOnHover:!0,activitiesCount:0},b.labels={paused:"Paused",live:"Streaming...",itemsWaiting:"({count} new items waiting)"},b.config.normalizer={dependencies:function(a){var b=Echo.Utils.get(a,"StreamServer",{});return this.set("appkey",b.appkey),this.set("apiBaseURL",b.apiBaseURL),this.set("submissionProxyURL",b.submissionProxyURL),a},appkey:function(a){return Echo.Utils.get(this.data,"dependencies.StreamServer.appkey",a)},apiBaseURL:function(a){return Echo.Utils.get(this.data,"dependencies.StreamServer.apiBaseURL",a)},submissionProxyURL:function(a){return Echo.Utils.get(this.data,"dependencies.StreamServer.submissionProxyURL",a)},moderationQueue:function(b){return a.extend(!0,{},this.get("allPosts"),b)},targetURL:function(b){if(b)return b;var c=a("link[rel='canonical']").attr("href");return c&&Echo.Utils.parseURL(c).domain||(c=document.location.href.split("#")[0]),c},auth:function(a){return a.buttons=a.hideLoginButtons?[]:["login","signup"],a}},b.dependencies=[{url:"{config:cdnBaseURL.sdk}/streamserver.pack.js",control:"Echo.StreamServer.Controls.Stream"},{loaded:function(){return!!Echo.GUI},url:"{config:cdnBaseURL.sdk}/gui.pack.js"},{url:"{config:cdnBaseURL.sdk}/gui.pack.css"},{url:"//cdn.echoenabled.com/apps/echo/conversations/v1.3.8/third-party/jquery.embedly.js",loaded:function(){return!!a.fn.embedly}}],b.events={"Echo.StreamServer.Controls.Stream.onActivitiesCountChange":function(a,b){var c=this.getComponent("allPosts");c&&c.config.get("context")===b.context&&(this.set("activitiesCount",b.count),this.view.render({name:"itemsWaiting"}))},"Echo.StreamServer.Controls.Counter.onUpdate":function(b,c){var d=this;a.each(["allPosts","topPosts","moderationQueue"],function(a,b){var e=d.getComponent(b+"Counter");return e&&e.config.get("target").is(c.target)?(d._triggerCounterUpdateEvent({component:b,count:c.data.count}),!1):void 0})}},b.init=function(){var b=this;this._retrieveData(function(){b.render(),b.ready()}),this._viewportChangeTimeout=null,this._viewportChangeHandler=function(){b._viewportChange.call(b)},("viewportenter"===this.config.get("allPosts.markItemsAsReadOn")||"viewportenter"===this.config.get("topPosts.markItemsAsReadOn"))&&a(window).on("scroll resize",this._viewportChangeHandler)},b.destroy=function(){a(window).off("scroll resize",this._viewportChangeHandler)},b.templates.main='<div class="{class:container}"><iframe class="{class:resizeFrame}"  width=100% height=100% frameBorder=0 ></iframe><div class="{class:streamingStateContainer}"><div class="pull-right {class:itemsWaiting}"></div><div class="{class:streamingState}"></div><div class="clearfix"></div></div><div class="{class:content}"><div class="{class:postComposer}"></div><div class="{class:topPostsContainer}"><div class="{class:topPostsHeader}"></div><div class="{class:topPosts}"></div></div><div class="{class:allPostsContainer}"><div class="active {class:allPosts}"></div></div></div></div>',b.templates.streamHeader='<ul class="nav nav-tabs {class:tabs} {class:streamHeader}"><li class="echo-primaryFont {class:streamTitle}"></li><li class="pull-right echo-primaryFont {class:streamSorter}"></li></ul>',b.templates.streamTitle='<span class="{class:streamTitle}"><span class="{class:streamCaption}">{data:label}</span><span class="{class:streamCounter}"></span></span>',b.templates.tabs={},b.templates.tabs.nav='<ul class="nav nav-tabs {class:tabs} {class:streamHeader}">',b.templates.tabs.navItem='<li class="{data:class}"><a href="#{data:tabId}" data-toggle="{data:type}"></a></li>',b.templates.tabs.content='<div class="tab-content {class:tabsContent}"></div>',b.templates.tabs.contentItem='<div class="tab-pane {data:class}" id="{data:tabId}"></div>',b.templates.defaultQuery="{data:filter}:{data:targetURL} {data:excludedSources} sortOrder:{data:initialSortOrder} safeHTML:permissive itemsPerPage:{data:initialItemsPerPage} {data:markers} {data:type} {data:operators} children:{data:replyNestingLevels} {data:childrenOperators}",b.renderers.streamingStateContainer=function(a){return this.config.get("streamingControl.displayStreamingStateHeader")||a.hide(),a},b.renderers.resizeFrame=function(a){var b=this;return a.on("load",function(){var a;this.contentWindow.onresize=function(){a&&clearTimeout(a),a=setTimeout(function(){b.events.publish({topic:"onAppResize"})},50)}}),a},b.renderers.streamingState=function(a){var b=this,c=this.get("streamingState"),d={paused:"live",live:"paused"}[c];return this.config.get("streamingControl.enablePausePlayToggle")&&(a.addClass("echo-clickable"),a.off("click.streamingState").on("click.streamingState",function(){b.setStreamingState(d,!0)})),a.empty().removeClass(this.cssPrefix+"streamingState-"+d).addClass(this.cssPrefix+"streamingState-"+c).append(this.labels.get(c))},b.renderers.itemsWaiting=function(a){var b=this.get("streamingState"),c=this.get("activitiesCount");return a.empty(),"paused"===b&&c?a.append(this.labels.get("itemsWaiting",{count:c})).show():(a.hide(),a)},b.renderers.container=function(a){var b=this.config.get("presentation");return a.css({"min-width":b.minimumWidth+"px","max-width":b.maximumWidth+"px","max-height":b.maximumHeight+"px","overflow-y":"auto"}),a},b.renderers.content=function(a){var b=this;return this.config.get("streamingControl.pauseOnHover")&&a.on("mouseenter",function(){b.setStreamingState("paused")}).on("mouseleave",function(){b.setStreamingState("live")}),a},b.renderers.postComposer=function(b){var c=this.config.get("postComposer");if(!this._isComposerVisible("postComposer"))return b;var d=this.config.get("targetURL"),e=this.config.get("auth.enableBundledIdentity"),f=this.config.get("dependencies.StreamServer");return this.initComponent({id:"postComposer",component:"Echo.StreamServer.Controls.Submit",config:a.extend(!0,{appkey:f.appkey,apiBaseURL:f.apiBaseURL,submissionProxyURL:f.submissionProxyURL,requestMethod:"POST",target:b,targetURL:d,infoMessages:{enabled:!1},markers:this._getSubmitMarkers(),data:{object:{content:Echo.Utils.get(Echo.Variables,d,"")}},ready:function(){this.view.get("text").on("change",function(){Echo.Utils.set(Echo.Variables,d,a(this).val())})}},this.config.get("postComposer"),{plugins:this._mergeSpecsByName([{name:"URLResolver",enabled:this.config.get("postComposer.contentTypes.comments.resolveURLs"),filePicker:{key:this.config.get("dependencies.FilePicker.apiKey"),visible:this.config.get("postComposer.contentTypes.comments.attachments.visible"),sources:this.config.get("postComposer.contentTypes.comments.attachments.sources")}},{name:"JanrainBackplaneHandler",appId:this.config.get("dependencies.Janrain.appId"),enabled:e,authWidgetConfig:this.config.get("auth.authWidgetConfig"),sharingWidgetConfig:this.config.get("auth.sharingWidgetConfig")},a.extend(!0,this.config.get("postComposer"),{name:"CardUIShim",submitPermissions:this._getSubmitPermissions(),confirmation:{enable:this._isModerationRequired()&&this.config.get("postComposer.confirmation.enable")},auth:this.config.get("auth")})],c.plugins)})}),b},b.renderers.topPostsContainer=function(b){var c=this.getComponent("topPosts"),d=this.config.get("topPosts.visible")&&c&&a.grep(c.get("threads"),function(a){return!a.deleted}).length>0;return d?b.show():b.hide()},b.renderers.topPostsHeader=function(a){return this.config.get("topPosts.visible")&&this.view.render({target:a,name:"_streamHeader",extra:{id:"topPosts"}}),a},b.renderers.topPosts=function(a){var b=this;return this.config.get("topPosts.visible")&&this.initComponent({id:"topPosts",component:"Echo.StreamServer.Controls.Stream",config:this._assembleStreamConfig("topPosts",{onItemAdd:function(){b.view.render({name:"topPostsContainer"})},onItemDelete:function(){b.view.render({name:"topPostsContainer"})},ready:function(){b.view.render({name:"topPostsContainer"})},target:a})}),a},b.renderers.allPosts=function(a){return this.config.get("allPosts.visible")?(this.view.render(this._moderationQueueEnabled()?{name:"_tabs",target:a,extra:{tabs:[{name:"allPosts",active:!0,renderer:"_streamTitle"},{name:"moderationQueue",renderer:"_streamTitle"},{name:"sorter",type:"dropdown",extraClass:"pull-right",renderer:"_streamSorter"}]}}:{name:"_allPosts",target:a}),a):a},b.renderers._allPosts=function(b){b.empty(),this.view.render({target:b,name:"_streamHeader",extra:{id:"allPosts"}});var c=this.initComponent({id:"allPosts",component:"Echo.StreamServer.Controls.Stream",config:this._assembleStreamConfig("allPosts",{target:a("<div>")})});return b.append(c.config.get("target")),b},b.renderers._tabs=function(c,d){var e=this,f=b.templates.tabs,g=a(this.substitute({template:f.nav})),h=a(this.substitute({template:f.content}));return a.map(d.tabs,function(b){b.type=b.type||"tab",b.id=b.id||b.name+"-"+Echo.Utils.getUniqueString();var d=a(e.substitute({template:f.navItem,data:{"class":(b.active?"active":"")+" "+(b.extraClass||""),type:b.type,tabId:b.id}}));if(b.renderer&&(e.view.render({target:d.find("a"),name:b.renderer,extra:{id:b.name}}),d.on("shown",function(){var a=c.find("."+e.cssPrefix+"streamSorter");a&&e.view.render({target:a,name:"_streamSorter",extra:{id:b.name}})})),g.append(d),"tab"===b.type){var i=a(e.substitute({template:f.contentItem,data:{tabId:b.id,"class":b.active?"active":""}})),j=e.initComponent({id:b.name,component:"Echo.StreamServer.Controls.Stream",config:e._assembleStreamConfig(b.name,{target:a("<div>")})});h.append(i.append(j.config.get("target")))}}),c.empty().append(g).append(h)},b.renderers._streamHeader=function(a,c){var d=this.view.fork(),e=d.render({template:b.templates.streamHeader});return this.view.render({target:d.get("streamTitle"),name:"_streamTitle",extra:{id:c.id}}),this.config.get(c.id+".displaySortOrderPulldown")&&this.view.render({target:d.get("streamSorter"),name:"_streamSorter",extra:{id:c.id}}),a.empty().append(e)},b.renderers._streamSorter=function(b,c){var d=this;~a.inArray(c.id,["allPosts","topPosts","moderationQueue"])||(c.id="allPosts");var e=this.config.get(c.id),f=function(){var b=Echo.Cookie.get([c.id,d.config.get("targetURL"),"sortOrder"].join("."))||function(){var b=d.getComponent(c.id),f=b?b.config.get("query"):d._assembleSearchQuery(c.id),g=f.match(/sortOrder:(\S+)/);return a.isArray(g)&&g.length?g.pop():e.initialSortOrder}(),f=a.grep(e.sortOrderEntries||[],function(a){return a.value===b});return f.length?f.pop().title:""},g=new Echo.GUI.Dropdown({target:b,title:f(),extraClass:"nav",entries:a.map(e.sortOrderEntries||[],function(a){return{title:a.title,handler:function(){Echo.Cookie.set([c.id,d.config.get("targetURL"),"sortOrder"].join("."),a.value),g.setTitle(a.title);var b=d.getComponent(c.id);if(b){var e=b.config.get("query");b.config.set("query",e.replace(/sortOrder:\S+/,"sortOrder:"+a.value)),b.config.remove("data"),b.refresh()}}}})});return b.find(".dropdown-menu").addClass("pull-right"),b.addClass(this.cssPrefix+"streamSorter")},b.renderers._streamTitle=function(a,c){var d=this.config.get(c.id),e=this.view.fork(),f=e.render({template:b.templates.streamTitle,data:{label:d.label}});return d.displayCounter&&this.initComponent({id:c.id+"Counter",component:"Echo.StreamServer.Controls.Counter",config:{target:e.get("streamCounter"),infoMessages:{layout:"compact"},plugins:[{name:"CounterCardUI"}],query:this._assembleCounterQuery(c.id),data:this.get("data."+c.id+"-count")}}),a.append(f)},b.methods.setStreamingState=function(b,c){var d=this;(this.get("changeStateOnHover")||c)&&(this.set("streamingState",b),this.set("changeStateOnHover",!(c&&"paused"===b)),a.map(["topPosts","allPosts","moderationQueue"],function(a){var c=d.getComponent(a);c&&c.setState(b)}),this.view.render({name:"streamingState"}))},b.methods._viewportChange=function(){var a=this;this._viewportChangeTimeout&&clearTimeout(this._viewportChangeTimeout),this._viewportChangeTimeout=setTimeout(function(){a.events.publish({topic:"onViewportChange",global:!1,bubble:!1})},this.config.get("viewportChangeTimeout"))},b.methods._moveStreamingStateCursor=function(a){var b=this.view.get("streamingStateCursor");b&&b.css({left:a.clientX,top:a.clientY})},b.methods._assembleStreamConfig=function(b,c){var d=this.config.get("dependencies.StreamServer"),e=a.extend(!0,{},this.config.get(b));return e.plugins=this._getStreamPluginList(b,c),a.extend(!0,{id:b,appkey:d.appkey,context:this.config.get("context"),apiBaseURL:d.apiBaseURL,liveUpdates:d.liveUpdates,submissionProxyURL:d.submissionProxyURL,asyncItemsRendering:!0,state:{toggleBy:"none"},labels:{emptyStream:e.noPostsMessage},item:{reTag:!1,markAsRead:e.markItemsAsReadOn,viaLabel:{icon:e.displaySourceIcons}},data:this.get("data."+b+"-search"),query:this._assembleSearchQuery(b)},e,c)},b.methods._getStreamPluginList=function(a,b){var c=this,d=this.config.get("auth"),e=this.config.get(a),f=this.config.get("topPosts.visible")?this.config.get("topPosts.includeTopContributors")?["topPost","topContributor"]:["topPost"]:[],g=[].concat([{name:"JanrainBackplaneHandler",appId:this.config.get("dependencies.Janrain.appId"),enabled:d.enableBundledIdentity,authWidgetConfig:d.authWidgetConfig,sharingWidgetConfig:d.sharingWidgetConfig},{name:"CardUIShim",topPost:{visible:e.displayTopPostHighlight,marker:this.config.get("topMarkers.item")},collapsedContentHeight:this.config.get(a+".collapsedContentHeight"),displayTopPostHighlight:e.displayTopPostHighlight,initialIntentsDisplayMode:this.config.get(a+".initialIntentsDisplayMode")},{name:"TweetDisplayCardUI"},{name:"ItemEventsProxy",onAdd:function(){var d=c.getComponent(a+"Counter");d&&d.request.liveUpdates.start(!0),b.onItemAdd&&b.onItemAdd()},onDelete:function(){var d=c.getComponent(a+"Counter");d&&d.request.liveUpdates.start(!0),b.onItemDelete&&b.onItemDelete()}},{name:"ItemsRollingWindow",moreButton:!0},{name:"URLResolver",presentation:this.config.get("presentation")}],this._getConditionalStreamPluginList(a),[{name:"ModerationCardUI",extraActions:f,topMarkers:this.config.get("topMarkers")}]);return this._mergeSpecsByName(g,e.plugins)},b.methods._getConditionalStreamPluginList=function(b){var c=this.config.get("auth"),d=this.config.get(b),e=[{intentID:"Like",name:"LikeCardUI",displayStyle:d.likesDisplayStyle},{intentID:"CommunityFlag",name:"CommunityFlagCardUI"},a.extend(!0,{requestMethod:"POST"},this.config.get("replyComposer"),{intentID:"Reply",name:"ReplyCardUI",enabled:this._isComposerVisible("replyComposer"),actionString:this.config.get("replyComposer.contentTypes.comments.prompt"),pauseTimeout:+this._isModerationRequired()&&this.config.get("replyComposer.confirmation.timeout"),displayCompactForm:this.config.get("replyComposer.displayCompactForm"),extraMarkers:this._getSubmitMarkers(["topPost"]),nestedPlugins:this._mergeSpecsByName([{name:"URLResolver",enabled:this.config.get("replyComposer.contentTypes.comments.resolveURLs"),filePicker:{key:this.config.get("dependencies.FilePicker.apiKey"),visible:this.config.get("replyComposer.contentTypes.comments.attachments.visible"),sources:this.config.get("replyComposer.contentTypes.comments.attachments.sources")}},{name:"JanrainBackplaneHandler",appId:this.config.get("dependencies.Janrain.appId"),enabled:c.enableBundledIdentity,authWidgetConfig:c.authWidgetConfig,sharingWidgetConfig:c.sharingWidgetConfig},a.extend(!0,this.config.get("replyComposer"),{name:"CardUIShim",auth:this.config.get("auth"),confirmation:{enable:this._isModerationRequired()&&this.config.get("replyComposer.confirmation.enable")},submitPermissions:this._getSubmitPermissions()})],this.config.get("replyComposer.plugins"))}),{intentID:"Sharing",name:"CardUISocialSharing"},{intentID:"Edit",name:"Edit",icon:"icon-pencil",requestMethod:"POST",nestedPlugins:[{name:"URLResolver",resolveURLs:this._getResolverSettingForEditPlugin(),filePicker:{key:this.config.get("dependencies.FilePicker.apiKey"),visible:this.config.get("postComposer.contentTypes.comments.attachments.visible"),sources:this.config.get("postComposer.contentTypes.comments.attachments.sources")}}]}];return a.grep(e,function(a){return!!d["display"+a.intentID+"Intent"]})},b.methods._getResolverSettingForEditPlugin=function(){var a,b=this.config.get("postComposer.contentTypes.comments.resolveURLs"),c=this.config.get("replyComposer.contentTypes.comments.resolveURLs");return a=b&&c?"all":b?"only-roots":c?"only-children":"disabled"},b.methods._isComposerVisible=function(b){var c=this.config.get(b);return c.visible&&!!a.map(c.contentTypes,function(a){return a.visible?a:void 0}).length},b.methods._getSubmitPermissions=function(){return this.config.get("auth.allowAnonymousSubmission")?"allowGuest":"forceLogin"},b.methods._assembleCounterQuery=function(a){var b="allPosts"!==name?{replyNestingLevels:0}:{};return this._assembleSearchQuery(a,b)},b.methods._assembleSearchQuery=function(c,d){var e=this.config.get(c,{}),f=e.queryOverride,g=f?{}:this._getQueryArgsBuilder(c)();return this.substitute({template:f||b.templates.defaultQuery,data:a.extend({},e,{targetURL:this.config.get("targetURL"),excludedSources:e.displayTweets===!1?"-source:Twitter":"",type:e.itemTypes.length?"type:"+e.itemTypes.join(","):"",initialSortOrder:Echo.Cookie.get([c,this.config.get("targetURL"),"sortOrder"].join("."))||e.initialSortOrder},g,d)})},b.methods._getQueryArgsBuilder=function(a){var b=this,c=this.config.get(a,{});return{topPosts:function(){return{operators:b._assembleStates(a,!0),childrenOperators:function(){var c=[];c.push(b._assembleStates(a));var d=b._assembleModerationOperators();return d&&(c=c.concat(d)),b._operatorsToString(c)}(),filter:"childrenof",markers:function(){var a=[].concat(c.itemMarkers,b.config.get("topMarkers.item"));return a.length?"markers:"+a.join(","):""}()}},allPosts:function(){var d=function(){var c=[];c.push(b._assembleStates(a));var d=b.user&&b.user.get("identityUrl");b.config.get("bozoFilter")&&d&&c.push("user.id:"+d);var e=b._assembleModerationOperators();return e&&(c=c.concat(e)),b._operatorsToString(c)}();return{operators:d,childrenOperators:d,filter:"childrenof",markers:c.itemMarkers.length?"markers:"+c.itemMarkers.join(","):""}},moderationQueue:function(){var a="state:Untouched -user.roles:moderator,administrator"+(b._getPremoderationConfig().approvedUserBypass?" -user.state:ModeratorApproved":"");return{operators:a,childrenOperators:a,filter:"scope",markers:c.itemMarkers.length?"markers:"+c.itemMarkers.join(","):""}}}[a]},b.methods._assembleStates=function(b,c){var d=this.config.get(b),e=this._getPremoderationConfig(),f=e.enable&&!c?["ModeratorApproved"]:d.itemStates;return f=f.concat(a.grep(["CommunityFlagged","SystemFlagged"],function(a){return Echo.Utils.get(d,"moderation.display"+a+"Posts")})),"state:"+f.join(",")},b.methods._assembleModerationOperators=function(){var a=this._getPremoderationConfig();if(!a.enable)return"";var b=[];return a.approvedUserBypass&&b.push("user.state:ModeratorApproved AND -state:ModeratorDeleted"),b.push("(user.roles:moderator,administrator AND -state:ModeratorDeleted)"),this._operatorsToString(b)},b.methods._operatorsToString=function(a){return a.length>1?"("+a.join(" OR ")+")":a.join("")},b.methods._retrieveData=function(b){var c=this,d=["topPosts","allPosts"];this._moderationQueueEnabled()&&d.push("moderationQueue");var e=Echo.Utils.foldl([],d,function(a,b){c.config.get(a+".visible")&&(b.push({id:a+"-search",method:"search",q:c._assembleSearchQuery(a)}),c.config.get(a+".displayCounter")&&b.push({id:a+"-count",method:"count",q:c._assembleCounterQuery(a)}))});if(!e.length)return void b();var f=this.config.get("dependencies.StreamServer");Echo.StreamServer.API.request({endpoint:"mux",apiBaseURL:f.apiBaseURL,data:{appkey:f.appkey,requests:e},onData:function(d){a.each(d,function(a,b){b&&"error"!==b.result||delete d[a]}),c._triggerInitialCounterUpdateEvents(d),c.set("data",d),b()},onError:function(){b()}}).send()},b.methods._moderationQueueEnabled=function(){return this.user.is("admin")&&this._getPremoderationConfig().enable},b.methods._isModerationRequired=function(){var a=this._getPremoderationConfig();return a.enable&&!(this.user.is("admin")||"ModeratorApproved"===this.user.get("state")&&a.approvedUserBypass)},b.methods._getSubmitMarkers=function(b){var c=this;b=b||[];var d={topPost:function(){return~a.inArray(c.config.get("topMarkers.user"),c.user.get("markers",[]))?c.config.get("topMarkers.item"):[]},premoderation:function(){return c._isModerationRequired()?c._getPremoderationConfig().markers:[]}},e=Echo.Utils.foldl([],d,function(c,d,e){~a.inArray(e,b)||d.push(c())});return Array.prototype.concat.apply([],e)},b.methods._getPremoderationConfig=function(){return this.config.get("allPosts.moderation.premoderation")},b.methods._mergeSpecsByName=function(b){var c=this,d=function(b,c){var d=-1;return a.each(c,function(a,c){return b.name===c.name?(d=a,!1):void 0}),d},e=a.map(Array.prototype.slice.call(arguments,1)||[],function(a){return a});return Echo.Utils.foldl(b,e,function(e){var f=d(e,b);return~f?(e.name===b[f].name&&e.nestedPlugins&&(b[f].nestedPlugins=b[f].nestedPlugins||[],c._mergeSpecsByName(b[f].nestedPlugins,e.nestedPlugins),delete e.nestedPlugins),void(b[f]=a.extend(!0,{},b[f],e))):void b.push(e)})},b.methods._triggerInitialCounterUpdateEvents=function(b){var c=this;a.map(["topPosts","allPosts","moderationQueue"],function(a){var d=b[a+"-count"];d&&c._triggerCounterUpdateEvent({component:a,count:d.count})})},b.methods._triggerCounterUpdateEvent=function(a){var b=this.config.get(a.component+".events.onPostCountUpdate");b&&b(a.count)},b.css='.{class:streamHeader} { padding: 5px 0px; position: relative; z-index: 20; }.{class:streamTitle} { font-size: 14px; }.{class:streamCounter} { font-size: 14px; }.{class:streamingStateContainer} { text-align: left; margin-bottom: 5px; font-family: "Helvetica Neue", arial, sans-serif; }.{class:streamingState} { padding-left: 15px; float: right; font-size: 13px; color: #c6c6c6; }.{class:streamingState-live} { background: url({config:cdnBaseURL.sdk-assets}/images/control_play.png) no-repeat left 3px; }.{class:streamingState-paused} { background: url({config:cdnBaseURL.sdk-assets}/images/control_pause.png) no-repeat left 3px; }.{class:itemsWaiting} { font-size: 13px; color: #c6c6c6; margin-left: 5px; }.{class:streamSorter} { font-size: 13px; }.echo-sdk-ui .{class:streamSorter}:focus { outline: none; }.{class:streamSorter} > ul > li > a { background: url("//cdn.echoenabled.com/apps/echo/conversations/v1.3.8/images/marker.png") no-repeat right center; padding-right: 20px; }.{class:streamSorter} ul.nav { margin-bottom: 0px; font-size: 13px; }.{class:streamSorter} ul.nav > li > a { text-decoration: none; color: #C6C6C6; line-height: 18px; }.{class:streamSorter} .dropdown-menu { float: right; left: auto; right: 0; }.echo-sdk-ui .{class:streamSorter} .nav .dropdown .dropdown-toggle { background-color: transparent; border-color: transparent; color: #C6C6C6; }.{class:streamSorter} ul.nav > li > a:hover,.{class:streamSorter} ul.nav > li > a:focus { background-color: transparent}.echo-sdk-ui .tab-content.{class:tabsContent} { overflow: visible; }.echo-sdk-ui .nav.{class:tabs} { margin: 0px; padding: 5px 0px; }.echo-sdk-ui .nav.{class:tabs} > li { height: 18px; line-height: 18px; }.{class:tabs} > li > a, .{class:tabs} > li > a:hover { color: #C6C6C6; }.echo-sdk-ui .nav.{class:tabs} { border: 0px; }.echo-sdk-ui .nav.{class:tabs} > li > a { font-size: 14px; line-height: 18px; padding: 0px; margin-right: 15px; border: 0px; }.echo-sdk-ui .nav.{class:tabs} > li.active > a,.echo-sdk-ui .nav.{class:tabs} > li.active > a:hover,.echo-sdk-ui .nav.{class:tabs} > li.active > a:focus,.echo-sdk-ui .nav.{class:tabs} > li.active > a:active { border-bottom: 0px solid #d8d8d8; outline: none; color: black; }.echo-sdk-ui .nav.{class:tabs} > .active > a,.echo-sdk-ui .nav.{class:tabs} > .active > a:focus,.echo-sdk-ui .nav.{class:tabs} > .active > a:hover { border: 0px; }.echo-sdk-ui .{class:tabs} > li.pull-right > a { padding-right: 0px; margin-right: 0px; }.echo-sdk-ui .nav.{class:tabs} > li > a:hover, .echo-sdk-ui .nav.{class:tabs} > li > a:focus { background-color: transparent; border: 0px; }.echo-sdk-ui .{class:tabs} ul.nav { margin-bottom: 0px; }.echo-sdk-ui .nav.{class:tabs} .dropdown-menu { border-radius: 6px; }.{class:container} .echo-control-message { font-family: "Helvetica Neue", arial, sans-serif; color: #42474A; font-size: 15px; line-height: 21px; }.{class:container} { position:relative; }.{class:resizeFrame} { position:absolute; z-index:-1; border:0; padding:0; }.{class:container} { min-height: 200px; }.{class:container} li > a, .{class:container} .echo-primaryFont,.{class:container} .echo-secondaryFont,.{class:container} .echo-linkColor { font-family: "Helvetica Neue", arial, sans-serif; }.{class:postComposer} { margin-bottom: 10px; }.{class:topPosts} > div { margin-bottom: 25px; }.{class:container} * { box-sizing: content-box !important; -moz-box-sizing: content-box; }.{class:container} ul, .{class:container} li { list-style: inherit; }',Echo.App.create(b)}}(Echo.jQuery);
!function(a){"use strict";var b=Echo.Control.manifest("Echo.StreamServer.Controls.CardUIAuth");Echo.Control.isDefined(b)||(b.config={buttons:["login","signup"],infoMessages:{enabled:!1}},b.dependencies=[{loaded:function(){return!!Echo.GUI},url:"{config:cdnBaseURL.sdk}/gui.pack.js"},{url:"{config:cdnBaseURL.sdk}/gui.pack.css"}],b.labels={edit:"Edit",login:"Login",logout:"Logout",loggingOut:"Logging out...",switchIdentity:"Switch Identity",or:"or",via:"via",signup:"signup"},b.templates.anonymous='<div class="{class:userAnonymous}"><span class="{class:login} echo-linkColor echo-clickable">{label:login}</span><span class="echo-primaryFont {class:or}"> {label:or} </span><span class="{class:signup} echo-linkColor echo-clickable">{label:signup}</span></div>',b.templates.logged='<div class="{class:userLogged}"><div class="{class:avatar}"><div class="{class:avatarElem}"></div></div><div class="{class:container}"><div class="{class:name}"></div><div class="echo-primaryFont {class:via}"></div></div><div class="echo-clear"></div></div>',b.renderers.via=function(a){return a.append(this.labels.get("via")+" "+this._detectAuthProvider())},b.renderers.login=function(a){return this._assembleIdentityControl("login",a)},b.renderers.signup=function(a){return this._assembleIdentityControl("signup",a)},b.renderers.or=function(b){var c=this.config.get("buttons");return~a.inArray("login",c)&&~a.inArray("signup",c)&&this.user.get("sessionID")||b.hide(),b},b.renderers.avatarElem=function(a){var b=this.user.get("avatar");b||(b=this.config.get("defaultAvatar")),a.css("background-image",'url("'+b+'")');var c=document.all&&document.querySelector&&!document.addEventListener;return c&&a.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b+"', sizingMethod='scale')"}),a},b.renderers.name=function(b){var c=this,d=!1,e='<span class="{class:dropdown}"></span>',f=[{visible:~a.inArray("login",this.config.get("buttons")),title:this.labels.get("switchIdentity"),handler:function(){if(!d){var b=a(this);c._assembleIdentityControl("login",b),d=!0,b.click()}}},{visible:!0,title:this.labels.get("logout"),handler:function(){c._publishBackplaneEvent("identity/logout/request"),c.user.logout()}}];return new Echo.GUI.Dropdown({target:b,title:c.user.get("name","")+this.substitute({template:e}),extraClass:"nav",entries:a.grep(f,function(a){return!!a.visible})}),b},b.methods.template=function(){return this.templates[this.user.is("logged")?"logged":"anonymous"]},b.methods._detectAuthProvider=function(){var a={"twitter.com":"Twitter","facebook.com":"Facebook","google.com":"Google","me.yahoo.com":"Yahoo"},b=this.user.get("identityUrl",""),c=Echo.Utils.parseURL(b).domain;return a[c]||c||b},b.methods._assembleIdentityControl=function(b,c){var d=this,e=this.config.get("buttons");return this.user.get("sessionID")&&~a.inArray(b,e)?c.on("click",function(){d._publishBackplaneEvent("identity/login/request")}):c.hide()},b.methods._publishBackplaneEvent=function(a){Backplane.response([{id:Backplane.since,channel_name:Backplane.getChannelName(),message:{type:a,payload:this.user.data||{}}}])},b.css='.{class:container} { float: left; }.{class:or} { font-size: 14px; }.{class:via} { margin-left: 15px; color: #D3D3D3; line-height: 18px; font-size: 14px; }.{class:name} .{class:dropdown} { background: url("//cdn.echoenabled.com/apps/echo/conversations/v1.3.8/images/marker.png") no-repeat right center; padding-right: 20px; }.{class:name} ul.nav .dropdown .dropdown-toggle { font-size: 20px; }.{class:name} ul.nav { margin-bottom: 3px; }.{class:name} ul.nav .dropdown-menu li > a { font-size: 14px; }.{class:avatar} div { border-radius: 50%; background-size:cover; display:inline-block; background-position:center; }.{class:login}, .{plugin.class} .{class:signup} { color: #006DCC; }.{class:userAnonymous} { margin: 0px 0px 7px 2px; text-align: left; }.{class:userLogged} { margin: 0px 0px 5px 3px; }.{class:name} { float: none; margin: 3px 0px 0px 15px; font-weight: normal; }.class:container} { float: left; }.{class:avatar} { float: left; width: 48px; height: 48px; border-radius: 50%; }.{class:avatar} > div { width: 48px; height: 48px; background-size:cover; display:inline-block; background-position:center; }',Echo.Control.create(b))}(Echo.jQuery);
!function(a){"use strict";var b=Echo.App.manifest("Echo.Conversations.MediaContainer");Echo.App.isDefined(b)||(b.templates.main=function(){return'<div class="{class:container}"></div>'},b.vars={cards:[]},b.init=function(){this.render(),this.ready()},b.renderers.container=function(b){var c=this.config.get("data",[]);if(c.length){this.cardParentConfig||(this.cardParentConfig=this.config.getAsHash());var d=a.extend({target:document.createDocumentFragment(),context:this.config.get("context"),ready:function(){b.append(this.config.get("target"))}},this.cardParentConfig.card);d.parent=this.itemParentConfig,this.cards=a.map(c,function(b){return new Echo.Conversations.NestedCard(a.extend({data:b},d))}),1===c.length&&b.addClass(this.cssPrefix+"single-card")}else b.hide();return b},b.css=".{class:container} { line-height: 1px; word-wrap: normal; white-space: nowrap; overflow-x: auto; overflow-y: hidden; padding: 8px 0px 8px 8px; }.{class:container} > div { display: inline-block; max-width: 90%; vertical-align: top; }.{class:container} > div > div { margin-right: 8px; }.{class:container}.{class:single-card} { padding: 0px; border: 0px; }.{class:container}.{class:single-card} > div { max-width: 100%; display: block; }.{class:container}.{class:single-card} > div > div { margin-right: 0; }.{class:container}::-webkit-scrollbar { height: 10px; }.{class:container}::-webkit-scrollbar-track { box-shadow: inset 0 0 6px rgba(0,0,0,0.3); }.{class:container}::-webkit-scrollbar-thumb { background: #D2D2D2; box-shadow: inset 0 0 6px rgba(0,0,0,0.5); }",Echo.App.create(b))}(Echo.jQuery);
!function(a){"use strict";var b=Echo.App.manifest("Echo.Conversations.NestedCard");if(!Echo.App.isDefined(b)){b.templates.photo='<div class="{class:item}"><div class="{class:border}"><div class="{class:photo}"><div class="{class:photoAvatarWrapper}"><div class="{class:avatar} {class:photoAvatar}" title="{data:author_name}"><div></div>{data:author_name}</div></div><div class="{class:photoContainer}"><img class="{class:photoThumbnail}" src="{data:thumbnail_url}" title="{data:title}"/></div><div class="{class:photoLabel}"><div class="{class:photoLabelContainer}"><div class="{class:title} {class:photoTitle}" title="{data:title}"><a class="echo-clickable" href="{data:url}" target="_blank">{data:title}</a></div><div class="{class:description} {class:photoDescription}">{data:description}</div></div></div></div><a class="{class:sourceIcon}" target="_blank"></a></div></div>',b.templates.video='<div class="{class:item}"><div class="{class:border}"><div class="{class:video}"><div class="{class:avatar} {class:videoAvatar}" title="{data:author_name}"><div></div>{data:author_name}</div><div class="{class:videoWrapper}"><div class="{class:videoPlaceholder}"><div class="{class:playButton}"></div><img src="{data:thumbnail_url}" title="{data:title}"/></div></div><div class="{class:title} {class:videoTitle}" title="{data:title}">{data:title}</div><div class="{class:description} {class:videoDescription}">{data:description}</div><a class="{class:sourceIcon}" target="_blank"></a></div></div></div>',b.templates.link='<div class="{class:item}"><div class="{class:border}"><div class="{class:article}"><div class="{class:articleThumbnail}"><img src="{data:thumbnail_url}"/></div><div class="{class:articleTemplate}"><div class="{class:title} {class:articleTitle}" title="{data:title}"><a href="{data:url}" target="_blank">{data:title}</a></div><div class="{class:articleDescriptionContainer}"><div class="{class:articleDescription}">{data:description}</div></div></div><div class="echo-clear"></div><a class="{class:sourceIcon}" target="_blank"></a></div></div></div>',b.templates.main=function(){return this.templates[this.getRenderType()]},b.labels={noMediaAvailable:"No media available",clickToExpand:"Click to expand"},b.events={"Echo.Apps.Conversations.onAppResize":function(){"photo"===this.getRenderType()&&this.view.render({name:"photoContainer"})}},b.sourceIcons={},b.init=function(){this.render(),this.ready()},b.config={minArticleImageWidth:320,sourceIcons:{predefined:[{pattern:/http:\/\/instagram\.com/i,url:"http://cdn.echoenabled.com/images/favicons/instagram.png"}],forbidden:[{pattern:/\/\/www\.filepicker\.io/i}]},displaySourceIcon:!0,displayAuthor:!0,maximumMediaWidth:void 0},b.renderers.sourceIcon=function(c){var d=this.get("data");if(d.provider_url&&this.config.get("displaySourceIcon")){var e;return a.map(this.config.get("sourceIcons.predefined"),function(a){return a.pattern.test(d.provider_url)?(e=a.url,!1):void 0}),e=e||d.provider_url+("/"===d.provider_url.substr(-1)?"":"/")+"favicon.ico",a.map(this.config.get("sourceIcons.forbidden"),function(a){a.pattern.test(e)&&(b.sourceIcons[e]=!1)}),"undefined"==typeof b.sourceIcons[e]?Echo.Utils.loadImage({image:e,onerror:function(){b.sourceIcons[e]=!1},onload:function(){a(this).attr("title",d.provider_name).appendTo(c),b.sourceIcons[e]=!0}}):b.sourceIcons[e]&&a("<img/>").attr({src:e,title:d.provider_name}).appendTo(c),d.original_url&&c.attr("href",d.original_url),c}},b.renderers.avatar=function(a){var b=document.all&&document.querySelector&&!document.addEventListener;return b&&(a.children()[0].style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this.config.get("defaultAvatar")+"', sizingMethod='scale')"),this.displayAuthor()?a:a.hide()},b.renderers.title=function(a){return this.get("data.title")?a:a.hide()},b.renderers.description=function(a){return this.get("data.description")?a:a.hide()},b.renderers.playButton=function(b){var c=this,d=this.get("data");return b.on("click",function(){c.view.get("videoPlaceholder").empty().append(a(d.html))}),b},b.renderers.videoPlaceholder=function(b){var c=this.get("data");return c.thumbnail_url||b.empty().append(a(c.html)),b.css({width:c.width,"padding-bottom":c.height/c.width*100+"%"})},b.renderers.photoThumbnail=function(b){var c=this,d=this.get("link"===this.get("data.type")?"data.thumbnail_url":"data.url"),e=a("<img />");return e.attr("class",b.attr("class")),this.config.get("maximumMediaWidth")&&e.css("max-width",this.config.get("maximumMediaWidth")),b.attr("title")&&e.attr("title",b.attr("title")),e.load(function(){c.events.publish({topic:"onMediaLoad"})}).error(function(){e.replaceWith(c.substitute({template:'<div class="{class:noMediaAvailable}"><span>{label:noMediaAvailable}</span></div>'}))}).attr("src",d),b.replaceWith(e)},b.renderers.photoContainer=function(a){var b=this.cssPrefix+"expanded",c=this,d=this.get("data",{}),e=this.view.get("photoThumbnail").width(),f=d.height,g=9*(e||d.width)/16,h=d.width,i=d.height;if(h&&i||(h=d.thumbnail_width,i=d.thumbnail_height),!a.hasClass(b)&&d.height>g&&i>=2*h){var j=Echo.Utils.foldl({},["transition","-o-transition","-ms-transition","-moz-transition","-webkit-transition"],function(a,b){b[a]="max-height ease 500ms"});a.addClass("echo-clickable").attr("title",this.labels.get("clickToExpand")).css("max-height",250).one("click",function(){c.events.publish({topic:"onMediaExpand"}),a.css(j).css("max-height",f).removeClass("echo-clickable").addClass(b).attr("title","")})}else a.css("max-height",f);return a},b.renderers.photoLabelContainer=function(a){var b=52;return this.get("data.title")&&(b+=21),this.view.get("photoLabel").css("max-height",b),this.get("data.description")||this.get("data.title")?this.view.get("photoContainer").css({"min-height":55+(this.displayAuthor()?55:0)+b,"min-width":200}):a.hide(),a},b.renderers.article=function(a){return this.get("data.thumbnail_url")||a.addClass(this.cssPrefix+"withoutPhoto"),a},b.methods._onViewportChange=function(a,b){"subscribe"===a?(this.events.subscribe({topic:"Echo.Apps.Conversations.onAppViewScroll",handler:b}),this.events.subscribe({topic:"Echo.Apps.Conversations.onAppViewResize",handler:b})):"unsubscribe"===a&&(this.events.unsubscribe({topic:"Echo.Apps.Conversations.onAppViewScroll",handler:b}),this.events.unsubscribe({topic:"Echo.Apps.Conversations.onAppViewResize",handler:b}))},b.methods.displayAuthor=function(){return this.get("data.author_name")&&this.config.get("displayAuthor")},b.methods.getRenderType=function(){var a=this.get("data.type"),b={link:function(){return this.config.get("data.thumbnail_width")>=this.config.get("minArticleImageWidth")?"photo":"link"}};return b[a]?b[a].call(this):a};var c=function(b){return a.map(["transition","-o-transition","-ms-transition","-moz-transition","-webkit-transition"],function(a){return a+": "+b}).join(";")};b.css='.{class:title} { font-weight: bold; margin: 5px 0; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }.{class:item} { text-align: left; font-family: "Helvetica Neue", arial, sans-serif; color: #42474A; font-size: 13px; line-height: 16px; display: inline-block; max-width: 100%; vertical-align: top; }.{class:border} { white-space: normal; word-break: break-word; background-color: #FFFFFF; border: 1px solid #D2D2D2; border-bottom-width: 2px; }.{class:item} .{class:sourceIcon} > img { width: 18px; height: 18px; }.echo-sdk-ui .{class:avatar} > div { width: 28px; height: 28px; background-size:cover; display:inline-block; background-position:center; border-radius: 50%; margin-right: 6px; }.{class:description} { overflow: hidden; }.{class:photo} .{class:noMediaAvailable} { position: relative; min-height: 145px; padding: 75px 10px 0 10px; background: #000; color: #FFF; min-width: 260px; text-align: center; }.{class:photoAvatarWrapper} { position: absolute; width: 100%; }.{class:photoAvatar} { color: #FFF; white-space: nowrap; padding: 12px; text-overflow: ellipsis; overflow: hidden; }.{class:photoAvatar} > div { background-image: url("{config:defaultAvatar}"); vertical-align: middle; }.{class:photo} { position: relative; left: 0; top: 0; zoom: 1; }.{class:photo} + .{class:sourceIcon} > img { padding: 10px; }.{class:photoLabel} { position: absolute; bottom: 0; color: #FFF; width: 100%; background-color: rgb(0, 0, 0); background-color: rgba(0, 0, 0, 0.5); }.{class:photoContainer} { display: block; overflow: hidden; text-align: center; background-color: #000; }.echo-sdk-ui .{class:photoLabel} a:link, .echo-sdk-ui .{class:photoLabel} a:visited, .echo-sdk-ui .{class:photoLabel} a:hover, .echo-sdk-ui .{class:photoLabel} a:active { color: #fff; }.{class:photoLabelContainer} { padding: 10px; }.{class:photoTitle} { margin: 0 0 5px 0; }.{class:photoLabel} { overflow: hidden; }.{class:photo}:hover .{class:photoLabel} { max-height: 100% !important; }.{class:photoLabel} { '+c("max-height ease 300ms")+'; }.{class:playButton} { cursor: pointer; position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 10; }.{class:playButton}:after { content: ""; position: absolute; top: 10px; left: 20px; border-left: 30px solid #FFF; border-top: 20px solid transparent; border-bottom: 20px solid transparent; }.{class:playButton} { box-shadow: 0px 0px 40px #000; margin: auto; width: 60px; height: 60px; border-radius: 50%; background-color: rgb(0, 0, 0); background-color: rgba(0, 0, 0, 0.7); }.{class:playButton}:hover { background-color: #3498DB; }.{class:video} { padding: 10px; }.{class:video} .{class:sourceIcon} > img { padding: 10px 0 0 0; }.{class:videoAvatar} { margin-bottom: 8px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }.{class:videoTitle} { margin: 10px 0 0 0; }.{class:videoAvatar} > div { background-image: url("{config:defaultAvatar}"); vertical-align: middle; }.{class:videoDescription} { margin: 5px 0 0 0; }.{class:videoWrapper} { background: #000; }.{class:videoPlaceholder} img { position: absolute; top: 0; left: 0; right: 0; bottom: 0; margin: auto; }.{class:videoPlaceholder} { max-width: 100%; position: relative; padding-bottom: 75%; height: 0; float: none; margin: 0px auto; background: #000000; overflow: hidden; }.{class:videoPlaceholder} > iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }.{class:videoPlaceholder} > video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }.{class:videoPlaceholder} > object { position: absolute; top: 0; left: 0; width: 100%;100 height: 100%; }.{class:article} { padding: 10px; min-width: 200px; }.{class:article} .{class:sourceIcon} > img { padding: 10px 0 0 0; }.{class:article} .{class:articleTitle} > a { color: #42474A; font-weight: bold; }.{class:article} .{class:articleTitle} > a:hover { color: #42474A; }.{class:articleTitle} { margin-left: 10px; margin-top: 0px; line-height: 16px; }.{class:articleDescription} { margin-left: 10px; font-size: 13px; line-height: 16px; }.{class:articleThumbnail} { width: 30%; float: left; max-width: 120px; max-height: 120px; text-align:center; overflow:hidden; }.{class:articleThumbnail} img { width: auto; height: auto; max-height:120px; max-width:120px; }.{class:articleTemplate} { width: 70%; float: left; }.{class:article}.{class:withoutPhoto} .{class:articleTitle} { margin-left: 0px; }.{class:article}.{class:withoutPhoto} .{class:articleDescription} { margin-left: 0px; }.{class:article}.{class:withoutPhoto} .{class:articleThumbnail} { display: none; }.{class:article}.{class:withoutPhoto} .{class:articleTemplate} { width: 100%; }',Echo.App.create(b)}}(Echo.jQuery);
!function(a){"use strict";var b=Echo.Plugin.manifest("CardUIShim","Echo.StreamServer.Controls.Stream");b.config={displayEmptyStream:!0},b.init=function(){this.component._executeNextActivity=function(){var a=this.activities;a.queue.length||"full"!==this.config.get("state.layout")||(a.state="paused"),a.queue.length||this.events.publish({topic:"onActivitiesComplete"}),a.animations>0||!this.itemsRenderingComplete||!a.queue.length||this.config.get("liveUpdates.enabled")&&"paused"===a.state&&"replace"!==a.queue[0].action&&!a.queue[0].byCurrentUser||a.queue.shift().handler()},this.component._spotUpdates.animate.fade=function(){this.activities.animations--,this._executeNextActivity()}},b.component.renderers.state=function(){var a=this.component.activities,b=Echo.Utils.foldl(0,a.queue,function(a,b){return a.affectCounter?++b:void 0}),c=this.component.getState()+b;return c!==a.lastState&&this.component.events.publish({topic:"onActivitiesCountChange",data:{count:b,context:this.component.config.get("context")}}),this.parentRenderer("state",arguments)},b.component.renderers.header=function(a){return a.hide()},b.component.renderers.container=function(b){var c=a.grep(this.component.get("threads"),function(a){return!a.deleted});return c.length||this.config.get("displayEmptyStream")?b.show():b.hide()},b.css=".{plugin.cass} .{class:more} { border: 1px solid #d8d8d8; border-bottom-width: 2px; border-radius: 3px; }.{plugin.cass} .{class:messageText} { border: 1px solid #d8d8d8; border-bottom-width: 2px; border-radius: 3px; }.{plugin.class:caption} { line-height: 18px; }.{plugin.class} .{class:header} { padding: 5px 0px 5px 0px; margin: 0px; font-size: 14px; }.{plugin.class} .{class:body} .echo-control-message { margin: 0px 0px 10px; border: 1px solid #d2d2d2; box-shadow: 0px 1px 1px #d2d2d2; border-radius: 3px; color: #c6c6c6; padding: 30px 0px 30px 0px; text-align: left;}.{plugin.class} .{class:body} .echo-control-message .echo-control-message-info { height: 35px; display: block; font-size: 14px; line-height: 16px; font-weight: normal; font-style: normal; background-image: url(//cdn.echoenabled.com/apps/echo/conversations/v1.3.8/images/info.png); padding-left: 40px; width: 180px; margin: 0px auto; }.{plugin.class} .echo-control-message-info { background: url(//cdn.echoenabled.com/apps/echo/conversations/v1.3.8/images/info.png) no-repeat; }.{plugin.class} .{class:item} { margin: 0px 0px 10px 0px; padding: 0px; border: 1px solid #d8d8d8; border-bottom-width: 2px; border-radius: 3px; background: #ffffff; }.{plugin.class} .{class:item-children} .{class:item} { margin: 0px; padding: 0px; box-shadow: 0 0 0; border: 0px; background: #f8f8f8; }",Echo.Plugin.create(b)}(Echo.jQuery),function(a){"use strict";var b=Echo.Plugin.manifest("CardUIShim","Echo.StreamServer.Controls.Stream.Item");b.events={"Echo.StreamServer.Controls.Stream.Item.onRender":function(){this._pageLayoutChange()},"Echo.Apps.Conversations.onAppResize":function(){this._pageLayoutChange()},"Echo.StreamServer.Controls.FacePile.onRender":function(){this._pageLayoutChange()},"Echo.StreamServer.Controls.Stream.onActivitiesComplete":function(){this._pageLayoutChange(),this._maybeRemoveLiveUpdateIndicator()},"Echo.Apps.Conversations.onViewportChange":function(){this.get("isLiveUpdate")&&"viewportenter"===this.component.config.get("markAsRead")?this._maybeRemoveLiveUpdateIndicator():this.events.unsubscribe({topic:"Echo.Apps.Conversations.onViewportChange"})}},b.labels={topPostIndicatorTitle:"Top Post",actions:"Actions",seeMore:"See more"},b.config={topPost:{visible:!0,marker:"Conversations.TopPost"},fadeTimeout:5e3,collapsedContentHeight:110},b.init=function(){this.extendTemplate("insertAsFirstChild","container",b.templates.indicator),this.set("isLiveUpdate",this.component.config.get("live")),this.extendTemplate("replace","sourceIcon",b.templates.sourceIcon),this.extendTemplate("insertBefore","frame",b.templates.topPostMarker),this.extendTemplate("remove","date"),this.extendTemplate("remove","authorName"),this.extendTemplate("insertAsFirstChild","frame",b.templates.header),this.extendTemplate("insertAsLastChild","expandChildren",b.templates.chevron),this.extendTemplate("insertAfter","body",b.templates.seeMore),this.set("buttonsLayout","inline"),this.component.block=function(b){if(!this.blocked){this.blocked=!0;var c=this.view.get("container").parent(),d=c.width(),e=c.outerHeight();this.blockers={backdrop:a('<div class="'+this.cssPrefix+'blocker-backdrop"></div>').css({width:d,height:e}),message:a(this.substitute({template:'<div class="{class:blocker-message}">{data:label}</div>',data:{label:b}})).css({left:(parseInt(d,10)-200)/2+"px",top:(parseInt(e,10)-20)/2+"px"})},c.addClass("echo-relative").prepend(this.blockers.backdrop).prepend(this.blockers.message)}}},b.templates.header='<div class="{plugin.class:header-box}"><div class="{plugin.class:header-centered}"><div class="{class:authorName}"></div><div class="{class:date}"></div><div class="echo-clear"></div></div></div>',b.templates.wrapper='<div class="{plugin.class:wrapper}"></div>',b.templates.chevron='<span class="{plugin.class:chevron} icon-chevron-down"></span>',b.templates.button='<a class="{class:button} {class:button}-{data:name}"><i class="{plugin.class:buttonIcon} {data:icon}"></i><span class="echo-primaryFont {class:buttonCaption}">{data:label}</span></a>',b.templates.topPostMarker='<i class="icon-bookmark {plugin.class:topPostMarker}" title="{plugin.label:topPostIndicatorTitle}"></i>',b.templates.compactButtons='<a title="{data:label}" class="{class:button} {class:compactButton} {class:button}-{data:name}"><i class="{plugin.class:buttonIcon} {data:icon}"></i><span class="echo-primaryFont {class:buttonCaption}"></span></a>',b.templates.dropdownButtons='<div class="dropdown"><a class="dropdown-toggle {class:button}" data-toggle="dropdown" href="#"><i class="{plugin.class:buttonIcon} icon-list"></i><span class="echo-primaryFont {class:buttonCaption}">{plugin.label:actions}</span></a></div>',b.templates.indicator='<div class="{class:indicator}"></div>',b.templates.sourceIcon='<div class="{class:sourceIcon}"><img></div>',b.templates.seeMore='<div class="{plugin.class:seeMore}">{plugin.label:seeMore}</div>',b.renderers.topPostMarker=function(b){var c=this.component,d=this.config.get("topPost.visible")&&!c.get("depth")&&~a.inArray(this.config.get("topPost.marker"),c.get("data.object.markers",[]));return d?b.show():b.hide()},b.component.renderers.sourceIcon=function(b){var c=this.component,d=c.get("data.source",{});b.hide();var e=a.map(c.get("data.object.objectTypes"),function(a){return a.split("/").pop()});if(c.config.get("viaLabel.icon")&&d.icon&&!~a.inArray("comment",e)){var f=b.find("img");return f.attr("src",Echo.Utils.htmlize(d.icon)).on("error",function(){b.hide()}).on("load",function(){b.show()})}return b},b.renderers.seeMore=function(a){var b=this,c=this.component;return a.one("click",function(){b.events.publish({topic:"onItemExpand"}),b.view.remove("seeMore"),c.view.get("body").css("max-height","")})},b.component.renderers.avatar=function(b){this.parentRenderer("avatar",arguments);var c=b.find("img[src]"),d=this.component.config.get("defaultAvatar"),e=a("<div/>").css("background-image","url('"+c.attr("src")+"'), url('"+d+"')");c.replaceWith(e);var f=document.all&&document.querySelector&&!document.addEventListener;return f&&e.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d+"', sizingMethod='scale'), progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c.attr("src")+"', sizingMethod='scale')"}),b},b.component.renderers.indicator=function(a){var b="background-color "+this.config.get("fadeTimeout")+"ms linear";return a.css({transition:b,"-o-transition":b,"-ms-transition":b,"-moz-transition":b,"-webkit-transition":b}),a},b.component.renderers.tags=function(a){return a.hide()},b.component.renderers.markers=function(a){return a.hide()},b.component.renderers.container=function(a){if(this.get("isLiveUpdate")){var c=this.cssPrefix+"liveUpdate";a.addClass(c),"mouseenter"===this.component.config.get("markAsRead")&&a.one("mouseenter",function(){a.removeClass(c)})}return this.parentRenderer("container",arguments),a.parent().hasClass(this.cssPrefix+"wrapper")?a:a.wrap(this.substitute({template:b.templates.wrapper}))},b.component.renderers._inlineButtons=function(b){var c=this.component,d=a.map(c.buttonsOrder,function(a){return c.get("buttons."+a)});a.map(d,function(a){a&&Echo.Utils.invoke(a.visible)&&c.view.render({name:"_button",target:b,extra:a})})},b.component.renderers._compactButtons=function(c){var d=this.component,e=a.map(d.buttonsOrder,function(a){return d.get("buttons."+a)});a.map(e,function(a){a&&Echo.Utils.invoke(a.visible)&&(a.template=b.templates.compactButtons,d.view.render({name:"_button",target:c,extra:a}))})},b.component.renderers._dropdownButtons=function(c){var d=this,e=this.component,f=a(this.substitute({template:b.templates.dropdownButtons})),g=a.map(e.buttonsOrder,function(a){return d.component.get("buttons."+a)}),h=function(a){return function(){f.find(".dropdown-toggle").dropdown("toggle"),a&&a()}};return function i(b,c,d){var f=a('<ul class="dropdown-menu" role="menu">');a.map(c,function(b){if(b&&Echo.Utils.invoke(b.visible)){var c=a("<li>");e.view.render({name:"_button",target:c,extra:a.extend({},b,{inner:d,clickable:!0,callback:h(b.callback)})}),b.entries&&(c.addClass("dropdown-submenu"),i(c,b.entries,!0)),f.append(c)}}),b.append(f)}(f,g),c.append(f)},b.component.renderers.buttons=function(a){var b=this.component;return b._assembleButtons(),b._sortButtons(),a.empty(),b.view.render({name:"_"+this.get("currentButtonsState")+"Buttons",target:a}),a},b.component.renderers._button=function(c,d){var e=this.component,f=d.template||b.templates.button,g={label:d.label||"",name:d.name,icon:e.config.get("plugins."+d.plugin+".icon")||d.icon||!d.inner&&"icon-comment"},h=a(this.substitute({template:f,data:g}));d.inner&&h.addClass("echo-clickable");var i=a(".echo-clickable",h);if(!d.clickable)return c.append(h);if(d.entries){var j=a.map(d.entries,function(a){return Echo.Utils.invoke(a.visible)?{title:a.label,handler:a.callback}:null});new Echo.GUI.Dropdown({target:h.find("span"),extraClass:this.cssPrefix+"dropdownButton",entries:a.map(j,function(b){return a.extend({handler:b.callback},b)}),title:"compact"!==this.get("currentButtonsState")?d.label:""}),d.callback=function(a){h.find(".dropdown-menu").addClass("pull-right"),h.find(".dropdown-toggle").dropdown("toggle"),a.preventDefault()}}else"compact"===this.get("currentButtonsState")&&h.children("span").first().css("display","none");if(i.length||(i=h,h.addClass("echo-clickable")),i[d.once?"one":"on"]({click:function(a){a.stopPropagation(),d.callback&&d.callback(a)}}),!d.inner){var k=e.get("buttons."+d.plugin+"."+d.name);k.element=h,k.clickableElements=i,Echo.Utils.isMobileDevice()&&i.addClass("echo-linkColor")}return c.append(h)},b.component.renderers.authorName=function(a){return this.parentRenderer("authorName",arguments),a.wrapInner("<span/>")},b.methods._maybeRemoveLiveUpdateIndicator=function(){var b=this,c=this.component.view.get("container");"viewportenter"===this.component.config.get("markAsRead")&&c&&a.inviewport(c,{threshold:0})&&(this.set("isLiveUpdate",!1),this._transitionSupported()?c.removeClass(this.cssPrefix+"liveUpdate"):setTimeout(function(){c.removeClass(b.cssPrefix+"liveUpdate")},this.config.get("fadeTimeout")))},b.methods._checkItemContentHeight=function(){var a=this.component.view.get("body"),b=this.view.get("seeMore");if(a&&b){var c=this.config.get("collapsedContentHeight"),d=1.2;a.height()>c*d&&!b.is(":visible")?(a.css("max-height",c),b.show()):a.height()<c&&b.is(":visible")&&(a.css("max-height",""),b.hide())}},b.methods._pageLayoutChange=function(){var b=this.component,c=b.view.get("footer"),d=b.view.get("buttons"),e=["inline","compact","dropdown"];this.get("buttonsStates")||this.set("buttonsStates",e);var f=this.config.get("initialIntentsDisplayMode")||e[0],g=this.get("currentButtonsState");if(g||(g=f,this.set("currentButtonsState",g)),!c||!d||!c.is(":visible"))return void this._checkItemContentHeight();var h=c.width(),i=d.width(),j=this.get("prevFreeSpace")||0,k=h-c.children().eq(0).width()-c.children().eq(1).width();if(j!==k||i>h){this.set("prevFreeSpace",k);var l=a.inArray(g,e);if(i>k)e[l+1]&&(g=e[l+1]),this.set("currentButtonsState",g),b.view.render({name:"buttons"});else if(k>2*i){var m=a.inArray(f,e);g=l>m&&e[l-1]?e[l-1]:f,this.set("currentButtonsState",g),b.view.render({name:"buttons"})}}this._checkItemContentHeight()};var c={};b.methods._transitionSupported=function(){if(!c.transitionSupported){var a=document.createElement("p").style;c.transitionSupported="transition"in a||"WebkitTransition"in a||"MozTransition"in a||"msTransition"in a||"OTransition"in a}return c.transitionSupported};for(var d=[],e=0;20>=e;e++)d.push(".{plugin.class} .{class:depth}-"+e+" { margin-left: 0px; padding-left: "+(e?12+39*(e-1):16)+"px; }");b.css='.{plugin.class:seeMore}:before { content: ""; display: block; height: 3px; box-shadow: 0 -3px 3px rgba(0, 0, 0, 0.08); position: relative; top: 0px; }.{plugin.class:seeMore} { margin-top: -8px; display: none; padding: 0 0 15px 0; border-top: 1px solid #D8D8D8; text-align: center; font-size: 12px; cursor: pointer; color: #C6C6C6; }.{plugin.class:seeMore}:hover { color: #262626; }.{plugin.class} .{class:sourceIcon} { float: left; margin-right: 10px; }.{plugin.class} .{class:sourceIcon} > img { margin-top: 2px; height: 16px; width: 16px; }.{plugin.class} .{class:container} { position: relative; }.{plugin.class} .{class:indicator} { position: absolute; left: 0px; top: 0px; bottom: 0px; width: 4px; background-color: transparent; z-index: 10; }.{plugin.class} .{class:body} .echo-item-video { position: relative; padding-bottom: 75%; height: 0; float: none; margin: 0px; }.{plugin.class} .{class:body} .echo-item-video > iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }.{plugin.class} .{class:body} .echo-item-video > video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }.{plugin.class} .{class:body} .echo-item-video > object { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }.{plugin.class} .{class:body} .echo-item-title { font-size: 15px; font-weight: normal; line-height: 21px; margin: 0px; }.{plugin.class} .{plugin.class:dropdownButton} { display: inline; margin-left: 0px; }.{plugin.class} .{plugin.class:dropdownButton} > .dropdown { display: inline; }.{plugin.class} .{plugin.class:dropdownButton} > .dropdown a { color: inherit; text-decoration: inherit; }.{plugin.class:topPostMarker} { float: right; position: absolute; top: -4px; right: 15px; }.{plugin.class} .{plugin.class:wrapper} { background: #ffffff; border-bottom: 1px solid #e5e5e5; border-radius: 3px 3px 0px 0px; }.{plugin.class} .{class:container}.{class:depth-0} { border-radius: 2px 3px 0px 0px; }.{plugin.class} .{class:container}.{plugin.class:liveUpdate} .{class:indicator} { background-color: #f5ba47; }.{plugin.class} .echo-trinaryBackgroundColor { background-color: #f8f8f8; }.{plugin.class} .{class:date} { float: left; color: #d3d3d3; line-height: 18px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; word-wrap: normal; max-width: 100%; }.{plugin.class} .{class:avatar} { height: 28px; width: 28px; margin-left: 3px; }.{plugin.class} .{class:avatar} div { height: 28px; width: 28px; background-size:cover; display:inline-block; background-position:center; border-radius: 50%;}.{plugin.class} .{class:content} { background: #f8f8f8; border-radius: 3px; }.{plugin.class} .{class:buttons} { margin-left: 0px; white-space: nowrap; line-height: 20px; }.{plugin.class} .{class:metadata} { margin-bottom: 8px; }.{plugin.class} .{class:body} { padding-top: 0px; margin-bottom: 8px; overflow: hidden; }.{plugin.class} .{class:body} .{class:text} { color: #42474A; font-size: 15px; line-height: 21px; }.{plugin.class} .{class:authorName} { float: left; color: #595959; font-weight: normal; font-size: 14px; line-height: 16px; max-width: 100%; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; word-wrap: normal; }.{plugin.class} .{class:authorName} span { padding-right: 5px; }.{plugin.class} .{class:container-child} { padding-top: 8px; padding-bottom: 8px; padding-right: 0px; margin: 0px 15px 2px 0px; }.{plugin.class} .{class:content} .{class:container-child-thread} { padding-top: 8px; padding-bottom: 8px; padding-right: 0px; margin: 0px 15px 2px 0px; }.{plugin.class} .{class:children} .{class:avatar-wrapper} { margin-top: 5px; }.{plugin.class} .{class:children} .{class:frame} { margin-left: 5px; }.{plugin.class} .{class:children} .{class:data} { margin-top: 2px; padding-top: 0px; }.{plugin.class} .{class:children} .{plugin.class:wrapper} { padding-top: 0px; background: none; border: none; }.{plugin.class} .{class:expandChildren} { padding: 15px 0px 8px 16px; margin-bottom: 0px; }.{plugin.class} .{class:children} .{class:expandChildren} { padding: 8px 0px; margin-bottom: 0px; }.echo-sdk-ui .{plugin.class} .{class:buttons} a:focus { outline: none; }.{plugin.class} .{class:button} { margin-right: 10px; }.{plugin.class} .{class:buttons} .dropdown .{class:button} { margin-right: 0px; }.{plugin.class} .{class:button-delim} { display: none; }.echo-sdk-ui .{plugin.class:buttonIcon}[class*=" icon-"] { margin-right: 4px; margin-top: 0px; }.{plugin.class} .{plugin.class:buttonIcon} { opacity: 0.3; }.{plugin.class} .{class:buttons} a.{class:button}.echo-linkColor,.echo-sdk-ui .{plugin.class} .{class:button}:active,.echo-sdk-ui .{plugin.class} .{class:button}:focus { text-decoration: none; color: #c6c6c6; }.{plugin.class} .{class:container}:hover a.{class:button} { color: #262626; text-decoration: none; }.{plugin.class} .{class:buttonCaption} { vertical-align: middle; font-size: 12px; }.{plugin.class} .{class:buttons} a.{class:button}.echo-linkColor .{plugin.class:buttonIcon},.{plugin.class} .{class:container}:hover .{plugin.class:buttonIcon},.{class:buttons} a.{class:button}:hover .{plugin.class:buttonIcon} { opacity: 0.8; }.{plugin.class} .{class:compactButton} ul.dropdown-menu { left: -20px; }.{plugin.class} .{class:depth-0} .{class:date} { line-height: 20px; }.{plugin.class} .{plugin.class:chevron} { margin-top: 0px !important; }.{plugin.class} .{class:expandChildrenLabel} { margin-right: 5px; }.{plugin.class} .{class:expandChildren} .{class:expandChildrenLabel} { color: #D3D3D3; }.{plugin.class} .{class:expandChildren}:hover .{class:expandChildrenLabel} { color: #262626; }.{plugin.class} .{class:expandChildren} .{plugin.class:chevron} { opacity: 0.3; }.{plugin.class} .{class:expandChildren}:hover .{plugin.class:chevron} { opacity: 0.8; }.{plugin.class} .{class:expandChildren} .echo-message-icon { padding-left: 0px; background: none; }.{plugin.class} .{class:expandChildren} .{class:message-loading} { background: none; }.{plugin.class} .{class:depth-0} .{class:footer} { padding: 8px 0px 10px; }.{plugin.class} .{class:depth-0} .{class:body} { padding-top: 0px; }.{plugin.class} .{class:depth-0} .{class:avatar} { height: 36px; width: 36px; }.{plugin.class} .{class:depth-0} .{class:avatar} div { height: 36px; width: 36px; }.{plugin.class} .{class:depth-0} .{class:authorName} { font-weight: normal; font-size: 17px; line-height: 18px; }.{plugin.class} .{class:depth-0} .{class:subwrapper} { margin-left: 0px; }.{plugin.class} .{class:depth-0} .{class:childrenMarker} { display: none; }.{plugin.class} .{class:depth-0} .{plugin.class:header-box} { height: 36px; margin-right: 18px; margin-left: 45px; }.{plugin.class} .{class:depth-0} .{plugin.class:header-box}:before { content: ""; display: inline-block; height: 100%; vertical-align: middle; }.{plugin.class} .{class:depth-0} .{plugin.class:header-centered} { display: inline-block; vertical-align: middle; max-width: 100%; max-width: 90%\\9; }.{plugin.class} .{class:data} { padding: 7px 0px 0px 0px; }.{plugin.class} .{class:content} .{class:depth-0} { padding: 15px 16px 0px 16px; }.echo-streamserver-controls-submit-plugin-Edit .echo-streamserver-controls-submit-metadataContainer { display: none !important; }.{class:depth-0} .echo-streamserver-controls-submit-plugin-Edit .echo-streamserver-controls-submit-plugin-Edit-header { line-height: 38px; margin-left: 45px; }.{class:depth-0} .echo-streamserver-controls-submit-plugin-Edit .echo-streamserver-controls-submit-body { padding: 7px 0px 0px 0px; }.{class:depth-0} .echo-streamserver-controls-submit-plugin-Edit .echo-streamserver-controls-submit-controls { margin-bottom: 5px; }'+d.join("\n"),Echo.Plugin.create(b)}(Echo.jQuery),function(a){"use strict";var b=Echo.Plugin.manifest("CardUIShim","Echo.StreamServer.Controls.Submit");b.config={submitPermissions:"forceLogin",displaySharingOnPost:!0,contentTypes:{comments:{visible:!0,prompt:"What's on your mind",resolveURLs:!0}},confirmation:{enable:!1,message:"Thanks, your post has been submitted for review",timeout:5e3,hidingTimeout:200}},b.events={"Echo.UserSession.onInvalidate":{context:"global",handler:function(){if(this.deferredActivity){this.deferredActivity(),delete this.deferredActivity;var a=this.component.config.get("targetURL");Echo.Utils.set(Echo.Variables,a,"")}}},"Echo.StreamServer.Controls.Submit.onSharingOnPostChange":{context:"global",handler:function(){this.view.render({name:"button"})}},"Echo.StreamServer.Controls.Submit.onPostInit":function(){this.config.get("confirmation.enable")&&this.view.get("confirmation").hide()},"Echo.StreamServer.Controls.Submit.onPostComplete":function(){if(this.config.get("confirmation.enable")){var a=this,b=this.view.get("confirmation");b.show(),setTimeout(function(){b.slideUp(a.config.get("confirmation.hidingTimeout"))},this.config.get("confirmation.timeout"))}}},b.labels={post:"Post",postAndShare:"Post and Share"},b.templates.auth='<div class="{plugin.class:auth}"></div>',b.templates.postButton='<div class="{class:postButton} btn-group"><div class="btn btn-primary {plugin.class:button}"></div><div class="btn btn-primary dropdown-toggle {plugin.class:switchSharing}" data-toggle="dropdown"><span class="caret"></span></div><ul class="dropdown-menu pull-right"><li><a href="#" class="{plugin.class:switchToPost}">{plugin.label:post}</a></li><li><a href="#" class="{plugin.class:switchToPostAndShare}">{plugin.label:postAndShare}</a></li></ul></div>',b.templates.confirmation='<div class="alert alert-success echo-primaryFont {plugin.class:confirmation}">{plugin.config:confirmation.message}</div>',b.init=function(){var c=this,d=this.component;this.extendTemplate("replace","postButton",b.templates.postButton),this.extendTemplate("insertBefore","header",b.templates.auth),this.extendTemplate("insertAsFirstChild","container",b.templates.confirmation),d.validators=[],d.addPostValidator(function(){var b=!0,e="allowGuest"===c.config.get("submitPermissions");return a.each(e?["name","text"]:["text"],function(a,c){return b=!d.highlightMandatory(d.view.get(c))}),b?e||d.user.is("logged")?!0:(c.deferredActivity=function(){c.component.post()},c._requestLoginPrompt(),!1):!1}),d.config.set("actionString",this.config.get("contentTypes.comments.prompt"))},b.renderers.confirmation=function(a){return a.hide()},b.renderers.button=function(a){var b=this,c=this.component,d={normal:{target:a,icon:!1,disabled:!1,label:this.labels.get(this._sharingOnPost()?"postAndShare":"post")},posting:{target:a,icon:c.config.get("cdnBaseURL.sdk-assets")+"/images/loading.gif",disabled:!0,label:c.labels.get("posting")}},e=new Echo.GUI.Button(d.normal);c.posting=c.posting||{},c.posting.subscriptions=c.posting.subscriptions||[];var f=function(a,b,d){var f="Echo.StreamServer.Controls.Submit.onPost"+a,g=c.posting.subscriptions;g[f]&&c.events.unsubscribe({topic:f,handlerId:g[f]}),g[f]=c.events.subscribe({topic:f,handler:function(a,c){e.setState(b),d&&d(c)}})};return f("Init",d.posting),f("Complete",d.normal,function(a){b._sharingOnPost()&&b._share(a),c.view.get("text").val("").trigger("blur"),c.view.render({name:"tags"}),c.view.render({name:"markers"})}),f("Error",d.normal,function(a){var b=a.request||{};b.state&&b.state.critical&&c._showError(a)}),c.posting.action=c.posting.action||function(){c._isPostValid()&&c.post()},a.off("click",c.posting.action).on("click",c.posting.action),a},b.renderers.switchSharing=function(a){return this.config.get("displaySharingOnPost")||(a.parent().removeClass("btn-group"),a.hide()),a},b.renderers.switchToPost=function(a){var b=this;return a.on("click",function(a){b._sharingOnPost(!1),a.preventDefault()})},b.renderers.switchToPostAndShare=function(a){var b=this;return a.on("click",function(a){b._sharingOnPost(!0),a.preventDefault()})},b.component.renderers.header=function(a){var b=this,c=b._userStatus();return"logged"===c||"forcedLogin"===c?a.empty():b.parentRenderer("header",arguments)},b.component.renderers.container=function(b){var c=this;c.parentRenderer("container",arguments);var d=function(a){return c.cssPrefix+a};return b.removeClass(a.map(["logged","anonymous","forcedLogin"],d).join(" ")).addClass(d(c._userStatus()))},b.renderers.auth=function(b){var c=this.config.assemble(a.extend(!0,{target:b},this.config.get("auth")));return new Echo.StreamServer.Controls.CardUIAuth(c),b},b.component.renderers.postButton=function(a){return a},b.methods._requestLoginPrompt=function(){Backplane.response([{id:Backplane.since,channel_name:Backplane.getChannelName(),message:{type:"identity/login/request",payload:this.component.user.data||{}}}])},b.methods._share=function(a){var b=a.postData.content[0],c={origin:"item",actor:{id:this.component.user.get("identityUrl"),name:b.actor.name,avatar:b.actor.avatar},object:{id:a.request.response.objectID,content:b.object.content},source:b.source,target:b.targets[0].id};Backplane.response([{id:Backplane.since,channel_name:Backplane.getChannelName(),message:{type:"content/share/request",payload:c}}])},b.methods._sharingOnPost=function(a){return"undefined"!=typeof a&&(Echo.Cookie.set("sharingOnPost",!!a),this.component.events.publish({topic:"onSharingOnPostChange",contenxt:"global"})),this.config.get("displaySharingOnPost")&&"true"===Echo.Cookie.get("sharingOnPost")},b.methods._userStatus=function(){return this.component.user.is("logged")?"logged":"forceLogin"===this.config.get("submitPermissions")?"forcedLogin":"anonymous"},b.css='.echo-sdk-ui .{plugin.class:confirmation} { margin-bottom: 10px; }.{plugin.class} .{class:urlContainer} { display: none; }.{plugin.class} .{class:avatar} { display: none; }.{plugin.class} .{class:fieldsWrapper} { margin-left: 0px; }.{plugin.class} .{class:plugin-JanrainAuth-forcedLogin} .{class:header} { display: none; }.{plugin.class} .{class:fieldsWrapper} input { font-weight: normal; }.{plugin.class} .{class:nameContainer} { padding: 3px 2px 3px 5px; }.{plugin.class} .{class:tagsContainer} { display: none !important; }.{plugin.class} .{class:markersContainer} { display: none !important; }.{plugin.class} .{class:content} textarea.{class:textArea} { height: 75px; }.{plugin.class} .{class:controls} { margin: 0px; padding: 5px; border: 1px solid #d8d8d8; border-top: 0px; background: #ffffff;}.{plugin.class} .{class:container} { padding: 20px 20px 20px; border: 1px solid #d8d8d8; border-bottom-width: 2px; border-radius: 3px; }.{plugin.class} .{class:header} { margin-top: 10px; }.{plugin.class} .{class:postContainer} .dropdown-menu { min-width: 100px; }.{plugin.class} .{class:postButton} { font-family: "Helvetica Neue",Helvetica,Arial,sans-serif; }.{plugin.class} .{control.class:buttons} .dropdown { min-width: 77px; }.{plugin.class} .btn.{plugin.class:button} { padding: 3px 12px 5px 12px; }',Echo.Plugin.create(b)}(Echo.jQuery);
!function(){"use strict";var a=Echo.Plugin.manifest("CardUISocialSharing","Echo.StreamServer.Controls.Stream.Item");Echo.Plugin.isDefined(a)||(a.init=function(){this.component.addButtonSpec("CardUISocialSharing",this._assembleButton("Share"))},a.labels={share:"Share"},a.methods._prepareData=function(a){return{origin:"item",actor:{id:a.actor.id,name:a.actor.title,avatar:a.actor.avatar},object:{id:a.object.id,content:a.object.content},source:a.source,target:a.target.id}},a.methods._share=function(a){Backplane.response([{id:Backplane.since,channel_name:Backplane.getChannelName(),message:{type:"content/share/request",payload:a}}])},a.methods._assembleButton=function(a){var b=this;return function(){var c=this;return{name:a,icon:"icon-share",label:b.labels.get("share"),visible:!0,callback:function(){b._share(b._prepareData(c.data))}}}},Echo.Plugin.create(a))}(Echo.jQuery);
!function(a){"use strict";function b(b,c){var d=-1,e=JSON.stringify(b);return a.each(c,function(a,b){return e===JSON.stringify(b)?(d=a,!1):void 0}),d}var c=Echo.Plugin.manifest("URLResolver","Echo.StreamServer.Controls.Stream.Item");c.vars={media:[],content:void 0},c.templates.media='<div class="{plugin.class:mediaContent}"></div>',c.init=function(){this.extendTemplate("insertAsLastChild","data",c.templates.media)},c.component.renderers.body=function(b){var c=this,d=this.component,e=d.get("data.object.content"),f=a("<div/>").append(e),g=c._getMediaAttachments();return a("div[oembed], div[data-oembed]",f).remove(),g.length&&this._getItemRenderType()&&b.hide(),Echo.Utils.safelyExecute(function(){var b=a(".echo-item-text",f);g.length&&b.length?d.set("data.object.content",b.html()):g.length&&d.set("data.object.content",f.html())}),this.parentRenderer("body",arguments),d.set("data.object.content",e),b},c.renderers.mediaContent=function(a){var b=this,c=this.component,d=this._getMediaAttachments(),e=this._getItemRenderType(),f=d.length&&e?{displaySourceIcon:!1,displayAuthor:!1}:{};return f.maximumMediaWidth=this.config.get("presentation.maximumMediaWidth"),new Echo.Conversations.MediaContainer(this.config.assemble({target:a.empty(),data:d,card:f,ready:function(){if(d.length&&c.isRoot()&&e){var a=this.cards[0].getRenderType();c.view.get("container").addClass(b.cssPrefix+a)}}})),a.addClass(this.cssPrefix+(d.length>1?"multiple":"single"))},c.methods._getItemRenderType=function(){var b,c=["article","image","video"];return a.each(this.component.get("data.object.objectTypes",[]),function(d,e){var f=(e.match("[^/]+$")||[]).pop();return~a.inArray(f,c)?(b=f,!1):void 0}),b},c.methods._getMediaAttachments=function(){var b=this.component;if(this.get("content")!==b.get("data.object.content")||"undefined"==typeof this.get("media")){var c=[];Echo.Utils.safelyExecute(function(){var d=a("<div/>").append(b.get("data.object.content"));c=a("div[oembed], div[data-oembed]",d).map(function(){return a.parseJSON(a(this).attr("oembed")||a(this).attr("data-oembed"))}).get()}),this.set("content",b.get("data.object.content")),this.set("media",c)}return this.get("media",[])},c.css=".{class:depth-0} .{plugin.class:mediaContent}.{plugin.class:multiple} { margin-left: -16px; margin-right: -16px; }.{class:depth-0} .{plugin.class:mediaContent} { margin-bottom: 0px; }.{plugin.class:mediaContent}.{plugin.class:multiple} > div { border-top: 1px solid #D2D2D2; border-bottom: 1px solid #D2D2D2; background-color: #F1F1F1; }.{plugin.class:video} .{plugin.class:mediaContent} .echo-conversations-nestedcard-border { border: 0px; }.{plugin.class:video} .{plugin.class:mediaContent} .echo-conversations-nestedcard-video { padding: 0px; }.{plugin.class:photo}.{class:container}.{class:depth-0} { padding-top: 0; }.{plugin.class:photo} .{plugin.class:mediaContent} { margin: 0 -16px; }.{plugin.class:photo} .{plugin.class:mediaContent} .echo-conversations-nestedcard-border { border: 0px; }.{plugin.class:photo} .echo-conversations-nestedcard-photoContainer { border-top-left-radius: 3px; border-top-right-radius: 3px; }.{plugin.class:photo} .{class:data} { padding-top: 0; }.{plugin.class:photo} .{class:authorName} { color: #FFFFFF; text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.7); }.{plugin.class:photo} .{class:date} { text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.7); padding-right: 1px; }.{plugin.class:photo} .{class:avatar-wrapper} { z-index: 10; position: absolute; top: 15px; }.{plugin.class:photo} .echo-streamserver-controls-stream-item-plugin-CardUIShim-header-box { z-index: 10; position: relative; top: 50px; margin-top: -36px; }.{plugin.class:link} .{plugin.class:mediaContent} .echo-conversations-nestedcard-border { border: 0px; }.{plugin.class:link} .{plugin.class:mediaContent} .echo-conversations-nestedcard-article { padding: 0px; }.{plugin.class:mediaContent} { margin-bottom: 8px; }",Echo.Plugin.create(c);var d=Echo.Plugin.manifest("URLResolver","Echo.StreamServer.Controls.Submit");d.config={embedlyAPIKey:"5945901611864679a8761b0fcaa56f87",maxDescriptionCharacters:"200",resolveURLs:"all"},d.labels={attachTitle:"Click to add attachments"},d.init=function(){this.set("timer",null),a.embedly.defaults.key=this.config.get("embedlyAPIKey"),this._setDefinedMedia(this._getMediaAttachments()),this.extendTemplate("insertAfter","content",d.templates.preview);var b=this.config.get("filePicker.visible")||!1;b&&this.extendTemplate("insertAsFirstChild","controls",d.templates.attach)},d.events={"Echo.StreamServer.Controls.Submit.onPostError":function(){this._restoreTextarea()},"Echo.StreamServer.Controls.Submit.Plugins.URLResolver.onURLsAdded":function(b,c){var d=c.urls||[];this.resolveURLs(d,a.proxy(this.attachMedia,this))},"Echo.StreamServer.Controls.Submit.onPostInit":function(b,c){var e=this,f=a.map(a.extend({},e._getResolvedMedia(),e._getDefinedMedia()),function(b){var c=d.templates.media[b.type];return c?e.substitute({template:c,data:a.extend(!0,{},b,{oembed:e.jsonEncode(b)})}):null});f.length&&(c.postData.content[0].object.content=e.substitute({template:d.templates.message,data:{text:c.postData.content[0].object.content,media:f.join("")}}),this._replaceTextarea(),this.component.view.get("text").val(c.postData.content[0].object.content))},"Echo.StreamServer.Controls.Submit.onPostComplete":function(){this._setResolvedMedia({}),this._setDefinedMedia([]),this.view.get("mediaContent").empty(),this.component.view.get("body").removeClass(this.cssPrefix+"enabledMedia"),this._restoreTextarea()}},d.dependencies=[{url:"//cdn.echoenabled.com/apps/echo/conversations/v1.3.8/third-party/jquery.embedly.js",loaded:function(){return!!a.fn.embedly}}],d.templates.preview='<div class="{plugin.class:mediaContent}"></div>',d.templates.message='<div class="echo-item-text">{data:text}</div><div class="echo-item-files">{data:media}</div>',d.templates.media={link:'<div class="echo-media-item" data-oembed="{data:oembed}"><div class="echo-item-article" style="width: {plugin.config:linkWidth}"><div class="echo-item-template-article-thumbnail" style="width: 30%; float: left; max-width: 120px; max-height: 120px; text-align:center; overflow:hidden;"><img src="{data:thumbnail_url}" style="width: auto; height: auto; max-height:120px; max-width:120px;" /></div><div class="echo-item-template-article" style="width: 70%; float: left;"><div class="echo-item-template-article-title" style="margin-left: 10px;"><a href="{data:url}" target="_blank">{data:title}</a></div><div class="echo-item-template-article-descriptionContainer"><div class="echo-item-template-article-description" style="margin-left: 10px;">{data:description}</div></div></div><div class="echo-clear"></div></div></div>',photo:'<div class="echo-media-item" data-oembed="{data:oembed}"><a href="{data:original_url}" target="_blank"><img src="{data:thumbnail_url}"/></a></div>',video:'<div class="echo-media-item" data-oembed="{data:oembed}"><div class="echo-item-video">{data:html}</div></div>'},d.templates.attach='<div class="{plugin.class:attach}"><img class="{plugin.class:attachPic}" src="//cdn.echoenabled.com/apps/echo/conversations/v1.3.8/images/attach.png" /></div>',d.component.renderers.text=function(b){function c(){return e.get("data.object.id")===e.get("data.target.conversationID")}var d=this,e=this.component;("all"===this.config.get("resolveURLs")||"only-roots"===this.config.get("resolveURLs")&&c()||"only-children"===this.config.get("resolveURLs")&&!c())&&b.on("keyup paste",function(){clearTimeout(d.timer),d.timer=setTimeout(function(){var c=d.getURLs(b.val());d.resolveURLs(c,a.proxy(d.attachMedia,d))},1e3)});var f=e.get("data.object.content");return Echo.Utils.safelyExecute(function(){var b=a("<div/>").append(e.get("data.object.content")),c=d._getMediaAttachments(),f=a(".echo-item-text",b);a("div[oembed], div[data-oembed]",b).remove(),c.length&&f.length?e.set("data.object.content",f.html()):c.length&&e.set("data.object.content",b.text())}),this.parentRenderer("text",arguments),e.set("data.object.content",f),b},d.renderers.mediaContent=function(a){return a.empty(),this.attachMedia(this._getDefinedMedia()),this.attachMedia(this._getResolvedMedia()),a},d.renderers.attach=function(b){var c=this;return b.children("img").attr("title",this.labels.get("attachTitle")),b.on({click:function(){var b=function(){window.filepicker.setKey(c.config.get("filePicker.key"));var b=c.config.get("filePicker.sources")?c.config.get("filePicker.sources").replace(" ","").toUpperCase().split(","):void 0;try{window.filepicker.pickMultiple({mimetype:"image/*",container:"modal",services:b},function(b){c.events.publish({topic:"onURLsAdded",data:{urls:a.map(b,function(a){return a.url})}})},function(){})}catch(d){Echo.Utils.log({message:d.toString(),component:"FilePicker",type:"error"})}};Echo.Loader.download([{url:"//api.filepicker.io/v1/filepicker.js"}],b)}}),b},d.mediaContent={},d.methods._setDefinedMedia=function(a){var b=this._getUniqueFormKey();d.mediaContent[b]||(d.mediaContent[b]={}),d.mediaContent[b].definedMedia=a},d.methods._setResolvedMedia=function(a){var b=this._getUniqueFormKey();d.mediaContent[b]||(d.mediaContent[b]={}),d.mediaContent[b].resolvedMedia=a},d.methods._getDefinedMedia=function(){var a=this._getUniqueFormKey();return d.mediaContent[a]||(d.mediaContent[a]={}),d.mediaContent[a].definedMedia||(d.mediaContent[a].definedMedia=[]),d.mediaContent[a].definedMedia},d.methods._getResolvedMedia=function(){var a=this._getUniqueFormKey();return d.mediaContent[a]||(d.mediaContent[a]={}),d.mediaContent[a].resolvedMedia||(d.mediaContent[a].resolvedMedia={}),d.mediaContent[a].resolvedMedia},d.methods._getUniqueFormKey=function(){var a="app-",b=this.component;return a+=b.data.unique?b.data.unique:b.config.get("intentID")?b.config.get("intentID")+b.config.get("targetURL"):"rootItem"},d.methods._replaceTextarea=function(){var a=this.component.view.get("text").val(),b=this.component.view.get("text").clone().val(a);this.component.view.get("text").hide().parent().append(b),this.set("textareaClone",b)},d.methods._restoreTextarea=function(){var a=this.get("textareaClone");a&&(this.component.view.get("text").val(a.val()).show(),this.set("textareaClone",null),a.remove())},d.methods._getMediaAttachments=function(){var b=this.component;if(this.get("content")!==b.get("data.object.content")||"undefined"==typeof this.get("media")){var c=[];Echo.Utils.safelyExecute(function(){var d=a("<div/>").append(b.get("data.object.content"));c=a("div[oembed], div[data-oembed]",d).map(function(){return a.parseJSON(a(this).attr("oembed")||a(this).attr("data-oembed"))}).get()}),this.set("content",b.get("data.object.content")),this.set("media",c)}return this.get("media",[])},d.methods.getURLs=function(b){var c=/(https?:\/\/)\S+\.\S{2,}|(https?:\/\/)?\S+\.\w{2,}\/\S*/,d=new RegExp(c.source,"g");return a.map(b.match(d)||[],function(a){var b=a.match(c);return b[1]||b[2]?a:"http://"+a})},d.methods.resolveURLs=function(c,d){var e=this,f=a.grep(c,function(a){var b=e._getResolvedMedia();return b[a]?!1:(b[a]={},!0)});f.length?a.embedly.oembed(f,{query:{chars:e.config.get("maxDescriptionCharacters")}}).progress(function(a){var b=e._getResolvedMedia();b[a.original_url]=a}).done(function(c){var f=e._getDefinedMedia();c=a.grep(c,function(a){var c=b(a,f);return~c?(delete f[c],e._setDefinedMedia(f),!1):!0}),d(c)}):d()},d.methods.jsonEncode=function(a){return JSON.stringify(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},d.methods.attachMedia=function(c){if(c){var d=this,e=this.view.get("mediaContent"),f=this.component.view.get("body");a.map(c,function(c){if(!~a.inArray(c.type,["link","photo","video"]))return!1;f.addClass(d.cssPrefix+"enabledMedia");var g=a("<div>"),h=new Echo.Conversations.NestedCard({target:g,context:d.config.get("context"),width:d.config.get("mediaWidth"),data:c}),i=a(d.substitute({template:'<div class="echo-primaryFont {plugin.class:Close}">&times;</div>'})).one("click",function(){var a=d._getResolvedMedia();if(a[c.original_url])a[c.original_url]={};else{var i=d._getDefinedMedia(),j=b(c,i);~j&&(delete i[j],d._setDefinedMedia(i))}h.destroy(),g.remove(),e.is(":empty")&&f.removeClass(d.cssPrefix+"enabledMedia")});g.append(i).appendTo(e)})}},d.css=".{class:body}.{plugin.class:enabledMedia} .{class:content}.{class:border} { border-bottom: none; }.{class:body}.{plugin.class:enabledMedia} .{plugin.class:mediaContent} { overflow: auto; border: 1px solid #DEDEDE; border-top-style: dashed; background-color: #F1F1F1; padding: 10px 5px; }.{plugin.class:Close} { line-height: 1; opacity: 0.5; filter: alpha(opacity=70); font-size: 30px; font-weight: bold; position: absolute; top: 4px; right: 8px; cursor: pointer; color: #D2D2D2; text-shadow: 0 0 1px #000; }.{plugin.class:Close}:hover { opacity: 1; filter: alpha(opacity=100); }.{plugin.class:mediaContent} .echo-conversations-nestedcard-videoAvatar { margin-right: 20px; }.{plugin.class:mediaContent} .echo-conversations-nestedcard-articleTitle { margin-right: 15px; }.{plugin.class:mediaContent} .echo-conversations-nestedcard-photoAvatar { margin-right: 15px; }.{plugin.class:mediaContent} { white-space: nowrap; word-wrap: normal; }.{plugin.class:mediaContent} > div { display: inline-block; white-space: normal; margin-right: 8px; position: relative; vertical-align: top; max-width: 90%; }.{plugin.class:mediaContent}::-webkit-scrollbar { height: 10px; }.{plugin.class:mediaContent}::-webkit-scrollbar-track { box-shadow: inset 0 0 6px rgba(0,0,0,0.3); }.{plugin.class:mediaContent}::-webkit-scrollbar-thumb { background: #D2D2D2; box-shadow: inset 0 0 6px rgba(0,0,0,0.5); }.{plugin.class:attach} { margin: 5px; float: left; cursor: pointer; }",Echo.Plugin.create(d)}(Echo.jQuery);
!function(a){"use strict";var b=a,c=Echo.Plugin.manifest("CommunityFlagCardUI","Echo.StreamServer.Controls.Stream.Item");Echo.Plugin.isDefined(c)||(c.init=function(){this.component.addButtonSpec("CommunityFlagCardUI",this._assembleButton("Flag")),this.component.addButtonSpec("CommunityFlagCardUI",this._assembleButton("Unflag"))},c.config={showUserList:!0},c.labels={flagged:"Flagged",flaggedThis:" flagged this.",flagControl:"Flag",unflagControl:"Unflag",flagProcessing:"Flagging...",unflagProcessing:"Unflagging..."},c.dependencies=[{control:"Echo.StreamServer.Controls.FacePile",url:"{config:cdnBaseURL.sdk}/streamserver.pack.js"}],c.templates.main='<div class="{plugin.class:flaggedBy}"></div>',c.renderers.flaggedBy=function(a){var b=this,c=this.component,d=c.get("data.object.flags",[]);if(!d.length||!c.user.is("admin")||!b.config.get("showUserList"))return a.hide();var e=5,f=b.get("facepile")?b.get("facepile").getVisibleUsersCount():e,g=b.config.assemble({target:a,data:{entries:d,itemsPerPage:e},initialUsersCount:f,suffixText:b.labels.get("flaggedThis")});return b.set("facepile",new Echo.StreamServer.Controls.FacePile(g)),a.show()},c.methods._assembleButton=function(a){var c=this,d=function(){var d=this,e=d.get("buttons."+c.name+"."+a+".element");b("."+d.cssPrefix+"buttonCaption",e).empty().append(c.labels.get(a.toLowerCase()+"Processing"));var f={verbs:["http://activitystrea.ms/schema/1.0/"+a.toLowerCase()],targets:[{id:d.get("data.object.id")}]},g=Echo.StreamServer.API.request({endpoint:"submit",secure:c.config.get("useSecureAPI",!1,!0),submissionProxyURL:c.config.get("submissionProxyURL","",!0),data:{content:f,appkey:d.config.get("appkey"),sessionID:d.user.get("sessionID"),"target-query":d.config.get("parent.query")},onData:function(b){c._publishEventComplete({name:a,state:"Complete",response:b}),"Flag"!==a||d.config.get("parent.showFlags")||(c.set("flagged",!0),d.view.render({name:"buttons"})),c.requestDataRefresh()},onError:function(b){c._publishEventComplete({name:a,state:"Error",response:b}),d.render()}});g.send()};return function(){var b=this,e=b.get("data.object.flags"),f=c.labels.get(a.toLowerCase()+"Control"),g=c._myFlags(e).length>0?"Unflag":"Flag",h="Flag"===a&&!b.config.get("parent.showFlags")&&c.get("flagged"),i={name:a,icon:"icon-flag",label:h?c.labels.get("flagged"):f+(b.user.is("admin")&&e.length?" ("+e.length+")":""),visible:b.user.is("logged")&&g===a,clickable:!h,once:!0,callback:d};return h&&(i.template="<span>{data:label}</span>"),i}},c.methods._publishEventComplete=function(a){var b=this.component;this.events.publish({topic:"on"+a.name+a.state,data:{item:{data:b.get("data"),target:b.config.get("target")},response:a.response}})},c.methods._myFlags=function(a){var c=this.component;return b.map(a,function(a){return c.user.has("identity",a.actor.id)?a:void 0})},c.css=".{plugin.class:flaggedBy} { background: url({config:cdnBaseURL.sdk-assets}/images/curation/status/communityflagged.png) no-repeat 0px 4px; padding: 0px 0px 4px 21px; }",Echo.Plugin.create(c))}(Echo.jQuery);
!function(){"use strict";var a=Echo.Plugin.manifest("CounterCardUI","Echo.StreamServer.Controls.Counter");Echo.Plugin.isDefined(a)||(a.events={"Echo.StreamServer.Controls.Counter.onUpdate":function(){this.component.render({name:"count"})}},a.templates.main='<span class="{class:count}">({data:count})</span>',a.init=function(){this.component.templates.main=a.templates.main},a.component.renderers.count=function(a){var b=this.component.get("data.count"),c="string"==typeof b&&"5000+"===b||"number"==typeof b&&b>0;return c?a.show():a.hide()},a.css=".{plugin.class} { margin-left: 5px; }.{plugin.class} .echo-control-message { display: none; }",Echo.Plugin.create(a))}(Echo.jQuery);
!function(a){"use strict";var b=Echo.Plugin.manifest("ItemEventsProxy","Echo.StreamServer.Controls.Stream");Echo.Plugin.isDefined(b)||(b.config={onAdd:a.noop,onDelete:a.noop},b.events={"Echo.StreamServer.Controls.Stream.Item.onAdd":function(){var a=this.config.get("onAdd");a&&a.call(this.component)},"Echo.StreamServer.Controls.Stream.Item.onDelete":function(){var a=this.config.get("onDelete");a&&a.call(this.component)}},Echo.Plugin.create(b))}(Echo.jQuery);
!function(a){"use strict";var b=a,c=Echo.Plugin.manifest("ItemsRollingWindow","Echo.StreamServer.Controls.Stream");Echo.Plugin.isDefined(c)||(c.config={moreButton:!1},c.events={"Echo.StreamServer.Controls.Stream.Item.onRender":function(){var a=this,c=this.get("maxCount"),d=this.component.get("threads").slice(c);b.map(d,function(b){a.component._spotUpdates.remove.call(a.component,b)}),this.config.get("moreButton")&&d.length&&(this._updateNextPageAfter(),this.component.view.get("more").is(":visible")||(this.component.isViewComplete=!1,this.component.view.render({name:"more"})))},"Echo.StreamServer.Controls.Stream.onRerender":function(){this._setMaxCount()},"Echo.StreamServer.Controls.Stream.onDataReceive":function(a,b){"children"!==b.type&&"live"!==b.type&&this._setMaxCount("more"===b.type)}},c.component.renderers.more=function(a){var b=this.component;return this.config.get("moreButton")?b.parentRenderer("more",arguments):a.empty().hide()},c.methods._setMaxCount=function(a){var b=+this.component.config.get("itemsPerPage");a&&(b+=this.get("maxCount")),this.set("maxCount",b)},c.methods._updateNextPageAfter=function(){var a=this.component.get("threads")[this.component.threads.length-1];a.get("data.pageAfter")&&this.component.set("nextPageAfter",a.get("data.pageAfter"))},Echo.Plugin.create(c))}(Echo.jQuery);
!function(a){"use strict";var b=function(b){var c=Echo.Plugin.manifest("JanrainBackplaneHandler",b);Echo.Plugin.isDefined(c)||(Echo.Variables.JanrainHandler=Echo.Variables.JanrainHandler||{},c.config={appId:void 0,authWidgetConfig:{},sharingWidgetConfig:{}},c.init=function(){var a=this,b=Echo.Variables.JanrainHandler;b.initialized||(b.initialized=!0,Backplane.subscribe(function(c){"identity/login/request"===c.type&&(b.modal&&b.modal.destroy(),b.modal=a._openAuthDialog()),"identity/ack"===c.type&&b.modal&&b.modal.destroy(),"content/share/request"===c.type&&a._openSharingDialog(c.payload)}))},c.methods._openAuthDialog=function(){var a=this,b=a.config.get("authWidgetConfig"),c=Echo.Utils.objectToJSON(b),d=this.component.config.get("cdnBaseURL.sdk")+"/third-party/janrain/auth.html?appId="+a.config.get("appId")+"&signinConfig="+encodeURIComponent(c)+"&bpChannel="+encodeURIComponent(Backplane.getChannelID()),e=new Echo.GUI.Modal({data:{title:b.title||""},href:d,width:b.width||400,height:b.height||240,padding:"0 0 5px 0",footer:!1,fade:!0,onShow:function(){Backplane.expectMessages("identity/ack")},onHide:function(){a.modal=null}});return e.show(),e},c.methods._openSharingDialog=function(b){var c,d=this,e=d.config.get("sharingWidgetConfig"),f=function(){d.set("foreignConfig",a.extend(!0,{},janrain.engage.share.getState())),d._showPopup(b,e)};if(window.janrain&&janrain.engage&&janrain.engage.share||d.get("janrainInitialized"))return void f();d.set("janrainInitialized",!0),"object"!=typeof window.janrain&&(window.janrain={}),"object"!=typeof janrain.settings&&(janrain.settings={}),"object"!=typeof janrain.settings.share&&(janrain.settings.share={}),"object"!=typeof janrain.settings.packages&&(janrain.settings.packages=[]),janrain.settings.packages.push("share"),janrain.ready=!0;var g=window.janrainShareOnload;window.janrainShareOnload=function(){g&&(g(),window.janrainShareOnload=g),f()},c="https:"===document.location.protocol?"https://rpxnow.com/js/lib/"+d.config.get("appId")+"/widget.js":"http://widget-cdn.rpxnow.com/js/lib/"+d.config.get("appId")+"/widget.js",Echo.Loader.download([{url:c}])},c.methods._showPopup=function(b,c){var d,e=this,f=janrain.engage.share,g=janrain.events.onModalClose.addHandler(function(){janrain.events.onModalClose.removeHandler(g),f.reset(),f.setState(e.get("foreignConfig")),e.remove("foreignConfig")}),h=function(b){return a('meta[property="og:'+b+'"]').attr("content")};f.reset(),f.setState(c),f.setTitle(c.title||h("title")||document.title),f.setDescription(c.description||h("description")||""),f.setMessage(c.message||Echo.Utils.stripTags(b.object.content)),f.setUrl(c.url||h("url")||location.href.replace(/([#\?][^#\?]*)+$/,"")),d=c.image||h("image")||"",d&&f.setImage(d),f.show()},Echo.Plugin.create(c))};a.map(["Echo.StreamServer.Controls.Stream","Echo.StreamServer.Controls.Submit"],b)}(Echo.jQuery);
!function(a){"use strict";var b=a,c=Echo.Plugin.manifest("LikeCardUI","Echo.StreamServer.Controls.Stream.Item");Echo.Plugin.isDefined(c)||(c.init=function(){this.extendTemplate("insertAsFirstChild","footer",c.templates.main),this.component.addButtonSpec("LikeCardUI",this._assembleButton("Like")),this.component.addButtonSpec("LikeCardUI",this._assembleButton("Unlike"))},c.config={asyncFacePileRendering:!1,likesPerPage:5,displayStyle:"facepile"},c.labels={likeThis:" like this.",likesThis:" likes this.",likeControl:"Like",unlikeControl:"Unlike",likeProcessing:"Liking...",unlikeProcessing:"Unliking..."},c.dependencies=[{control:"Echo.StreamServer.Controls.FacePile",url:"{config:cdnBaseURL.sdk}/streamserver.pack.js"}],c.events={"Echo.StreamServer.Controls.FacePile.Item.Plugins.LikeCardUI.onUnlike":function(a,b){return this._sendActivity("Unlike",this.component,b.actor),{stop:["bubble"]}},"Echo.UserSession.onInvalidate":{context:"global",handler:function(){this.deferredActivity&&(this.deferredActivity(),delete this.deferredActivity)}}},c.templates.main='<div class="{plugin.class:likesArea}"><div class="{plugin.class:likedBy}"></div><div class="echo-clear"></div></div>',c.renderers.likedBy=function(a){var c=this,d=this.component;if(!d.get("data.object.likes").length)return a.hide();var e=!1,f=d.user.get("identityUrl"),g=d.get("data.object.likes");b.each(g,function(a,b){return b.actor.id===f?(e=!0,!1):void 0});var h=c.config.assemble({target:a.get(0),data:{itemsPerPage:this.config.get("likesPerPage"),entries:g},initialUsersCount:this.config.get("likesPerPage"),totalUsersCount:d.get("data.object.accumulators.likesCount"),item:{avatar:!0,text:!1}});return h.plugins.push({name:"LikeCardUI",displayStyle:this.config.get("displayStyle")}),d.user.is("admin")&&a.addClass(c.cssPrefix+"highlight"),this.config.get("asyncFacePileRendering")?setTimeout(b.proxy(this._initFacePile,this,h),0):this._initFacePile(h),a.show()},c.methods._getLikesCount=function(){return this.component.get("data.object.accumulators.likesCount")},c.methods._initFacePile=function(a){this.set("facePile",new Echo.StreamServer.Controls.FacePile(a))},c.methods._sendRequest=function(a,b,c){Echo.StreamServer.API.request({endpoint:"submit",secure:this.config.get("useSecureAPI",!1,!0),submissionProxyURL:this.component.config.get("submissionProxyURL"),onData:b,onError:c,data:a}).send()},c.methods._sendActivity=function(a,b,c){var d=this,e={verbs:["http://activitystrea.ms/schema/1.0/"+a.toLowerCase()],targets:[{id:b.get("data.object.id")}]};c&&c.id&&(e.author=c.id),this._sendRequest({content:e,appkey:b.config.get("appkey"),sessionID:b.user.get("sessionID"),"target-query":b.config.get("parent.query")},function(b){d._publishEventComplete({name:a,state:"Complete",response:b}),d.requestDataRefresh()},function(b){d._publishEventComplete({name:a,state:"Error",response:b})})},c.methods._publishEventComplete=function(a){var b=this.component;this.events.publish({topic:"on"+a.name+a.state,data:{item:{data:b.get("data"),target:b.config.get("target")},response:a.response}})},c.methods._requestLoginPrompt=function(){Backplane.response([{id:Backplane.since,channel_name:Backplane.getChannelName(),message:{type:"identity/login/request",payload:this.component.user.data||{}}}])},c.methods._assembleButton=function(a){var c=this,d=function(){var d=this,e=function(){var e=d.get("buttons."+c.name+"."+a+".element");e.off("click"),b("."+d.cssPrefix+"buttonCaption",e).empty().append(c.labels.get(a.toLowerCase()+"Processing")),c._sendActivity(a,d)};d.user.is("logged")?e():(c.deferredActivity=function(){e()},c._requestLoginPrompt())};return function(){var e=this,f=b.map(e.get("data.object.likes"),function(a){return e.user.has("identity",a.actor.id)?a:void 0}).length>0?"Unlike":"Like";return{name:a,icon:"icon-heart",label:c.labels.get(a.toLowerCase()+"Control"),visible:f===a,callback:d}}},c.css=".{plugin.class:likesArea} { float: right; }.{plugin.class:likedBy} { float: left; height: 20px; margin-right: 3px; line-height: 10px; }.{plugin.class:likedBy} .echo-streamserver-controls-facepile-container { line-height: 12px; vertical-align: top; }.{plugin.class} .echo-streamserver-controls-facepile-item-container { position: relative; }.{plugin.class} .echo-streamserver-controls-facepile-item-avatar { border-radius: 50%; width: 22px; height: 22px; }.{plugin.class} .echo-streamserver-controls-facepile-item-avatar img { border-radius: 50%; height: 22px; width: 22px; }.{plugin.class} .echo-streamserver-controls-facepile-and { display: none; }",Echo.Plugin.create(c))}(Echo.jQuery),function(){"use strict";var a=Echo.Plugin.manifest("LikeCardUI","Echo.StreamServer.Controls.FacePile");Echo.Plugin.isDefined(a)||(a.config={displayStyle:"facepile"},a.labels={facepileCount:"+{count}",numberCount:"{count}",likeNumberTitle:"This item has {count} like",likesNumberTitle:"This item has {count} likes"},a.component.renderers.more=function(a){var b=this.component,c=this.config.get("displayStyle");a.empty();var d="number"===c||"facepile"===c&&b._isMoreButtonVisible();return"number"===c&&a.attr("title",this.labels.get(b.get("count.total")>1?"likesNumberTitle":"likeNumberTitle",{count:b.get("count.total")})),d?a.show().append(this.labels.get(c+"Count",{count:"facepile"===c?b.get("count.total")-b.get("count.visible"):b.get("count.total")})):a.hide()},a.component.renderers.actors=function(){var a=this.parentRenderer("actors",arguments);return"facepile"===this.config.get("displayStyle")?a.show():a.hide()},a.css=".{plugin.class} .{class:more} { float: right; font-size: 12px; margin-top: 5px;  white-space: nowrap; }",Echo.Plugin.create(a))}(Echo.jQuery),function(){"use strict";var a=Echo.Plugin.manifest("LikeCardUI","Echo.StreamServer.Controls.FacePile.Item");Echo.Plugin.isDefined(a)||(a.init=function(){this.extendTemplate("insertAsLastChild","container",a.templates.main)},a.labels={unlikeOnBehalf:"Unlike on behalf of {data:title}"},a.templates.main='<i class="{plugin.class:adminUnlike} icon-remove" title="{plugin.label:unlikeOnBehalf}"></i>',a.component.renderers.container=function(){var a=this,b=this.component,c=this.parentRenderer("container",arguments);return b.user.is("admin")?c.on("mouseenter",function(){a.view.get("adminUnlike").show(),b.view.get("avatar").addClass(a.cssPrefix+"pale")}).on("mouseleave",function(){a.view.get("adminUnlike").hide(),b.view.get("avatar").removeClass(a.cssPrefix+"pale")}):c},a.renderers.adminUnlike=function(a){var b=this,c=this.component;return c.user.is("admin")?a.one("click",function(){b.events.publish({topic:"onUnlike",data:{actor:c.get("data"),target:c.config.get("parent.target").get(0)},global:!1,propagation:!1})}).hide():a.remove()},a.component.renderers.avatar=function(){var a=this.component,b=this.parentRenderer("avatar",arguments);return a.user.is("admin")?b.removeAttr("title"):b},a.css=".{plugin.class:pale} { opacity: 0.2; }.{plugin.class:adminUnlike} { cursor: pointer; position: absolute; top: 3px; left: 4px; opacity: 0.8; }",Echo.Plugin.create(a))}(Echo.jQuery);
!function(a){"use strict";var b=a,c=Echo.Plugin.manifest("ModerationCardUI","Echo.StreamServer.Controls.Stream.Item");Echo.Plugin.isDefined(c)||(c.init=function(){var a=this.component;this.set("itemStatus",a.get("data.object.status")),a.addButtonSpec("ModerationCardUI",this._assembleModerateButton())},c.config={removePersonalItemsAllowed:!1,statusAnimationTimeout:1e3,itemActions:["approve","untouch","spam","delete"],extraActions:["topPost","topContributor"],userActions:["approveUser","ban","permissions"],topMarkers:{item:"Conversations.TopPost",user:"Conversations.TopContributor"}},c.labels={addTopPostButton:"Add to Top Posts",removeTopPostButton:"Remove from Top Posts",addingTopPost:"Adding to Top Posts",removingTopPost:"Removing from Top Posts",addTopContributorButton:"Add to Top Contributors",removeTopContributorButton:"Remove from Top Contributors",addingTopContributor:"Add to Top Contributors",removingTopContributor:"Removing from Top Contributors",moderateButton:"Moderate",approveButton:"Approve",deleteButton:"Delete",spamButton:"Spam",untouchButton:"Untouch",approveUser:"Approve User",untouchUser:"Return User to Untouched",approvingUser:"Approving User...",untouchingUser:"Returning User to Untouched",changingStatusToCommunityFlagged:"Flagging...",changingStatusToModeratorApproved:"Approving...",changingStatusToModeratorDeleted:"Deleting...",changingStatusToUserDeleted:"Deleting...",changingStatusToUntouched:"Untouching...",changingStatusToModeratorFlagged:"Marking as spam...",statusCommunityFlagged:"Flagged by Community",statusModeratorApproved:"Approved by Moderator",statusModeratorDeleted:"Deleted by Moderator",statusUserDeleted:"Deleted by User",statusModeratorFlagged:"Flagged by Moderator",statusSystemFlagged:"Flagged by System",banUser:"Ban User",unbanUser:"Unban User",userBanned:"Banned User",processingAction:"Setting up '{state}' user state...",moderatorRole:"Moderator",administratorRole:"Administrator",userButton:"Demote to User",moderatorButton:"Promote to Moderator",administratorButton:"Promote to Admin",setRoleAction:"Setting up '{role}' role...",unsetRoleAction:"Removing '{role}' role...",statusUntouched:"New"},c.events={"Echo.StreamServer.Controls.Stream.Item.onRerender":function(){var a=this.component;if(a.user.is("admin")){var b=a.view.get("container"),c=a.view.get("indicator"),d=this.get("itemStatus")||"Untouched",e=a.get("data.object.status")||"Untouched";if(d!==e){var f="background-color "+this.config.get("statusAnimationTimeout")+"ms linear";c.css({transition:f,"-o-transition":f,"-ms-transition":f,"-moz-transition":f,"-webkit-transition":f}),b.focus(),b.addClass(this.cssPrefix+"status-"+e),b.removeClass(this.cssPrefix+"status-"+d),this.set("itemStatus",e)}}},"Echo.StreamServer.Controls.Stream.Plugins.ModerationCardUI.onUserUpdate":function(a,b){var c=this.component,d=b.item;return c.get("data.actor.id")===d.data.actor.id?(c.set("data.actor."+("state"===b.field?"status":b.field),b.value),c.render(),{stop:["bubble"]}):void 0}},c.templates.buttonLabels={banned:'<span class="{plugin.class:button-state} {plugin.class:button-state-banned}">{plugin.label:userBanned}</span>(<span>{plugin.label:unbanUser}</span>)',unbanned:"<span>{plugin.label:banUser}</span>"},c.component.renderers.avatar=function(a){var b=this.component;if(b.user.is("admin")){var c=b.get("data.actor.status")||"Untouched";a.addClass(this.cssPrefix+"actorStatus-"+c)}return this.parentRenderer("avatar",arguments)},c.component.renderers.container=function(a){var b=this.component;if(b.user.is("admin")){var c=this.get("itemStatus")||"Untouched";a.addClass(this.cssPrefix+"status-"+c)}return this.parentRenderer("container",arguments)},c.statuses=["Untouched","ModeratorApproved","ModeratorDeleted","UserDeleted","CommunityFlagged","ModeratorFlagged","SystemFlagged"],c.button2status={Spam:"ModeratorFlagged",Delete:"ModeratorDeleted",Approve:"ModeratorApproved",Untouch:"Untouched"},c.roles=["","moderator","administrator"],c.methods._changeItemStatus=function(a){var b=this.component;this.set("selected",!1),b.set("data.object.status",a),b.view.render({name:"buttons"}),this.view.render({name:"status",recursive:!0})},c.methods._sendRequest=function(a,b,c){Echo.StreamServer.API.request({endpoint:"submit",secure:this.config.get("useSecureAPI",!1,!0),submissionProxyURL:this.component.config.get("submissionProxyURL"),onData:b,onError:c,data:a}).send()},c.methods._publishCompleteActionEvent=function(a){this.events.publish({topic:"on"+a.name+a.state,data:{item:{data:this.component.get("data"),target:this.component.get("view.content")},response:a.response}})},c.methods._sendUserUpdate=function(a){var b=this.component;Echo.IdentityServer.API.request({endpoint:"update",submissionProxyURL:this.component.config.get("submissionProxyURL"),secure:this.config.get("useSecureAPI",!1,!0),data:{content:{field:a.field,value:a.value,identityURL:b.get("data.actor.id"),username:b.get("data.actor.title")},appkey:b.config.get("appkey"),sessionID:b.user.get("sessionID",""),"target-query":b.config.get("parent.query","")},onData:a.onData,onError:function(){b.render()}}).send()},c.methods._assembleButton=function(a){var b=this,d=this.component;if(!(d.user.is("admin")||"Delete"===a&&d.user.has("identity",d.data.actor.id)&&this.config.get("removePersonalItemsAllowed")))return!1;var e=function(d){var e=c.button2status[a];return!d.user.is("admin")&&"Delete"===a&&b.config.get("removePersonalItemsAllowed")&&d.user.has("identity",d.data.actor.id)&&(e="UserDeleted"),e};return d.get("data.object.status")===e(d)?!1:{label:this.labels.get(a.toLowerCase()+"Button"),visible:!0,callback:function(){var c=e(d);d.block(b.labels.get("changingStatusTo"+c));var f={verbs:["http://activitystrea.ms/schema/1.0/update"],targets:[{id:d.get("data.object.id")}],actor:{title:d.get("data.actor.id")},object:{state:c}};b._sendRequest({content:f,appkey:d.config.get("appkey"),sessionID:d.user.get("sessionID"),"target-query":d.config.get("parent.query")},function(e){b._publishCompleteActionEvent({name:a,state:"Complete",response:e}),b._changeItemStatus(c),d.unblock(),b.requestDataRefresh()},function(c){b._publishCompleteActionEvent({name:a,state:"Error",response:c}),d.unblock()})}}},c.methods._assembleTopContributorButton=function(a){var c=this,d=this.component,e=d.get("depth")||d.get("data.actor.id")===d.user.config.get("fakeIdentityURL");if(e)return!1;var f=this.config.get("topMarkers.user"),g=d.get("data.actor.markers",[]),h=~b.inArray(f,g)?"remove":"add";return{label:this.labels.get(h+a+"Button"),visible:!0,callback:function(){d.block(c.labels.get(("add"===h?"adding":"removing")+a));var e=function(){return"add"===h?g.push(f):g=b.grep(g,function(a){return a!==f}),g.length?g.join(","):"-"}();c._sendUserUpdate({field:"markers",value:e,onData:function(a){c._publishCompleteActionEvent({name:h,state:"Complete",response:a}),c._publishUserUpdateEvent({item:d,field:"markers",value:e}),d.unblock()},onError:function(a){c._publishCompleteActionEvent({name:h,state:"Error",response:a}),d.unblock()}})}}},c.methods._assembleTopPostButton=function(a){var c=this,d=this.component;if(d.get("depth"))return!1;var e=this.config.get("topMarkers.item"),f=d.get("data.object.markers",[]),g=~b.inArray(e,f)?"remove":"add";return{label:this.labels.get(g+a+"Button"),visible:!0,callback:function(){d.block(c.labels.get(("add"===g?"adding":"removing")+a));var b={verbs:["http://activitystrea.ms/schema/1.0/"+("add"===g?"mark":"unmark")],targets:[{id:d.get("data.object.id")}],object:{content:e}};c._sendRequest({content:b,appkey:d.config.get("appkey"),sessionID:d.user.get("sessionID"),"target-query":d.config.get("parent.query")},function(){d.unblock(),c.requestDataRefresh()},function(){d.unblock()})}}},c.methods._assembleModerateButton=function(){var a=this,c=Echo.Utils.foldl([],["item","extra","user"],function(b,c){return c=[].concat(c,a.config.get(b+"Actions"))});return function(){return{name:"Moderate",icon:"icon-ok",visible:this.user.is("admin"),entries:b.map(c,function(c){var d=Echo.Utils.capitalize(c),e=~b.inArray(c,a.config.get("itemActions"))?"_assembleButton":"_assemble"+d+"Button",f=a[e](d);return f||void 0})}}},c.methods._assembleBanButton=function(){var a=this,b=this._isUserBanned(),c=this.component;return c.get("data.actor.id")===c.user.config.get("fakeIdentityURL")?!1:{label:this.labels.get(b?"unbanUser":"banUser"),visible:!0,callback:function(){var d=b?"Untouched":"ModeratorBanned",e=b?"UnBan":"Ban";c.block(a.labels.get("processingAction",{state:d})),a._sendUserUpdate({field:"state",value:d,onData:function(b){a._publishCompleteActionEvent({name:e,state:"Complete",response:b}),a._publishUserUpdateEvent({item:c,field:"state",value:d}),c.unblock()},onError:function(b){a._publishCompleteActionEvent({name:e,state:"Error",response:b}),c.unblock()}})}}},c.methods._assembleApproveUserButton=function(){var a=this,b=this.component;if(b.get("data.actor.id")===b.user.config.get("fakeIdentityURL"))return!1;var c="ModeratorApproved"===b.get("data.actor.status")?"untouch":"approve";return{label:this.labels.get("approve"===c?"approveUser":"untouchUser"),visible:!0,callback:function(){b.block(a.labels.get("approve"===c?"approvingUser":"untouchingUser"));var d="approve"===c?"ModeratorApproved":"Untouched";a._sendUserUpdate({field:"state",value:d,onData:function(e){a._publishCompleteActionEvent({name:c,state:"Complete",response:e}),a._publishUserUpdateEvent({item:b,field:"state",value:d}),b.unblock()},onError:function(d){a._publishCompleteActionEvent({name:c,state:"Error",response:d}),b.unblock()}})}}},c.methods._assemblePermissionsButton=function(){var a=this,d=this.component,e=this._getRole(),f=this._getNextRole(e);return d.get("data.actor.id")===d.user.config.get("fakeIdentityURL")?!1:{label:this.labels.get((f||"user")+"Button"),visible:!0,callback:function(){var g="UserPermissions",h=""!==f?(d.get("data.actor.roles")||[]).concat(f):Echo.Utils.foldl([],d.get("data.actor.roles")||[],function(a,d){b.inArray(a,c.roles)<0&&d.push(a)}),i=""===f?"unset":"set";d.block(a.labels.get(i+"RoleAction",{role:f||e})),a._sendUserUpdate({field:"roles",value:h.length?h.join(","):"-",onData:function(b){a._publishCompleteActionEvent({name:g,state:"Complete",response:b}),a._publishUserUpdateEvent({item:d,field:"roles",value:h}),d.unblock()},onError:function(b){a._publishCompleteActionEvent({name:g,state:"Error",response:b}),d.unblock()}})}}},c.methods._publishUserUpdateEvent=function(a){this.events.publish({topic:"onUserUpdate",data:{item:a.item,field:a.field,value:a.value},global:!1,propagation:!1}),this.requestDataRefresh()},c.methods._isUserBanned=function(){return"ModeratorBanned"===this.component.get("data.actor.status")},c.methods._getRole=function(){var a="";return b.each(this.component.get("data.actor.roles")||[],function(d,e){return b.inArray(e,c.roles)>0&&(a=e,"administrator"===e)?!1:void 0}),a},c.methods._getNextRole=function(a){return c.roles[(b.inArray(a,c.roles)+1)%c.roles.length]},c.css=".{plugin.class} .{class:modeSwitch} { width: 0px; height: 0px; }.echo-sdk-ui ul.{plugin.class:moderateButton} { display: inline-block; margin-bottom: 0px; }.echo-sdk-ui .{plugin.class:moderateButton} .dropdown-toggle { color: inherit; }.echo-sdk-ui .{plugin.class:moderateButton}.nav > li > a,.echo-sdk-ui .{plugin.class:moderateButton}.nav > li > a:hover,.echo-sdk-ui .{plugin.class:moderateButton}.nav > li > a:focus  { background-color: transparent; }.{plugin.class} .{plugin.class:status-Untouched} .{class:indicator} { background-color: #3498db; }.{plugin.class} .{plugin.class:status-ModeratorApproved} .{class:indicator} { background-color: #15c177; }.{plugin.class} .{plugin.class:status-ModeratorDeleted} .{class:indicator} { background-color: #bf383a; }.{plugin.class} .{plugin.class:status-SystemFlagged} .{class:indicator}, .{plugin.class:status-CommunityFlagged} .{class:indicator}, .{plugin.class:status-ModeratorFlagged} .{class:indicator} { background-color: #ff9e00; }"+b.map({Untouched:"#3498db",ModeratorApproved:"#15c177",ModeratorBanned:"#bf383a",ModeratorDeleted:"#bf383a"},function(a,b){return[".{plugin.class} .{class:avatar}.{plugin.class:actorStatus-"+b+"} > div { border: 2px solid "+a+"; width: 20px; height: 20px; }",".{plugin.class} .{class:depth-0} .{class:avatar}.{plugin.class:actorStatus-"+b+"} div { height: 32px; width: 32px; border-radius: 50%;}"].join("")}).join(""),Echo.Plugin.create(c))}(Echo.jQuery),function(){"use strict";var a=Echo.Plugin.manifest("ModerationCardUI","Echo.StreamServer.Controls.Stream");a.events={"Echo.StreamServer.Controls.Stream.Item.Plugins.ModerationCardUI.onUserUpdate":function(a,b){this.events.publish({topic:"onUserUpdate",data:b,global:!1})}},Echo.Plugin.create(a)}(Echo.jQuery);
!function(a){"use strict";var b=a,c=Echo.Plugin.manifest("ReplyCardUI","Echo.StreamServer.Controls.Stream.Item");Echo.Plugin.isDefined(c)||(c.init=function(){var a=this,d=this.component;this.extendTemplate("insertAsLastChild","content",c.templates.form),this.extendTemplate("insertBefore","expandChildren",c.templates.childrenSpacing);var e=Echo.Utils.get(Echo.Variables,this._getSubmitKey());b.each(e||{},function(b,c){a.set(b,c)}),d.addButtonSpec("ReplyCardUI",this._assembleButton()),this.set("documentClickHandler",this._getClickHandler()),b(document).on("click",this.get("documentClickHandler"))},c.config={actionString:"Add a comment...",pauseTimeout:0,submitFormTimeout:300,compactFormTimeout:200,displayCompactForm:!1},c.labels={replyControl:"Reply"},c.dependencies=[{control:"Echo.StreamServer.Controls.Submit",url:"{config:cdnBaseURL.sdk}/streamserver.pack.js"}],c.events={"Echo.StreamServer.Controls.Stream.Plugins.ReplyCardUI.onFormExpand":function(a,b){var c=this.component,d=c.config.get("context");this.get("expanded")&&d&&d!==b.context&&this._hideSubmit()},"Echo.StreamServer.Controls.Submit.onPostComplete":function(){var a=this;setTimeout(function(){a._hideSubmit(!0)},this.config.get("pauseTimeout"))},"Echo.StreamServer.Controls.Stream.Item.onRender":function(){this.get("expanded")&&this._showSubmit()}},c.templates.form='<div class="{plugin.class:replyForm}"><div class="{plugin.class:submitForm}"></div><div class="{plugin.class:compactForm}"><div class="pull-left {plugin.class:avatar}"><div></div></div><div class="{plugin.class:compactContent} {plugin.class:compactBorder}"><input type="text" class="{plugin.class:compactField} echo-primaryFont echo-secondaryColor"></div></div></div>',c.templates.childrenSpacing='<div class="{plugin.class:childrenSpacing}"></div>',c.component.renderers.container=function(a){var b=this.component,c=b.threading;return this.get("expanded")&&(b.threading=!0),b.parentRenderer("container",arguments),b.threading=c,a},c.component.renderers.children=function(){var a=this.component;if(1===a.get("children").length){var b=a.get("children")[0];(b.get("added")||b.get("deleted"))&&this.view.render({name:"compactForm"})}return a.parentRenderer("children",arguments)},c.component.renderers.expandChildren=function(){var a=this.component,b=a.parentRenderer("expandChildren",arguments);return this.config.get("displayCompactForm")?b:b.addClass(this.cssPrefix+"expandChildren")},c.renderers.replyForm=function(a){var b=this.component;return a.addClass(b.get("cssPrefix")+"depth-"+(b.get("depth")+1))},c.renderers.submitForm=function(a){return this.config.get("displayCompactForm")||a.addClass(this.cssPrefix+"additionalSpacing"),this.get("expanded")?a.show():a.empty().hide()},c.renderers.avatar=function(a){var c=this.component,d=c.user.get("avatar");d||(d=c.config.get("defaultAvatar"));var e=a.children()[0];b(e).css("background-image",'url("'+d+'")');var f=document.all&&document.querySelector&&!document.addEventListener;return f&&b(e).css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d+"', sizingMethod='scale')"}),c.get("depth")&&!this.get("expanded")?a.hide():a.show()},c.renderers.childrenSpacing=function(a){return this._isCompactFormVisible()?a.show():a.hide()},c.renderers.compactForm=function(a,b){return b=b||{},this._isCompactFormVisible()?a.slideDown(+b.animate&&this.config.get("compactFormTimeout")):a.hide()},c.renderers.compactField=function(a){var b=this;return a.focus(function(){b._showSubmit()}).val(this.config.get("actionString"))},c.methods.destroy=function(){this.get("submit")&&Echo.Utils.set(Echo.Variables,this._getSubmitKey(),{expanded:this.get("expanded"),data:{object:this._getSubmitData()}}),b(document).off("click",this.get("documentClickHandler"))},c.methods._submitConfig=function(a){var b=this,c=this.component;return b.config.assemble({target:a,parent:c.config.getAsHash(),data:b.get("data")||{},markers:this.config.get("extraMarkers"),targetURL:c.get("data.object.id"),targetQuery:c.config.get("query",""),ready:function(){b.set("submit",this),b._expand()}})},c.methods._showSubmit=function(){var a=this.component,c=this.view.get("submitForm"),d=this.get("submit");if(d)return d.config.set("target",c),d.render(),this._expand(),c;var e=this._submitConfig(c);return e.plugins.splice(0,0,{name:"ReplyCardUI",inReplyTo:a.get("data")}),b.map(e.plugins,function(a){"JanrainAuth"===a.name&&(a.nestedPlugins=a.nestedPlugins||[],a.nestedPlugins.push({name:"ReplyCardUI"}))}),new Echo.StreamServer.Controls.Submit(e),c},c.methods._hideSubmit=function(a){var b=this,c=this.component,d=this.get("submit");d&&d.set("data",void 0),this.set("expanded",!1);var e=+a&&this.config.get("submitFormTimeout");this.view.get("submitForm").slideUp(e,function(){b.view.render({name:"avatar"}),b.view.render({name:"compactForm",extra:{animate:a}}),c.view.render({name:"container"}),b.events.publish({topic:"onCollapse"})})},c.methods._isCompactFormVisible=function(){var a=this.component;return!a.get("depth")&&!this.get("expanded")&&this.config.get("displayCompactForm")},c.methods._expand=function(){var a=this.component;this.set("expanded",!0),this.view.render({name:"submitForm"}),this.view.render({name:"compactForm"}),this.view.render({name:"avatar"}),this.events.publish({topic:"onExpand",data:{context:a.config.get("context")}}),a.view.render({name:"container"})},c.methods._getClickHandler=function(){var a=this;return function(b){var c=a.get("submit"),d=a.view.get("submitForm"),e=d&&d.find(b.target).length;a.get("expanded")&&c&&!c.view.get("text").val()&&!e&&a._hideSubmit()}},c.methods._assembleButton=function(){var a=this,b=function(){a._showSubmit()};return function(){var c=this;return{name:"ReplyCardUI",icon:"icon-comment",label:a.labels.get("replyControl"),visible:c.get("depth")<c.config.get("parent.children.maxDepth"),callback:b}}},c.methods._getSubmitKey=function(){var a=this.component,b=a.config.get("context").split("/")[0];return"forms."+a.data.unique+"-"+b},c.methods._getSubmitData=function(){var a={},c=this.get("submit");return a.content=c.view.get("text").val(),b.map(["tags","markers"],function(b){var d=c.view.get(b).val().split(", ");a[b]=d||[]}),a},c.css='.{plugin.class} .{plugin.class:childrenSpacing} { margin-top: 8px; }.{plugin.class} .{class:children} .{plugin.class:childrenSpacing} { margin-top: 0px; }.{plugin.class} .{plugin.class:replyForm} { margin-right: 15px; border-left: 4px solid transparent; }.{plugin.class} .{plugin.class:submitForm} { padding: 8px 0px 15px 0px; }.{plugin.class} .{plugin.class:compactForm} { padding: 8px 0px 15px 0px; }.{plugin.class} .{class:content} .{class:expandChildren} { padding: 8px 0px; }.{plugin.class} .{class:content} .{plugin.class:expandChildren} { padding: 15px 0px 8px 0px; }.{plugin.class} .{plugin.class:additionalSpacing} { padding-top: 15px; }.{plugin.class:compactContent} { padding: 0px 5px 0px 6px; background-color: #fff; height: 28px; line-height: 28px; }.{plugin.class:avatar} { width: 28px; height: 28px; border-radius: 50%; margin: 1px 0px 0px 3px; }.{plugin.class} .{plugin.class:avatar} > div { width: 28px; height: 28px; background-size:cover; display:inline-block; background-position:center; border-radius: 50%; }.{plugin.class:compactBorder} { margin-left: 39px; border: 1px solid #d8d8d8; }.{plugin.class:compactContent} input.{plugin.class:compactField}[type="text"].echo-secondaryColor { color: #C6C6C6 }.{plugin.class:compactContent} input.{plugin.class:compactField}[type="text"].echo-primaryFont { font-size: 12px; line-height: 24px; }.{plugin.class:compactContent} input.{plugin.class:compactField}[type="text"] { width: 100%; height: 24px; border: none; margin: 0px; padding: 0px; box-shadow: none; vertical-align: middle; }.{plugin.class:compactContent} input.{plugin.class:compactField}[type="text"]:focus { outline: 0; box-shadow: none; }',Echo.Plugin.create(c))}(Echo.jQuery),function(){"use strict";var a=Echo.Plugin.manifest("ReplyCardUI","Echo.StreamServer.Controls.Stream");Echo.Plugin.isDefined(a)||(a.events={"Echo.StreamServer.Controls.Stream.Item.Plugins.ReplyCardUI.onExpand":function(a,b){this.events.publish({topic:"onFormExpand",data:{context:b.context}})}},Echo.Plugin.create(a))}(Echo.jQuery),function(a){"use strict";var b=a,c=Echo.Plugin.manifest("ReplyCardUI","Echo.StreamServer.Controls.Submit");Echo.Plugin.isDefined(c)||(c.init=function(){var a=this,b=a.component,c=b._prepareEventParams;b._prepareEventParams=function(d){var e=c.call(b,d);return e.inReplyTo=a.config.get("inReplyTo"),e}},b.map(["onRender","onRerender"],function(a){c.events["Echo.StreamServer.Controls.Submit."+a]=function(){var a=this.component;a.config.get("target").show(),a.view.get("text").focus()}}),c.css=".{plugin.class} div.{class:container} { padding: 0px; border: 0px; box-shadow: none; }",Echo.Plugin.create(c))}(Echo.jQuery);
!function(a){"use strict";var b=a,c=Echo.Plugin.manifest("TweetDisplayCardUI","Echo.StreamServer.Controls.Stream.Item");Echo.Plugin.isDefined(c)||(c.init=function(){var a=this.component,d=a.config.get("contentTransformations");b.map(["text","html","xhtml"],function(a){d[a].hashtags=!1}),a.config.set("contentTransformations",d),a.config.set("plugins.LikeCardUI.enabled",!1),a.config.set("plugins.ReplyCardUI.enabled",!1),a.config.set("plugins.CardUISocialSharing.enabled",!1),a.config.set("plugins.CommunityFlagCardUI.enabled",!1),a.config.set("viaLabel.icon",!0),this.extendTemplate("replace","date",c.templates.date),this.extendTemplate("replace","authorName",c.templates.username),a.addButtonSpec(this.name,this._assembleButton("tweet")),a.addButtonSpec(this.name,this._assembleButton("retweet")),a.addButtonSpec(this.name,this._assembleButton("favorite"))},c.labels={tweet:"Reply",retweet:"Retweet",favorite:"Favorite",comment:"Comment",secondsAgo:"{seconds}s",minutesAgo:"{minutes}m",hoursAgo:"{hours}h",monthsAgo:"{day} {month}",yearsAgo:"{day} {month} {year}",fullDate:"{time} - {date}",month1:"Jan",month2:"Feb",month3:"Mar",month4:"Apr",month5:"May",month6:"Jun",month7:"Jul",month8:"Aug",month9:"Sep",month10:"Oct",month11:"Nov",month12:"Dec"},c.enabled=function(){return this._isTweet()},c.events={"Echo.StreamServer.Controls.Stream.Item.onRender":function(){window.twttr?window.twttr.widgets&&window.twttr.widgets.load():Echo.Loader.download([{url:"//platform.twitter.com/widgets.js"}],function(){window.twttr&&window.twttr.widgets&&window.twttr.widgets.load()}),b.map(this.component.buttons[this.name],function(a){a&&a.element&&a.element.unbind("click")})}},c.templates.username='<div class="{plugin.class:tweetUserName}"></div>',c.templates.date='<div class="{plugin.class:tweetDate} echo-secondaryFont"></div>',c.component.renderers.authorName=function(){var a=this.component;return a.parentRenderer("authorName",arguments).removeClass("echo-linkColor").addClass(this.cssPrefix+"tweetScreenName").wrapInner(Echo.Utils.hyperlink({href:a.get("data.actor.id")},{openInNewWindow:!0,skipEscaping:!0}))},c.component.renderers.avatar=function(){var a=this.component;return a.parentRenderer("avatar",arguments).wrap(Echo.Utils.hyperlink({href:a.get("data.actor.id")},{openInNewWindow:!0,skipEscaping:!0}))},c.component.renderers.date=function(){var a=this.component;return this.view.render({name:"tweetDate"}),a.parentRenderer("date",arguments)},c.component.renderers._buttonsDelimiter=function(){var a=this.component,b=a.buttonSpecs[this.name].length;return a.parentRenderer("_buttonsDelimiter",arguments).find("span[class*='button-delim']").eq(b).text(" | ")},c.renderers.tweetUserName=function(a){var b=this.component;return a.html(Echo.Utils.hyperlink({href:b.get("data.actor.id"),caption:"@"+this._extractTwitterID(),"class":"echo-streamserver-controls-stream-item-authorName"},{openInNewWindow:!0,skipEscaping:!0}))},c.renderers.tweetDate=function(a){var b=this.component;return a.html(Echo.Utils.hyperlink({caption:this._getTweetTime(),href:b.get("data.object.id"),"class":"echo-secondaryFont echo-secondaryColor",title:this._getTweetTime(!0)},{openInNewWindow:!0,skipEscaping:!0}))},c.methods._assembleButton=function(a){var b=this,c=this.component,d=c.get("data.object.id").match(/\/(\d+)$/),e=d&&d[1];return function(){return{name:a,icon:"icon-"+a,label:b.labels.get(a),template:Echo.Utils.hyperlink({href:"https://twitter.com/intent/"+a+"?in_reply_to="+e+"&tweet_id="+e,"class":"{class:button} intentControl {class:button}-{data:name}",caption:'<i class="{plugin.class:buttonIcon} icon-{data:name}"></i><span class="echo-primaryFont {class:buttonCaption}">{data:label}</span>'},{openInNewWindow:!0,skipEscaping:!0}),visible:e&&b._isTweet()}}},c.methods._isTweet=function(){var a=this.component;return"Twitter"===a.get("data.source.name")},c.methods._getTweetTime=function(a){var b,c=this.component,d=new Date(1e3*c.timestamp),e=(new Date).getTime(),f=Math.floor((e-d.getTime())/1e3);return b=a?this.labels.get("fullDate",{time:d.toLocaleTimeString(),date:d.toLocaleDateString()}):60>f?this.labels.get("secondsAgo",{seconds:f}):3600>f?this.labels.get("minutesAgo",{minutes:Math.floor(f/60)}):86400>f?this.labels.get("hoursAgo",{hours:Math.floor(f/3600)}):31536e3>f?this.labels.get("monthsAgo",{day:d.getDate(),month:this.labels.get("month"+(d.getMonth()+1))}):this.labels.get("yearsAgo",{day:d.getDate(),month:this.labels.get("month"+(d.getMonth()+1)),year:d.getFullYear()})},c.methods._extractTwitterID=function(){var a=this.component,b=a.get("data.actor.id").match(/twitter.com\/(.*)/);return b?b[1]:a.get("data.actor.id")},c.css=".{plugin.class} .{class:avatar} a img { border: 0px; }.{plugin.class} .{class:data} a { text-decoration: none; }.{plugin.class} .{class:data} a:hover { text-decoration: underline; }.{plugin.class} .{class:modeSwitch} { margin-left: 6px; }.{plugin.class:userName} { float: left; font-size: 15px; font-weight: bold; }.{plugin.css:screenName} { margin-left: 4px; font-size: 11px; font-weight: normal; padding-top: 1px; }.{plugin.class:userName} a, .{plugin.class:tweetUserName} a, .{plugin.class:intentControl} { text-decoration: none; }.{plugin.class:intentControl} { margin-right: 10px }.{plugin.class:tweetUserName} { margin-left: 4px; padding-right: 5px; float: left; }.{plugin.class:date} { text-decoration: none; color: #C6C6C6; }.{plugin.class:tweetScreenName} a { text-decoration: none; color: #333333; }.{plugin.class:tweetDate} a.echo-secondaryFont { text-decoration: none; color: #C6C6C6; }.{plugin.class:tweetDate} a:hover { text-decoration: underline;  }.{plugin.class:tweetDate} { float: right; }.{class:button} i.icon-favorite { background-position: -143px 0px; }.{class:button} i.icon-tweet {background: url(https://si0.twimg.com/images/dev/cms/intents/icons/sprites/everything-spritev2.png) no-repeat; background-position: -17px -2px; }",Echo.Plugin.create(c))}(Echo.jQuery);
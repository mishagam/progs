/* underscore-min.js */
(function(){var Q=this,J=Q._,L=Array.prototype,Z=Object.prototype,H=Function.prototype,V=L.push,ad=L.slice,P=L.concat,S=Z.toString,ab=Z.hasOwnProperty,Y=Array.isArray,K=Object.keys,N=H.bind,W=function(a){return a instanceof W?a:this instanceof W?void (this._wrapped=a):new W(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=W),exports._=W):Q._=W,W.VERSION="1.7.0";var X=function(c,a,b){if(a===void 0){return c}switch(null==b?3:b){case 1:return function(d){return c.call(a,d)};case 2:return function(d,f){return c.call(a,d,f)};case 3:return function(f,g,d){return c.call(a,f,g,d)};case 4:return function(g,h,d,f){return c.call(a,g,h,d,f)}}return function(){return c.apply(a,arguments)}};W.iteratee=function(c,a,b){return null==c?W.identity:W.isFunction(c)?X(c,a,b):W.isObject(c)?W.matches(c):W.property(c)},W.each=W.forEach=function(g,c,d){if(null==g){return g}c=X(c,d);var f,a=g.length;if(a===+a){for(f=0;a>f;f++){c(g[f],f,g)}}else{var b=W.keys(g);for(f=0,a=b.length;a>f;f++){c(g[b[f]],b[f],g)}}return g},W.map=W.collect=function(k,f,g){if(null==k){return[]}f=W.iteratee(f,g);for(var h,c=k.length!==+k.length&&W.keys(k),d=(c||k).length,b=Array(d),j=0;d>j;j++){h=c?c[j]:j,b[j]=f(k[h],h,k)}return b};var D="Reduce of empty array with no initial value";W.reduce=W.foldl=W.inject=function(k,f,g,h){null==k&&(k=[]),f=X(f,h,4);var c,d=k.length!==+k.length&&W.keys(k),b=(d||k).length,j=0;if(arguments.length<3){if(!b){throw new TypeError(D)}g=k[d?d[j++]:j++]}for(;b>j;j++){c=d?d[j]:j,g=f(g,k[c],c,k)}return g},W.reduceRight=W.foldr=function(j,f,g,h){null==j&&(j=[]),f=X(f,h,4);var c,d=j.length!==+j.length&&W.keys(j),b=(d||j).length;if(arguments.length<3){if(!b){throw new TypeError(D)}g=j[d?d[--b]:--b]}for(;b--;){c=d?d[b]:b,g=f(g,j[c],c,j)}return g},W.find=W.detect=function(d,a,b){var c;return a=W.iteratee(a,b),W.some(d,function(g,f,e){return a(g,f,e)?(c=g,!0):void 0}),c},W.filter=W.select=function(d,a,b){var c=[];return null==d?c:(a=W.iteratee(a,b),W.each(d,function(g,f,e){a(g,f,e)&&c.push(g)}),c)},W.reject=function(c,a,b){return W.filter(c,W.negate(W.iteratee(a)),b)},W.every=W.all=function(j,f,g){if(null==j){return !0}f=W.iteratee(f,g);var h,c,d=j.length!==+j.length&&W.keys(j),b=(d||j).length;for(h=0;b>h;h++){if(c=d?d[h]:h,!f(j[c],c,j)){return !1}}return !0},W.some=W.any=function(j,f,g){if(null==j){return !1}f=W.iteratee(f,g);var h,c,d=j.length!==+j.length&&W.keys(j),b=(d||j).length;for(h=0;b>h;h++){if(c=d?d[h]:h,f(j[c],c,j)){return !0}}return !1},W.contains=W.include=function(b,a){return null==b?!1:(b.length!==+b.length&&(b=W.values(b)),W.indexOf(b,a)>=0)},W.invoke=function(d,a){var b=ad.call(arguments,2),c=W.isFunction(a);return W.map(d,function(e){return(c?a:e[a]).apply(e,b)})},W.pluck=function(b,a){return W.map(b,W.property(a))},W.where=function(b,a){return W.filter(b,W.matches(a))},W.findWhere=function(b,a){return W.find(b,W.matches(a))},W.max=function(d,m,b){var h,k,g=-1/0,j=-1/0;if(null==m&&null!=d){d=d.length===+d.length?d:W.values(d);for(var c=0,f=d.length;f>c;c++){h=d[c],h>g&&(g=h)}}else{m=W.iteratee(m,b),W.each(d,function(l,a,i){k=m(l,a,i),(k>j||k===-1/0&&g===-1/0)&&(g=l,j=k)})}return g},W.min=function(d,m,b){var h,k,g=1/0,j=1/0;if(null==m&&null!=d){d=d.length===+d.length?d:W.values(d);for(var c=0,f=d.length;f>c;c++){h=d[c],g>h&&(g=h)}}else{m=W.iteratee(m,b),W.each(d,function(l,a,i){k=m(l,a,i),(j>k||1/0===k&&1/0===g)&&(g=l,j=k)})}return g},W.shuffle=function(g){for(var c,d=g&&g.length===+g.length?g:W.values(g),f=d.length,a=Array(f),b=0;f>b;b++){c=W.random(0,b),c!==b&&(a[b]=a[c]),a[c]=d[b]}return a},W.sample=function(c,a,b){return null==a||b?(c.length!==+c.length&&(c=W.values(c)),c[W.random(c.length-1)]):W.shuffle(c).slice(0,Math.max(0,a))},W.sortBy=function(c,a,b){return a=W.iteratee(a,b),W.pluck(W.map(c,function(g,d,f){return{value:g,index:d,criteria:a(g,d,f)}}).sort(function(h,d){var f=h.criteria,g=d.criteria;if(f!==g){if(f>g||f===void 0){return 1}if(g>f||g===void 0){return -1}}return h.index-d.index}),"value")};var R=function(a){return function(c,d,f){var b={};return d=W.iteratee(d,f),W.each(c,function(j,h){var g=d(j,h,c);a(b,j,g)}),b}};W.groupBy=R(function(c,a,b){W.has(c,b)?c[b].push(a):c[b]=[a]}),W.indexBy=R(function(c,a,b){c[b]=a}),W.countBy=R(function(c,a,b){W.has(c,b)?c[b]++:c[b]=1}),W.sortedIndex=function(k,f,g,h){g=W.iteratee(g,h,1);for(var c=g(f),d=0,b=k.length;b>d;){var j=d+b>>>1;g(k[j])<c?d=j+1:b=j}return d},W.toArray=function(a){return a?W.isArray(a)?ad.call(a):a.length===+a.length?W.map(a,W.identity):W.values(a):[]},W.size=function(a){return null==a?0:a.length===+a.length?a.length:W.keys(a).length},W.partition=function(f,b,c){b=W.iteratee(b,c);var d=[],a=[];return W.each(f,function(h,g,e){(b(h,g,e)?d:a).push(h)}),[d,a]},W.first=W.head=W.take=function(c,a,b){return null==c?void 0:null==a||b?c[0]:0>a?[]:ad.call(c,0,a)},W.initial=function(c,a,b){return ad.call(c,0,Math.max(0,c.length-(null==a||b?1:a)))},W.last=function(c,a,b){return null==c?void 0:null==a||b?c[c.length-1]:ad.call(c,Math.max(c.length-a,0))},W.rest=W.tail=W.drop=function(c,a,b){return ad.call(c,null==a||b?1:a)},W.compact=function(a){return W.filter(a,W.identity)};var z=function(i,f,g,h){if(f&&W.every(i,W.isArray)){return P.apply(h,i)}for(var d=0,c=i.length;c>d;d++){var b=i[d];W.isArray(b)||W.isArguments(b)?f?V.apply(h,b):z(b,f,g,h):g||h.push(b)}return h};W.flatten=function(b,a){return z(b,a,!1,[])},W.without=function(a){return W.difference(a,ad.call(arguments,1))},W.uniq=W.unique=function(f,s,b,j){if(null==f){return[]}W.isBoolean(s)||(j=b,b=s,s=!1),null!=b&&(b=W.iteratee(b,j));for(var p=[],h=[],m=0,d=f.length;d>m;m++){var g=f[m];if(s){m&&h===g||p.push(g),h=g}else{if(b){var k=b(g,m,f);W.indexOf(h,k)<0&&(h.push(k),p.push(g))}else{W.indexOf(p,g)<0&&p.push(g)}}}return p},W.union=function(){return W.uniq(z(arguments,!0,!0,[]))},W.intersection=function(j){if(null==j){return[]}for(var f=[],g=arguments.length,h=0,c=j.length;c>h;h++){var d=j[h];if(!W.contains(f,d)){for(var b=1;g>b&&W.contains(arguments[b],d);b++){}b===g&&f.push(d)}}return f},W.difference=function(b){var a=z(ad.call(arguments,1),!0,!0,[]);return W.filter(b,function(c){return !W.contains(a,c)})},W.zip=function(d){if(null==d){return[]}for(var a=W.max(arguments,"length").length,b=Array(a),c=0;a>c;c++){b[c]=W.pluck(arguments,c)}return b},W.object=function(f,b){if(null==f){return{}}for(var c={},d=0,a=f.length;a>d;d++){b?c[f[d]]=b[d]:c[f[d][0]]=f[d][1]}return c},W.indexOf=function(f,b,c){if(null==f){return -1}var d=0,a=f.length;if(c){if("number"!=typeof c){return d=W.sortedIndex(f,b),f[d]===b?d:-1}d=0>c?Math.max(0,a+c):c}for(;a>d;d++){if(f[d]===b){return d}}return -1},W.lastIndexOf=function(d,a,b){if(null==d){return -1}var c=d.length;for("number"==typeof b&&(c=0>b?c+b+1:Math.min(c,b+1));--c>=0;){if(d[c]===a){return c}}return -1},W.range=function(g,c,d){arguments.length<=1&&(c=g||0,g=0),d=d||1;for(var f=Math.max(Math.ceil((c-g)/d),0),a=Array(f),b=0;f>b;b++,g+=d){a[b]=g}return a};var aa=function(){};W.bind=function(d,a){var b,c;if(N&&d.bind===N){return N.apply(d,ad.call(arguments,1))}if(!W.isFunction(d)){throw new TypeError("Bind must be called on a function")}return b=ad.call(arguments,2),c=function(){if(!(this instanceof c)){return d.apply(a,b.concat(ad.call(arguments)))}aa.prototype=d.prototype;var e=new aa;aa.prototype=null;var f=d.apply(e,b.concat(ad.call(arguments)));return W.isObject(f)?f:e}},W.partial=function(b){var a=ad.call(arguments,1);return function(){for(var f=0,g=a.slice(),c=0,d=g.length;d>c;c++){g[c]===W&&(g[c]=arguments[f++])}for(;f<arguments.length;){g.push(arguments[f++])}return b.apply(this,g)}},W.bindAll=function(d){var a,b,c=arguments.length;if(1>=c){throw new Error("bindAll must be passed function names")}for(a=1;c>a;a++){b=arguments[a],d[b]=W.bind(d[b],d)}return d},W.memoize=function(c,a){var b=function(g){var d=b.cache,f=a?a.apply(this,arguments):g;return W.has(d,f)||(d[f]=c.apply(this,arguments)),d[f]};return b.cache={},b},W.delay=function(c,a){var b=ad.call(arguments,2);return setTimeout(function(){return c.apply(null,b)},a)},W.defer=function(a){return W.delay.apply(W,[a,1].concat(ad.call(arguments,1)))},W.throttle=function(d,m,b){var h,k,g,j=null,c=0;b||(b={});var f=function(){c=b.leading===!1?0:W.now(),j=null,g=d.apply(h,k),j||(h=k=null)};return function(){var e=W.now();c||b.leading!==!1||(c=e);var a=m-(e-c);return h=this,k=arguments,0>=a||a>m?(clearTimeout(j),j=null,c=e,g=d.apply(h,k),j||(h=k=null)):j||b.trailing===!1||(j=setTimeout(f,a)),g}},W.debounce=function(d,m,b){var h,k,g,j,c,f=function(){var a=W.now()-j;m>a&&a>0?h=setTimeout(f,m-a):(h=null,b||(c=d.apply(g,k),h||(g=k=null)))};return function(){g=this,k=arguments,j=W.now();var a=b&&!h;return h||(h=setTimeout(f,m)),a&&(c=d.apply(g,k),g=k=null),c}},W.wrap=function(b,a){return W.partial(a,b)},W.negate=function(a){return function(){return !a.apply(this,arguments)}},W.compose=function(){var b=arguments,a=b.length-1;return function(){for(var c=a,d=b[a].apply(this,arguments);c--;){d=b[c].call(this,d)}return d}},W.after=function(b,a){return function(){return --b<1?a.apply(this,arguments):void 0}},W.before=function(c,a){var b;return function(){return --c>0?b=a.apply(this,arguments):a=null,b}},W.once=W.partial(W.before,2),W.keys=function(c){if(!W.isObject(c)){return[]}if(K){return K(c)}var a=[];for(var b in c){W.has(c,b)&&a.push(b)}return a},W.values=function(f){for(var b=W.keys(f),c=b.length,d=Array(c),a=0;c>a;a++){d[a]=f[b[a]]}return d},W.pairs=function(f){for(var b=W.keys(f),c=b.length,d=Array(c),a=0;c>a;a++){d[a]=[b[a],f[b[a]]]}return d},W.invert=function(f){for(var b={},c=W.keys(f),d=0,a=c.length;a>d;d++){b[f[c[d]]]=c[d]}return b},W.functions=W.methods=function(c){var a=[];for(var b in c){W.isFunction(c[b])&&a.push(b)}return a.sort()},W.extend=function(f){if(!W.isObject(f)){return f}for(var b,c,d=1,a=arguments.length;a>d;d++){b=arguments[d];for(c in b){ab.call(b,c)&&(f[c]=b[c])}}return f},W.pick=function(b,o,a){var j,m={};if(null==b){return m}if(W.isFunction(o)){o=X(o,a);for(j in b){var g=b[j];o(g,j,b)&&(m[j]=g)}}else{var d=P.apply([],ad.call(arguments,1));b=new Object(b);for(var k=0,h=d.length;h>k;k++){j=d[k],j in b&&(m[j]=b[j])}}return m},W.omit=function(d,a,b){if(W.isFunction(a)){a=W.negate(a)}else{var c=W.map(P.apply([],ad.call(arguments,1)),String);a=function(f,e){return !W.contains(c,e)}}return W.pick(d,a,b)},W.defaults=function(f){if(!W.isObject(f)){return f}for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];for(var a in d){f[a]===void 0&&(f[a]=d[a])}}return f},W.clone=function(a){return W.isObject(a)?W.isArray(a)?a.slice():W.extend({},a):a},W.tap=function(b,a){return a(b),b};var ac=function(h,x,b,l){if(h===x){return 0!==h||1/h===1/x}if(null==h||null==x){return h===x}h instanceof W&&(h=h._wrapped),x instanceof W&&(x=x._wrapped);var w=S.call(h);if(w!==S.call(x)){return !1}switch(w){case"[object RegExp]":case"[object String]":return""+h==""+x;case"[object Number]":return +h!==+h?+x!==+x:0===+h?1/+h===1/x:+h===+x;case"[object Date]":case"[object Boolean]":return +h===+x}if("object"!=typeof h||"object"!=typeof x){return !1}for(var j=b.length;j--;){if(b[j]===h){return l[j]===x}}var v=h.constructor,g=x.constructor;if(v!==g&&"constructor" in h&&"constructor" in x&&!(W.isFunction(v)&&v instanceof v&&W.isFunction(g)&&g instanceof g)){return !1}b.push(h),l.push(x);var m,k;if("[object Array]"===w){if(m=h.length,k=m===x.length){for(;m--&&(k=ac(h[m],x[m],b,l));){}}}else{var y,d=W.keys(h);if(m=d.length,k=W.keys(x).length===m){for(;m--&&(y=d[m],k=W.has(x,y)&&ac(h[y],x[y],b,l));){}}}return b.pop(),l.pop(),k};W.isEqual=function(b,a){return ac(b,a,[],[])},W.isEmpty=function(b){if(null==b){return !0}if(W.isArray(b)||W.isString(b)||W.isArguments(b)){return 0===b.length}for(var a in b){if(W.has(b,a)){return !1}}return !0},W.isElement=function(a){return !(!a||1!==a.nodeType)},W.isArray=Y||function(a){return"[object Array]"===S.call(a)},W.isObject=function(b){var a=typeof b;return"function"===a||"object"===a&&!!b},W.each(["Arguments","Function","String","Number","Date","RegExp"],function(a){W["is"+a]=function(b){return S.call(b)==="[object "+a+"]"}}),W.isArguments(arguments)||(W.isArguments=function(a){return W.has(a,"callee")}),"function"!=typeof/./&&(W.isFunction=function(a){return"function"==typeof a||!1}),W.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},W.isNaN=function(a){return W.isNumber(a)&&a!==+a},W.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===S.call(a)},W.isNull=function(a){return null===a},W.isUndefined=function(a){return a===void 0},W.has=function(b,a){return null!=b&&ab.call(b,a)},W.noConflict=function(){return Q._=J,this},W.identity=function(a){return a},W.constant=function(a){return function(){return a}},W.noop=function(){},W.property=function(a){return function(b){return b[a]}},W.matches=function(c){var a=W.pairs(c),b=a.length;return function(h){if(null==h){return !b}h=new Object(h);for(var g=0;b>g;g++){var d=a[g],f=d[0];if(d[1]!==h[f]||!(f in h)){return !1}}return !0}},W.times=function(f,b,c){var d=Array(Math.max(0,f));b=X(b,c,1);for(var a=0;f>a;a++){d[a]=b(a)}return d},W.random=function(b,a){return null==a&&(a=b,b=0),b+Math.floor(Math.random()*(a-b+1))},W.now=Date.now||function(){return(new Date).getTime()};var ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},C=W.invert(ae),U=function(f){var b=function(e){return f[e]},c="(?:"+W.keys(f).join("|")+")",d=RegExp(c),a=RegExp(c,"g");return function(e){return e=null==e?"":""+e,d.test(e)?e.replace(a,b):e}};W.escape=U(ae),W.unescape=U(C),W.result=function(c,a){if(null==c){return void 0}var b=c[a];return W.isFunction(b)?c[a]():b};var B=0;W.uniqueId=function(b){var a=++B+"";return b?b+a:a},W.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,T={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,G=function(a){return"\\"+T[a]};W.template=function(f,s,b){!s&&b&&(s=b),s=W.defaults({},s,W.templateSettings);var j=RegExp([(s.escape||M).source,(s.interpolate||M).source,(s.evaluate||M).source].join("|")+"|$","g"),p=0,h="__p+='";f.replace(j,function(i,l,n,c,u){return h+=f.slice(p,u).replace(q,G),p=u+i.length,l?h+="'+\n((__t=("+l+"))==null?'':_.escape(__t))+\n'":n?h+="'+\n((__t=("+n+"))==null?'':__t)+\n'":c&&(h+="';\n"+c+"\n__p+='"),i}),h+="';\n",s.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{var m=new Function(s.variable||"obj","_",h)}catch(d){throw d.source=h,d}var g=function(a){return m.call(this,a,W)},k=s.variable||"obj";return g.source="function("+k+"){\n"+h+"}",g},W.chain=function(b){var a=W(b);return a._chain=!0,a};var I=function(a){return this._chain?W(a).chain():a};W.mixin=function(a){W.each(W.functions(a),function(b){var c=W[b]=a[b];W.prototype[b]=function(){var d=[this._wrapped];return V.apply(d,arguments),I.call(this,c.apply(W,d))}})},W.mixin(W),W.each(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=L[b];W.prototype[b]=function(){var c=this._wrapped;return a.apply(c,arguments),"shift"!==b&&"splice"!==b||0!==c.length||delete c[0],I.call(this,c)}}),W.each(["concat","join","slice"],function(b){var a=L[b];W.prototype[b]=function(){return I.call(this,a.apply(this._wrapped,arguments))}}),W.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return W})}).call(this);
/* jwplayer.js */
"undefined"==typeof jwplayer&&(jwplayer=function(a){if(jwplayer.api){return jwplayer.api.selectPlayer(a)}},jwplayer.version="6.11.4923",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(){var z={},C=Array.prototype,u=Object.prototype,B=C.slice,A=C.concat,D=u.toString,x=u.hasOwnProperty,o=C.map,E=C.forEach,y=C.filter,q=C.some,i=C.indexOf,u=Array.isArray,r=Object.keys,w=function(b){if(b instanceof w){return b}if(!(this instanceof w)){return new w(b)}},G=w.each=w.forEach=function(h,f,e){if(null==h){return h}if(E&&h.forEach===E){h.forEach(f,e)}else{if(h.length===+h.length){for(var j=0,a=h.length;j<a;j++){if(f.call(e,h[j],j,h)===z){return}}}else{for(var k=w.keys(h),j=0,a=k.length;j<a;j++){if(f.call(e,h[k[j]],k[j],h)===z){return}}}}return h};w.map=w.collect=function(d,e,f){var c=[];if(null==d){return c}if(o&&d.map===o){return d.map(e,f)}G(d,function(b,g,h){c.push(e.call(f,b,g,h))});return c};w.find=w.detect=function(d,e,f){var c;F(d,function(b,g,h){if(e.call(f,b,g,h)){return c=b,!0}});return c};w.filter=w.select=function(e,f,c){var g=[];if(null==e){return g}if(y&&e.filter===y){return e.filter(f,c)}G(e,function(b,h,d){f.call(c,b,h,d)&&g.push(b)});return g};var F=w.some=w.any=function(e,f,c){f||(f=w.identity);var h=!1;if(null==e){return h}if(q&&e.some===q){return e.some(f,c)}G(e,function(b,d,g){if(h||(h=f.call(c,b,d,g))){return z}});return !!h};w.size=function(b){return null==b?0:b.length===+b.length?b.length:w.keys(b).length};w.after=function(b,c){return function(){if(1>--b){return c.apply(this,arguments)}}};w.sortedIndex=function(j,k,f,n){f=null==f?w.identity:w.isFunction(f)?f:w.property(f);k=f.call(n,k);for(var e=0,p=j.length;e<p;){var h=e+p>>>1;f.call(n,j[h])<k?e=h+1:p=h}return e};w.find=w.detect=function(d,e,f){var c;F(d,function(g,h,b){if(e.call(f,g,h,b)){return c=g,!0}});return c};F=w.some=w.any=function(e,f,c){f||(f=w.identity);var h=!1;if(null==e){return h}if(q&&e.some===q){return e.some(f,c)}G(e,function(d,g,b){if(h||(h=f.call(c,d,g,b))){return z}});return !!h};w.contains=w.include=function(b,c){if(null==b){return !1}b.length!==+b.length&&(b=w.values(b));return 0<=w.indexOf(b,c)};w.difference=function(b){var c=A.apply(C,B.call(arguments,1));return w.filter(b,function(d){return !w.contains(c,d)})};w.without=function(b){return w.difference(b,B.call(arguments,1))};w.indexOf=function(f,h,e){if(null==f){return -1}var j=0,c=f.length;if(e){if("number"==typeof e){j=0>e?Math.max(0,c+e):e}else{return j=w.sortedIndex(f,h),f[j]===h?j:-1}}if(i&&f.indexOf===i){return f.indexOf(h,e)}for(;j<c;j++){if(f[j]===h){return j}}return -1};w.memoize=function(d,e){var c={};e||(e=w.identity);return function(){var a=e.apply(this,arguments);return w.has(c,a)?c[a]:c[a]=d.apply(this,arguments)}};w.keys=function(d){if(!w.isObject(d)){return[]}if(r){return r(d)}var e=[],c;for(c in d){w.has(d,c)&&e.push(c)}return e};w.pick=function(b){var c={},d=A.apply(C,B.call(arguments,1));G(d,function(a){a in b&&(c[a]=b[a])});return c};w.isArray=u||function(b){return"[object Array]"==D.call(b)};w.isObject=function(b){return b===Object(b)};G("Arguments Function String Number Date RegExp".split(" "),function(b){w["is"+b]=function(a){return D.call(a)=="[object "+b+"]"}});w.isArguments(arguments)||(w.isArguments=function(b){return !(!b||!w.has(b,"callee"))});"function"!==typeof/./&&(w.isFunction=function(b){return"function"===typeof b});w.isFinite=function(b){return isFinite(b)&&!isNaN(parseFloat(b))};w.isNaN=function(b){return w.isNumber(b)&&b!=+b};w.isBoolean=function(b){return !0===b||!1===b||"[object Boolean]"==D.call(b)};w.isNull=function(b){return null===b};w.isUndefined=function(b){return void 0===b};w.has=function(b,c){return x.call(b,c)};w.identity=function(b){return b};w.constant=function(b){return function(){return b}};w.property=function(b){return function(a){return a[b]}};this._=w}.call(jwplayer),function(j){function p(b){return function(){return i(b)}}function g(f,h,d,k,e){return function(){var b,n;if(e){d(f)}else{try{if(b=f.responseXML){if(n=b.firstChild,b.lastChild&&"parsererror"===b.lastChild.nodeName){k&&k("Invalid XML",h,f);return}}}catch(c){}if(b&&n){return d(f)}(b=m.parseXML(f.responseText))&&b.firstChild?(f=m.extend({},f,{responseXML:b}),d(f)):k&&k(f.responseText?"Invalid XML":h,h,f)}}}var m=j.utils={},l=j._;m.exists=function(b){switch(typeof b){case"string":return 0<b.length;case"object":return null!==b;case"undefined":return !1}return !0};m.styleDimension=function(b){return b+(0<b.toString().indexOf("%")?"":"px")};m.getAbsolutePath=function(h,n){m.exists(n)||(n=document.location.href);if(m.exists(h)){var d;if(m.exists(h)){d=h.indexOf("://");var r=h.indexOf("?");d=0<d&&(0>r||r>d)}else{d=void 0}if(d){return h}d=n.substring(0,n.indexOf("://")+3);var r=n.substring(d.length,n.indexOf("/",d.length+1)),f;0===h.indexOf("/")?f=h.split("/"):(f=n.split("?")[0],f=f.substring(d.length+r.length+1,f.lastIndexOf("/")),f=f.split("/").concat(h.split("/")));for(var k=[],q=0;q<f.length;q++){f[q]&&(m.exists(f[q])&&"."!==f[q])&&(".."===f[q]?k.pop():k.push(f[q]))}return d+r+"/"+k.join("/")}};m.extend=function(){var e=Array.prototype.slice.call(arguments,0);if(1<e.length){for(var f=e[0],d=function(k,c){void 0!==c&&null!==c&&(f[k]=c)},h=1;h<e.length;h++){m.foreach(e[h],d)}return f}return null};var a=window.console=window.console||{log:function(){}};m.log=function(){var b=Array.prototype.slice.call(arguments,0);"object"===typeof a.log?a.log(b):a.log.apply(a,b)};var i=l.memoize(function(b){return null!==navigator.userAgent.toLowerCase().match(b)});m.isFF=p(/firefox/i);m.isChrome=p(/chrome/i);m.isIPod=p(/iP(hone|od)/i);m.isIPad=p(/iPad/i);m.isSafari602=p(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i);m.isIETrident=function(b){return b?(b=parseFloat(b).toFixed(1),i(RegExp("trident/.+rv:\\s*"+b,"i"))):i(/trident/i)};m.isMSIE=function(b){return b?(b=parseFloat(b).toFixed(1),i(RegExp("msie\\s*"+b,"i"))):i(/msie/i)};m.isIE=function(b){return b?(b=parseFloat(b).toFixed(1),11<=b?m.isIETrident(b):m.isMSIE(b)):m.isMSIE()||m.isIETrident()};m.isSafari=function(){return i(/safari/i)&&!i(/chrome/i)&&!i(/chromium/i)&&!i(/android/i)};m.isIOS=function(b){return b?i(RegExp("iP(hone|ad|od).+\\sOS\\s"+b,"i")):i(/iP(hone|ad|od)/i)};m.isAndroidNative=function(b){return m.isAndroid(b,!0)};m.isAndroid=function(d,c){return c&&i(/chrome\/[123456789]/i)&&!i(/chrome\/18/)?!1:d?(m.isInt(d)&&!/\./.test(d)&&(d=""+d+"."),i(RegExp("Android\\s*"+d,"i"))):i(/Android/i)};m.isMobile=function(){return m.isIOS()||m.isAndroid()};m.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName};m.saveCookie=function(d,c){document.cookie="jwplayer."+d+"\x3d"+c+"; path\x3d/"};m.getCookies=function(){for(var f={},e=document.cookie.split("; "),h=0;h<e.length;h++){var k=e[h].split("\x3d");0===k[0].indexOf("jwplayer.")&&(f[k[0].substring(9,k[0].length)]=k[1])}return f};m.isInt=function(b){return 0===parseFloat(b)%1};m.typeOf=function(d){if(null===d){return"null"}var c=typeof d;return"object"===c&&l.isArray(d)?"array":c};m.translateEventResponse=function(f,d){var k=m.extend({},d);if(f===j.events.JWPLAYER_FULLSCREEN&&!k.fullscreen){k.fullscreen="true"===k.message,delete k.message}else{if("object"===typeof k.data){var h=k.data;delete k.data;k=m.extend(k,h)}else{"object"===typeof k.metadata&&m.deepReplaceKeyName(k.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"])}}m.foreach(["position","duration","offset"],function(e,c){k[c]&&(k[c]=Math.round(1000*k[c])/1000)});return k};m.flashVersion=function(){if(m.isAndroid()){return 0}var f=navigator.plugins,d;try{if("undefined"!==f&&(d=f["Shockwave Flash"])){return parseInt(d.description.replace(/\D+(\d+)\..*/,"$1"),10)}}catch(k){}if("undefined"!==typeof window.ActiveXObject){try{if(d=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")){return parseInt(d.GetVariable("$version").split(" ")[1].split(",")[0],10)}}catch(h){}}return 0};m.getScriptPath=function(f){for(var e=document.getElementsByTagName("script"),h=0;h<e.length;h++){var k=e[h].src;if(k&&0<=k.indexOf(f)){return k.substr(0,k.indexOf(f))}}return""};m.deepReplaceKeyName=function(f,d,k){switch(j.utils.typeOf(f)){case"array":for(var h=0;h<f.length;h++){f[h]=j.utils.deepReplaceKeyName(f[h],d,k)}break;case"object":m.foreach(f,function(t,b){var q;if(d instanceof Array&&k instanceof Array){if(d.length!==k.length){return}q=d}else{q=[d]}for(var c=t,n=0;n<q.length;n++){c=c.replace(RegExp(d[n],"g"),k[n])}f[c]=j.utils.deepReplaceKeyName(b,d,k);t!==c&&delete f[t]})}return f};var o=m.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};m.getPluginPathType=function(e){if("string"===typeof e){e=e.split("?")[0];var d=e.indexOf("://");if(0<d){return o.ABSOLUTE}var f=e.indexOf("/");e=m.extension(e);return 0>d&&0>f&&(!e||!isNaN(e))?o.CDN:o.RELATIVE}};m.getPluginName=function(b){return b.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")};m.getPluginVersion=function(b){return b.replace(/[^-]*-?([^\.]*).*$/,"$1")};m.isYouTube=function(d,c){return"youtube"===c||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(d)};m.youTubeID=function(d){try{return/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(d).slice(1).join("").replace("?","")}catch(c){return""}};m.isRtmp=function(d,c){return 0===d.indexOf("rtmp")||"rtmp"===c};m.foreach=function(f,d){var k,h;for(k in f){"function"===m.typeOf(f.hasOwnProperty)?f.hasOwnProperty(k)&&(h=f[k],d(k,h)):(h=f[k],d(k,h))}};m.isHTTPS=function(){return 0===window.location.href.indexOf("https")};m.repo=function(){var d="http://p.jwpcdn.com/"+j.version.split(/\W/).splice(0,2).join("/")+"/";try{m.isHTTPS()&&(d=d.replace("http://","https://ssl."))}catch(c){}return d};m.versionCheck=function(f){f=("0"+f).split(/\W/);var e=j.version.split(/\W/),h=parseFloat(f[0]),k=parseFloat(e[0]);return h>k||h===k&&parseFloat("0"+f[1])>parseFloat(e[1])?!1:!0};m.ajax=function(B,A,z,y){var w,v=!1;0<B.indexOf("#")&&(B=B.replace(/#.*$/,""));if(B&&0<=B.indexOf("://")&&B.split("/")[2]!==window.location.href.split("/")[2]&&m.exists(window.XDomainRequest)){w=new window.XDomainRequest,w.onload=g(w,B,A,z,y),w.ontimeout=w.onprogress=function(){},w.timeout=5000}else{if(m.exists(window.XMLHttpRequest)){var x=w=new window.XMLHttpRequest,t=B;w.onreadystatechange=function(){if(4===x.readyState){switch(x.status){case 200:g(x,t,A,z,y)();break;case 404:z("File not found",t,x)}}}}else{return z&&z("",B,w),w}}w.overrideMimeType&&w.overrideMimeType("text/xml");var d=B,k=w;w.onerror=function(){z("Error loading file",d,k)};try{w.open("GET",B,!0)}catch(C){v=!0}setTimeout(function(){if(v){z&&z(B,B,w)}else{try{w.send()}catch(c){z&&z(B,B,w)}}},0);return w};m.parseXML=function(e){var d;try{if(window.DOMParser){if(d=(new window.DOMParser).parseFromString(e,"text/xml"),d.childNodes&&d.childNodes.length&&"parsererror"===d.childNodes[0].firstChild.nodeName){return}}else{d=new window.ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(e)}}catch(f){return}return d};m.between=function(e,d,f){return Math.max(Math.min(e,f),d)};m.seconds=function(e){if(l.isNumber(e)){return e}e=e.replace(",",".");var d=e.split(":"),f=0;"s"===e.slice(-1)?f=parseFloat(e):"m"===e.slice(-1)?f=60*parseFloat(e):"h"===e.slice(-1)?f=3600*parseFloat(e):1<d.length?(f=parseFloat(d[d.length-1]),f+=60*parseFloat(d[d.length-2]),3===d.length&&(f+=3600*parseFloat(d[d.length-3]))):f=parseFloat(e);return f};m.serialize=function(b){return null===b?null:"true"===b.toString().toLowerCase()?!0:"false"===b.toString().toLowerCase()?!1:isNaN(Number(b))||5<b.length||0===b.length?b:Number(b)};m.addClass=function(e,d){var k=l.isString(e.className)?e.className.split(" "):[],f=l.isArray(d)?d:d.split(" ");l.each(f,function(b){l.contains(k,b)||k.push(b)});e.className=m.trim(k.join(" "))};m.removeClass=function(e,d){var k=l.isString(e.className)?e.className.split(" "):[],f=l.isArray(d)?d:d.split(" ");e.className=m.trim(l.difference(k,f).join(" "))};m.indexOf=l.indexOf;m.noop=function(){};m.canCast=function(){var b=j.cast;return !(!b||!l.isFunction(b.available)||!b.available())}}(jwplayer),function(t){function w(d){var c=document.createElement("style");d&&c.appendChild(document.createTextNode(d));c.type="text/css";document.getElementsByTagName("head")[0].appendChild(c);return c}function o(b,f,e){if(!x.exists(f)){return""}e=e?" !important":"";return"string"===typeof f&&isNaN(f)?/png|gif|jpe?g/i.test(f)&&0>f.indexOf("url")?"url("+f+")":f+e:0===f||"z-index"===b||"opacity"===b?""+f+e:/color/i.test(b)?"#"+x.pad(f.toString(16).replace(/^0x/i,""),6)+e:Math.ceil(f)+"px"+e}function v(k,f){for(var A=0;A<k.length;A++){var z=k[A],n,p;if(void 0!==z&&null!==z){for(n in f){p=n;p=p.split("-");for(var m=1;m<p.length;m++){p[m]=p[m].charAt(0).toUpperCase()+p[m].slice(1)}p=p.join("");z.style[p]!==f[n]&&(z.style[p]=f[n])}}}}function u(a){var C=q[a].sheet,A,m,z;if(C){A=C.cssRules;m=l[a];z=a;var p=y[z];z+=" { ";for(var B in p){z+=B+": "+p[B]+"; "}z+="}";if(void 0!==m&&m<A.length&&A[m].selectorText===a){if(z===A[m].cssText){return}C.deleteRule(m)}else{m=A.length,l[a]=m}try{C.insertRule(z,m)}catch(h){}}}var x=t.utils,q={},j,y={},r=null,l={};x.cssKeyframes=function(h,c){var p=q.keyframes;p||(p=w(),q.keyframes=p);var p=p.sheet,n="@keyframes "+h+" { "+c+" }";try{p.insertRule(n,p.cssRules.length)}catch(k){}n=n.replace(/(keyframes|transform)/g,"-webkit-$1");try{p.insertRule(n,p.cssRules.length)}catch(m){}};var i=x.css=function(c,n,h){y[c]||(y[c]={});var a=y[c];h=h||!1;var g=!1,k,e;for(k in n){e=o(k,n[k],h),""!==e?e!==a[k]&&(a[k]=e,g=!0):void 0!==a[k]&&(delete a[k],g=!0)}if(g){if(!q[c]){n=j&&j.sheet&&j.sheet.cssRules&&j.sheet.cssRules.length||0;if(!j||50000<n){j=w()}q[c]=j}null!==r?r.styleSheets[c]=y[c]:u(c)}};i.style=function(g,d,p){if(!(void 0===g||null===g)){void 0===g.length&&(g=[g]);var n={},k;for(k in d){n[k]=o(k,d[k])}if(null!==r&&!p){d=(d=g.__cssRules)||{};for(var m in n){d[m]=n[m]}g.__cssRules=d;0>r.elements.indexOf(g)&&r.elements.push(g)}else{v(g,n)}}};i.block=function(b){null===r&&(r={id:b,styleSheets:{},elements:[]})};i.unblock=function(d){if(r&&(!d||r.id===d)){for(var c in r.styleSheets){u(c)}for(d=0;d<r.elements.length;d++){c=r.elements[d],v(c,c.__cssRules)}r=null}};x.clearCss=function(a){for(var f in y){0<=f.indexOf(a)&&delete y[f]}for(var e in q){0<=e.indexOf(a)&&u(e)}};x.transform=function(e,d){var f={};d=d||"";f.transform=d;f["-webkit-transform"]=d;f["-ms-transform"]=d;f["-moz-transform"]=d;f["-o-transform"]=d;"string"===typeof e?i(e,f):i.style(e,f)};x.dragStyle=function(d,c){i(d,{"-webkit-user-select":c,"-moz-user-select":c,"-ms-user-select":c,"-webkit-user-drag":c,"user-select":c,"user-drag":c})};x.transitionStyle=function(d,c){navigator.userAgent.match(/5\.\d(\.\d)? safari/i)||i(d,{"-webkit-transition":c,"-moz-transition":c,"-o-transition":c,transition:c})};x.rotate=function(b,d){x.transform(b,"rotate("+d+"deg)")};x.rgbHex=function(b){b=String(b).replace("#","");3===b.length&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]);return"#"+b.substr(-6)};x.hexToRgba=function(f,e){var h="rgb",g=[parseInt(f.substr(1,2),16),parseInt(f.substr(3,2),16),parseInt(f.substr(5,2),16)];void 0!==e&&100!==e&&(h+="a",g.push(e/100));return h+"("+g.join(",")+")"}}(jwplayer),function(b){var i=b.foreach,a={mp4:"video/mp4",ogg:"video/ogg",oga:"audio/ogg",vorbis:"audio/ogg",webm:"video/webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"},h={mp4:a.mp4,f4v:a.mp4,m4v:a.mp4,mov:a.mp4,m4a:a.aac,f4a:a.aac,aac:a.aac,mp3:a.mp3,ogv:a.ogg,ogg:a.ogg,oga:a.vorbis,vorbis:a.vorbis,webm:a.webm,m3u8:a.hls,m3u:a.hls,hls:a.hls},g=b.extensionmap={};i(h,function(d,e){g[d]={html5:e}});i({flv:"video",f4v:"video",mov:"video",m4a:"video",m4v:"video",mp4:"video",aac:"video",f4a:"video",mp3:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},function(d,e){g[d]||(g[d]={});g[d].flash=e});g.types=a;g.mimeType=function(c){var e;i(a,function(f,d){!e&&d==c&&(e=f)});return e};g.extType=function(c){return g.mimeType(h[c])}}(jwplayer.utils),function(b){var d=b.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},a=document;b.scriptloader=function(j){function i(e){f=d.ERROR;k.sendEvent(g.ERROR,e)}function c(e){f=d.COMPLETE;k.sendEvent(g.COMPLETE,e)}var g=jwplayer.events,k=b.extend(this,new g.eventdispatcher),f=d.NEW;this.load=function(){if(f==d.NEW){var e=b.scriptloader.loaders[j];if(e&&(f=e.getStatus(),2>f)){e.addEventListener(g.ERROR,i);e.addEventListener(g.COMPLETE,c);return}var h=a.createElement("script");h.addEventListener?(h.onload=c,h.onerror=i):h.readyState&&(h.onreadystatechange=function(l){("loaded"==h.readyState||"complete"==h.readyState)&&c(l)});a.getElementsByTagName("head")[0].appendChild(h);h.src=j;f=d.LOADING;b.scriptloader.loaders[j]=this}};this.getStatus=function(){return f}};b.scriptloader.loaders={}}(jwplayer.utils),function(a){a.trim=function(b){return b.replace(/^\s+|\s+$/g,"")};a.pad=function(g,b,e){for(e||(e="0");g.length<b;){g=e+g}return g};a.xmlAttribute=function(g,b){for(var e=0;e<g.attributes.length;e++){if(g.attributes[e].name&&g.attributes[e].name.toLowerCase()===b.toLowerCase()){return g.attributes[e].value.toString()}}return""};a.extension=function(d){if(!d||"rtmp"===d.substr(0,4)){return""}var b;b=-1<d.indexOf("(format\x3dm3u8-")?"m3u8":!1;if(b){return b}d=d.substring(d.lastIndexOf("/")+1,d.length).split("?")[0].split("#")[0];if(-1<d.lastIndexOf(".")){return d.substr(d.lastIndexOf(".")+1,d.length).toLowerCase()}};a.stringToColor=function(b){b=b.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2");3===b.length&&(b=b.charAt(0)+b.charAt(0)+b.charAt(1)+b.charAt(1)+b.charAt(2)+b.charAt(2));return parseInt(b,16)}}(jwplayer.utils),function(b){var d="touchmove",a="touchstart";b.touch=function(r){function q(e){e.type===a?(u=!0,i=k(j.DRAG_START,e)):e.type===d?u&&(c||(t(j.DRAG_START,e,i),c=!0),t(j.DRAG,e)):(u&&(c?t(j.DRAG_END,e):(e.cancelBubble=!0,t(j.TAP,e))),u=c=!1,i=null)}function t(g,e,h){if(o[g]&&(e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault(),e=h?h:k(g,e))){o[g](e)}}function k(g,e){var l=null;e.touches&&e.touches.length?l=e.touches[0]:e.changedTouches&&e.changedTouches.length&&(l=e.changedTouches[0]);if(!l){return null}var h=f.getBoundingClientRect(),l={type:g,target:f,x:l.pageX-window.pageXOffset-h.left,y:l.pageY,deltaX:0,deltaY:0};g!==j.TAP&&i&&(l.deltaX=l.x-i.x,l.deltaY=l.y-i.y);return l}var f=r,u=!1,o={},i=null,c=!1,j=b.touchEvents;document.addEventListener(d,q);document.addEventListener("touchend",function(e){u&&c&&t(j.DRAG_END,e);u=c=!1;i=null});document.addEventListener("touchcancel",q);r.addEventListener(a,q);r.addEventListener("touchend",q);this.addEventListener=function(g,e){o[g]=e};this.removeEventListener=function(e){delete o[e]};return this}}(jwplayer.utils),function(a){a.touchEvents={DRAG:"jwplayerDrag",DRAG_START:"jwplayerDragStart",DRAG_END:"jwplayerDragEnd",TAP:"jwplayerTap"}}(jwplayer.utils),function(a){a.key=function(m){var g,l,j;this.edition=function(){return j&&j.getTime()<(new Date).getTime()?"invalid":g};this.token=function(){return l};a.exists(m)||(m="");try{m=a.tea.decrypt(m,"36QXq4W@GSBV^teR");var f=m.split("/");(g=f[0])?/^(free|pro|premium|enterprise|ads)$/i.test(g)?(l=f[1],f[2]&&0<parseInt(f[2])&&(j=new Date,j.setTime(String(f[2])))):g="invalid":g="free"}catch(i){g="invalid"}}}(jwplayer.utils),function(b){var g=b.tea={};g.encrypt=function(r,u){if(0==r.length){return""}var n=g.strToLongs(e.encode(r));1>=n.length&&(n[1]=0);for(var q=g.strToLongs(e.encode(u).slice(0,16)),v=n.length,o=n[v-1],d=n[0],c,i=Math.floor(6+52/v),k=0;0<i--;){k+=2654435769;c=k>>>2&3;for(var w=0;w<v;w++){d=n[(w+1)%v],o=(o>>>5^d<<2)+(d>>>3^o<<4)^(k^d)+(q[w&3^c]^o),o=n[w]+=o}}n=g.longsToStr(n);return a.encode(n)};g.decrypt=function(r,t){if(0==r.length){return""}for(var n=g.strToLongs(a.decode(r)),q=g.strToLongs(e.encode(t).slice(0,16)),u=n.length,o=n[u-1],d=n[0],c,i=2654435769*Math.floor(6+52/u);0!=i;){c=i>>>2&3;for(var k=u-1;0<=k;k--){o=n[0<k?k-1:u-1],o=(o>>>5^d<<2)+(d>>>3^o<<4)^(i^d)+(q[k&3^c]^o),d=n[k]-=o}i-=2654435769}n=g.longsToStr(n);n=n.replace(/\0+$/,"");return e.decode(n)};g.strToLongs=function(i){for(var f=Array(Math.ceil(i.length/4)),h=0;h<f.length;h++){f[h]=i.charCodeAt(4*h)+(i.charCodeAt(4*h+1)<<8)+(i.charCodeAt(4*h+2)<<16)+(i.charCodeAt(4*h+3)<<24)}return f};g.longsToStr=function(i){for(var f=Array(i.length),h=0;h<i.length;h++){f[h]=String.fromCharCode(i[h]&255,i[h]>>>8&255,i[h]>>>16&255,i[h]>>>24&255)}return f.join("")};var a={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d",encode:function(u,v){var o,r,w,q,i=[],d="",k,n,x=a.code;n=("undefined"==typeof v?0:v)?e.encode(u):u;k=n.length%3;if(0<k){for(;3>k++;){d+="\x3d",n+="\x00"}}for(k=0;k<n.length;k+=3){o=n.charCodeAt(k),r=n.charCodeAt(k+1),w=n.charCodeAt(k+2),q=o<<16|r<<8|w,o=q>>18&63,r=q>>12&63,w=q>>6&63,q&=63,i[k/3]=x.charAt(o)+x.charAt(r)+x.charAt(w)+x.charAt(q)}i=i.join("");return i=i.slice(0,i.length-d.length)+d},decode:function(u,v){v="undefined"==typeof v?!1:v;var o,r,w,q,i,d=[],k,n=a.code;k=v?e.decode(u):u;for(var x=0;x<k.length;x+=4){o=n.indexOf(k.charAt(x)),r=n.indexOf(k.charAt(x+1)),q=n.indexOf(k.charAt(x+2)),i=n.indexOf(k.charAt(x+3)),w=o<<18|r<<12|q<<6|i,o=w>>>16&255,r=w>>>8&255,w&=255,d[x/4]=String.fromCharCode(o,r,w),64==i&&(d[x/4]=String.fromCharCode(o,r)),64==q&&(d[x/4]=String.fromCharCode(o))}q=d.join("");return v?e.decode(q):q}},e={encode:function(d){d=d.replace(/[\u0080-\u07ff]/g,function(c){c=c.charCodeAt(0);return String.fromCharCode(192|c>>6,128|c&63)});return d=d.replace(/[\u0800-\uffff]/g,function(c){c=c.charCodeAt(0);return String.fromCharCode(224|c>>12,128|c>>6&63,128|c&63)})},decode:function(d){d=d.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(c){c=(c.charCodeAt(0)&15)<<12|(c.charCodeAt(1)&63)<<6|c.charCodeAt(2)&63;return String.fromCharCode(c)});return d=d.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(c){c=(c.charCodeAt(0)&31)<<6|c.charCodeAt(1)&63;return String.fromCharCode(c)})}}}(jwplayer.utils),function(a){a.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_SETUP_ERROR:"jwplayerSetupError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_AUDIO_TRACKS:"jwplayerAudioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"jwplayerAudioTrackChanged",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_CAPTIONS_LOADED:"jwplayerCaptionsLoaded",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_PROVIDER_CLICK:"jwplayerProviderClick",JWPLAYER_VIEW_TAB_FOCUS:"jwplayerViewTabFocus",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_USER_ACTION:"jwplayerUserAction",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed",JWPLAYER_AD_TIME:"jwplayerAdTime",JWPLAYER_AD_ERROR:"jwplayerAdError",JWPLAYER_AD_CLICK:"jwplayerAdClicked",JWPLAYER_AD_COMPLETE:"jwplayerAdComplete",JWPLAYER_AD_IMPRESSION:"jwplayerAdImpression",JWPLAYER_AD_COMPANIONS:"jwplayerAdCompanions",JWPLAYER_AD_SKIPPED:"jwplayerAdSkipped",JWPLAYER_AD_PLAY:"jwplayerAdPlay",JWPLAYER_AD_PAUSE:"jwplayerAdPause",JWPLAYER_AD_META:"jwplayerAdMeta",JWPLAYER_CAST_AVAILABLE:"jwplayerCastAvailable",JWPLAYER_CAST_SESSION:"jwplayerCastSession",JWPLAYER_CAST_AD_CHANGED:"jwplayerCastAdChanged"}}(jwplayer),function(a){var b=a.utils;a.events.eventdispatcher=function(f,j){function i(k,l,p){if(k){for(var o=0;o<k.length;o++){var m=k[o];if(m){null!==m.count&&0===--m.count&&delete k[o];try{m.listener(l)}catch(n){b.log('Error handling "'+p+'" event listener ['+o+"]: "+n.toString(),m.listener,l)}}}}}var c,g;this.resetEventListeners=function(){c={};g=[]};this.resetEventListeners();this.addEventListener=function(m,h,k){try{b.exists(c[m])||(c[m]=[]),"string"===b.typeOf(h)&&(h=(new Function("return "+h))()),c[m].push({listener:h,count:k||null})}catch(l){b.log("error",l)}return !1};this.removeEventListener=function(m,h){var k;if(c[m]){try{if(void 0===h){c[m]=[];return}for(k=0;k<c[m].length;k++){if(c[m][k].listener.toString()===h.toString()){c[m].splice(k,1);break}}}catch(l){b.log("error",l)}return !1}};this.addGlobalListener=function(e,h){try{"string"===b.typeOf(e)&&(e=(new Function("return "+e))()),g.push({listener:e,count:h||null})}catch(k){b.log("error",k)}return !1};this.removeGlobalListener=function(e){if(e){try{for(var h=g.length;h--;){g[h].listener.toString()===e.toString()&&g.splice(h,1)}}catch(k){b.log("error",k)}return !1}};this.sendEvent=function(e,d){b.exists(d)||(d={});b.extend(d,{id:f,version:a.version,type:e});j&&b.log(e,d);i(c[e],d,e);i(g,d,e)}}}(window.jwplayer),function(b){var d={},a={};b.plugins=function(){};b.plugins.loadPlugins=function(f,c){a[f]=new b.plugins.pluginloader(new b.plugins.model(d),c);return a[f]};b.plugins.registerPlugin=function(i,g,c,f){var j=b.utils.getPluginName(i);d[j]||(d[j]=new b.plugins.plugin(i));d[j].registerPlugin(i,g,c,f)}}(jwplayer),function(a){a.plugins.model=function(b){this.addPlugin=function(c){var e=a.utils.getPluginName(c);b[e]||(b[e]=new a.plugins.plugin(c));return b[e]};this.getPlugins=function(){return b}}}(jwplayer),function(b){var d=jwplayer.utils,a=jwplayer.events;b.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2};b.plugin=function(r){function q(){switch(d.getPluginPathType(r)){case d.pluginPathType.ABSOLUTE:return r;case d.pluginPathType.RELATIVE:return d.getAbsolutePath(r,window.location.href)}}function t(){c=setTimeout(function(){f=d.loaderstatus.COMPLETE;j.sendEvent(a.COMPLETE)},1000)}function k(){f=d.loaderstatus.ERROR;j.sendEvent(a.ERROR,{url:r})}var f=d.loaderstatus.NEW,u,o,i,c,j=new a.eventdispatcher;d.extend(this,j);this.load=function(){if(f===d.loaderstatus.NEW){if(0<r.lastIndexOf(".swf")){u=r,f=d.loaderstatus.COMPLETE,j.sendEvent(a.COMPLETE)}else{if(d.getPluginPathType(r)===d.pluginPathType.CDN){f=d.loaderstatus.COMPLETE,j.sendEvent(a.COMPLETE)}else{f=d.loaderstatus.LOADING;var e=new d.scriptloader(q());e.addEventListener(a.COMPLETE,t);e.addEventListener(a.ERROR,k);e.load()}}}};this.registerPlugin=function(g,n,m,l){c&&(clearTimeout(c),c=void 0);i=n;m&&l?(u=l,o=m):"string"===typeof m?u=m:"function"===typeof m?o=m:!m&&!l&&(u=g);f=d.loaderstatus.COMPLETE;j.sendEvent(a.COMPLETE)};this.getStatus=function(){return f};this.getPluginName=function(){return d.getPluginName(r)};this.getFlashPath=function(){if(u){switch(d.getPluginPathType(u)){case d.pluginPathType.ABSOLUTE:return u;case d.pluginPathType.RELATIVE:return 0<r.lastIndexOf(".swf")?d.getAbsolutePath(u,window.location.href):d.getAbsolutePath(u,q())}}return null};this.getJS=function(){return o};this.getTarget=function(){return i};this.getPluginmode=function(){if("undefined"!==typeof u&&"undefined"!==typeof o){return b.pluginmodes.HYBRID}if("undefined"!==typeof u){return b.pluginmodes.FLASH}if("undefined"!==typeof o){return b.pluginmodes.JAVASCRIPT}};this.getNewInstance=function(g,e,h){return new o(g,e,h)};this.getURL=function(){return r}}}(jwplayer.plugins),function(b){var i=b.utils,a=b.events,h=b._,g=i.foreach;b.plugins.pluginloader=function(r,n){function q(){c||(c=!0,d=i.loaderstatus.COMPLETE,w.sendEvent(a.COMPLETE))}function u(){(!e||0===h.keys(e).length)&&q();if(!c){var f=r.getPlugins();x=h.after(k,q);i.foreach(e,function(j){j=i.getPluginName(j);var m=f[j];j=m.getJS();var l=m.getTarget(),m=m.getStatus();m===i.loaderstatus.LOADING||m===i.loaderstatus.NEW||(j&&!i.versionCheck(l)&&w.sendEvent(a.ERROR,{message:"Incompatible player version"}),x())})}}function o(f){w.sendEvent(a.ERROR,{message:"File not found"});f.url&&i.log("File not found",f.url);x()}var d=i.loaderstatus.NEW,c=!1,e=n,k=h.size(e),x,w=new a.eventdispatcher;i.extend(this,w);this.setupPlugins=function(p,A,y){var v={length:0,plugins:{}},z=0,t={},l=r.getPlugins();g(A.plugins,function(E,C){var j=i.getPluginName(E),B=l[j],m=B.getFlashPath(),f=B.getJS(),F=B.getURL();m&&(v.plugins[m]=i.extend({},C),v.plugins[m].pluginmode=B.getPluginmode(),v.length++);try{if(f&&A.plugins&&A.plugins[F]){var G=document.createElement("div");G.id=p.id+"_"+j;G.style.position="absolute";G.style.top=0;G.style.zIndex=z+10;t[j]=B.getNewInstance(p,i.extend({},A.plugins[F]),G);z++;p.onReady(y(t[j],G,!0));p.onResize(y(t[j],G))}}catch(D){i.log("ERROR: Failed to load "+j+".")}});p.plugins=t;return v};this.load=function(){if(!(i.exists(n)&&"object"!==i.typeOf(n))){d=i.loaderstatus.LOADING;g(n,function(j){i.exists(j)&&(j=r.addPlugin(j),j.addEventListener(a.COMPLETE,u),j.addEventListener(a.ERROR,o))});var f=r.getPlugins();g(f,function(l,j){j.load()})}u()};this.destroy=function(){w&&(w.resetEventListeners(),w=null)};this.pluginFailed=o;this.getStatus=function(){return d}}}(jwplayer),function(a){a.parsers={localName:function(b){return b?b.localName?b.localName:b.baseName?b.baseName:"":""},textContent:function(b){return b?b.textContent?a.utils.trim(b.textContent):b.text?a.utils.trim(b.text):"":""},getChildNode:function(d,b){return d.childNodes[b]},numChildren:function(b){return b.childNodes?b.childNodes.length:0}}}(jwplayer),function(a){var b=a.parsers;(b.jwparser=function(){}).parseEntry=function(i,o){for(var m=[],c=[],j=a.utils.xmlAttribute,p=0;p<i.childNodes.length;p++){var f=i.childNodes[p];if("jwplayer"==f.prefix){var l=b.localName(f);"source"==l?(delete o.sources,m.push({file:j(f,"file"),"default":j(f,"default"),label:j(f,"label"),type:j(f,"type")})):"track"==l?(delete o.tracks,c.push({file:j(f,"file"),"default":j(f,"default"),kind:j(f,"kind"),label:j(f,"label")})):(o[l]=a.utils.serialize(b.textContent(f)),"file"==l&&o.sources&&delete o.sources)}o.file||(o.file=o.link)}if(m.length){o.sources=[];for(p=0;p<m.length;p++){0<m[p].file.length&&(m[p]["default"]="true"==m[p]["default"]?!0:!1,m[p].label.length||delete m[p].label,o.sources.push(m[p]))}}if(c.length){o.tracks=[];for(p=0;p<c.length;p++){0<c[p].file.length&&(c[p]["default"]="true"==c[p]["default"]?!0:!1,c[p].kind=!c[p].kind.length?"captions":c[p].kind,c[p].label.length||delete c[p].label,o.tracks.push(c[p]))}}return o}}(jwplayer),function(j){var n=jwplayer.utils,g=n.xmlAttribute,m=j.localName,l=j.textContent,a=j.numChildren,i=j.mediaparser=function(){};i.parseGroup=function(o,d){var k,b,q=[];for(b=0;b<a(o);b++){if(k=o.childNodes[b],"media"==k.prefix&&m(k)){switch(m(k).toLowerCase()){case"content":g(k,"duration")&&(d.duration=n.seconds(g(k,"duration")));0<a(k)&&(d=i.parseGroup(k,d));g(k,"url")&&(d.sources||(d.sources=[]),d.sources.push({file:g(k,"url"),type:g(k,"type"),width:g(k,"width"),label:g(k,"label")}));break;case"title":d.title=l(k);break;case"description":d.description=l(k);break;case"guid":d.mediaid=l(k);break;case"thumbnail":d.image||(d.image=g(k,"url"));break;case"group":i.parseGroup(k,d);break;case"subtitle":var c={};c.file=g(k,"url");c.kind="captions";if(0<g(k,"lang").length){var e=c;k=g(k,"lang");var h={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};k=h[k]?h[k]:k;e.label=k}q.push(c)}}}d.hasOwnProperty("tracks")||(d.tracks=[]);for(b=0;b<q.length;b++){d.tracks.push(q[b])}return d}}(jwplayer.parsers),function(j){function n(d){for(var f={},o=0;o<d.childNodes.length;o++){var k=d.childNodes[o],h=i(k);if(h){switch(h.toLowerCase()){case"enclosure":f.file=g.xmlAttribute(k,"url");break;case"title":f.title=m(k);break;case"guid":f.mediaid=m(k);break;case"pubdate":f.date=m(k);break;case"description":f.description=m(k);break;case"link":f.link=m(k);break;case"category":f.tags=f.tags?f.tags+m(k):m(k)}}}f=j.mediaparser.parseGroup(d,f);f=j.jwparser.parseEntry(d,f);return new jwplayer.playlist.item(f)}var g=jwplayer.utils,m=j.textContent,l=j.getChildNode,a=j.numChildren,i=j.localName;j.rssparser={};j.rssparser.parse=function(p){for(var c=[],h=0;h<a(p);h++){var o=l(p,h);if("channel"==i(o).toLowerCase()){for(var e=0;e<a(o);e++){var b=l(o,e);"item"==i(b).toLowerCase()&&c.push(n(b))}}}return c}}(jwplayer.parsers),function(b){var g=b.utils,a=b._;b.playlist=function(f){var d=[];f=a.isArray(f)?f:[f];a.each(f,function(h){d.push(new b.playlist.item(h))});return d};b.playlist.filterPlaylist=function(f,c){var d=[];a.each(f,function(i){i=g.extend({},i);i.sources=e(i.sources,!1,c);if(i.sources.length){for(var h=0;h<i.sources.length;h++){i.sources[h].label=i.sources[h].label||h.toString()}d.push(i)}});return d};var e=b.playlist.filterSources=function(k,c,i){var l,f=[],j=c?b.embed.flashCanPlay:b.embed.html5CanPlay;if(k){return a.each(k,function(h){if(!h||!h.file){h=void 0}else{var n=g.trim(""+h.file),m=h.type;m||(m=g.extension(n),m=g.extensionmap.extType(m));h=g.extend({},h,{file:n,type:m})}h&&j(h.file,h.type,i)&&(l=l||h.type,h.type===l&&f.push(h))}),f}}}(jwplayer),function(a){var b=a.item=function(f){var j=jwplayer.utils,i=j.extend({},b.defaults,f),c,g;i.tracks=f&&j.exists(f.tracks)?f.tracks:[];0===i.sources.length&&(i.sources=[new a.source(i)]);for(c=0;c<i.sources.length;c++){g=i.sources[c]["default"],i.sources[c]["default"]=g?"true"==g.toString():!1,i.sources[c]=new a.source(i.sources[c])}if(i.captions&&!j.exists(f.tracks)){for(f=0;f<i.captions.length;f++){i.tracks.push(i.captions[f])}delete i.captions}for(c=0;c<i.tracks.length;c++){i.tracks[c]=new a.track(i.tracks[c])}return i};b.defaults={description:void 0,image:void 0,mediaid:void 0,title:void 0,sources:[],tracks:[]}}(jwplayer.playlist),function(b){var g=b.utils,a=b.events,e=b.parsers;b.playlist.loader=function(){function f(k){try{var h=k.responseXML.childNodes;k="";for(var n=0;n<h.length&&!(k=h[n],8!==k.nodeType);n++){}"xml"===e.localName(k)&&(k=k.nextSibling);if("rss"!==e.localName(k)){d("Not a valid RSS feed")}else{var m=new b.playlist(e.rssparser.parse(k));i.sendEvent(a.JWPLAYER_PLAYLIST_LOADED,{playlist:m})}}catch(j){d()}}function c(h){d(h.match(/invalid/i)?"Not a valid RSS feed":"")}function d(h){i.sendEvent(a.JWPLAYER_ERROR,{message:h?h:"Error loading file"})}var i=new a.eventdispatcher;g.extend(this,i);this.load=function(h){g.ajax(h,f,c)}}}(jwplayer),function(b){var d=jwplayer.utils,a={file:void 0,label:void 0,type:void 0,"default":void 0};b.source=function(f){var c=d.extend({},a);d.foreach(a,function(e){d.exists(f[e])&&(c[e]=f[e],delete f[e])});c.type&&0<c.type.indexOf("/")&&(c.type=d.extensionmap.mimeType(c.type));"m3u8"==c.type&&(c.type="hls");"smil"==c.type&&(c.type="rtmp");return c}}(jwplayer.playlist),function(b){var d=jwplayer.utils,a={file:void 0,label:void 0,kind:"captions","default":!1};b.track=function(f){var c=d.extend({},a);f||(f={});d.foreach(a,function(e){d.exists(f[e])&&(c[e]=f[e],delete f[e])});return c}}(jwplayer.playlist),function(h){function l(e,m,f){var k=e.style;k.backgroundColor="#000";k.color="#FFF";k.width=g.styleDimension(f.width);k.height=g.styleDimension(f.height);k.display="table";k.opacity=1;f=document.createElement("p");k=f.style;k.verticalAlign="middle";k.textAlign="center";k.display="table-cell";k.font="15px/20px Arial, Helvetica, sans-serif";f.innerHTML=m.replace(":",":\x3cbr\x3e");e.innerHTML="";e.appendChild(f)}var g=h.utils,j=h.events,i=h._,a=h.embed=function(N){function J(){if(!b){var q=M.playlist;if(i.isArray(q)){if(0===q.length){K();return}if(1===q.length&&(!q[0].sources||0===q[0].sources.length||!q[0].sources[0].file)){K();return}}if(!c){if(i.isString(q)){d=new h.playlist.loader,d.addEventListener(j.JWPLAYER_PLAYLIST_LOADED,function(r){M.playlist=r.playlist;c=!1;J()}),d.addEventListener(j.JWPLAYER_ERROR,function(r){c=!1;K(r)}),c=!0,d.load(M.playlist)}else{if(k.getStatus()===g.loaderstatus.COMPLETE){for(q=0;q<M.modes.length;q++){var p=M.modes[q],n=p.type;if(n&&a[n]){var m=g.extend({},M),p=new a[n](A,p,m,k,N);if(p.supportsConfig()){return p.addEventListener(j.ERROR,P),p.embed(),g.css("object.jwswf, .jwplayer:focus",{outline:"none"}),g.css(".jw-tab-focus:focus",{outline:"solid 2px #0B7EF4"}),N}}}M.fallback?(q="No suitable players found and fallback enabled",I(q,!0),g.log(q),new a.download(A,M,K)):(q="No suitable players found and fallback disabled",I(q,!1),g.log(q),A.parentNode.replaceChild(B,A))}}}}}function P(m){L(G+m.message)}function O(m){N.dispatchEvent(j.JWPLAYER_ERROR,{message:"Could not load plugin: "+m.message})}function K(m){m&&m.message?L("Error loading playlist: "+m.message):L(G+"No playable sources found")}function I(n,m){clearTimeout(f);f=setTimeout(function(){N.dispatchEvent(j.JWPLAYER_SETUP_ERROR,{message:n,fallback:m})},0)}function L(m){b||(M.fallback?(b=!0,l(A,m,M),I(m,!0)):I(m,!1))}var M=new a.config(N.config),z=M.width,e=M.height,G="Error loading player: ",H=document.getElementById(N.id),k=h.plugins.loadPlugins(N.id,M.plugins),d,c=!1,b=!1,f=-1,B=null;M.fallbackDiv&&(B=M.fallbackDiv,delete M.fallbackDiv);M.id=N.id;M.aspectratio?N.config.aspectratio=M.aspectratio:delete N.config.aspectratio;var o=N;g.foreach(M.events,function(n,m){var p=o[n];"function"===typeof p&&p.call(o,m)});var A=document.createElement("div");A.id=H.id;A.style.width=0<z.toString().indexOf("%")?z:z+"px";A.style.height=0<e.toString().indexOf("%")?e:e+"px";H.parentNode.replaceChild(A,H);this.embed=function(){b||(k.addEventListener(j.COMPLETE,J),k.addEventListener(j.ERROR,O),k.load())};this.destroy=function(){k&&(k.destroy(),k=null);d&&(d.resetEventListeners(),d=null)};this.errorScreen=L;return this};h.embed.errorScreen=l}(jwplayer),function(b){function i(d){if(d.playlist){for(var j=0;j<d.playlist.length;j++){d.playlist[j]=new g(d.playlist[j])}}else{var e={};h.foreach(g.defaults,function(c){a(d,e,c)});e.sources||(d.levels?(e.sources=d.levels,delete d.levels):(j={},a(d,j,"file"),a(d,j,"type"),e.sources=j.file?[j]:[]));d.playlist=[new g(e)]}}function a(d,j,f){h.exists(d[f])&&(j[f]=d[f],delete d[f])}var h=b.utils,g=b.playlist.item;(b.embed.config=function(c){var j={fallback:!0,height:270,primary:"html5",width:480,base:c.base?c.base:h.getScriptPath("jwplayer.js"),aspectratio:""};c=h.extend({},j,b.defaults,c);var j={type:"html5",src:c.base+"jwplayer.html5.js"},f={type:"flash",src:c.base+"jwplayer.flash.swf"};c.modes="flash"===c.primary?[f,j]:[j,f];c.listbar&&(c.playlistsize=c.listbar.size,c.playlistposition=c.listbar.position,c.playlistlayout=c.listbar.layout);c.flashplayer&&(f.src=c.flashplayer);c.html5player&&(j.src=c.html5player);i(c);f=c.aspectratio;if("string"!==typeof f||!h.exists(f)){j=0}else{var d=f.indexOf(":");-1===d?j=0:(j=parseFloat(f.substr(0,d)),f=parseFloat(f.substr(d+1)),j=0>=j||0>=f?0:100*(f/j)+"%")}-1===c.width.toString().indexOf("%")?delete c.aspectratio:j?c.aspectratio=j:delete c.aspectratio;return c}).addConfig=function(c,d){i(d);return h.extend(c,d)}}(jwplayer),function(b){var d=b.utils,a=b.utils.css;b.embed.download=function(A,z,B){function y(f,e,g){f=document.createElement(f);e&&(f.className="jwdownload"+e);g&&g.appendChild(f);return f}var k=d.extend({},z),C,x=k.width?k.width:480,o=k.height?k.height:320,i;z=z.logo?z.logo:{prefix:d.repo(),file:"logo.png",margin:10};var u,w,E,D,c,h;w=k.playlist;k=["mp4","aac","mp3"];if(w&&w.length){E=w[0];D=E.sources;for(w=0;w<D.length;w++){c=D[w],c.file&&(h=c.type||d.extensionmap.extType(d.extension(c.file)),0<=d.indexOf(k,h)?(C=c.file,i=E.image):d.isYouTube(c.file,h)&&(u=c.file))}C?(B=C,A&&(C=y("a","display",A),y("div","icon",C),y("div","logo",C),B&&C.setAttribute("href",d.getAbsolutePath(B))),B="#"+A.id+" .jwdownload",A.style.width="",A.style.height="",a(B+"display",{width:d.styleDimension(Math.max(320,x)),height:d.styleDimension(Math.max(180,o)),background:"black center no-repeat "+(i?"url("+i+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),a(B+"display div",{position:"absolute",width:"100%",height:"100%"}),a(B+"logo",{top:z.margin+"px",right:z.margin+"px",background:"top right no-repeat url("+z.prefix+z.file+")"}),a(B+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):u?(z=u,A=y("iframe","",A),A.src="http://www.youtube.com/embed/"+d.youTubeID(z),A.width=x,A.height=o,A.style.border="none"):B()}}}(jwplayer),function(b){var i=b.utils,a=b.events,h={};(b.embed.flash=function(r,o,d,u,q){function e(l,j,n){var m=document.createElement("param");m.setAttribute("name",j);m.setAttribute("value",n);l.appendChild(m)}function c(l,j,m){return function(){try{m&&document.getElementById(q.id+"_wrapper").appendChild(j);var p=document.getElementById(q.id).getPluginConfig("display");"function"===typeof l.resize&&l.resize(p.width,p.height);j.style.left=p.x;j.style.top=p.h}catch(n){}}}function f(l){if(!l){return{}}var j={},m=[];i.foreach(l,function(n,t){var p=i.getPluginName(n);m.push(n);i.foreach(t,function(w,x){j[p+"."+w]=x})});j.plugins=m.join(",");return j}var k=new b.events.eventdispatcher,v=i.flashVersion();i.extend(this,k);this.embed=function(){d.id=q.id;if(10>v){return k.sendEvent(a.ERROR,{message:"Flash version must be 10.0 or greater"}),!1}var p,n,m=q.config.listbar,l=i.extend({},d);if(r.id+"_wrapper"===r.parentNode.id){p=document.getElementById(r.id+"_wrapper")}else{p=document.createElement("div");n=document.createElement("div");n.style.display="none";n.id=r.id+"_aspect";p.id=r.id+"_wrapper";p.style.position="relative";p.style.display="block";p.style.width=i.styleDimension(l.width);p.style.height=i.styleDimension(l.height);if(q.config.aspectratio){var j=parseFloat(q.config.aspectratio);n.style.display="block";n.style.marginTop=q.config.aspectratio;p.style.height="auto";p.style.display="inline-block";m&&("bottom"===m.position?n.style.paddingBottom=m.size+"px":"right"===m.position&&(n.style.marginBottom=-1*m.size*(j/100)+"px"))}r.parentNode.replaceChild(p,r);p.appendChild(r);p.appendChild(n)}p=u.setupPlugins(q,l,c);0<p.length?i.extend(l,f(p.plugins)):delete l.plugins;"undefined"!==typeof l["dock.position"]&&"false"===l["dock.position"].toString().toLowerCase()&&(l.dock=l["dock.position"],delete l["dock.position"]);p=l.wmode||(l.height&&40>=l.height?"transparent":"opaque");n="height width modes events primary base fallback volume".split(" ");for(m=0;m<n.length;m++){delete l[n[m]]}n=i.getCookies();i.foreach(n,function(w,t){"undefined"===typeof l[w]&&(l[w]=t)});n=window.location.href.split("/");n.splice(n.length-1,1);n=n.join("/");l.base=n+"/";h[r.id]=l;i.isMSIE()?(n='\x3cobject classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" " width\x3d"100%" height\x3d"100%"id\x3d"'+r.id+'" name\x3d"'+r.id+'" tabindex\x3d0""\x3e',n+='\x3cparam name\x3d"movie" value\x3d"'+o.src+'"\x3e',n+='\x3cparam name\x3d"allowfullscreen" value\x3d"true"\x3e\x3cparam name\x3d"allowscriptaccess" value\x3d"always"\x3e',n+='\x3cparam name\x3d"seamlesstabbing" value\x3d"true"\x3e',n+='\x3cparam name\x3d"wmode" value\x3d"'+p+'"\x3e',n+='\x3cparam name\x3d"bgcolor" value\x3d"#000000"\x3e',n+="\x3c/object\x3e",r.outerHTML=n,p=document.getElementById(r.id)):(n=document.createElement("object"),n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("data",o.src),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("bgcolor","#000000"),n.setAttribute("id",r.id),n.setAttribute("name",r.id),n.className="jwswf",e(n,"allowfullscreen","true"),e(n,"allowscriptaccess","always"),e(n,"seamlesstabbing","true"),e(n,"wmode",p),r.parentNode.replaceChild(n,r),p=n);q.config.aspectratio&&(p.style.position="absolute");q.container=p;q.setPlayer(p,"flash")};this.supportsConfig=function(){if(v){if(d){if("string"===i.typeOf(d.playlist)){return !0}try{var l=d.playlist[0].sources;if("undefined"===typeof l){return !0}for(var j=0;j<l.length;j++){if(l[j].file&&g(l[j].file,l[j].type)){return !0}}}catch(m){}}else{return !0}}return !1}}).getVars=function(c){return h[c]};var g=b.embed.flashCanPlay=function(c,j){if(i.isYouTube(c,j)||i.isRtmp(c,j)||"hls"===j){return !0}var f=i.extensionmap[j?j:i.extension(c)];return !f?!1:!!f.flash}}(jwplayer),function(b){var g=b.utils,a=g.extensionmap,e=b.events;b.embed.html5=function(o,q,j,i,r){function n(k,h,l){return function(){try{var p=document.querySelector("#"+o.id+" .jwmain");l&&p.appendChild(h);"function"===typeof k.resize&&(k.resize(p.clientWidth,p.clientHeight),setTimeout(function(){k.resize(p.clientWidth,p.clientHeight)},400));h.left=p.style.left;h.top=p.style.top}catch(m){}}}function d(h){c.sendEvent(h.type,{message:"HTML5 player not found"})}var c=this,f=new e.eventdispatcher;g.extend(c,f);c.embed=function(){if(b.html5){i.setupPlugins(r,j,n);o.innerHTML="";var h=b.utils.extend({},j);delete h.volume;h=new b.html5.player(h);r.container=document.getElementById(r.id);r.setPlayer(h,"html5")}else{h=new g.scriptloader(q.src),h.addEventListener(e.ERROR,d),h.addEventListener(e.COMPLETE,c.embed),h.load()}};c.supportsConfig=function(){if(b.vid.canPlayType){try{if("string"===g.typeOf(j.playlist)){return !0}for(var k=j.playlist[0].sources,h=0;h<k.length;h++){if(b.embed.html5CanPlay(k[h].file,k[h].type,j.androidhls)){return !0}}}catch(l){}}return !1}};b.embed.html5CanPlay=function(k,c,i){if(null!==navigator.userAgent.match(/BlackBerry/i)||g.isIE(9)){return !1}if(g.isYouTube(k,c)){return !0}var l=g.extension(k);c=c||a.extType(l);if("hls"===c){if(i){i=g.isAndroidNative;if(i(2)||i(3)||i("4.0")){return !1}if(g.isAndroid()){return !0}}else{if(g.isAndroid()){return !1}}}if(g.isRtmp(k,c)){return !1}k=a[c]||a[l];if(!k||k.flash&&!k.html5){return !1}var f;f:if(k=k.html5){try{f=!!b.vid.canPlayType(k);break f}catch(j){}f=!1}else{f=!0}return f}}(jwplayer),function(h){var l=h.embed,g=h.embed.html5CanPlay,j=h.utils,i=h._,a=/\.(js|swf)$/;h.cast=h.cast||{};h.embed=j.extend(function(A){function o(){D="Adobe SiteCatalyst Error: Could not find Media Module"}var C=j.repo(),z=j.extend({},h.defaults),f=j.extend({},z,A.config),d=A.config,n=f.plugins,y=f.analytics,G=C+"jwpsrv.js",E=C+"sharing.js",b=C+"related.js",c=C+"gapro.js",z=h.key?h.key:z.key,F=(new h.utils.key(z)).edition(),D,n=n?n:{};"ads"==F&&f.advertising&&(a.test(f.advertising.client)?n[f.advertising.client]=f.advertising:n[C+f.advertising.client+".js"]=f.advertising);delete d.advertising;d.key=z;f.analytics&&a.test(f.analytics.client)&&(G=f.analytics.client);delete d.analytics;y&&!("ads"===F||"enterprise"===F)&&delete y.enabled;if("free"==F||!y||!1!==y.enabled){n[G]=y?y:{}}delete n.sharing;delete n.related;switch(F){case"ads":case"enterprise":if(d.sitecatalyst){try{window.s&&window.s.hasOwnProperty("Media")?new h.embed.sitecatalyst(A):o()}catch(B){o()}}case"premium":f.related&&(a.test(f.related.client)&&(b=f.related.client),n[b]=f.related),f.ga&&(a.test(f.ga.client)&&(c=f.ga.client),n[c]=f.ga);case"pro":f.sharing&&(a.test(f.sharing.client)&&(E=f.sharing.client),n[E]=f.sharing),f.skin&&(d.skin=f.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,j.repo()+"skins/$1.xml"))}d.plugins=n;A.config=d;A=new l(A);D&&A.errorScreen(D);return A},h.embed);h.embed.html5CanPlay=function(e,m){var f;var k={file:e,type:m};f=h.html5&&h.html5.chooseProvider?h.html5.chooseProvider(k)!==h.html5.VideoProvider:i.any(h.unregisteredProviders,function(b){return b.supports(k)});return f?!0:g.apply(this,arguments)}}(jwplayer),function(a){var b=jwplayer.utils;a.sitecatalyst=function(w){function y(d){A.debug&&b.log(d)}function x(d){d=d.split("/");d=d[d.length-1];d=d.split("?");return d[0]}function z(){if(!q){q=!0;var d=i.getPosition();y("stop: "+k+" : "+d);s.Media.stop(k,d)}}function r(){C||(z(),C=!0,y("close: "+k),s.Media.close(k),B=!0,o=0)}var i=w,A=b.extend({},i.config.sitecatalyst),u={onPlay:function(){if(!B){var d=i.getPosition();q=!1;y("play: "+k+" : "+d);s.Media.play(k,d)}},onPause:z,onBuffer:z,onIdle:r,onPlaylistItem:function(e){try{B=!0;r();o=0;var l;if(A.mediaName){l=A.mediaName}else{var j=i.getPlaylistItem(e.index);l=j.title?j.title:j.file?x(j.file):j.sources&&j.sources.length?x(j.sources[0].file):""}k=l;c=A.playerName?A.playerName:i.id}catch(h){b.log(h)}},onTime:function(){if(B){var e=i.getDuration();if(-1==e){return}C=q=B=!1;y("open: "+k+" : "+e+" : "+c);s.Media.open(k,e,c);y("play: "+k+" : 0");s.Media.play(k,0)}e=i.getPosition();if(3<=Math.abs(e-o)){var d=o;y("seek: "+d+" to "+e);y("stop: "+k+" : "+d);s.Media.stop(k,d);y("play: "+k+" : "+e);s.Media.play(k,e)}o=e},onComplete:r},k,c,o,q=!0,C=!0,B;b.foreach(u,function(d){i[d](u[d])})}}(jwplayer.embed),function(b){function i(d,e){d[e]&&(d[e]=a.getAbsolutePath(d[e]))}var a=b.utils,h=b._,g=window.location.href;b.cast.setupCastConfig=function(e,r){var o=a.extend({},e.config);o.cast=a.extend({pageUrl:g},r);for(var k="base autostart controls fallback fullscreen width height mobilecontrols modes playlistlayout playlistposition playlistsize primary stretching sharing related ga skin logo listbar".split(" "),n=k.length;n--;){delete o[k[n]]}k=o.plugins;delete o.plugins;for(var c in k){if(k.hasOwnProperty(c)){var q=k[c];if(q.client&&(/[\.\/]/.test(q.client)&&i(q,"client"),-1<q.client.indexOf("vast"))){n=o;q=a.extend({},q);q.client="vast";delete q.companiondiv;if(q.schedule){var j=void 0;for(j in q.schedule){q.schedule.hasOwnProperty(j)&&i(q.schedule[j].ad||q.schedule[j],"tag")}}i(q,"tag");n.advertising=q}}}e.position&&(o.position=e.position);0<e.item&&(o.item=e.item);o.captionLabel=a.getCookies().captionLabel;return o};b.cast.setupFlashCastConfig=function(d){var j=d.config;j.playlist=d.getPlaylist();var f;(f=h.find(j.plugins,function(e,c){return 0<c.indexOf("vast.js")}))?(f.client="vast",f={advertising:f}):f={};j=h.pick(j,"id captionLabel cast key playlist repeat".split(" "));j.cast.pageUrl=window.location.href;a.extend(j,{captionLabel:a.getCookies().captionLabel,volume:d.getVolume(),mute:d.getMute(),id:d.id,position:d.getPosition(),item:d.getPlaylistIndex()},f);return j}}(window.jwplayer),function(j,p){function g(d,c){d[c]&&(d[c]=l.getAbsolutePath(d[c]))}var m=p.cast,l=p.utils,a=p.events,i=a.state,o={};m.NS="urn:x-cast:com.longtailvideo.jwplayer";m.debug=!1;m.availability=null;m.available=function(e){e=e||m.availability;var d=j.chrome,f="available";d.cast&&d.cast.ReceiverAvailability&&(f=d.cast.ReceiverAvailability.AVAILABLE);return e===f};m.controller=function(at,ar){var ao,an;function ap(r,q){m.log("send command",r,q);var t={command:r};void 0!==q&&(t.args=q);T.sendMessage(m.NS,t,k,function(u){m.log("error message",u);"Invalid namespace"===u.description&&aa()})}function aq(q){q=!!m.available(q.availability);h.available!==q&&(h.available=q,al(a.JWPLAYER_CAST_AVAILABLE))}function ag(q){m.log("existing session",q);!T&&!Z&&(Z=q.session,Z.addMessageListener(m.NS,ac))}function ac(v,u){var r=JSON.parse(u);if(!r){throw"Message not proper JSON"}if(r.reconcile){Z.removeMessageListener(m.NS,ac);var t=r.diff,q=Z;if(!t.id||!r.appid||!r.pageUrl){t.id=p().id,r.appid=ab.appid,r.pageUrl=f,Z=T=null}t.id===at.id&&(r.appid===ab.appid&&r.pageUrl===f)&&(T||(at.jwInstreamState()&&at.jwInstreamDestroy(!0),W(q),ar.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:t.oldstate,newstate:t.newstate})),V(r));Z=null}}function aj(q){h.active=!!q;q=h;var r;r=T&&T.receiver?T.receiver.friendlyName:"";q.deviceName=r;al(a.JWPLAYER_CAST_SESSION,{})}function al(r){var q=l.extend({},h);ar.sendEvent(r,q)}function ae(r){var q=j.chrome;r.code!==q.cast.ErrorCode.CANCEL&&(m.log("Cast Session Error:",r,T),r.code===q.cast.ErrorCode.SESSION_ERROR&&aa())}function aa(){T?(af(),T.stop(ai,Y)):ai()}function Y(q){m.error("Cast Session Stop error:",q,T);ai()}function W(r){m.log("Session started:",r);T=r;T.addMessageListener(m.NS,ah);T.addUpdateListener(ad);at.jwPause(!0);at.jwSetFullscreen(!1);n=ar.getVideo();ao=ar.volume;an=ar.mute;ak=new m.provider(ap);ak.init();ar.setVideoProvider(ak);at.jwPlay=function(u){!1===u?ak.pause():ak.play()};at.jwPause=function(u){at.jwPlay(!!u)};at.jwLoad=function(u){"number"===l.typeOf(u)&&ar.setItem(u);ak.load(u)};at.jwPlaylistItem=function(u){"number"===l.typeOf(u)&&ar.setItem(u);ak.playlistItem(u)};at.jwPlaylistNext=function(){at.jwPlaylistItem(ar.item+1)};at.jwPlaylistPrev=function(){at.jwPlaylistItem(ar.item-1)};at.jwSetVolume=function(u){l.exists(u)&&(u=Math.min(Math.max(0,u),100)|0,e(u)&&(u=Math.max(0,Math.min(u/100,1)),T.setReceiverVolumeLevel(u,U,function(v){m.error("set volume error",v);U()})))};at.jwSetMute=function(u){l.exists(u)||(u=!X.mute);d(u)&&T.setReceiverMuted(!!u,U,function(v){m.error("set muted error",v);U()})};at.jwGetVolume=function(){return X.volume|0};at.jwGetMute=function(){return !!X.mute};at.jwIsBeforePlay=function(){return !1};var q=at.jwSetCurrentCaptions;at.jwSetCurrentCaptions=function(u){q(u);ak.sendCommand("caption",u)};at.jwSkipAd=function(u){am&&(am.skipAd(u),u=am.getAdModel(),u.complete=!0,ar.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,u))};at.jwClickAd=function(v){if(am&&300<am.timeSinceClick()&&(am.clickAd(v),ar.state!==i.PAUSED)){var u={tag:v.tag};v.sequence&&(u.sequence=v.sequence);v.podcount&&(u.podcount=v.podcount);p(at.id).dispatchEvent(a.JWPLAYER_AD_CLICK,u);j.open(v.clickthrough)}};at.jwPlayAd=at.jwPauseAd=at.jwSetControls=at.jwForceState=at.jwReleaseState=at.jwSetFullscreen=at.jwDetachMedia=at.jwAttachMedia=k;var t=p(at.id).plugins;t.vast&&t.vast.jwPauseAd!==k&&(c={jwPlayAd:t.vast.jwPlayAd,jwPauseAd:t.vast.jwPauseAd},t.vast.jwPlayAd=t.vast.jwPauseAd=k);U();aj(!0);r!==Z&&ak.setup(b(),ar)}function ad(q){m.log("Cast Session status",q);q?U():(ak.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:ar.state,newstate:i.BUFFERING}),ai())}function ai(){m.log("_sessionStopped");T&&(af(),T=null);if(n){delete at.jwSkipAd;delete at.jwClickAd;at.initializeAPI();var q=p(at.id).plugins;q.vast&&l.extend(q.vast,c);ar.volume=ao;ar.mute=an;ar.setVideoProvider(n);ar.duration=0;ak&&(ak.destroy(),ak=null);am&&(am.destroy(),am=null);ar.state!==i.IDLE?l.isIPad()||l.isIPod()?(at.jwStop(!0),n.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:i.BUFFERING,newstate:i.IDLE})):(ar.state=i.IDLE,at.jwPlay(!0),at.jwSeek(ar.position)):n.sendEvent(a.JWPLAYER_PLAYER_STATE,{oldstate:i.BUFFERING,newstate:i.IDLE});n=null}aj(!1)}function af(){T.removeUpdateListener(ad);T.removeMessageListener(m.NS,ah)}function ah(r,q){var t=JSON.parse(q);if(!t){throw"Message not proper JSON"}V(t)}function V(r){if("state"===r.type){if(am&&(r.diff.newstate||r.diff.position)){am.destroy(),am=null,ar.setVideoProvider(ak),ar.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,{done:!0})}ak.updateModel(r.diff,r.type);r=r.diff;void 0!==r.item&&ar.item!==r.item&&(ar.item=r.item,ar.sendEvent(a.JWPLAYER_PLAYLIST_ITEM,{index:ar.item}))}else{if("ad"===r.type){null===am&&(am=new m.adprovider(m.NS,T),am.init(),ar.setVideoProvider(am));am.updateModel(r.diff,r.type);var q=am.getAdModel();r.diff.clickthrough&&(q.onClick=at.jwClickAd);r.diff.skipoffset&&(q.onSkipAd=at.jwSkipAd);ar.sendEvent(a.JWPLAYER_CAST_AD_CHANGED,q);r.diff.complete&&am.resetAdModel()}else{"connection"===r.type?!0===r.closed&&aa():m.error("received unhandled message",r.type,r)}}}function b(){var r=l.extend({},ar.config);r.cast=l.extend({pageUrl:f},ab);for(var q="base autostart controls fallback fullscreen width height mobilecontrols modes playlistlayout playlistposition playlistsize primary stretching sharing related ga skin logo listbar".split(" "),w=q.length;w--;){delete r[q[w]]}q=r.plugins;delete r.plugins;for(var v in q){if(q.hasOwnProperty(v)){var u=q[v];if(u.client&&(/[\.\/]/.test(u.client)&&g(u,"client"),-1<u.client.indexOf("vast"))){w=r;u=l.extend({},u);u.client="vast";delete u.companiondiv;if(u.schedule){var t=void 0;for(t in u.schedule){u.schedule.hasOwnProperty(t)&&g(u.schedule[t].ad||u.schedule[t],"tag")}}g(u,"tag");w.advertising=u}}}ar.position&&(r.position=ar.position);0<ar.item&&(r.item=ar.item);r.captionLabel=l.getCookies().captionLabel;return r}function U(){if(T&&T.receiver){var r=T.receiver.volume;if(r){var q=100*r.level|0;d(!!r.muted);e(q)}}}function e(q){var r=X.volume!==q;r&&(X.volume=q,ak.sendEvent(a.JWPLAYER_MEDIA_VOLUME,{volume:q}));return r}function d(q){var r=X.mute!==q;r&&(X.mute=q,ak.sendEvent(a.JWPLAYER_MEDIA_MUTE,{mute:q}));return r}function k(){}var T=null,h={available:!1,active:!1,deviceName:""},X={volume:null,mute:null},f=l.getAbsolutePath(j.location.href),ab,ak=null,am=null,n=null;ao=ar.volume;an=ar.mute;var Z=null,c=null;ab=l.extend({},o,ar.cast);g(ab,"loadscreen");g(ab,"endscreen");g(ab,"logo");if(ab.appid&&(!j.cast||!j.cast.receiver)){m.loader.addEventListener("availability",aq),m.loader.addEventListener("session",ag),m.loader.initialize(ab.appid)}this.startCasting=function(){T||at.jwInstreamState()||j.chrome.cast.requestSession(W,ae)};this.stopCasting=aa};m.log=function(){if(m.debug){var b=Array.prototype.slice.call(arguments,0);console.log.apply(console,b)}};m.error=function(){var b=Array.prototype.slice.call(arguments,0);console.error.apply(console,b)}}(window,jwplayer),function(N){function Q(b){F.log("existing session",b);!i&&!z&&(z=b.session,z.addMessageListener(F.NS,J))}function J(b,h){var g=JSON.parse(h),f=z;if(!g){throw"Message not proper JSON"}if(g.reconcile){z.removeMessageListener(F.NS,J);g.receiverFriendlyName=z.receiver.friendlyName;if(!g.pageUrl||!g.diff.id||!g.appid){g.pageUrl=o,g.diff.id=N().id,g.appid=B,z=i=null}D[g.diff.id]&&(B===g.appid&&g.pageUrl===o)&&(A=g.diff.id,B=g.appid,M(A,"jwInstreamDestroy"),R(f),M(A,E.message,g),z=null)}}function P(){i&&(i.removeUpdateListener(S),i.removeMessageListener(F.NS,L),i.stop(I.noop,G.bind(this)),i=null);M(A,E.cleanup)}function O(d,c){i.sendMessage(F.NS,{command:d,args:c},I.noop,function(b){F.error("message send error",b)})}function R(a){var d=N(A);i=a;i.addMessageListener(F.NS,L);i.addUpdateListener(S);d=N.cast.setupFlashCastConfig(d);z!==i&&O("setup",d);M(A,E.connected,{receiverFriendlyName:a.receiver.friendlyName})}function L(e,d){if(d){var f=JSON.parse(d);if(!f){throw"Message not proper JSON"}M(A,E.message,f)}}function G(b){M(A,E.error,b||{})}function S(b){b||P()}function M(e,d,f){f?N(e).callInternal(d,f):N(e).callInternal(d)}function H(){}var F=N.cast,I=N.utils,K=N._,C=window.chrome||{},A,D={},E={},B,z,o=I.getAbsolutePath(window.location.href),i;F.NS="urn:x-cast:com.longtailvideo.jwplayer";F.flash={checkAvailability:function(e,c,f){E=f;B=c;D[e]=!0;F.loader.addEventListener("availability",function(a){"available"===a.availability&&M(e,E.available,a)});F.loader.addEventListener("session",Q);F.loader.initialize(c)},startCasting:function(b){A=b;C.cast.requestSession(R.bind(this),G.bind(this))},stopCasting:P,mute:function(b){i.setReceiverMuted(b,H,function(c){F.error("set muted error",c)})},volume:function(b){b=Math.max(0,Math.min(b/100,1));i.setReceiverVolumeLevel(b,H,function(c){F.error("set volume error",c)})},messageReceiver:O,canCastItem:function(b){return K.any(b.levels,function(c){return N.embed.html5CanPlay(c.file,c.type)})}}}(window.jwplayer),function(y,B){function u(){B&&B.cast&&B.cast.isAvailable&&!D.apiConfig?(D.apiConfig=new B.cast.ApiConfig(new B.cast.SessionRequest(v),w,o,B.cast.AutoJoinPolicy.ORIGIN_SCOPED),B.cast.initialize(D.apiConfig,C,z)):15>r++&&setTimeout(u,1000)}function A(){i&&(i.resetEventListeners(),i=null)}function z(){D.apiConfig=null}function C(){}function w(a){E.sendEvent("session",{session:a});a.sendMessage(D.NS,{whoami:1})}function o(a){D.availability=a;E.sendEvent("availability",{availability:a})}window.chrome=B;var D=y.cast,x=y.utils,q=y.events,i,r=0,v=null,E=x.extend({initialize:function(a){v=a;null!==D.availability?E.sendEvent("availability",{availability:D.availability}):B&&B.cast?u():i||(i=new x.scriptloader("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),i.addEventListener(q.ERROR,A),i.addEventListener(q.COMPLETE,u),i.load())}},new q.eventdispatcher("cast.loader"));y.cast.loader=E}(window.jwplayer,window.chrome||{}),function(o,r){var j=[],q=o.utils,p=o.events,t=p.state,l="getBuffer getCaptionsList getControls getCurrentCaptions getCurrentQuality getCurrentAudioTrack getDuration getFullscreen getHeight getLockState getMute getPlaylistIndex getSafeRegion getPosition getQualityLevels getState getVolume getWidth isBeforeComplete isBeforePlay releaseState".split(" "),i="playlistNext stop forceState playlistPrev seek setCurrentCaptions setControls setCurrentQuality setVolume setCurrentAudioTrack".split(" "),u={onBufferChange:p.JWPLAYER_MEDIA_BUFFER,onBufferFull:p.JWPLAYER_MEDIA_BUFFER_FULL,onError:p.JWPLAYER_ERROR,onSetupError:p.JWPLAYER_SETUP_ERROR,onFullscreen:p.JWPLAYER_FULLSCREEN,onMeta:p.JWPLAYER_MEDIA_META,onMute:p.JWPLAYER_MEDIA_MUTE,onPlaylist:p.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:p.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:p.JWPLAYER_PLAYLIST_COMPLETE,onReady:p.API_READY,onResize:p.JWPLAYER_RESIZE,onComplete:p.JWPLAYER_MEDIA_COMPLETE,onSeek:p.JWPLAYER_MEDIA_SEEK,onTime:p.JWPLAYER_MEDIA_TIME,onVolume:p.JWPLAYER_MEDIA_VOLUME,onBeforePlay:p.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:p.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:p.JWPLAYER_DISPLAY_CLICK,onControls:p.JWPLAYER_CONTROLS,onQualityLevels:p.JWPLAYER_MEDIA_LEVELS,onQualityChange:p.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:p.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:p.JWPLAYER_CAPTIONS_CHANGED,onAdError:p.JWPLAYER_AD_ERROR,onAdClick:p.JWPLAYER_AD_CLICK,onAdImpression:p.JWPLAYER_AD_IMPRESSION,onAdTime:p.JWPLAYER_AD_TIME,onAdComplete:p.JWPLAYER_AD_COMPLETE,onAdCompanions:p.JWPLAYER_AD_COMPANIONS,onAdSkipped:p.JWPLAYER_AD_SKIPPED,onAdPlay:p.JWPLAYER_AD_PLAY,onAdPause:p.JWPLAYER_AD_PAUSE,onAdMeta:p.JWPLAYER_AD_META,onCast:p.JWPLAYER_CAST_SESSION,onAudioTrackChange:p.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:p.JWPLAYER_AUDIO_TRACKS},m={onBuffer:t.BUFFERING,onPause:t.PAUSED,onPlay:t.PLAYING,onIdle:t.IDLE};o.api=function(g){function e(v,k){q.foreach(v,function(w,x){d[w]=function(y){return k(x,y)}})}function f(v,k){var w="jw"+k.charAt(0).toUpperCase()+k.slice(1);d[k]=function(){var x=b.apply(this,[w].concat(Array.prototype.slice.call(arguments,0)));return v?d:x}}function h(k){I=[];L&&L.destroy&&L.destroy();o.api.destroyPlayer(k.id)}function K(v,k){try{v.jwAddEventListener(k,'function(dat) { jwplayer("'+d.id+'").dispatchEvent("'+k+'", dat); }')}catch(x){if("flash"===d.renderingMode){var w=document.createElement("a");w.href=A.data;w.protocol!==location.protocol&&q.log("Warning: Your site ["+location.protocol+"] and JWPlayer ["+w.protocol+"] are hosted using different protocols")}q.log("Could not add internal listener")}}function G(v,k){H[v]||(H[v]=[],A&&n&&K(A,v));H[v].push(k);return d}function b(){if(n){if(A){var v=Array.prototype.slice.call(arguments,0),k=v.shift();if("function"===typeof A[k]){switch(v.length){case 6:return A[k](v[0],v[1],v[2],v[3],v[4],v[5]);case 5:return A[k](v[0],v[1],v[2],v[3],v[4]);case 4:return A[k](v[0],v[1],v[2],v[3]);case 3:return A[k](v[0],v[1],v[2]);case 2:return A[k](v[0],v[1]);case 1:return A[k](v[0])}return A[k]()}}return null}I.push(arguments)}var d=this,H={},B={},A,n=!1,I=[],c,L,a={},z={};d.container=g;d.id=g.id;d.setup=function(v){if(o.embed){var k=document.getElementById(d.id);k&&(v.fallbackDiv=k);h(d);k=o(d.id);k.config=v;L=new o.embed(k);L.embed();return k}return d};d.getContainer=function(){return d.container};d.addButton=function(v,k,y,x){try{z[x]=y,b("jwDockAddButton",v,k,'jwplayer("'+d.id+'").callback("'+x+'")',x)}catch(w){q.log("Could not add dock button"+w.message)}};d.removeButton=function(k){b("jwDockRemoveButton",k)};d.callback=function(k){if(z[k]){z[k]()}};d.getMeta=function(){return d.getItemMeta()};d.getPlaylist=function(){var k=b("jwGetPlaylist");"flash"===d.renderingMode&&q.deepReplaceKeyName(k,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);return k};d.getPlaylistItem=function(k){q.exists(k)||(k=d.getPlaylistIndex());return d.getPlaylist()[k]};d.getRenderingMode=function(){return d.renderingMode};d.setFullscreen=function(k){q.exists(k)?b("jwSetFullscreen",k):b("jwSetFullscreen",!b("jwGetFullscreen"));return d};d.setMute=function(k){q.exists(k)?b("jwSetMute",k):b("jwSetMute",!b("jwGetMute"));return d};d.lock=function(){return d};d.unlock=function(){return d};d.load=function(k){b("jwInstreamDestroy");o(d.id).plugins.googima&&b("jwDestroyGoogima");b("jwLoad",k);return d};d.playlistItem=function(k){b("jwPlaylistItem",parseInt(k,10));return d};d.resize=function(v,k){if("flash"!==d.renderingMode){b("jwResize",v,k)}else{var x=document.getElementById(d.id+"_wrapper"),w=document.getElementById(d.id+"_aspect");w&&(w.style.display="none");x&&(x.style.display="block",x.style.width=q.styleDimension(v),x.style.height=q.styleDimension(k))}return d};d.play=function(k){if(k!==r){return b("jwPlay",k),d}k=d.getState();var v=c&&c.getState();v&&(v===t.IDLE||v===t.PLAYING||v===t.BUFFERING?b("jwInstreamPause"):b("jwInstreamPlay"));k===t.PLAYING||k===t.BUFFERING?b("jwPause"):b("jwPlay");return d};d.pause=function(k){k===r?(k=d.getState(),k===t.PLAYING||k===t.BUFFERING?b("jwPause"):b("jwPlay")):b("jwPause",k);return d};d.createInstream=function(){return new o.api.instream(this,A)};d.setInstream=function(k){return c=k};d.loadInstream=function(v,k){c=d.setInstream(d.createInstream()).init(k);c.loadItem(v);return c};d.destroyPlayer=function(){b("jwPlayerDestroy")};d.playAd=function(v){var k=o(d.id).plugins;k.vast?k.vast.jwPlayAd(v):b("jwPlayAd",v)};d.pauseAd=function(){var k=o(d.id).plugins;k.vast?k.vast.jwPauseAd():b("jwPauseAd")};e(m,function(v,k){B[v]||(B[v]=[],G(p.JWPLAYER_PLAYER_STATE,function(w){var D=w.newstate;w=w.oldstate;if(D===v){var C=B[D];if(C){for(var y=0;y<C.length;y++){var x=C[y];"function"===typeof x&&x.call(this,{oldstate:w,newstate:D})}}}}));B[v].push(k);return d});e(u,G);q.foreach(l,function(v,k){f(!1,k)});q.foreach(i,function(v,k){f(!0,k)});d.remove=function(){if(!n){throw"Cannot call remove() before player is ready"}h(this)};d.registerPlugin=function(v,k,x,w){o.plugins.registerPlugin(v,k,x,w)};d.setPlayer=function(v,k){A=v;d.renderingMode=k};d.detachMedia=function(){if("html5"===d.renderingMode){return b("jwDetachMedia")}};d.attachMedia=function(k){if("html5"===d.renderingMode){return b("jwAttachMedia",k)}};d.getAudioTracks=function(){return b("jwGetAudioTracks")};d.removeEventListener=function(v,k){var x=H[v];if(x){for(var w=x.length;w--;){x[w]===k&&x.splice(w,1)}}};d.dispatchEvent=function(v,k){var D=H[v];if(D){for(var D=D.slice(0),C=q.translateEventResponse(v,k),y=0;y<D.length;y++){var w=D[y];if("function"===typeof w){try{v===p.JWPLAYER_PLAYLIST_LOADED&&q.deepReplaceKeyName(C.playlist,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),w.call(this,C)}catch(x){q.log("There was an error calling back an event handler",x)}}}}};d.dispatchInstreamEvent=function(k){c&&c.dispatchEvent(k,arguments)};d.callInternal=b;d.playerReady=function(k){n=!0;A||d.setPlayer(document.getElementById(k.id));d.container=document.getElementById(d.id);q.foreach(H,function(v){K(A,v)});G(p.JWPLAYER_PLAYLIST_ITEM,function(){a={}});G(p.JWPLAYER_MEDIA_META,function(v){q.extend(a,v.metadata)});G(p.JWPLAYER_VIEW_TAB_FOCUS,function(w){var v=d.getContainer();!0===w.hasFocus?q.addClass(v,"jw-tab-focus"):q.removeClass(v,"jw-tab-focus")});for(d.dispatchEvent(p.API_READY);0<I.length;){b.apply(this,I.shift())}};d.getItemMeta=function(){return a};return d};o.playerReady=function(d){var c=o.api.playerById(d.id);c||(c=o.api.selectPlayer(d.id));c.playerReady(d)};o.api.selectPlayer=function(d){var c;q.exists(d)||(d=0);d.nodeType?c=d:"string"===typeof d&&(c=document.getElementById(d));return c?(d=o.api.playerById(c.id))?d:o.api.addPlayer(new o.api(c)):"number"===typeof d?j[d]:null};o.api.playerById=function(d){for(var c=0;c<j.length;c++){if(j[c].id===d){return j[c]}}return null};o.api.addPlayer=function(d){for(var c=0;c<j.length;c++){if(j[c]===d){return d}}j.push(d);return d};o.api.destroyPlayer=function(d){var c,n,k;q.foreach(j,function(b,a){a.id===d&&(c=b,n=a)});if(c===r||n===r){return null}q.clearCss("#"+n.id);if(k=document.getElementById(n.id+("flash"===n.renderingMode?"_wrapper":""))){"html5"===n.renderingMode&&n.destroyPlayer();var h=document.createElement("div");h.id=n.id;k.parentNode.replaceChild(h,k)}j.splice(c,1);return null}}(window.jwplayer),function(b){var g=b.events,a=b.utils,e=g.state;b.api.instream=function(o,q){function k(f,l){h[f]||(h[f]=[],q.jwInstreamAddEventListener(f,'function(dat) { jwplayer("'+o.id+'").dispatchInstreamEvent("'+f+'", dat); }'));h[f].push(l);return this}function d(l,f){c[l]||(c[l]=[],k(g.JWPLAYER_PLAYER_STATE,function(m){var v=m.newstate,u=m.oldstate;if(v===l){var t=c[v];if(t){for(var p=0;p<t.length;p++){var n=t[p];"function"===typeof n&&n.call(this,{oldstate:u,newstate:v,type:m.type})}}}}));c[l].push(f);return this}var r,j,h={},c={},i=this;i.type="instream";i.init=function(){o.callInternal("jwInitInstream");return i};i.loadItem=function(f,l){r=f;j=l||{};"array"===a.typeOf(f)?o.callInternal("jwLoadArrayInstream",r,j):o.callInternal("jwLoadItemInstream",r,j)};i.removeEvents=function(){h=c={}};i.removeEventListener=function(l,f){var n=h[l];if(n){for(var m=n.length;m--;){n[m]===f&&n.splice(m,1)}}};i.dispatchEvent=function(m,l){var u=h[m];if(u){for(var u=u.slice(0),t=a.translateEventResponse(m,l[1]),p=0;p<u.length;p++){var n=u[p];"function"===typeof n&&n.call(this,t)}}};i.onError=function(f){return k(g.JWPLAYER_ERROR,f)};i.onMediaError=function(f){return k(g.JWPLAYER_MEDIA_ERROR,f)};i.onFullscreen=function(f){return k(g.JWPLAYER_FULLSCREEN,f)};i.onMeta=function(f){return k(g.JWPLAYER_MEDIA_META,f)};i.onMute=function(f){return k(g.JWPLAYER_MEDIA_MUTE,f)};i.onComplete=function(f){return k(g.JWPLAYER_MEDIA_COMPLETE,f)};i.onPlaylistComplete=function(f){return k(g.JWPLAYER_PLAYLIST_COMPLETE,f)};i.onPlaylistItem=function(f){return k(g.JWPLAYER_PLAYLIST_ITEM,f)};i.onTime=function(f){return k(g.JWPLAYER_MEDIA_TIME,f)};i.onBuffer=function(f){return d(e.BUFFERING,f)};i.onPause=function(f){return d(e.PAUSED,f)};i.onPlay=function(f){return d(e.PLAYING,f)};i.onIdle=function(f){return d(e.IDLE,f)};i.onClick=function(f){return k(g.JWPLAYER_INSTREAM_CLICK,f)};i.onInstreamDestroyed=function(f){return k(g.JWPLAYER_INSTREAM_DESTROYED,f)};i.onAdSkipped=function(f){return k(g.JWPLAYER_AD_SKIPPED,f)};i.play=function(f){q.jwInstreamPlay(f)};i.pause=function(f){q.jwInstreamPause(f)};i.hide=function(){o.callInternal("jwInstreamHide")};i.destroy=function(){i.removeEvents();o.callInternal("jwInstreamDestroy")};i.setText=function(f){q.jwInstreamSetText(f?f:"")};i.getState=function(){return q.jwInstreamState()};i.setClick=function(f){q.jwInstreamClick&&q.jwInstreamClick(f)}}}(jwplayer),function(b){var g=b.api,a=g.selectPlayer,e=b._;g.selectPlayer=function(d){return(d=a(d))?d:{registerPlugin:function(f,i,h){"jwpsrv"!==f&&b.plugins.registerPlugin(f,i,h)}}};b.unregisteredProviders=[];g.registerProvider=function(d){b&&b.html5&&e.isFunction(b.html5.registerProvider)?b.html5.registerProvider(d):b.unregisteredProviders.push(d)}}(jwplayer));
/* jwPlayerWrapper.js */
function jwPlayerWrapper(){var KILOBIT=1000;var KIBIBIT=1024;var ONE_SECOND=1000;TWP=window.TWP||{};TWP.PostTV=TWP.PostTV||{};TWP.PostTV.players=TWP.PostTV.players||{};TWP.hpRefreshTests=TWP.hpRefreshTests||[];TWP.PostTV.adFrequency=TWP.PostTV.adFrequency||1/2;TWP.PostTV.inverseAdFrequency=TWP.PostTV.inverseAdFrequency||1/TWP.PostTV.adFrequency;TWP.PostTV.blankAdSetCode=TWP.PostTV.blankAdSetCode||"347e498d32924a56a51c7beca90b8b02";String.prototype.endsWith=function(suffix){return this.indexOf(suffix,this.length-suffix.length)!==-1};TWP.PostTV.EVENTS=$.extend(TWP.PostTV.EVENTS,{PLAYER_SERVICE_INITIALIZED:"playerServiceInitialized",DESTROY:"destroy",ERROR:"videoError",SEND_TRACKING_DATA:"sendTrackingData",SEEK:"seek",SET_VOLUME:"setVolume",SKIP_AD:"skipAd",PLAY:"play",PAUSE:"pause",PLAY_NEXT_VIDEO:"playNextVideo",PLAYER_CREATED:"playerCreated",OO_PLAYER_INITIALIZED:"ooPlayerInitialized",OO_PLUGIN_LOADED:"ooPluginLoaded",OO_PLUGIN_FULLY_LOADED:"ooPluginFullyLoaded",WILL_CHANGE_EMBED_CODE:"willChangeEmbedCode",CONTENT_TREE_FETCHED:"contentTreeFetched",PLAYBACK_READY:"playbackReady",PLAYHEAD_TIME_CHANGED:"playheadTimeChanged",COMPANION_ADS_DISPLAYED:"companionAdsDisplayed",AD_STARTED:"adStarted",ADS_CLEARED:"adsCleared",EDITORIAL_PLAY_STARTED:"editorialPlayStarted",PLAY_COMPLETED:"ooPlayCompleted",NEED_RESIZE_VIDEO_ELEMENT:"needResizeVideoElement",SCRUBBER_NEEDS_ADJUSTMENT:"scrubberNeedsAdjustment",VOLUME_CHANGED:"volumeChanged",CAST_READY:"castReady",CAST_VIDEO:"castVideo",CAST_STARTED:"castStarted",CAST_FINISHED:"castFinished",CAST_PAUSE:"castPause",CAST_PLAY:"castPlay",CAST_SEEK:"castSeek",CAST_NEXT_VIDEO:"castNextVideo",CAST_PROGRESS:"castProgress",FULLSCREEN_CHANGED:"fullscreenChanged"});TWP.PostTV.loadedResources=true;TWP.PostTV.isFlashEnabled=(function(){var hasFlash=false;try{var fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(fo){hasFlash=true}}catch(e){if(navigator.mimeTypes["application/x-shockwave-flash"]!=undefined){hasFlash=true}}return hasFlash})();TWP.PostTV.areCookiesEnabled=TWP.PostTV.areCookiesEnabled||function(){var cookieEnabled=(navigator.cookieEnabled)?true:false;if(typeof navigator.cookieEnabled=="undefined"&&!cookieEnabled){document.cookie="testcookie";cookieEnabled="testcookie" in document.cookie?true:false}return(cookieEnabled)};TWP.PostTV.getCookie=TWP.PostTV.getCookie||function(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length)}}return null};TWP.PostTV.incrementCountingCookie=TWP.PostTV.incrementCountingCookie||function(name,options){if(!!name){options=options||{};TWP.PostTV.setCookie(name,TWP.PostTV.getCountingCookie(name)+1,options.expires,options.path,options.domain,options.secure)}};TWP.PostTV.getCountingCookie=TWP.PostTV.getIntegerCookie||function(name){var count=0;if(!!name&&TWP.PostTV.areCookiesEnabled()){var v=TWP.PostTV.getCookie(name);count=!isNaN(parseInt(v))?parseInt(v):0;count=(count<0)?0:count}return count};TWP.PostTV.getFlagCookie=TWP.PostTV.getFlagCookie||function(name){var flag=0;if(!!name&&TWP.PostTV.areCookiesEnabled()){var v=TWP.PostTV.getCookie(name);flag=!isNaN(parseInt(v))?parseInt(v):0;flag=(flag<0)?0:flag}return(flag%2)};TWP.PostTV.toggleFlagCookie=TWP.PostTV.toggleFlagCookie||function(name,options){if(!!name){options=options||{};TWP.PostTV.setCookie(name,(TWP.PostTV.getFlagCookie(name)+1)%2,options.expires,options.path,options.domain,options.secure)}};TWP.PostTV.setCookie=function(name,value,expires,path,domain,secure){document.cookie=name+"="+escape(value)+(expires?"; expires="+expires:"")+(path?"; path="+path:"; path=/")+(domain?"; domain="+domain:"; domain="+(/(?:[^\.]+)(\.([^\.]+\.){1,}[^\.]+)$/.test(document.location.host)?RegExp.$1:document.location.host))+(secure?"; secure":"")};TWP.PostTV.getCount=TWP.PostTV.getCount||function(){return TWP.PostTV.getCountingCookie("videoplays")};TWP.PostTV.incrementCount=TWP.PostTV.incrementCount||function(options){var expirationDate=new Date();expirationDate.setTime(expirationDate.getTime()+(10*60*ONE_SECOND));options=jQuery.extend(options,{expires:expirationDate.toGMTString()});TWP.PostTV.incrementCountingCookie("videoplays",options)};TWP.PostTV.getPreRollsBlocked=TWP.PostTV.getPreRollsBlocked||function(){return TWP.PostTV.getFlagCookie("adsflag")};TWP.PostTV.togglePreRollsBlocked=TWP.PostTV.togglePreRollsBlocked||function(options){TWP.PostTV.toggleFlagCookie("adsflag",options)};TWP.PostTV.BrowserInfo=TWP.PostTV.BrowserInfo||{init:function(userAgentStr){this.userAgentStr=userAgentStr;this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(this.userAgentStr)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";this.deviceType=this.lookUpDeviceType(this.dataDeviceType)||0},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=typeof data[i].string==="undefined"?this.userAgentStr:data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!=-1){return data[i].identity}}else{if(dataProp){return data[i].identity}}}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1){return}return dataString.substring(index+this.versionSearchString.length+1).match(/\d+(\.\d+)+/g)[0]},lookUpDeviceType:function(data){var dataString;for(var i=0,l=data.length;i<l;i++){dataString=typeof data[i].string==="undefined"?this.userAgentStr:data[i].string;if(dataString){if($.isArray(data[i].subString)){for(var j=0,jl=data[i].subString.length;j<jl;j++){if(dataString.indexOf(data[i].subString[j])!=-1){return typeof data[i].type==="number"?data[i].type:this.lookUpDeviceType(data[i].type)}}}else{if(dataString.indexOf(data[i].subString)!=-1){return typeof data[i].type==="number"?data[i].type:this.lookUpDeviceType(data[i].type)}else{if(typeof data[i].otherwise!="undefined"){return data[i].otherwise}}}}}},dataBrowser:[{subString:"Chrome",identity:"Chrome"},{subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{subString:"Silk",identity:"Silk"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{subString:"Netscape",identity:"Netscape"},{subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{subString:"Android",identity:"Android Stock Browser",versionSearch:"Android"},{subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{subString:"iPhone",identity:"iPhone"},{subString:"iPad",identity:"iPad"},{subString:"Android",identity:"Android"},{subString:"Silk",identity:"Android for Kindle"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],dataDeviceType:[{subString:["iPhone","iPod"],type:1},{subString:["iPad","Silk"],type:2},{subString:["Android"],type:[{subString:["Firefox"],type:2},{subString:["Mobile"],type:1},{subString:null,otherwise:2}]},{subString:["Opera"],type:[{subString:["Mobi","Mini"],type:1}]},{subString:["AppleWebKit"],type:[{subString:["Mobile"],type:1}]},{subString:["Mobile"],type:1}]};if(!TWP.PostTV.BrowserInfo.browser){TWP.PostTV.BrowserInfo.init(navigator.userAgent)}TWP.PostTV.isMobile=typeof TWP.PostTV.isMobile=="boolean"?TWP.PostTV.isMobile:(function(){return TWP.PostTV.BrowserInfo.deviceType==1})();TWP.PostTV.isTablet=(function(){return TWP.PostTV.BrowserInfo.deviceType==2})();TWP.PostTV.isDeskweb=!(TWP.PostTV.isMobile||TWP.PostTV.isTablet);TWP.PostTV.shouldNotPlayPrerollAds=typeof TWP.PostTV.shouldNotPlayPrerollAds!="undefined"?TWP.PostTV.shouldNotPlayPrerollAds:(function(){var prerollCookie=TWP.PostTV.getCookie("wapo_actmgmt"),kvs,v,kv;if(prerollCookie){kvs=prerollCookie.split("|");for(var i=0,l=kvs.length;i<l;i++){kv=kvs[i].split(":");if(kv[0]=="NO_PREROLL"){v=kv[1];break}}}return v==="1"})();TWP.PostTV.enablePageRefresh=!!$("#enable-page-refresh").data("enablePageRefresh");TWP.PostTV.mobileTabletPageRefresh=!!$("#mobile-tablet-page-refresh").data("mobileTabletPageRefresh");TWP.PostTV.shouldRefreshPage=(TWP.PostTV.enablePageRefresh&&TWP.PostTV.isDeskweb)||(TWP.PostTV.mobileTabletPageRefresh&&!TWP.PostTV.isDeskweb);TWP.PostTV.destroyWhenUpdate=!!$("#destroy-when-update").data("destroyWhenUpdate");TWP.PostTV.mobileTabletShowEndscreen=!!$("#mobile-tablet-show-endscreen").data("mobileTabletShowEndscreen");TWP.PostTV.mobileTabletPlayNext=$("#mobile-tablet-show-endscreen").length===0?true:!!$("#mobile-tablet-show-endscreen").data("mobileTabletPlayNext");TWP.PostTV.mobileForceAdSetCode=$("#mobile-force-adsetcode").length===0?undefined:$("#mobile-force-adsetcode").data("mobileForceAdsetcode");TWP.PostTV.tabletForceAdSetCode=$("#tablet-force-adsetcode").length===0?undefined:$("#tablet-force-adsetcode").data("tabletForceAdsetcode");TWP.PostTV.isUuidSpecifiedInUrl=$("#is-uuid-specified-in-url").data("isUuidSpecifiedInUrl");TWP.PostTV.Player=(function($,_,undefined){return function(args){var PLAYER_VENDOR="jw";var SPINNER_WAIT_TIME=1;var self=this;var playbackReady=false;var currentVideoTitle=null;var previousVideoTitle=null;var playheadTimeChangedArgs={};self.buffering=false;self.bufferingExpected=false;self.debug=false;self.debugAds=false;self.debugEndscreen=false;self.debugInfo={};var companionAdTemplate=_.template('			<div class="mp-companion-ad">			<% if (companionAd.type === "static") { %>				<a href="<%= companionAd.click %>" target="_blank"><img src="<%= companionAd.resource %>"></a>			<% } else if (companionAd.type === "html") { %>				<%= companionAd.resource %>			<% } else if (companionAd.type === "iframe") { %>				<iframe src="<%= companionAd.resource %>" width="<%= companionAd.width %>" height="<%= companionAd.height %>" allowtransparency="true" marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0" scrolling="no"/>			<% } else { %>				<%= companionAd.resource %>			<% } %>			</div>		');var innerWrapperTemplate=_.template('			<div				class="inner-wrapper <%= config.className ? config.className : "" %>"				style="position:absolute;					top:0;					left:0;					pointer-events: none;					height: <%= config.height ? config.height : "100%" %>;					width: <%= config.width ? config.width : "100%" %>;">				<%= config.html ? config.html : "" %>			</div>		');var titleOverlayTemplate=_.template('<div class="ptv-video-headline-container"><span class="ptv-video-headline"><%= headline.title ? headline.title : "" %></span></div>');var msgBoxTemplate=_.template('			<div class="ptv-msg-box <%= config.className ? config.className : "" %>" style="position: absolute; top: 0; right: 0; <%= config.style ? config.style : "" %>">				<%= config.html ? config.html : "" %>			</div>		');var debugOverlayTemplate=_.template('			<div class="debug-overlay" style="width: 50%; height: 50%; pointer-events: auto; background-color: #000; opacity: 0.7; border-radius: 5px; margin: 10% auto; padding: 10px">			</div>		');var debugContentTemplate=_.template('			<div class="debug-content" style="color: #CCC; text-shadow: 0px 0px 3px rgba(0, 0, 0, 0.75);">			<% _.each(debug, function(value, key) { %>				<p><%= key %>: <%= value %></p>			<% }); %>			</div>		');var ooToJWVolume=function(ooVolume){return parseInt(ooVolume*100)};var jwToOOVolume=function(jwVolume){return jwVolume/100};self.getAdTag=function(json){json=json||self.json;var adURL="http://ad.doubleclick.net/N701/pfadx/";var adQueryString=";frmt=2;frmt=1;frmt=0;sz=640x480;tp_video=null;dmct=text/html;ord="+_.now();var adSet=json&&json.adConfig&&json.adConfig.adSetConfig&&json.adConfig.adSetConfig.adSetZone?json.adConfig.adSetConfig.adSetZone:"wpni.video.oodef";adQueryString+=args.adTagUrlSuffix?args.adTagUrlSuffix:";vid=15;vid=30";return adURL+adSet+adQueryString};self.create=function(){if(typeof window.jwplayer!=="undefined"){self.jwSetup();if(self.hasPlayableStreams(self.jwArgs.playlist)){self.playerLoadTime=_.now();self.jwPlayer=jwplayer(self.playerElementId).setup(self.jwArgs);if(self.jwPlayer){_.each(self.jwCallbacks,function(callback,name){self.jwPlayer[name](callback)});window._cbv=window._cbv||[];window._cbv.push(self.jwPlayer)}PubSub.publish(TWP.PostTV.EVENTS.OO_PLAYER_INITIALIZED)}else{self.switchToOoyala()}}else{console.log("jwplayer is undefined!");self.sendTrackingData("PostTV Player JW Error",["event9997"],{errorCode:"ptv_jwUndefined",errorText:"JW is undefined."})}};self.hasPlayableStreams=function(playlist){return playlist&&playlist.length&&playlist[0].sources&&playlist[0].sources.length};self.switchToOoyala=function(player){var queryString=window.location.search;self.sendTrackingData("PostTV Player JW Error",["event9995"],{errorCode:"ptv_missingPTSStreams",errorText:"PostTV video is missing PTS streams."});if(queryString){window.location=window.location+"&player=oo&autoplay=1"}else{window.location=window.location+"?player=oo&autoplay=1"}};self.jwSetupTitle=function(json){json=json||self.json;var title=json.contentConfig&&json.contentConfig.title?json.contentConfig.title:"";return{title:title}};self.imageResizeService=function(src,width,height){src=src?src:"http://www.washingtonpost.com/posttv/static/img/posttv/posttv_error_black.jpg";width=width?width:"";height=height?height:width?width*0.5625:"";width=width?"&w="+width:"";height=height?"&h="+height:"";return"http://www.washingtonpost.com/wp-apps/imrs.php?src="+encodeURIComponent(src)+width+height};self.jwSetupImage=function(json){try{var desiredWidth=self.isLeafPage()?640:self.$playerContainer.width();json.promoImage.image.resized=json.promoImage.image.resized?json.promoImage.image.resized:json.promoImage.image.url?self.imageResizeService(json.promoImage.image.url,desiredWidth):""}catch(e){console.log("error resizing endscreen image")}return{image:json.promoImage.image.resized}};self.jwSetupPlaylist=function(json){var streams=json.contentConfig.streams;var config=TWP.PostTV.jwPlayerConfig;var clientType=TWP.PostTV.isMobile?"mobile":TWP.PostTV.isTablet?"tablet":"desktop";if(!streams||!streams.length||(streams[0]&&streams[0].provider==="ooyala")){self.updatePermalink(json);self.switchToOoyala()}var title=self.jwSetupTitle(json);var image=self.jwSetupImage(json);config.maxBitrate=config.maxBitrate||{mobile:600,tablet:600,desktop:2000};config.streamPreference=config.streamPreference||["_master.m3u8",".m3u8",".smil",".mp4",".webm"];var grouped=_.groupBy(streams,function(stream){return _.find(config.streamPreference,function(preference){return stream.url.endsWith(preference)})});var biggestStream=function(streams){return streams?_.chain(streams).reject(function(stream){return stream.bitrate>config.maxBitrate[clientType]}).map(function(stream){return _.extend(stream,{height:_.isNumber(stream.height)?stream.height:0,width:_.isNumber(stream.width)?stream.width:0,bitrate:_.isNumber(stream.bitrate)?stream.bitrate:0})}).max(function(stream){return stream.height+stream.width+stream.bitrate}).value():{}};var sources=_.chain(config.streamPreference).map(function(preference){return biggestStream(grouped[preference])}).compact().map(function(stream){return _.isEmpty(stream)?null:{file:stream.url}}).compact().value();return[_.extend({sources:sources},title,image)]};self.jwSetupInitialPlaylist=function(json){return{playlist:self.jwSetupPlaylist(json),primary:"flash",androidhls:true}};self.jwSetupFile=function(json){var streams=json.contentConfig.streams;var config=TWP.PostTV.jwPlayerConfig;config.presets={presets:["_master.m3u8",".m3u8",".smil",".mp4",".webm"],fallback:[".webm",".mp4"]};var predicate=function(tail){return !_.isEmpty(_.filter(streams,function(stream){return stream.url.endsWith(tail)}))};var media=_.find(config.presets,predicate);var fallback=_.find(config.fallback,predicate);var fileObj=streams?_.chain(streams).filter(function(stream){return stream.url.endsWith(media)}).max(function(stream){return stream.width+stream.height+(_.isNumber(stream.bitrate)?stream.bitrate:0)}).value():{};var fallbackObj=fallback?_.chain(streams).filter(function(stream){return stream.url.endsWith(fallback)}).max(function(stream){return stream.width+stream.height+(_.isNumber(stream.bitrate)?stream.bitrate:0)}).value():{};return{file:fileObj.url,fallback:fallbackObj.url}};self.jwSetupAdvertising=function(json){return{advertising:{client:"vast",skipoffset:15}}};self.jwSetupAutostart=function(){return{autostart:self.autoplay}};self.jwSetupSize=function(){return{width:"100%",aspectratio:"16:9"}};self.jwSetupFlashplayer=function(){var contextPath=window.wp_pb&&wp_pb.contextPath?wp_pb.contextPath:"http://www.washingtonpost.com/posttv";var flashplayer=contextPath+"/static/js/posttv/vendor/jwplayer/jw-6.11/jwplayer.flash.swf";var html5player=contextPath+"/static/js/posttv/vendor/jwplayer/jw-6.11/jwplayer.html5.js";var base=contextPath+"/static/js/posttv/vendor/jwplayer/jw-6.11/";return{flashplayer:flashplayer,html5player:html5player,base:base}};self.jwSetupPlugins=function(json){var contextPath=window.wp_pb&&wp_pb.contextPath?wp_pb.contextPath:"http://www.washingtonpost.com/posttv";var endscreen=contextPath+"/static/js/posttv/jwPlayer/jwPlayerEndscreen.js";var sharing=contextPath+"/static/js/posttv/jwPlayer/jwPlayerSharing.js";var plugins={};if(self.showEndscreen){plugins[endscreen]={postTV:self,videoJson:json,playerContainerId:self.playerElementId}}plugins[sharing]={postTV:self,videoJson:json,playerContainerId:self.playerElementId,hideButtons:self.$playerContainer.attr("data-hide-posttv-overlay-buttons")};return{plugins:plugins}};self.jwSetup=function(){self.hasPlayedAd=false;self.jwArgs.controls=false;_.extend(self.jwArgs,self.jwSetupTitle(self.json),self.jwSetupImage(self.json),self.jwSetupInitialPlaylist(self.json),self.jwSetupAdvertising(self.json),self.jwSetupAutostart(),self.jwSetupSize(),self.jwSetupPlugins(self.json),self.jwSetupFlashplayer())};self.isFlash=function(){return self.jwPlayer&&self.jwPlayer.getRenderingMode()==="flash"?true:false};self.isHTML5=function(){return self.jwPlayer&&self.jwPlayer.getRenderingMode()==="html5"?true:false};self.isPlaying=function(){return self.jwPlayer&&self.jwPlayer.getState()==="PLAYING"?true:false};self.isPaused=function(){return self.jwPlayer&&self.jwPlayer.getState()==="PAUSED"?true:false};self.play=function(){if(self.jwPlayer&&self.playerCreated&&!self.isPlaying()){self.jwPlayer.play()}};self.pause=function(){if(self.jwPlayer&&self.playerCreated&&!self.isPaused()){self.jwPlayer.pause()}};self.stop=function(){if(self.jwPlayer&&self.playerCreated){self.jwPlayer.stop()}};self.load=function(playlist){if(self.jwPlayer&&self.playerCreated){self.jwPlayer.load(playlist)}};self.playAd=function(){self.$socialSharing=self.$socialSharing||$("#canvas").find(".show-for-medium-up .social ul, .show-for-small-only.social ul, .social-share-link");self.adLoadTime=_.now();self.jwPlayer.playAd(self.getAdTag());self.$socialSharing.hide()};self.skipAd=function(){if(self.jwPlayer&&self.playerCreated){self.skippingAd=true;self.adComplete()}};self.destroy=function(){if(self.jwPlayer&&self.playerCreated){self.jwPlayer.remove()}};self.seek=function(playheadTime){if(self.jwPlayer&&self.playerCreated){self.jwPlayer.seek(playheadTime)}};self.getPlayheadTime=function(){var playheadTime=-1;if(self.jwPlayer&&self.playerCreated){playheadTime=self.jwPlayer.getPosition()}return playheadTime};self.setVolume=function(volume){if(self.jwPlayer&&self.playerCreated){self.jwPlayer.setVolume(ooToJWVolume(volume))}};self.setVolumeInCookie=function(volume){try{TWP.PostTV.setCookie("videovolume",parseFloat(volume).toFixed(3),new Date("1/1/2022"))}catch(e){}};self.getVolume=function(){if(self.jwPlayer&&self.playerCreated){return jwToOOVolume(self.jwPlayer.getVolume())}return 1};self.getVolumeFromCookie=function(){var volume=parseFloat(TWP.PostTV.getCookie("videovolume"));volume=isNaN(volume)?0:volume>1?1:volume<0?0:volume;return volume};self.isFullscreen=function(){return self.jwPlayer.getFullscreen()};self.update=function(json,args){var playlist=self.jwSetupPlaylist(json);var methodeUuid=json.contentConfig&&json.contentConfig.uuid?json.contentConfig.uuid:"";var contextPath=window.wp_pb&&wp_pb.contextPath?wp_pb.contextPath:"/"+document.location.pathname.split("/")[1];var shouldDestroyWhenUpdate=TWP.PostTV.destroyWhenUpdate&&(TWP.PostTV.isDeskweb||(TWP.PostTV.BrowserInfo.OS.toLowerCase().indexOf("iphone")>-1&&!self.isFullscreen()));if(self.hasPlayableStreams(playlist)){if(TWP.PostTV.shouldRefreshPage){window.location.href=document.URL.indexOf("www.washingtonpost.com/posttv/")>-1?json.contentConfig.permaLinkURL:contextPath+"/c/video/"+json.contentConfig.uuid;return}self.json=json;self.updateMetaFromJSON(json);args=_.extend(args,{videoJson:json,adSetCode:self.adSetCode,hide:self.hide,methodeUuid:methodeUuid});self.methodeUuid=methodeUuid;if(args.isAutoPlaying){self.isAutoplaying=true}if(self.isPlayingAd){self.skipAd()}if(args.selfDestruct&&shouldDestroyWhenUpdate){self.$playerContainer.removeClass("ooyala-player-processed").addClass("ooyala-player");self.mb.subscribe(OO.EVENTS.DESTROY,"posttvOoyalaPlayer",$.proxy(function(evt,args){if(typeof self.callbacks.betweenDestroyAndCreate=="function"){self.callbacks.betweenDestroyAndCreate()}TWP.PostTV.initInlinePlayer(self.$playerContainer[0],{json:json});self.mb.unsubscribe(OO.EVENTS.DESTROY)}),self);self.destroy()}else{self.load(playlist);PubSub.publish(TWP.PostTV.EVENTS.WILL_CHANGE_EMBED_CODE,args)}if(args.updateURL){self.updatePermalink(json)}if(typeof args.callback==="function"){args.callback.call()}}else{self.updatePermalink(json);self.switchToOoyala()}return self};self.isLeafPage=function(){return self.playerType==="posttv-player"};self.isEmbed=function(){return self.playerType==="posttv-embed"};self.updatePermalink=function(json){try{var permaLinkURL=TWP.PostTV.Util.getPermaLinkURL(json,self.isEmbed());document.title=json.contentConfig.title;history.pushState({data:json},json.contentConfig.title,permaLinkURL)}catch(e){console.error(e)}window.onpopstate=function(event){console.log(event.state.data);self.update(event.state.data,{})}};self.onPlayNextVideo=function(args){var json=args.json;var ajaxUrl;if(!TWP.PostTV.isDeskweb&&!TWP.PostTV.mobileTabletPlayNext){return}if($.isEmptyObject(json)){if(args.methodeUuid){$.ajax({type:"GET",url:ajaxUrl="http://www.washingtonpost.com/posttv/c/videojson/"+args.methodeUuid,contentType:"application/json",jsonpCallback:"cb_"+args.methodeUuid.replace(/-/g,""),data:{resType:"jsonp"},dataType:"jsonp",cache:true,success:function(data){self.update(data[0],args)},error:function(e){if(typeof window.console==="function"){console.error("Failed to fetch video data for video: "+args.methodeUuid+", e: "+e.message)}self.sendTrackingData("PostTV Player Error",["event999"],{errorCode:"ptv_cannotRetrieveVideoJson",errorText:"Cannot retrieve video json data at: "+ajaxUrl})}})}else{console.error("At least one of video json or uuid is required for updating the player to play the next video.");self.sendTrackingData("PostTV Player Data Error",["event999"],{errorCode:"ptv_unableToPlayNextVideo",errorText:"At least one of video json or uuid is required for updating the player to play the next video."})}}else{self.update(json,args)}};self.handleTrackingData=function(evt,args){if(args&&args.evtName&&args.evtType){self.sendTrackingData(args.evtName,args.evtType,args)}};self.resize=function(args){args.w=(!isNaN(args.w))?args.w:self.$playerContainer.parent().width();args.h=(!isNaN(args.h))?args.h:Math.round(args.w*(270/480));$(args.selectorsToResize,self.$playerContainer.parent()).each(function(i){$(this).animate({width:args.w+"px",height:args.h+"px"},{duration:args.duration,step:function(currentValue,o){if(o.prop=="width"){$(args.selectorsToResize,self.$playerContainer.parent()).width(currentValue)}else{if(o.prop=="height"){$(args.selectorsToResize,self.$playerContainer.parent()).height(currentValue)}}}})});return self};self.shouldPlayAd=function(json){json=json||self.json;var playAd=true;var isEligibleForAPreRoll=!TWP.PostTV.getPreRollsBlocked()&&json.adConfig&&json.adConfig.playVideoAds;var isDueForAPreRoll;var hasPreRoll;var forceAd=json.adConfig&&json.adConfig.forceAd?true:false;var spotInPattern=TWP.PostTV.SessionEditorialPlayCounter%args.adPattern.length;if(args.allowAd&&!self.isPlayingVideo&&!self.skippingAd&&!self.hasPlayedAd&&isEligibleForAPreRoll&&!TWP.PostTV.shouldNotPlayPrerollAds){if(forceAd){if(TWP.PostTV.getCount()%2===0){TWP.PostTV.incrementCount()}}else{if(self.showAdsForFirstVideoOnly){if(!self.showedAdsForFirstVideo){self.showedAdsForFirstVideo=true}else{playAd=false}}else{if(args.adPattern&&args.adPattern.length>0){playAd=args.adPattern[spotInPattern]==="1"}else{self.showCompanionAdIfAny=self.showCompanionAdIfAny?self.showCompanionAdIfAny:false;self.adFreq=(typeof args.adFreq!=="undefined"?args.adFreq:TWP.PostTV.adFrequency);if(!isNaN(parseInt(self.adFreq))&&!isNaN(parseFloat(self.adFreq))){self.adFreq=eval(self.adFreq)}if(isNaN(self.adFreq)||self.adFreq<0||self.adFreq>1){self.adFreq=TWP.PostTV.adFrequency}if(self.adFreq===0){self.adFreq=1/1000000000}var inverseAdFreq=1/self.adFreq;isDueForAPreRoll=self.adFreq!==0&&((TWP.PostTV.getCount()%inverseAdFreq)<1);hasPreRoll=isEligibleForAPreRoll&&isDueForAPreRoll;if((hasPreRoll||(!hasPreRoll&&!isDueForAPreRoll))){TWP.PostTV.incrementCount()}playAd=hasPreRoll;self.showCompanionAdIfAny=TWP.PostTV.isMobile?self.showCompanionAdIfAny:self.showCompanionAdIfAny&&hasPreRoll}}}}else{playAd=false;self.showCompanionAdIfAny=0}return playAd};self.updateMetaFromJSON=function(json){if(typeof json=="undefined"){json={}}self.meta={uuid:(json.contentConfig?json.contentConfig.uuid:""),title:args.title||(json.contentConfig?json.contentConfig.title:""),description:args.description||(json.contentConfig?json.contentConfig.blurb:""),section:args.section||("metaConfig" in json?json.metaConfig.section:""),subsection:args.subsection||("metaConfig" in json?json.metaConfig.subsection:""),hasCorrection:(json.contentConfig?json.contentConfig.hasCorrection:false),correction:(json.contentConfig?json.contentConfig.correction:null),hasClarification:(json.contentConfig?json.contentConfig.hasClarification:false),clarification:(json.contentConfig?json.contentConfig.clarification:null),permaLinkURL:(json.contentConfig?json.contentConfig.permaLinkURL:null),commentsURL:(json.contentConfig?json.contentConfig.commentsURL:null),emailURL:(json.contentConfig?json.contentConfig.emailURL:null),embedURL:(json.contentConfig?json.contentConfig.embedURL:null),imageThumbnailURL:("promoImage" in json&&typeof json.promoImage.image!="undefined"&&json.promoImage.image!=null&&json.promoImage.image.url!="undefined"?json.promoImage.image.url:null),ooyalaPlayerURL:(json.contentConfig?json.contentConfig.playerURL:null),ooyalaPlayerSecureURL:(json.contentConfig?"https://player.ooyala.com/player_v2.swf?keepEmbedCode=true&autoplay=1&embedCode="+json.contentConfig["videoContentId"]:null),relatedLinks:null,tags:("metaConfig" in json?json.metaConfig.tags:null),credits:[]};if(json.contentConfig&&json.contentConfig.dateConfig&&json.contentConfig.dateConfig.displayDate){var displayDate=new Date(json.contentConfig.dateConfig.displayDate);self.meta.displayDate=displayDate.toDateString()}else{self.meta.displayDate=""}if(json.contentConfig&&json.contentConfig.relatedLinks&&json.contentConfig["relatedLinks"].length>0){var relatedLinks=[];$.each(json.contentConfig.relatedLinks,function(i,relatedLink){if(relatedLink.url&&relatedLink.title){relatedLinks.push('<li><a type="resource" href="'+relatedLink.url+'">'+relatedLink.title+"</a></li>")}});self.meta.relatedLinks=relatedLinks.join("");self.meta.relatedLinksAsArray=relatedLinks}if(json.contentConfig&&json.contentConfig.credits){self.meta.credits={editor:json.contentConfig.credits.editor,source:json.contentConfig.credits.source}}return self};self.showCompanionAd=function(companionAds){self.$companionAdContainer=self.$companionAdContainer||$("#companion-ad-container");if(companionAds.companions.length){var adCompanion=companionAds.companions[0];self.$companionAdContainer.html(companionAdTemplate({companionAd:adCompanion}));if(typeof self.callbacks.companionAds=="function"){self.callbacks.companionAds(self)}PubSub.publish(TWP.PostTV.EVENTS.COMPANION_ADS_DISPLAYED)}};self.removeCompanionAd=function(){if(self.$companionAdContainer){self.$companionAdContainer.empty()}};self.removeHeadline=function(){if(self.$headline){self.$headline.remove();self.$jwContainer.off("mouseenter");self.$jwContainer.off("mouseleave")}};self.setupHeadline=function(){if(self.isEmbed()){self.removeHeadline();self.$headline=$(titleOverlayTemplate({headline:self.jwSetupTitle()}));self.$innerWrapper.append(self.$headline);self.$jwContainer.mouseenter(function(){self.$headline.show()});self.$jwContainer.mouseleave(function(){self.$headline.hide()})}};self.reportFirstFrame=function(){var now=_.now();var genesis=self.isEmbed()?TWP.PostTV.playButtonClickedTime:TWP.PostTV.pageLoadTime;self.debugInfo.pageLoadDelta=self.debugInfo.pageLoadDelta||(now-genesis)/ONE_SECOND;self.debugInfo.playerLoadDelta=self.debugInfo.playerLoadDelta||(now-self.playerLoadTime)/ONE_SECOND;if(self.isPlayingAd){self.removeHeadline();self.debugInfo.adLoadDelta=(now-self.adLoadTime)/ONE_SECOND}if(self.isPlayingVideo){TWP.PostTV.videosPlayed++;self.setupHeadline();self.debugInfo.videoLoadDelta=(now-self.videoLoadTime)/ONE_SECOND}self.firstFrame=false;if(self.debug){console.log("Page load to first frame:",self.debugInfo.pageLoadDelta);console.log("Player load to first frame:",self.debugInfo.playerLoadDelta);console.log("Ad load to first frame:",self.debugInfo.adLoadDelta);console.log("Video load to first frame:",self.debugInfo.videoLoadDelta)}};self.videoComplete=function(){delete self.debugInfo.bandwidths;delete self.debugInfo.bandwidthLow;delete self.debugInfo.bandwidthHigh;self.firstFrame=true;self.hasPlayedAd=false;self.hideControls();self.removeHeadline();self.allowHpRefresh();self.isPlayingVideo=false;self.switchVideo=true};self.adComplete=function(){self.$socialSharing=self.$socialSharing||$("#canvas").find(".show-for-medium-up .social ul, .show-for-small-only.social ul, .social-share-link");self.$socialSharing.show();self.firstFrame=true;self.hasPlayedAd=true;self.isPlayingAd=false;self.hideControls();self.allowHpRefresh();self.removeCompanionAd();if(typeof self.callbacks.adCompleted=="function"){self.callbacks.adCompleted(self)}PubSub.publish(TWP.PostTV.EVENTS.ADS_CLEARED)};self.bufferingComplete=function(time){if(self.buffering){if(self.bufferingExpected){self.sendTrackingData("Player buffered",["event114"],{splunkOnly:true})}else{self.sendTrackingData("Player buffered",["event9993"],{splunkOnly:true})}}self.buffering=false;self.bufferingExpected=false;self.showControls(time)};self.showControls=function(time){if(!time||(time.position>SPINNER_WAIT_TIME)){self.jwPlayer.setControls(true)}};self.hideControls=function(){self.jwPlayer.setControls(false)};self.showLogo=function(state){if(!state||(state.oldstate!=="PLAYING")){self.$playerContainer.css("opacity",0)}};self.hideLogo=function(){self.$playerContainer.css("opacity",1)};self.jwSetupCallbacks={onReady:function(){self.debugInfo.renderingMode=self.jwPlayer.getRenderingMode();if(self.debug){console.log("onReady:",{renderingMode:self.debugInfo.renderingMode})}if(self.initialTime){self.seek(self.initialTime)}self.playerCreated=true;var containerID="#"+self.jwPlayer.id;containerID+=self.debugInfo.renderingMode==="flash"?"_wrapper":"";self.$jwContainer=$(containerID);self.$innerWrapper=$(innerWrapperTemplate({config:{height:"100%",width:"100%"}}));self.$jwContainer.append(self.$innerWrapper);if(typeof self.callbacks.playerCreated==="function"){self.callbacks.playerCreated(self)}PubSub.publish(TWP.PostTV.EVENTS.PLAYER_CREATED,{videoJson:self.json});PubSub.publish(TWP.PostTV.EVENTS.WILL_CHANGE_EMBED_CODE,{videoJson:self.json});self.sendTrackingData("Player Created",["event110"],{splunkOnly:true});self.setupOverlays();self.loadChartbeatVideoScript()},onSetupError:function(e){console.log("onSetupError:",e);if(e.fallback===true&&!TWP.PostTV.isFlashEnabled){$(".ptv-not-support-msg, .ptv-flash-required-msg").show()}self.sendTrackingData("JW Player Setup Error",["event9994"],{errorCode:"ptv_jwSetupError",errorText:"JWPlayer setup error: "+e.message})}};self.jwPlaylistCallbacks={onPlaylist:function(playlist){if(self.debug){console.log("onPlaylist:",playlist)}if(TWP.PostTV.isDeskweb&&self.isHTML5()){self.play()}},onPlaylistItem:function(playlistItem){if(self.debug){console.log("onPlaylistItem:",playlistItem)}var params={};if(!self.isContentViewed){if(self.trackingLevel==="player-default-tracking"){self.sendTrackingData("Content View",["event30"],params)}self.isContentViewed=true}self.isPlayingVideo=false;self.hasPlayedAd=false;self.isPlayingAd=false;self.initProgress();if(typeof self.callbacks.embedCodeChanged=="function"){self.callbacks.embedCodeChanged(self)}if(!$.isEmptyObject(self.json)){self.$playerContainer.data("videoJson",self.json)}},onPlaylistComplete:function(){if(self.debug){console.log("onPlaylistComplete")}}};self.jwBufferCallbacks={onBufferChange:function(percentage){}};self.jwPlaybackCallbacks={onPlay:function(state){if(self.debug){console.log("onPlay:",state)}if(!self.isPlayingVideo){PubSub.publish(TWP.PostTV.EVENTS.EDITORIAL_PLAY_STARTED);self.preventHpRefresh();self.isPlayingVideo=true;self.skippingAd=false;if(typeof self.callbacks.editorialPlayStarted=="function"){self.callbacks.editorialPlayStarted(self)}if(self.trackingLevel==="player-default-tracking"){self.trackProgress(0)}}},onPause:function(state){if(self.debug){console.log("onPause:",state)}},onBuffer:function(state){if(self.debug){console.log("onBuffer:",state)}self.buffering=true;if(state.oldstate==="PLAYING"&&!self.bufferingExpected){self.sendTrackingData("Player buffering",["event9992"],{splunkOnly:true})}else{self.sendTrackingData("Player buffering",["event113"],{splunkOnly:true})}},onIdle:function(state){if(self.debug){console.log("onIdle:",state)}},onComplete:function(){if(self.debug){console.log("onComplete")}if(typeof self.callbacks.playCompleted==="function"){self.callbacks.playCompleted(self)}if(self.trackingLevel==="player-default-tracking"){self.trackProgress(100)}self.videoComplete();PubSub.publish(TWP.PostTV.EVENTS.PLAY_COMPLETED)},onError:function(message){console.log("onError:",message);self.sendTrackingData("JW Player Error",["event9999"],{errorText:JSON.stringify(message)});self.addMsg({msg:message.message,className:"ptv-error-msg",time:10*ONE_SECOND});if(typeof self.callbacks.videoError=="function"){self.callbacks.videoError(self)}self.videoComplete();PubSub.publish(TWP.PostTV.EVENTS.ERROR,message.message)}};self.jwSeekCallbacks={onSeek:function(seek){if(self.debug){console.log("onSeek:",seek)}self.bufferingExpected=true},onTime:function(time){if(self.firstFrame){self.reportFirstFrame()}self.playheadTime=time.position;self.time=time.duration;self.bufferingComplete(time);if(self.trackingLevel=="player-default-tracking"){self.trackProgress()}var times={time:self.playheadTime,duration:self.time,buffer:"",playStarted:self.isPlayingVideo};if(typeof self.callbacks.playheadTimeChanged==="function"){self.callbacks.playheadTimeChanged(times)}PubSub.publish(TWP.PostTV.EVENTS.PLAYHEAD_TIME_CHANGED,times)}};self.jwVolumeCallbacks={onMute:function(mute){if(self.debug){console.log("onMute",mute)}},onVolume:function(volume){if(self.debug){console.log("onVolume",volume)}self.volume=jwToOOVolume(volume.volume);self.setVolumeInCookie(self.volume);if(typeof self.callbacks.volumeChanged==="function"){self.callbacks.volumeChanged(self)}PubSub.publish(TWP.PostTV.EVENTS.VOLUME_CHANGED)}};self.jwResizeCallbacks={onFullscreen:function(fullscreen){if(self.debug){console.log("onFullscreen",fullscreen)}PubSub.publish(TWP.PostTV.EVENTS.FULLSCREEN_CHANGED,self.isFullscreen());var position=self.jwPlayer.getPosition();if(self.isPaused()){self.seek(position);self.pause()}else{self.seek(position)}},onResize:function(size){if(self.debug){console.log("onResize",size)}}};self.jwQualityCallbacks={onQualityLevels:function(levels){if(self.debug){console.log("onQualityLevels",levels)}self.sendTrackingData("Video Data Fetched",["event111"],{splunkOnly:true});PubSub.publish(TWP.PostTV.EVENTS.CONTENT_TREE_FETCHED)},onQualityChange:function(){if(self.debug){console.log("onQualityChange",arguments)}}};self.jwCaptionsCallbacks={onCaptionsList:function(tracks){if(self.debug){console.log("onCaptionsList",tracks)}},onCaptionsChange:function(track){if(self.debug){console.log("onCaptionsChange",track)}}};self.jwControlsCallbacks={onDisplayClick:function(){if(self.debug){console.log("onDisplayClick")}if(TWP.PostTV.isMobile||TWP.PostTV.isTablet){self.play()}}};self.jwAdvertisingCallbacks={onAdClick:function(adClick){if(self.debug||self.debugAds){console.log("onAdClick",adClick)}},onAdCompanions:function(adCompanions){if(self.debug||self.debugAds){console.log("onAdCompanions",adCompanions)}self.showCompanionAd(adCompanions)},onAdComplete:function(adComplete){if(self.debug||self.debugAds){console.log("onAdComplete",adComplete)}self.adComplete();if(self.trackingLevel=="player-default-tracking"){self.sendTrackingData("Video Ad Complete",["event8"])}},onAdError:function(error){console.log("onAdError",error);self.adComplete();if(self.trackingLevel=="player-default-tracking"){self.sendTrackingData("Video Ad Error",["event9996"],{adError:JSON.stringify(error)})}},onAdImpression:function(adImpression){if(self.debug||self.debugAds){console.log("onAdImpression",adImpression)}},onAdMeta:function(metadata){if(self.debug||self.debugAds){console.log("onAdMeta:",metadata)}},onAdPause:function(adPause){if(self.debug||self.debugAds){console.log("onAdPause",adPause)}},onAdPlay:function(adPlay){if(self.debug||self.debugAds){console.log("onAdPlay",adPlay)}self.isPlayingAd=true;PubSub.publish(TWP.PostTV.EVENTS.AD_STARTED)},onAdSkipped:function(){if(self.debug||self.debugAds){console.log("onAdSkipped",arguments)}self.adComplete();if(self.trackingLevel=="player-default-tracking"){self.sendTrackingData("Skip Ad Button Clicked",["event34"])}},onAdTime:function(time){self.isPlayingAd=true;if(self.firstFrame){self.reportFirstFrame();if(self.trackingLevel==="player-default-tracking"){var params=TWP.PostTV.videosPlayed===0?{videosPlayed:TWP.PostTV.videosPlayed,adLoadDelta:self.debugInfo.adLoadDelta,pageLoadDelta:self.debugInfo.pageLoadDelta,playerLoadDelta:self.debugInfo.playerLoadDelta}:{videosPlayed:TWP.PostTV.videosPlayed,adLoadDelta:self.debugInfo.adLoadDelta};self.sendTrackingData("Video Ad Start",["event7"],params)}}self.bufferingComplete(time)},onBeforePlay:function(){if(self.debug||self.debugAds){console.log("onBeforePlay")}if(self.shouldPlayAd()){self.showControls();self.playAd()}else{self.videoLoadTime=_.now()}TWP.PostTV.SessionEditorialPlayCounter++;self.bufferingExpected=true;if(!playbackReady){playbackReady=true;self.sendTrackingData("Player Controls Ready",["event112"],{splunkOnly:true});PubSub.publish(TWP.PostTV.EVENTS.PLAYBACK_READY)}},onBeforeComplete:function(){if(self.debug||self.debugAds){console.log("onBeforeComplete")}}};self.jwMetadataCallbacks={onMeta:function(metadata){metadata=metadata.metadata||metadata;if(metadata.bandwidth){metadata.bandwidth=parseFloat((metadata.bandwidth/KIBIBIT).toFixed(3));self.debugInfo.bandwidths=self.debugInfo.bandwidths||[];self.debugInfo.bandwidthLow=self.debugInfo.bandwidthLow||Infinity;self.debugInfo.bandwidthHigh=self.debugInfo.bandwidthHigh||-Infinity;self.debugInfo.bandwidths.push(metadata.bandwidth);self.debugInfo.bandwidthLow=metadata.bandwidth<self.debugInfo.bandwidthLow?metadata.bandwidth:self.debugInfo.bandwidthLow;self.debugInfo.bandwidthHigh=metadata.bandwidth>self.debugInfo.bandwidthHigh?metadata.bandwidth:self.debugInfo.bandwidthHigh}self.debugInfo=self.debugInfo?_.extend(self.debugInfo,metadata):metadata;if(self.$debugOverlay){self.$debugOverlay.html(debugContentTemplate({debug:_.omit(self.debugInfo,["bandwidths","segment"])}));console.log(self.debugInfo)}}};self.jwCallbacks=_.extend({},self.jwSetupCallbacks,self.jwPlaylistCallbacks,self.jwBufferCallbacks,self.jwPlaybackCallbacks,self.jwSeekCallbacks,self.jwVolumeCallbacks,self.jwResizeCallbacks,self.jwQualityCallbacks,self.jwCaptionsCallbacks,self.jwControlsCallbacks,self.jwAdvertisingCallbacks,self.jwMetadataCallbacks);self.addMsg=function(params){var time=params.time||2000;this.$msgBox=$(msgBoxTemplate({config:params}));this.$innerWrapper.append(this.$msgBox);this.$msgBox.fadeOut(time,_.bind(function(){this.$msgBox.remove()},this))};self.setupOverlays=function(){var stringContainsIpRegex=/.*(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).*/g;var isLocal=(document.URL.indexOf("localhost")>-1)||stringContainsIpRegex.test(document.URL);var adBlock={regEx:/ads/i,callback:_.bind(function(){var params={className:"ptv-ad-blocker",style:"color: #CCC; text-shadow: 0px 0px 3px rgba(0, 0, 0, 0.75); margin: 5px;"};TWP.PostTV.togglePreRollsBlocked({expires:new Date("1/1/2022").toGMTString()});if(TWP.PostTV.getPreRollsBlocked()||isLocal){params.html="<strong>Ads disabled</strong>";if(this.isPlayingAd){this.skipAd();this.load(self.jwSetupPlaylist(self.json))}}else{params.html="<strong>Ads enabled</strong>"}self.addMsg(params);value=""},this)};var debug={regEx:/debug/i,callback:_.bind(function(){if(this.$debugOverlay){this.$debugOverlay.remove();delete this.$debugOverlay}else{this.$debugOverlay=$(debugOverlayTemplate());this.$innerWrapper.append(this.$debugOverlay)}value=""},this)};self.$jwContainer.on("mouseenter.overlay",function(mouseenter){var $this=$(this);var $document=$(document);var value="";$document.off("keypress.overlay").on("keypress.overlay",function(e){value+=String.fromCharCode(e.which);if(adBlock.regEx.test(value)){adBlock.callback()}if(debug.regEx.test(value)){debug.callback()}e.stopPropagation()});$this.on("mouseleave.overlay",function(e){$document.off("keypress.overlay");$this.off("mouseleave.overlay");value=""})})};self.bindBlurEvents=function(){$(window).on("focus",function(){self.pause()});$(window).on("blur",function(){self.pause()})};self.unbindBlurEvents=function(){$(window).off("focus blur")};self.clearAdsCountdown=function(){};self.preventHpRefresh=function(){try{if(!self.isModal){TWP.hpRefreshTests[self.playerContainerId]=function(){return false}}}catch(e){}};self.allowHpRefresh=function(){try{if(!self.isModal){delete TWP.hpRefreshTests[self.playerContainerId]}}catch(e){}};self.digestBandwidth=function(){var bandwidthInfo={};if(self.debugInfo.bandwidthLow&&self.debugInfo.bandwidthHigh&&self.debugInfo.bandwidths&&self.debugInfo.bandwidths.length){self.debugInfo.bandwidthAvg=_.reduce(self.debugInfo.bandwidths,function(memo,num){return memo+num},0);self.debugInfo.bandwidthAvg=parseFloat((self.debugInfo.bandwidthAvg/self.debugInfo.bandwidths.length).toFixed(3));bandwidthInfo={bandwidthLow:self.debugInfo.bandwidthLow,bandwidthHigh:self.debugInfo.bandwidthHigh,bandwidthAvg:self.debugInfo.bandwidthAvg}}return bandwidthInfo};self.trackProgress=function(key){if(self.isPlayingVideo){key=key?key:Math.round(100*Math.floor((self.playheadTime/self.time)*self.progressIntervals)/self.progressIntervals);if(key in self.progress&&!self.progress[key].triggered){self.progress[key].triggered=true;_.extend(self.progress[key].tracking.props,self.digestBandwidth());if(key===0){var loadTimes=TWP.PostTV.videosPlayed===1?{videosPlayed:TWP.PostTV.videosPlayed,hasPlayedAd:self.hasPlayedAd,videoLoadDelta:self.debugInfo.videoLoadDelta,pageLoadDelta:self.debugInfo.pageLoadDelta,playerLoadDelta:self.debugInfo.playerLoadDelta}:{videosPlayed:TWP.PostTV.videosPlayed,hasPlayedAd:self.hasPlayedAd,videoLoadDelta:self.debugInfo.videoLoadDelta};_.extend(self.progress[key].tracking.props,loadTimes)}self.sendTrackingData(self.progress[key].tracking.linkName,self.progress[key].tracking.event,self.progress[key].tracking.props)}}};self.initProgress=function(){self.progress={};for(var i=0;i<=self.progressIntervals;i++){var key=""+Math.round(100*i/self.progressIntervals),linkName,event,props;switch(key){case"0":linkName="Video Start";event="event9";props={};break;case"25":linkName="Video 25% Complete";event="event10";props={};break;case"50":linkName="Video 50% Complete";event="event11";props={};break;case"75":linkName="Video 75% Complete";event="event12";props={};break;case"100":linkName="Video Complete";event="event13";props={};break;default:linkName="";event="";props={};break}self.progress[key]={triggered:false,tracking:{linkName:linkName,event:event,props:props}}}};self.getPlayerContainerWidth=function(){return self.$playerContainer.width()};self.getPreRollWidth=function(){var playerContainerWidth=self.getPlayerContainerWidth(),companionAdContainerWidth=340;return playerContainerWidth-companionAdContainerWidth>0?playerContainerWidth-companionAdContainerWidth:0};function isJSONObject(object){var isJson=false;try{var json=$.parseJSON(object);isJson=true}catch(e){}return isJson}self.imageForNielsenBeacon=null;self.getSectionAsPrefix=function(){var sectionAsPrefix=self.meta.section.toLowerCase();if(/^\/([^\/]+)/.test(sectionAsPrefix)){sectionAsPrefix=(RegExp.$1).toLowerCase()}sectionAsPrefix+=(!!sectionAsPrefix)?":":"";return sectionAsPrefix};self.getEstDateString=function(epoch){var localDate=new Date(epoch),estDate=new Date(epoch+localDate.getTimezoneOffset()*60000-300*60000),month=estDate.getMonth()+1;return month+"/"+estDate.getDate()+"/"+estDate.getFullYear()};self.getParentTrackingData=function(){if(typeof self.parentTrackingData==="undefined"&&window!=window.parent){try{if(typeof window.parent.s!="undefined"){self.parentTrackingData={channel:window.parent.s.channel,type:window.parent.s.prop3,pageName:window.parent.s.pageName}}if(window.frameElement){self.embedTrackingData={offsetTop:$(window.frameElement).parent().attr("data-offset-top"),nthVideoOnPage:$(window.frameElement).parent().attr("data-nth-video-on-page")};TWP.Data.VideoData.props.offsetTop=self.embedTrackingData.offsetTop;TWP.Data.VideoData.props.nthVideoOnPage=self.embedTrackingData.nthVideoOnPage}}catch(e){}}};self.getTrackingData=function(params){var getUUIDToken=function(uuid){var pieces=uuid.split("-");return pieces[pieces.length-1]};params=params||{};self.meta=self.meta||{};var sectionAsPrefix=self.getSectionAsPrefix();var isLiveEvent=self.json.liveEventConfig?true:false;var dateString=self.getEstDateString(self.json.contentConfig.dateConfig.displayDate);var credit=self.meta.credits||{};var isAd=self.isPlayingAd;var duration=0!==self.time&&isFinite(self.time)?self.time:self.json.contentConfig.videoDuration/ONE_SECOND;var uuidToken=isLiveEvent?getUUIDToken(self.json.liveEventConfig.uuid):self.meta.uuid?getUUIDToken(self.meta.uuid):"";var order=self.json.metaConfig&&self.json.metaConfig.order&&isFinite(self.json.metaConfig.order)?self.json.metaConfig.order:self.json.showsConfig&&self.json.showsConfig.length?self.json.showsConfig[0].clipDisplayOrder:0;if(self.switchVideo){previousVideoTitle=currentVideoTitle;self.switchVideo=false}currentVideoTitle=sectionAsPrefix+"video - "+uuidToken+" - "+dateString+" - "+(self.meta.title?self.meta.title.toLowerCase().replace(/[^\w\s[_,.-]]|'/gi,"").replace("%27",""):"no title");self.getParentTrackingData();return $.extend({vendor:PLAYER_VENDOR,sessionId:TWP.PostTV.getCookie("s_vi"),page:self.parentTrackingData&&self.parentTrackingData.pageName?self.parentTrackingData.pageName:currentVideoTitle,channel:self.parentTrackingData&&self.parentTrackingData.channel?self.parentTrackingData.channel:"wp - posttv",video:currentVideoTitle,title:currentVideoTitle,type:self.parentTrackingData&&self.parentTrackingData.type?self.parentTrackingData.type:"video",section:self.meta.section?self.meta.section.toLowerCase():"",subsection:self.meta.subsection?self.meta.subsection.toLowerCase():"",source:credit.source?credit.source.toLowerCase():"",videoName:credit.editor?credit.editor.toLowerCase():"",userInfo:TWP.PostTV.BrowserInfo.OS.toLowerCase()+" "+TWP.PostTV.BrowserInfo.browser.toLowerCase()+" v"+TWP.PostTV.BrowserInfo.version,browser:TWP.PostTV.BrowserInfo.browser.toLowerCase(),os:TWP.PostTV.BrowserInfo.OS.toLowerCase(),browserVersion:TWP.PostTV.BrowserInfo.version,flashVersion:typeof swfobject==="undefined"?"n/a":swfobject.getFlashPlayerVersion().major+"."+swfobject.getFlashPlayerVersion().minor+"."+swfobject.getFlashPlayerVersion().release,previousVideo:previousVideoTitle,adsDuration:self.ads&&self.ads.duration?self.ads.duration:"",playerType:self.playerType,videoType:self.isLiveStream?"livestream":"vod",isLiveStream:self.isLiveStream||isLiveEvent||self.json.contentConfig.type==="live",isAd:isAd,adSetCode:self.adSetCode,isFullEpisode:self.json.contentConfig.type==="episode",isClip:!isAd&&self.json.contentConfig.type==="clip",segment:order,durationInSeconds:isAd&&self.ads?self.ads.duration:Math.round(duration),countOfClips:0,offsetTop:self.embedTrackingData&&self.embedTrackingData.offsetTop,nthVideoOnPage:self.embedTrackingData&&self.embedTrackingData.nthVideoOnPage},params)};self.sendTrackingData=function(n,e,params){var t=self.getTrackingData(params);self.sendDataToSplunk(n,e,t);if(!t.splunkOnly){self.sendDataToOmniture(n,e,t);self.sendDataToNielsen(n,e,t)}return self};self.equalsOrIsInArray=function(stringVal,arrayOrString){return(arrayOrString===stringVal)||($.isArray(arrayOrString)&&(-1!=$.inArray(stringVal,arrayOrString)))};self.sendDataToNielsen=function(n,e,params){var isAd=self.equalsOrIsInArray("event7",e);var isContent=!isAd&&self.equalsOrIsInArray("event9",e);if(isContent){var titleParamPrefix="&tl=dav0-";var sectionAsPrefix=self.getSectionAsPrefix();var currentVideoTitle=self.meta.title?sectionAsPrefix+self.meta.title.toLowerCase():"";var currentVideoCategory="";var paramCi="ci=us-904793";var paramC6="&c6=vc,b01";var paramCc="&cc=1";var paramRnd="&rnd="+Math.ceil(Math.random()*1000000000);var paramTl="&tl=dav0-"+encodeURIComponent(currentVideoTitle);var paramCg="&cg="+encodeURIComponent(currentVideoCategory);var optionalParams="";var url="http://secure-us.imrworldwide.com/cgi-bin/m?"+paramCi+paramC6+paramCc+paramRnd+paramTl+paramCg+optionalParams;self.imageForNielsenBeacon="";self.imageForNielsenBeacon=new Image();self.imageForNielsenBeacon.src=url}};self.calcTrackingEVarValue=function(evar,params){var val="";switch(evar){case"eVar41":if(!!self.json.videoCategoryConfig&&!!self.json.videoCategoryConfig[0]&&!!self.json.videoCategoryConfig[0].seriesConfig){val="series"}else{if(!!self.json.videoCategoryConfig&&!!self.json.videoCategoryConfig[0]){val=self.json.videoCategoryConfig[0].id}else{val=params.section}}break;case"eVar43":if(!!self.json.videoCategoryConfig&&!!self.json.videoCategoryConfig[0]&&!!self.json.videoCategoryConfig[0].seriesConfig){val=self.json.videoCategoryConfig[0].id}break;default:break}return val};self.sendDataToOmniture=function(n,e,params){if(!!window.s&&typeof s.sendDataToOmniture=="function"&&!!params){try{var data=$.extend({eVar1:params.page,eVar2:params.channel,eVar6:params.video,eVar8:params.videoName,eVar13:params.title,eVar17:params.type,prop19:params.evtAction?"posttv - "+params.evtModule+" - "+params.evtAction:"",eVar36:(params.nthVideoOnPage&&params.offsetTop)?params.nthVideoOnPage+":"+params.offsetTop:"",eVar41:self.calcTrackingEVarValue("eVar41",params),eVar42:params.source,eVar43:self.calcTrackingEVarValue("eVar43",params),eVar44:params.userInfo,eVar45:params.page?params.page:"",eVar46:params.previousVideo,eVar47:params.subsection,eVar48:params.adsDuration,eVar49:params.playerType},self.appendToOmniture,params);n=n||"";e=e||[];s.sendDataToOmniture(n,e,data)}catch(e){console.log("Unable to send tracking data to omniture: "+e.stack)}}return self};self.sendDataToSplunk=function(n,e,params){var now=_.now();var data={browser:params.browser,os:params.os,browserVersion:params.browserVersion,flashVersion:params.flashVersion,vendor:params.vendor,sessionId:params.sessionId,page:params.page,channel:params.channel,video:params.title,videoId:self.methodeUuid,videoName:params.title,videoType:params.videoType,videoSource:params.source,type:params.type,section:params.section,url:document.URL,HTTP_REFERER:document.referrer,adsDuration:params.adsDuration,playerType:params.playerType,adSetCode:params.adSetCode,evtName:n,evtType:typeof e=="string"?e:e[0]||"",evtAction:params.evtAction,evtGroup:params.evtGroup,evtModule:params.evtModule,evtTime:now,targetUrl:params.targetUrl,errorCode:params.errorCode,errorText:params.errorText,offsetTop:params.offsetTop,nthVideoOnPage:params.nthVideoOnPage};var errors=_.pick(params,["errorText","adError"]);var loadTimes=_.pick(params,["adLoadDelta","hasPlayedAd","pageLoadDelta","playerLoadDelta","videoLoadDelta","videosPlayed"]);var bandwidthStats=_.pick(params,["bandwidthLow","bandwidthHigh","bandwidthAvg"]);errors=_.pick(errors,_.identity);loadTimes=_.pick(loadTimes,_.identity);bandwidthStats=_.pick(bandwidthStats,_.identity);_.extend(data,errors,loadTimes,bandwidthStats);if(params){try{e=typeof e=="undefined"?"":typeof e=="string"?e:$.isArray(e)?e[0]:"";now=params.evtTime||now;$.ajax({url:"http://videotracker.washingtonpost.com/index.html",dataType:"jsonp",cache:false,timeout:3000,data:data});window.TWP&&TWP.Data&&TWP.Data.Splunk&&TWP.Data.Splunk.addToHistory(self.methodeUuid,e,now)}catch(e){console.log("Unable to send tracking data: "+e.stack)}}};self.loadChartbeatVideoScript=function(){var e=document.createElement("script");e.setAttribute("language","javascript");e.setAttribute("type","text/javascript");e.setAttribute("src","//static.chartbeat.com/js/chartbeat_video.js");document.body.appendChild(e)};self.updateMetaTag=function(params){if($(params.selector).length){$(params.selector).attr("content",params.content)}else{var opts={};opts[params.nameAttr]=params.name;opts.content=params.content;$("<meta/>",opts).appendTo("head")}};self.updateOgMeta=function(){self.updateMetaTag({selector:"meta[property=og\\:title]",nameAttr:"property",name:"og:title",content:self.meta.title.replace("'","'")});self.updateMetaTag({selector:"meta[property=og\\:url]",nameAttr:"property",name:"og:url",content:self.meta.permaLinkURL});self.updateMetaTag({selector:"meta[property=og\\:image]",nameAttr:"property",name:"og:image",content:self.meta.imageThumbnailURL});self.updateMetaTag({selector:"meta[property=og\\:description]",nameAttr:"property",name:"og:description",content:self.meta.description});self.updateMetaTag({selector:"meta[property=og\\:video]",nameAttr:"property",name:"og:video",content:self.meta.ooyalaPlayerURL});self.updateMetaTag({selector:"meta[property=og\\:video\\:secure_url]",nameAttr:"property",name:"og:video:secure_url",content:encodeURIComponent(self.meta.ooyalaPlayerSecureURL)});$("link[rel=image_src]").attr("href",self.meta.imageThumbnailURL)};self.updateTwitterMeta=function(){if($("meta[name=twitter\\:player]").length===0){if($("meta[name=twitter\\:card]").length){$("meta[name=twitter\\:card]").remove()}if($("meta[name=twitter\\:site]").length){$("meta[name=twitter\\:site]").remove()}}self.updateMetaTag({selector:"meta[name=twitter\\:card]",nameAttr:"name",name:"twitter:card",content:"player"});self.updateMetaTag({selector:"meta[name=twitter\\:title]",nameAttr:"name",name:"twitter:title",content:self.meta.title.replace("'","'")});self.updateMetaTag({selector:"meta[name=twitter\\:description]",nameAttr:"name",name:"twitter:description",content:self.meta.description});self.updateMetaTag({selector:"meta[name=twitter\\:image]",nameAttr:"name",name:"twitter:image",content:self.meta.imageThumbnailURL});self.updateMetaTag({selector:"meta[name=twitter\\:player]",nameAttr:"name",name:"twitter:player",content:"https://player.ooyala.com/tframe.html?ec="+self.embedCode+"&pbid=MDE1ODY5NGFhMjJmMTVkNTk3OWQ2NDg5"});self.updateMetaTag({selector:"meta[name=twitter\\:player\\:width]",nameAttr:"name",name:"twitter:player:width",content:"435"});self.updateMetaTag({selector:"meta[name=twitter\\:player\\:height]",nameAttr:"name",name:"twitter:player:height",content:"251"});self.updateMetaTag({selector:"meta[name=twitter\\:site]",nameAttr:"name",name:"twitter:site",content:"@postpolitics"})};self.onPlayerCreated=function(callback){self.callbacks.playerCreated=callback;return self};self.onEmbedCodeChanged=function(callback){self.callbacks.embedCodeChanged=callback;return self};self.onContentTreeFetched=function(callback){self.callbacks.contentTreeFetched=callback;return self};self.onPlayStarted=function(callback){self.callbacks.editorialPlayStarted=callback;return self};self.onPlayCompleted=function(callback){self.callbacks.playCompleted=callback;return self};self.onCompanionAdsReady=function(callback){self.callbacks.companionAds=callback;return self};self.onAdStarted=function(callback){self.callbacks.adStarted=callback;return self};self.onAdCompleted=function(callback){self.callbacks.adCompleted=callback;return self};self.onPlayheadTimeChanged=function(callback){self.callbacks.playheadTimeChanged=callback;return self};self.onVolumeChanged=function(callback){self.callbacks.volumeChanged=callback;return self};self.onVideoError=function(callback){self.callbacks.videoError=callback;return self};self.bindPlayerContainerHandlers=function(){var self=this;if(!!self.$playerContainer.data("autopreview")){PubSub.subscribe(TWP.PostTV.EVENTS.VISIBILITY_CHANGED,self.handleVisibilityChanged)}PubSub.subscribe(TWP.PostTV.EVENTS.PLAY_NEXT_VIDEO,function(){self.onPlayNextVideo.apply(self,(Array.prototype.slice.call(arguments,1)))});PubSub.subscribe(TWP.PostTV.EVENTS.PLAY,self.play);PubSub.subscribe(TWP.PostTV.EVENTS.PAUSE,self.pause);PubSub.subscribe(TWP.PostTV.EVENTS.STOP,self.stop);PubSub.subscribe(TWP.PostTV.EVENTS.DESTROY,self.destroy);PubSub.subscribe(TWP.PostTV.EVENTS.SET_VOLUME,function(){self.setVolume.apply(self,(Array.prototype.slice.call(arguments,1)))});PubSub.subscribe(TWP.PostTV.EVENTS.SEEK,function(){self.seek.apply(self,(Array.prototype.slice.call(arguments,1)))});PubSub.subscribe(TWP.PostTV.EVENTS.SKIP_AD,self.skipAd);PubSub.subscribe(TWP.PostTV.EVENTS.SEND_TRACKING_DATA,self.handleTrackingData);TWP.PostTV.isPubSub=true};return(function(){self.json=args.json||{};self.embedCode=args.embedCode||("contentConfig" in self.json?self.json.contentConfig.videoContentId:"");self.methodeUuid=("contentConfig" in self.json?self.json.contentConfig.uuid:"");self.playerContainerId=args.playerContainerId||"posttv-player-container";self.playerElementId=self.playerContainerId+"-JW";self.$playerContainer=$("#"+self.playerContainerId);self.$playerContainer.append('<div id="'+self.playerElementId+'"></div>');self.bindPlayerContainerHandlers();self.playerType=args.playerType||"";self.isModal=self.$playerContainer.hasClass("modal");self.isAutoplaying=false;self.width=args.width||self.$playerContainer.width()||480;self.height=args.height||parseInt(self.width*270/480)||270;self.jwArgs=args.jwArgs||{};self.jwPlayer=null;self.callbacks={};self.mbSubscriber=args.playerType||"default-video-page";self.autoplay=TWP.PostTV.isTablet||TWP.PostTV.isMobile?false:typeof args.autoplay=="string"?!!parseInt(args.autoplay):args.autoplay||false;self.initialTime=args.initialTime||0;self.wmode=args.wmode||"opaque";self.showEndscreen=(typeof args.showEndscreen!="undefined"?args.showEndscreen:false);self.hide=!!args.hide?args.hide:self.showEndscreen?"info,sharing,channels,embed":"info,sharing,channels,embed,endscreen";self.flashParams=args.flashParams||{};self.locale=args.locale||{};self.loop=!!args.loop||false;self.version=args.version||1;self.playheadTime=0;self.volume=isNaN(Number(args.volume))?self.getVolumeFromCookie():Number(args.volume);self.playerCreated=false;self.showAdsForFirstVideoOnly=typeof args.showAdsForFirstVideoOnly==="boolean"?args.showAdsForFirstVideoOnly:false;self.updateMetaFromJSON(self.json);self.isPlayingAd=false;self.hasPlayedAd=false;self.firstFrame=true;self.showCompanionAdIfAny=args.showCompanionAdIfAny?true:false;self.appendToOmniture={};self.trackingLevel=args.trackingLevel||"player-default-tracking";self.progressIntervals=parseInt(4);self.isPlaylist=args.isPlaylist||false;self.initProgress();TWP.PostTV.players[self.playerContainerId]=self})()}}(jQuery,_));TWP.PostTV.InlinePlayerCounter=isNaN(TWP.PostTV.InlinePlayerCounter)?0:TWP.PostTV.InlinePlayerCounter;TWP.PostTV.SessionEditorialPlayCounter=isNaN(TWP.PostTV.SessionEditorialPlayCounter)?0:TWP.PostTV.SessionEditorialPlayCounter;(function($){TWP.PostTV.InlinePlayer=TWP.PostTV.InlinePlayer||function(el,args){args=args||{};var self=this;var isIE7=(document.all&&!document.querySelector)?true:false;var init=function(el){self.json=args.json||{};self.callback=args.onload||null;self.preparePlayerContainer(el);return self};var isTruthy=function(str){return str==="true"||parseInt(str)===1};self.preparePlayerContainer=function(el){var $container=$(el);var autoplay=isTruthy($container.attr("data-autoplay"));var ajaxUrl=(typeof $container.attr("data-video-uuid")!="undefined"?"http://www.washingtonpost.com/posttv/c/videojson/"+$container.attr("data-video-uuid"):"");self.showEndscreen=(typeof $container.attr("data-show-endscreen")=="undefined")||(typeof $container.attr("data-show-endscreen")!="undefined"&&$container.attr("data-show-endscreen")==1);self.playerType=(typeof $container.attr("data-player-type")!="undefined"?$container.attr("data-player-type"):"");self.initialTime=(typeof $container.attr("data-initial-time")!="undefined"?(isNaN(parseFloat($container.attr("data-initial-time")))?0:parseFloat($container.attr("data-initial-time"))/ONE_SECOND):0);self.loop=isTruthy($container.attr("data-loop"));self.wmode=(typeof $container.attr("data-wmode")!="undefined"?$container.attr("data-wmode"):"");self.hide=(typeof $container.attr("data-hide")!="undefined"?$container.attr("data-hide"):"");self.trackingLevel=(typeof $container.attr("data-tracking-level")!="undefined"?$container.attr("data-tracking-level"):"");self.showCompanionAdIfAny=isTruthy($container.attr("data-companion-ad"));self.adSetCode=(typeof $container.attr("data-adset-code")!="undefined"?$container.attr("data-adset-code"):"");self.adLengthParam=(typeof $container.attr("data-ad-length-param")!="undefined"?$container.attr("data-ad-length-param"):"");self.adZone=(typeof $container.attr("data-ad-zone")!="undefined"?$container.attr("data-ad-zone"):"");self.adFreq=(typeof $container.attr("data-ad-freq")!="undefined"?$container.attr("data-ad-freq"):TWP.PostTV.adFrequency);self.allowAd=$container.attr("data-show-ad")==="-1"||isTruthy($container.attr("data-show-ad"))?-1:$container.attr("data-show-ad")==="0"||$container.attr("data-show-ad")==="false"?0:1;self.showAdsForFirstVideoOnly=isTruthy($container.attr("data-show-ads-for-first-video-only"));self.adPattern=(typeof $container.attr("data-ad-pattern")!="undefined"?$container.attr("data-ad-pattern"):"");self.adPattern=self.adPattern.split("");self.adTagUrlSuffix=(typeof $container.attr("data-adtagurl-suffix")!="undefined"?$container.attr("data-adtagurl-suffix"):"");self.volume=(isNaN(Number($container.attr("data-volume")))?1:$container.attr("data-volume"));self.useCustomScrubber=(typeof $container.attr("data-use-custom-scrubber")!="undefined"?$container.attr("data-use-custom-scrubber")==1:false);if(!TWP.PostTV.isDeskweb&&!TWP.PostTV.mobileTabletShowEndscreen){self.showEndscreen=false}var createPlayer=function(json){self.player=new TWP.PostTV.Player({args:args,json:json,playerContainerId:$container.attr("id"),autoplay:autoplay,playerType:self.playerType,initialTime:self.initialTime,loop:self.loop,wmode:self.wmode,css:self.css,trackingLevel:self.trackingLevel,showCompanionAdIfAny:self.showCompanionAdIfAny,adSetCode:self.adSetCode,adLengthParam:self.adLengthParam,adZone:self.adZone,adFreq:self.adFreq,adPattern:self.adPattern,adTagUrlSuffix:self.adTagUrlSuffix,allowAd:self.allowAd,showAdsForFirstVideoOnly:self.showAdsForFirstVideoOnly,volume:self.volume,hide:!!self.hide?self.hide:self.useCustomScrubber?"all":"",showEndscreen:self.showEndscreen});self.player.onCompanionAdsReady(function(){if(self.player.showCompanionAdIfAny&&!self.player.isFullscreen()){self.player.companionOpts=!$.isEmptyObject(args.companionOpts)?args.companionOpts:{companionClassName:"mp-companion-ad"};if(isIE7){var ie7Styles={style:{position:"absolute",paddingLeft:"25px"}};jQuery.extend(true,self.player.companionOpts,ie7Styles)}}if(!!args.callbacks&&typeof args.callbacks.onCompanionAdsReady=="function"){args.callbacks.onCompanionAdsReady(self.player)}return self.player});self.player.onAdCompleted(function(){self.player.removeCompanionAd();if(!!args.callbacks&&typeof args.callbacks.onAdCompleted=="function"){args.callbacks.onAdCompleted(self.player)}return self.player});self.player.onPlayStarted(function(){if(!!args.callbacks&&typeof args.callbacks.onPlayStarted=="function"){args.callbacks.onPlayStarted(self.player)}});if(self.callback){self.player.onEmbedCodeChanged(function(){self.callback(self.player)})}if(!!args.callbacks){if(typeof args.callbacks.onPlayerCreated=="function"){self.player.onPlayerCreated(function(){args.callbacks.onPlayerCreated(self.player)})}if(typeof args.callbacks.onEmbedCodeChanged=="function"){self.player.onEmbedCodeChanged(function(){args.callbacks.onEmbedCodeChanged(self.player)})}if(typeof args.callbacks.onContentTreeFetched=="function"){self.player.onContentTreeFetched(function(){args.callbacks.onContentTreeFetched(self.player)})}if(typeof args.callbacks.onPlayCompleted=="function"){self.player.onPlayCompleted(function(){args.callbacks.onPlayCompleted(self.player)})}if(typeof args.callbacks.onAdStarted=="function"){self.player.onAdStarted(function(){args.callbacks.onAdStarted(self.player)})}if(typeof args.callbacks.onPlayheadTimeChanged=="function"){self.player.onPlayheadTimeChanged(function(times){args.callbacks.onPlayheadTimeChanged(self.player,times)})}if(typeof args.callbacks.onVolumeChanged=="function"){self.player.onVolumeChanged(function(){args.callbacks.onVolumeChanged(self.player)})}if(typeof args.callbacks.onVideoError=="function"){self.player.onVideoError(function(){args.callbacks.onVideoError(self.player)})}}self.player.create()};if($.isEmptyObject(self.json)){$.ajax({type:"GET",url:ajaxUrl,contentType:"application/json",jsonpCallback:"cb_"+$container.attr("data-video-uuid").replace(/-/g,""),data:{resType:"jsonp"},dataType:"jsonp",cache:true,success:function(data){createPlayer(data[0])},error:function(e){if(typeof window.console==="function"){console.log("Failed to fetch video jsonp at: "+ajaxUrl+", e: "+e.message)}self.sendTrackingData("PostTV Player Data Error",["event999"],{errorCode:"ptv_cannotRetrieveVideoJson",errorText:"Cannot retrieve video json data at: "+ajaxUrl})}})}else{createPlayer(self.json)}return self};return init(el)};TWP.PostTV.initInlinePlayer=TWP.PostTV.initInlinePlayer||function(obj,args){args=args||{};var $video=$(obj).filter(":not(.ooyala-player-processed)");if($video.size()){new TWP.PostTV.InlinePlayer($video.get(0),args);$video.removeClass("ooyala-player").addClass("ooyala-player-processed")}}})(jQuery)}if(typeof EMBED_PLAYER_TYPE=="undefined"){var queryStringObject=function(){if(!window.location.search){return{}}var b=window.location.search.slice(1).split("&");var d=b.length;var a={};for(var c=0;c<d;c++){var e=b[c].split("=");if(e[0]){if(e.length<2){e.push("")}a[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}}return a};var isYoutubeEmbed=function(a){return a&&a.embedConfig&&a.embedConfig.embedType&&a.embedConfig.embedType.toLowerCase()=="youtube"};var queryStringObj=queryStringObject();var videoJson=$.parseJSON($("#"+TWP.videoDataId).html());if(queryStringObj.player!="oo"&&!isYoutubeEmbed(videoJson)){jwPlayerWrapper()}};
/* posttv-player.js */
(function(){var d=wp_pb.contextPath?wp_pb.contextPath:(!!TWP.PostTV.isDebugMode?"http://www.washingtonpost.com/posttv-beta":"http://www.washingtonpost.com/posttv");var l={ooyala:["http://player.ooyala.com/v3/b7011b24c7aa4da0901ec2ebf8ece42c?platform=html5-fallback",d+"/static/js/posttv/ooyala/ooyala-plugin-loader.js",d+"/static/js/posttv/ooyala/ooyala-player-triad.js",d+"/static/js/posttv/ooyala/ooyala-companion-ads.js"],jwplayer:["http://videos.posttv.com/JWPlayer/JWPlayerConfig.js"],youtube:[d+"/static/js/posttv/youtube/embed.js"]};var i=function(){if(!window.location.search){return{}}var q=window.location.search.slice(1).split("&");var s=q.length;var e={};for(var r=0;r<s;r++){query=q[r].split("=");if(query[0]){if(query.length<2){query.push("")}e[decodeURIComponent(query[0])]=decodeURIComponent(query[1])}}return e};var n=function(q){var e=[];$("#"+q).find(".carousel-slide-item").each(function(r){e[r]=$(this).data("videoJson")});return e};var c=function(e){return e.embedConfig&&e.embedConfig.embedType&&e.embedConfig.embedType.toLowerCase()=="youtube"};var b=function(r){if(!TWP||!TWP.JWConfig||!TWP.JWConfig.sections||!TWP.JWConfig.allowed){return false}if(TWP.JWConfig.sections.length==0){return true}try{for(var q=0;q<TWP.JWConfig.sections.length;q++){var t=TWP.JWConfig.sections[q];if(r.metaConfig.primarySiteNode.toLowerCase().indexOf(t.toLowerCase())>-1){return true}}}catch(s){console.error(s)}return false};var g=function(){var e=new Date().getTime();TWP.Data.Splunk.send("PostTV Player Error","event9995",{evtTime:e,errorCode:"ptv_missingPTSStreams",errorText:"PostTV video is missing PTS streams."})};var j=function(q){try{if(!q.contentConfig.streams.length||(q.contentConfig.streams[0].provider==="ooyala")){g();return false}}catch(r){g();return false}return true};function f(t){try{var r=t.length;for(var q=0;q<r;q++){if(!j(t[q])){return false}}}catch(s){return false}return true}function h(e){return e.truthTellerEnabled}var m=i(),o=m.player==="jw"?"jw":m.player==="oo"?"oo":undefined;if(!o){try{var p=$("#player-container-posttv-series-template").attr("data-player");o=p=="jw"?"jw":p=="oo"?"oo":TWP.PostTV.BrowserInfo.deviceType!=0?"oo":"jw"}catch(k){o=TWP.PostTV.BrowserInfo.deviceType!=0?"oo":"jw";console.log(k)}}try{var a=$.parseJSON($("#"+TWP.videoDataId).html());if(c(a)){o="youtube"}else{if(!b(a)||!j(a)||h(a)){o="oo"}}}catch(k){console.log(k)}TWP.playerScript=(o==="jw")?l.jwplayer:(o==="youtube")?l.youtube:l.ooyala;TWP.PostTV.playerVendor=o})();$(function(){function a(e,f){var d=TWP.playerScript[e];if(!d){f();return}var c=document.createElement("script");c.type="text/javascript";if(c.readyState){c.onreadystatechange=function(){if(c.readyState=="loaded"||c.readyState=="complete"){c.onreadystatechange=null;f()}}}else{c.onload=function(){f()}}c.src=d;document.getElementsByTagName("head")[0].appendChild(c)}var b=function(){var c=0;var d=function(){c++;if(c<TWP.playerScript.length){a(c,d)}else{if(window.jwplayer){jwplayer.key="ki3+KclbG9mBpkeFlZarUFKpC5JDsKHoUUZA4Q=="}console.log("Player files are loaded. Publish player_script_loaded event.");PubSub.publish("player_script_loaded","ooyala")}};a(c,d)};b()});

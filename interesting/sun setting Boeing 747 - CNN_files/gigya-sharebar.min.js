!function(e){"use strict";function i(e,i){if("function"==typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: "+e,headline:i}}})}catch(t){}}function t(t,a){e.each(t.providers.split(","),function(n,o){i(o,a.title),e.ajax({url:CNN.SocialConfig.gigya.shareStatsPostURL||"",dataType:"json",type:"POST",data:{actionType:"socialShare",socialType:o||"",headline:a.title||"",shortUrl:t.targetURL||"",url:window.location.href||"",env:CNN.contentModel.env||""}})})}function a(e){var i=v||w;i?(i=n(i,e),o(i,e)):window.console&&window.console.error&&window.console.error("No canonical share widget has been defined")}function n(e,i){var t=e.clone();return i&&i.url&&t.setLinkBack(i.url),t}function o(i,a){var n,o,r,s,l=CNN.msib.cfg.gigya;a=a||{},"undefined"!=typeof a.elem&&"undefined"!=typeof a.elem.data("isshorturl")&&(C=a.elem.data("isshorturl")),o=e("<div>").attr("data-js-gigya-share","wrapper").appendTo("body"),r=d(o),s=C?"never":"whenRequired",n={deviceType:"auto",wrap:!0,operationMode:"simpleShare",containerID:r,userAction:i,moreEnabledProviders:l.primaryProviders+","+l.moreEnabledProviders,shortURLs:s,onSendDone:function(e){t(e,i)}},gigya.socialize.showShareUI(n),window.setTimeout(function(){o.attr("data-js-gigya-share-fade","")},10),window.setTimeout(function(){o.attr("data-js-gigya-share-active","")},300)}function r(i,a){var n,o,r,s,l,c,h=CNN.msib.cfg.gigya;a=a||{},"undefined"!=typeof a.elem&&null!==a.elem&&"function"==typeof a.elem.data&&"undefined"!=typeof a.elem.data("isshorturl")&&(C=a.elem.data("isshorturl")),o=e("<div>"),!Modernizr.mobile||Modernizr.ios&&Modernizr.tablet?o.appendTo(a.elem):(o.appendTo("body"),o.css("z-index","100")),r=d(o),s=C?"never":"whenRequired",n={deviceType:"auto",wrap:!0,operationMode:"simpleShare",containerID:r,userAction:i,moreEnabledProviders:h.primaryProviders+","+h.moreEnabledProviders,shortURLs:s,onSendDone:function(e){t(e,i)},onLoad:function(){l=e(a.elem).offset(),c=e(a.elem).find(e("div.gig-simpleShareUI")),"undefined"!=typeof c&&l.left<320&&(!Modernizr.mobile||Modernizr.ios&&Modernizr.tablet?e(c).css("margin-left","35px"):e(c).css("margin-left","0px")),e("div.gig-simpleShareUI-caption").on("click",function(){return!1}),e("div.gig-simpleShareUI-button").on("click",function(){return e("div.gig-simpleShareUI").hide(),!1})}},gigya.socialize.showShareUI(n),window.setTimeout(function(){o.attr("data-js-gigya-share-fade","")},10),window.setTimeout(function(){o.attr("data-js-gigya-share-active","")},300)}function s(i){var t,a=i.attr("data-canonical"),n=i.attr("data-user-message"),o=i.attr("data-link"),r=i.attr("data-title"),s=i.attr("data-subtitle"),d=i.attr("data-description"),l=i.attr("data-twitter-account"),c=i.attr("data-image-src"),h=new gigya.socialize.UserAction;return n&&h.setUserMessage(n),o&&(h.setLinkBack(o),h.addActionLink("Read More",o)),r&&h.setTitle(e.trim(r)+(l?" @"+l:"")),s&&h.setSubtitle(s),d&&h.setDescription(d),c&&(t={type:"image",src:c},o&&(t.href=o),h.addMediaItem(t)),"undefined"!=typeof a&&(v=h),C=i.attr("data-isshorturl"),h}function d(e){var i=e.attr("id");if("undefined"==typeof i||""===i){do i="gigyaShareBar_"+N,N+=1;while(document.getElementById(i));e.attr("id",i)}return i}function l(i,a,n){var o,r,s=CNN.msib.cfg.gigya,l=e("<div>"),c=d(l),h=s.showCounts,u="gigya-sharebar-element";b>3&&(u+=" gigya-element-large"),l.addClass(u).appendTo(a),b+=1,"none"===h&&"Facebook-Like"===i&&(h="right"),o=C?"never":"Facebook"===i?"never":"whenRequired",void 0!==s.providerCfg[i]?(s.providerCfg[i].provider=i,r=[s.providerCfg[i]]):r=i,gigya.socialize.showShareBarUI({deviceType:"auto",operationMode:"simpleShare",containerID:c,showCounts:h,userAction:n,shareButtons:r,moreEnabledProviders:s.moreEnabledProviders,shortURLs:o,useEmailCaptcha:!1,showEmailButton:!0,emailBody:"$userMsg$<br /><br />I thought you'd like this:<br />$URL$<br /><br />$title$<br />$description$<br />",useHTML:!0,onSendDone:function(e){t(e,n)}})}function c(e){var i,t=CNN.msib.cfg.gigya.shareButtons.split(","),a=s(e),n=t.length;for(b=1,"undefined"==typeof w&&(w=a),i=0;n>i;i++)l(t[i],e,a)}function h(e){var i=s(e);e.on("click",function(){o(i,{elem:e})}),e.show()}function u(i){var t,a;i.on("click",function(){a=e(this),t=s(a),r(t,{elem:i})})}function g(i){var t=e(".js-gigya-sharebar"),a=e(".js-gigya-share"),n=e(".js-gigya-share-collection");(t.length||a.length||n.length)&&(y=i,CNN.msib.loadGigya(function(e){p(e,t,a,n)}))}function f(){var i,t,a=e(".js-gigya-sharebar"),n=e(".js-gigya-share"),o=e(".js-gigya-share-collection");if(a&&a.length>0){for(i=0;i<a.length;i++)t=e(a[i]).find("div.share-bar-whatsapp-container"),"undefined"!=typeof t&&e(a[i]).before(e(t));a.html("")}n&&n.length>0&&n.html(""),o&&o.length>0&&o.html(""),(a.length||n.length||o.length)&&CNN.msib.loadGigya(function(e){p(e,a,n,o),m()})}function p(i,t,a,n){return!i&&window.console&&window.console.error?void window.console.error("Gigya not loaded -- share bar disabled."):(t.each(function(){c(e(this))}),a.each(function(){h(e(this))}),void n.each(function(){u(e(this))}))}function m(){var i,t,a=e(".share-bar-whatsapp-container"),n=0,o=0;if(a.length)if(e("html").hasClass("mobile")&&e("html").hasClass("phone"))for(i=e(".gigya-sharebar-element"),t=0;t<i.length;t++)(3===t||5===n)&&(e(i[t]).after(e(a[o])),e(a[o]).show(),n=0,o++),n++;else e(a).hide()}var y,w,v,b,N=0,C=!1;e(window).load(m),e(function(){CNN.msib.onInitialized(g)}),window.CNN=window.CNN||{},CNN.gigyaShareBar=function(){CNN.msib.onInitialized(g)},CNN.share=CNN.share||{},CNN.share.popup=a,CNN.share.reloadShareBar=f}(jQuery);
//# sourceMappingURL=gigya-sharebar.min.js.map
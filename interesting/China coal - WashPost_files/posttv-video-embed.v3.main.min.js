(function(K){var u="//www.washingtonpost.com/posttv",S=[],E=window.location.href,U=E.split("?")[0].split("/"),I=/washingtonpost.com|digitalink.com/.test(U[2]),a=/^washingtonpost.com|digitalink.com$/.test(document.domain),M=I&&"wp_pb" in window,m=/local/.test(U[2]),w=E.indexOf("_compact=false")>-1,G=E.indexOf("ptvdebug=true")>-1||m||/pb-dev/.test(U[2]),h=E.indexOf("ptvdebugtracking=true")>-1,L=m||w?"":".min",l="1445977716056",y=K('script[src*="posttv-video-embed.v3.main.js"], script[src*="posttv-video-embed.v3.main.min.js"]').attr("src"),Z,B=["92d280a2-7d90-11e0-b6cc-e4e4a8a38cf0","cbf7a484-7d90-11e0-b6cc-e4e4a8a38cf0","02c9ecd4-1463-11e5-9518-f9e0a8959f32"],J=243,ac=A(),d=H(),T=d.userAgentStr,g=I&&/powerpost/i.test(E),f=T&&T.match(/(iPhone|iPad).*Version\/([0-9]*)(\.[0-9]*).*Safari/),X=f&&f[2]&&typeof parseInt(f[2])==="number"?parseInt(f[2])<6:false,ab=true,s=false,z=1000,e=60*z,c=9/16,aa=16/9,k=3/4,o=4/3;if(y){Z=y.indexOf("/static/js/posttv")>-1?y.indexOf("/static/js/posttv"):y.indexOf("/resources/js/posttv");if(Z>-1){u=y.substr(0,Z);u=u.replace("js.washingtonpost.com","www.washingtonpost.com")}}if(u.indexOf("..")===0){S=u.split("/");if(E.substr(E.length-1,1)!=="/"){U.pop()}for(var Y=0;Y<S.length;Y++){if(S[Y]!==".."){break}U.pop()}u=U.join("/")}if(u.indexOf("//")===0){u=window.location.protocol+u}if(G){console.log("contextPath:",u)}function Q(){if(G){console.log("processEmbeds()")}var ao,aB,al,aH=[],ah="",aq,aG,ar,aD,aI,aj,aC,ae,aF,av,af,ag,ap=false,aw=false,an=true,aK=false,am=K(".pb-f-liveblog-story-list").length>0,ai=X,aJ=false,aE,ay,ax=function(){if(G){console.log("pauseIframe()",this)}var i=this.contentWindow.PubSub;i.publish("pause")},ak=function(au,aL){if(G){console.log("onIframePlaying()",au)}var i=K(".posttv-video-embed").not("[data-nth-video-on-page="+au+"]").find("iframe");i.each(ax)},ad=function(i){if(G){console.log("onIframeLoad()",this,i)}var au=this.contentWindow.PubSub;au.subscribe("playing",function(){ak.call(this,i,"playing")});au.subscribe("adStarted",function(){ak.call(this,i,"adStarted")})},at=function(au){if(G){console.log("initSyncPause()",au)}var aL=au.find("iframe")[0],i=au.attr("data-nth-video-on-page");if(au.attr("data-sync-pauser-init")!=="1"){K(aL).on("load",function(){ad.call(aL,i)});au.attr("data-sync-pauser-init","1")}};ao=K(".posttv-video-embed");if(K("#posttv-video-embed-css").length===0){K("head").append(W())}v();if(ab&&ao[0]&&ao[0].getAttribute("data-iframe-on-load")!=="0"&&!ai&&!am){ao[0].setAttribute("data-iframe-on-load",1)}if(G&&!a){console.warn("document.domain is ["+document.domain+"], expected [washingtonpost.com]")}for(var aA=0;aA<ao.length;aA++){if(ao[aA].tagName.toLowerCase()=="div"&&ao[aA].getAttribute("data-processed")===null&&ao[aA].getAttribute("data-skip-processing")!=="1"){aB=ao[aA];al=K(aB);al.attr("data-offset-top",Math.floor(al.offset().top));al.attr("data-nth-video-on-page",aA+1);aw=aB.getAttribute("data-is-truth-teller");aw=aw==="true"||aw=="1"?true:false;an=aB.getAttribute("data-show-promo-headline")!=="0";if(aw&&K("#posttv-video-embed-tt-css").length===0){K("head").append(j())}if(al.data("categoryId")==="wusa9"){aB.setAttribute("data-logo","wusa9")}else{if(!I&&al.data("categoryId")!=="sponsoredvideo"){aB.setAttribute("data-logo","posttv")}}av=F(al.width());if(aB.getAttribute("data-aspect-ratio")&&parseFloat(aB.getAttribute("data-aspect-ratio"))>=0.5625){al.css("paddingBottom",parseFloat(aB.getAttribute("data-aspect-ratio"))*100+"%")}aB.innerHTML=r({promoSize:O(al.width()),imrsUrl:R(aB.getAttribute("data-show-promo"),av),headline:p(aB.getAttribute("data-headline")),duration:C(aB.getAttribute("data-duration")),uuid:aB.getAttribute("data-uuid")},aw,an);if(!s){v()}aC=aB.getAttribute("data-uuid");ae=aB.getAttribute("data-object-id");ap=aB.getAttribute("data-autoplay");aq=aB.getAttribute("data-initial-time");if(aq){aH.push("t="+aq)}aG=aB.getAttribute("data-show-endscreen");if(!isNaN(aG)&&aG){aH.push("e="+aG)}ar=aB.getAttribute("data-auto-init");if(ar==1||ar=="true"){aH.push("autoinit=true")}aD=aB.getAttribute("data-show-posttv-overlay");if(aD===0||aD==="false"){aH.push("showOverlay=0")}aI=aB.getAttribute("data-allow-preroll")||aB.getAttribute("data-show-ad");if(g){aI=0}if(aI===0||aI==="0"||aI==="false"){aH.push("allowPreroll=0")}if(aB.getAttribute("data-player")=="oo"){aH.push("player=oo")}if(an===false){aH.push("showPromoHeadline=0")}for(var az=0;az<B.length;az++){if(B[az]===aC){aK=true;break}}if(!aC){aK=true}aB.setAttribute("data-is-live-video",aK?1:0);if(aK){if(am&&d.isTablet){ai=true}ag=ai?"live":"embed-live";aF=(ae)?ae:aC;aB.setAttribute("data-iframe-on-load","0")}else{ag=ai?"video":"embed";aF=aC}aB.setAttribute("data-content-id",aF);aH.push("autoplay=1");if(G){aH.push("ptvdebug=true")}if(h){aH.push("ptvdebugtracking=true","debugAnalytics=log")}if(w){aH.push("_compact=false")}if(E.indexOf("ptvadtype=vast")>-1){aH.push("adType=vast")}if(E.indexOf("ptvadtype=googima")>-1){aH.push("adType=googima")}if(aH.length>0&&!ai){ah="?"+aH.join("&")}aj=(!aF)?"about:blank":u+"/c/"+ag+"/"+aF+ah;aB.setAttribute("data-iframe-src",aj);if(G){console.log("src:",aj)}b("event5_2","PostTV Promo Rendered","",{videoId:aF,src:aj,isLiveVideo:aK,offsetTop:al.attr("data-offset-top"),nthVideoOnPage:al.attr("data-nth-video-on-page")});if(aB.getAttribute("data-iframe-on-load")==="1"){aJ=true;if(G){console.log("initBgIframe")}al.find(".ptv-promo").addClass("loading").after(q({src:aj.replace("autoplay=1",""),promoSize:av}));if(al.attr("data-sync-pause")==="1"){at(al)}setTimeout((function(i){return function(){if(i.hasClass("loading")){if(G){console.log("timeout backup removal loading")}i.removeClass("loading")}}})(al.find(".ptv-promo")),5000)}al.on("click.ptv-promo",".ptv-promo",(function(aQ,au,aP,aO,aN,aL,i,aM){return function(){if(G){console.log("promo clicked")}var aR=K(au),aT=aR.find("iframe"),aU;if(aR.find(".ptv-promo").hasClass("loading")){return}aE=aR.data("offsetTop");ay=aR.data("nthVideoOnPage");if(aM){window.open(aO,"_blank")}else{if(aN&&aT[0]){aT.attr("data-autoplay-on-load","1");try{aU=aT[0].contentWindow.jQuery(".ptv-promo[data-track-click]");if(aU.length===0){aU=aT[0].contentWindow.jQuery(".ptv-promo")}K(aU[0]).trigger("click")}catch(aS){console.log(aS,arguments)}finally{K(this).remove();aT.css("z-index",0)}}else{aR.addClass("ptv-iframe-loading");if(G){console.log("initIframe")}au.innerHTML=q({src:aO,promoSize:aL});aT=aR.find("iframe");if(aR.attr("data-sync-pause")==="1"){at(aR)}}K(au).off("click.ptv-promo");K(window).off("resize.ptv-promo."+au.getAttribute("data-uuid"));if(aP){au.style.height=au.offsetHeight+J+"px";au.style.paddingBottom="0"}}b("event6_3","PostTV Promo Clicked","",{videoId:aQ,src:aO,isLiveVideo:i,offsetTop:aE,nthVideoOnPage:ay,articlePageNum:aR.data("pageNum")})}})(aF,aB,aw,aj,aJ,av,aK,ai));aB.setAttribute("data-processed",1);if(u.indexOf("posttv-beta")>-1){b("event995","Embed loading posttv-beta","ptv_embedLoadingBeta")}if(!aF){b("event996","Embed Script Missing Content ID","ptv_embedMissingContentID")}aC="";ae="";aF="";ag="embed";ap=false;aw=false;hidePromoDetails=false;aK=false;aH=[];ah="";aG="";ar="";aD="";aI=undefined;aq="";aJ=false;af=undefined;ai=X}}}window.postTvProcessEmbeds=window.postTvProcessEmbeds||Q;Q();function P(i){return'<link rel="stylesheet" id="'+i.id+'" href="'+u.replace("www","css")+i.resource+'" />'}function W(){return P({id:"posttv-video-embed-css",resource:"/resources/css/posttv/posttv-video-embed.v3"+L+".css"})}function j(){return P({id:"posttv-video-embed-tt-css",resource:"/resources/css/posttv/posttv-video-embed.v3.truthteller.css?_="+l})}function n(){return P({id:"posttv-video-embed-fa-css",resource:"/resources/assets/fonts/fontawesome/4.0.3/css/font-awesome.min.css"})}function r(i,ag,ad){if(G){console.log("tmplPromo()",i,ag,ad)}var af=!ad?"":'<div class="ptv-promo-video-headline-container"><span class="ptv-promo-video-headline franklin-light">'+i.headline+"</span></div>",ae='<div class="ptv-promo franklin-light" data-promo-size="'+i.promoSize+'" style="background-image: url('+i.imrsUrl+')"><div class="ptv-promo-info">'+af+'<div class="ptv-promo-play"><i class="fa fa-play"></i><span class="ptv-promo-play-prompt franklin-bold">Play Video</span><span class="ptv-promo-play-duration franklin-light">'+i.duration+'</span><span class="ptv-promo-play-live franklin-bold">Live Video</span></div><span class="ptv-promo-logo"></span></div></div>';ae+=!ag?"":'<div class="tt-holder"><div class="truthteller tt-embed dkgrbg"><div class="teller-title-div column"><h1 class="teller-title">'+i.headline+'</h1><h5 class="teller-title-date">'+i.duration+'</h5></div></div><div class="tt-links medgrbg"><a href="http://truthteller.washingtonpost.com/" id="tt-how-it-works" target="_blank">Truth Teller</a><a class="wapo-logo-white right" target="_blank" href="/posttv/c/video/'+i.uuid+'"> </a></div></div>';return ae}function q(i){if(G){console.log("tmplIframe()",i)}return'<iframe frameborder="0" scrolling="no" webkitallowfullscreen mozallowfullscreen allowfullscreen src="'+i.src+'" data-promo-width="'+i.promoSize+'"></iframe>'}function t(){var ae=K("div.posttv-video-embed[data-processed=1]").not("[data-skip-processing=1]"),ag,ah,ad;for(var af=0;af<ae.length;af++){ag=K(ae[af]);ah=ag.find(".ptv-promo")[0];if(ah){ad=O(ag.width());if(ah.getAttribute("data-promo-size")!==ad){ah.setAttribute("data-promo-size",ad)}}}}window.postTvEmbedSizeChanged=window.postTvEmbedSizeChanged||(function(){K(window).on("resize.ptv-promo",t);return t})();function D(){if(G){console.log("handleVisibilityChanged()")}var ad=K("div.posttv-video-embed[data-processed=1]").not("[data-skip-processing=1]"),af,ag=ac.hidden?document[ac.hidden]===false:true;for(var ae=0;ae<ad.length;ae++){af=K(ad[ae]);if(ag&&x(af)){af.attr("data-is-visible",1);if(af.attr("data-has-been-visible")!=="1"){af.attr("data-has-been-visible",1);if(typeof window.wp_page_num!=="undefined"){af.attr("data-page-num",window.wp_page_num===""?"page_1":window.wp_page_num)}b("event5_3","PTV embed viewable","",{videoId:af.attr("data-content-id"),src:af.attr("data-iframe-src"),isLiveVideo:af.attr("data-is-live-video")==="1",offsetTop:af.attr("data-offset-top"),nthVideoOnPage:af.attr("data-nth-video-on-page"),articlePageNum:af.attr("data-page-num")})}}else{af.attr("data-is-visible",0)}}}window.postTvEmbedVisibilityChanged=window.postTvEmbedVisibilityChanged||(function(){K(document).ready(D);K(window).on("scroll.ptv-promo-visible, resize.ptv-promo-visible",N(D,300,this));if(ac.visibilityChange){K(window).on(ac.visibilityChange+".ptv-promo",D)}return D})();function V(i,ae){if(G){console.log("getDarwinInfo()",i,ae)}var ad=K.Deferred();if(M){if(!d.isDeskweb){if(G){console.log("is pb, is not desktop")}ad.resolve(false,false)}else{if(window.TWP&&TWP.ABTest&&TWP.ABTest.state()==="initialized"){if(G){console.log("is pb, abtest is ready")}ad.resolve(true,TWP.ABTest.get(i).is(ae))}else{if(G){console.log("is pb, waiting for abtest-ready")}K(window.document).on("abtest-ready",function(){if(G){console.log("abtest-ready triggered")}ad.resolve(true,TWP.ABTest.get(i).is(ae))})}}}else{if(G){console.log("is not pb")}ad.resolve(false,false)}return ad.promise()}function O(i){if(i<=210){return"xxs"}else{if(i<=290){return"xs"}else{if(i<=480){return"s"}else{return"l"}}}}function F(af){var ad=[300,360,400,480,540,600,650,750,800,1024],ag=(d.isMobile||d.isTablet)?400:600;for(var ae=1;ae<ad.length;ae++){if(af>=ad[ae-1]){ag=ad[ae]}else{break}}if(af>ag){ag=af}return ag}function R(ad,i){return"//img.washingtonpost.com/wp-apps/imrs.php?src="+encodeURIComponent(ad)+"&w="+i}function p(i){var ad=i?i:"";return ad}function C(i){var ad,ae,af;i=(typeof i!="undefined")?i/1000:0;ad=Math.floor(i/60);ae=Math.floor(i%60);ae=(ae<10)?"0"+ae:ae;af=(i!==0)?ad+":"+ae:"";return af}function v(){if(K(".fa").css("font-family")==="FontAwesome"){s=true}else{K("head").append(n());s=true}}function b(af,ae,ad,i){if(G){console.log("sendEventToSplunk()",af,ae,ad,i)}i=i||{};i.isInlineEvt=/event5_2|event5_3|event6_3/.test(af);i.sessionId=/s_vi=([^;]+)/.test(document.cookie)?/s_vi=([^;]+)/.exec(document.cookie)[1]:"";if(I&&window.jQuery){if(G){console.log("videotracker request starting")}jQuery.ajax({url:"//videotracker.washingtonpost.com/index.html",dataType:"jsonp",cache:false,data:{page:document.title.replace('"','\\"'),channel:"wp - posttv",type:"video",browser:d.browser.toLowerCase(),os:d.OS.toLowerCase(),browserVersion:d.version,webview:d.webview,url:(i.isInlineEvt&&i.src)?i.src:document.URL,HTTP_REFERER:i.isInlineEvt?document.URL:document.referrer,evtName:ae,evtType:af,evtTime:i.evtTime?i.evtTime:new Date().getTime(),errorCode:ad,vendor:i.isLiveVideo?"youtube":"jw",offsetTop:i.offsetTop,nthVideoOnPage:i.nthVideoOnPage,videoId:i.videoId?i.videoId:"",sessionId:i.sessionId,playerType:"posttv-embed",thinkAdBlock:d.thinkAdBlock,articlePageNum:i.articlePageNum}})}else{if(window.console){console.log("videotracker request not sent",I,!!window.jQuery)}}}function N(ae,i,ad){var af,ag;if(!i){i=250}return function(){var aj=ad||this,ai=+new Date(),ah=arguments;if(af&&ai<af+i){clearTimeout(ag);ag=setTimeout(function(){af=ai;ae.apply(aj,ah)},i)}else{af=ai;ae.apply(aj,ah)}}}function A(){if("hidden" in document){return{hidden:"hidden",visibilityChange:"visibilitychange"}}else{if("mozHidden" in document){return{hidden:"mozHidden",visibilityChange:"mozvisibilitychange"}}else{if("msHidden" in document){return{hidden:"msHidden",visibilityChange:"msvisibilitychange"}}else{if("webkitHidden" in document){return{hidden:"webkitHidden",visibilityChange:"webkitvisibilitychange"}}}}}return{}}function x(ad){ad=ad instanceof K?ad[0]:ad;var ae=ad.getBoundingClientRect(),af=K(window).height(),i=K(window).width();return(ae.top>=0&&ae.left>=0&&ae.bottom<=af&&ae.right<=i)}function H(){var i={init:function(ad){this.userAgentStr=ad;this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(this.userAgentStr)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";this.deviceType=this.lookUpDeviceType(this.dataDeviceType)||0;this.webview=this.searchString(this.dataWebview)||"unknown";this.setupThinkAdBlock();this.isMobile=this.deviceType===1;this.isTablet=this.deviceType===2;this.isDeskweb=!(this.isMobile||this.isTablet)},searchString:function(ag){for(var ad=0;ad<ag.length;ad++){var ae=typeof ag[ad].string==="undefined"?this.userAgentStr:ag[ad].string;var af=ag[ad].prop;if(!this.version){this.versionSearchString=ag[ad].versionSearch||ag[ad].identity}if(ae&&ae.indexOf(ag[ad].subString)!=-1){return ag[ad].identity}else{if(af){return ag[ad].identity}}}},searchVersion:function(ae){var ad=ae.indexOf(this.versionSearchString);if(ad==-1){return}return ae.substring(ad+this.versionSearchString.length+1).match(/\d+(\.\d+)+/g)[0]},lookUpDeviceType:function(ai){var ah;for(var ag=0,ad=ai.length;ag<ad;ag++){ah=typeof ai[ag].string==="undefined"?this.userAgentStr:ai[ag].string;if(ah){if(K.isArray(ai[ag].subString)){for(var ae=0,af=ai[ag].subString.length;ae<af;ae++){if(ah.indexOf(ai[ag].subString[ae])!=-1){return typeof ai[ag].type==="number"?ai[ag].type:this.lookUpDeviceType(ai[ag].type)}}}else{if(ah.indexOf(ai[ag].subString)!=-1){return typeof ai[ag].type==="number"?ai[ag].type:this.lookUpDeviceType(ai[ag].type)}else{if(typeof ai[ag].otherwise!="undefined"){return ai[ag].otherwise}}}}}},setupThinkAdBlock:function(){var ad=this;K(function(){var ae='<div id="ptvCanary" class="bottomAd" style="color: white; height: 2px"></div>';if(K("#ptvCanary").length===0){K("body").append(ae)}ad.thinkAdBlock=!!(K("#ptvCanary").filter(":hidden").length>0||K("#ptvCanary").filter(":visible").length===0)})},dataBrowser:[{subString:"Silk",identity:"Silk"},{subString:"Edge",identity:"Edge",versionSearch:"Edge"},{subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{subString:"Firefox",identity:"Firefox"},{subString:"Netscape",identity:"Netscape"},{subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{subString:"Trident",identity:"Explorer",versionSearch:"rv"},{subString:"Android",identity:"Android Stock Browser",versionSearch:"Android"},{subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{subString:"Silk",identity:"Android for Kindle"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{subString:"iPhone",identity:"iPhone"},{subString:"iPad",identity:"iPad"},{subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],dataDeviceType:[{subString:["iPhone","iPod"],type:1},{subString:["iPad","Silk"],type:2},{subString:["Android"],type:[{subString:["Firefox"],type:2},{subString:["Mobile"],type:1},{subString:null,otherwise:2}]},{subString:["Opera"],type:[{subString:["Mobi","Mini"],type:1}]},{subString:["AppleWebKit"],type:[{subString:["Mobile"],type:1}]},{subString:["Mobile"],type:1}],dataWebview:[{subString:"FBIOS",identity:"Facebook for iOS"},{subString:"FB4A",identity:"Facebook for Android"},{subString:"Twitter for iPhone",identity:"Twitter for iOS"},{subString:"TwitterAndroid",identity:"Twitter for Android"},{subString:" GSA/",identity:"Google Search App for iOS"},{subString:"CriOS",identity:"Chrome for iOS"}]};i.init(window.navigator.userAgent);if(G){console.log("browserInfo:",i)}return i}})(window.jQuery);
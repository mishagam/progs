webpackJsonp([2,1],[,,,function(e,t,r){var n,i;n=[r,t,r(30),r(8),r(18),r(4),r(7),r(1),r(51),r(52)],i=function(e,t,r,n,i,o,a,s){"use strict";t.initPlacement=function(e,t,r){function s(r){t(new i["default"](e,r))}e.blockInfo?s(e.blockInfo):o["default"].load(e).then(s)["catch"](function(e){a.trackError(e),n.fireCallback(r,e)})},t.initAdDisplay=function(e,i,o,a){t.initPlacement(e,function(t){n.fireCallback(a,new r["default"](e,t,i,o))},a)};var u=function(){function e(e,t,r){this.config=e,this.adCallbacks={onBeforeAdStart:function(){},onAdStart:function(){},onAdEnd:function(){},onAdMediaStart:function(){},onAdMediaEnd:function(){}},this.videoNode=n.getElement(t),this.videoWrapperNode=n.getElement(r)}return e.prototype.init=function(e,r){var i=this;this.callbacks={onInit:e,onError:r},t.initAdDisplay(this.config,this.videoNode.id,this.videoWrapperNode.id,function(t){t instanceof Error?n.fireCallback(r,t):(i.displayController=t,i.displayController.on({afterStartAd:function(){return n.fireCallback(i.adCallbacks.onAdStart,i.displayController.currentAdType)},afterStartAdMedia:function(){return n.fireCallback(i.adCallbacks.onAdMediaStart,i.displayController.currentAdType)},afterEndAdMedia:function(){return n.fireCallback(i.adCallbacks.onAdMediaEnd,i.displayController.currentAdType)},afterEndAd:function(){return n.fireCallback(i.adCallbacks.onAdEnd,i.displayController.currentAdType)}}),i.displayController.onBeforeStartAd.add(function(){return n.fireCallback(i.adCallbacks.onBeforeAdStart,i.displayController.currentAdType)}),i.mainVideoState=i.displayController.videoNodeController.getVideoState(),i.startWatchingVideoForAd(),n.fireCallback(e,i.adCallbacks))})},e.prototype.startWatchingVideoForAd=function(){var e=this,t=this.displayController.videoNodeController,r=!1,i=!1;return function(){return e.config.__forced_play__?(e.config.__forced_play__=!1,e.displayController.indulgentlyForMobile=!0,Promise.resolve()):t.when("start")}().then(function(){return e.displayController.onBeforeStartAd.addOne(function(){return r=!0})}).then(function(){return e.showAd(s.AdType.PREROLL)}).then(function(){return e.playMainVideo()})["catch"](function(t){r?e.playMainVideo():e.displayController.videoNodeController.play(),n.fireCallback(e.callbacks.onError,t)}).then(function(){return t.when("complete")}).then(function(){return e.displayController.onBeforeStartAd.addOne(function(){return i=!0})}).then(function(){return e.showAd(s.AdType.POSTROLL)}).then(function(){return e.setMainVideo()}).then(function(){return e.startWatchingVideoForAd()})["catch"](function(t){i&&e.setMainVideo(),n.fireCallback(e.callbacks.onError,t)})},e.prototype.setMainVideo=function(){this.displayController.videoNodeController.setVideoState(this.mainVideoState)},e.prototype.playMainVideo=function(){this.setMainVideo(),this.displayController.videoNodeController.play()},e.prototype.showAd=function(e){return this.displayController.loadAndShowAd(e)},e}();t.initForVideoNode=function(e,t,r,n,i){var o=new u(e,t,r);o.init(n,i)},t.initVideoNode=function(e,r,n,i){t.initForVideoNode(e,r,n,i,i)}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(5),r(6),r(7),r(8),r(17),r(1)],i=function(e,t,r,n,i,o,a,s){"use strict";var u=3e3,c=function(){function e(){this.partnerId="",this.sessionId="",this.categoryID=0,this.categoryName="",this.skinUrl="",this.title="",this.skipDelay=5,this.skipTimeLeftShow=!0,this.timeLeftShow=!0,this.visitSiteShow=!1,this.vastTimeout=3e3,this.videoTimeout=2e3,this.wrapperTimeout=3e3,this.wrapperMaxCount=3,this.vpaidTimeout=3e3,this.bufferFullTimeout=2500,this.bufferEmptyLimit=5,this.vpaidEnabled=!0,this.skinTimeout=2e3,this.blocks=[]}return e.getUrl=function(e){return e.partnerId?i.appendVersion("https://an.yandex.ru/vcset/"+encodeURIComponent(""+e.partnerId)+"?video-category-id="+encodeURIComponent(""+e.category)+"&duration="+encodeURIComponent(""+e.duration)+"&client_type=html"):null},e.fromXml=function(t){function r(e){return n.readElementText(s.querySelector(e))}var i,s=t.querySelector("Blocksinfo"),u=s.querySelectorAll("Blocks > Block"),c=new e;c.partnerId=r("PartnerID"),c.sessionId=r("SessionID"),c.categoryID=+r("CategoryID"),c.categoryName=r("CategoryName"),o.endsWith(r("Skin"),".css")&&(c.skinUrl=r("Skin")),c.bufferEmptyLimit=parseInt(r("BufferEmptyLimit"),10),c.title=r("Title"),c.skipDelay=parseInt(r("SkipDelay"),10),c.skipTimeLeftShow="true"===r("SkipTimeLeftShow"),c.timeLeftShow="true"===r("TimeLeftShow"),c.visitSiteShow="true"===r("VisitSiteShow"),c.vastTimeout=parseInt(r("VASTTimeout"),10),c.videoTimeout=parseInt(r("VideoTimeout"),10),c.vpaidTimeout=parseInt(r("VPAIDTimeout"),10),c.wrapperTimeout=parseInt(r("WrapperTimeout"),10),c.wrapperMaxCount=parseInt(r("WrapperMaxCount"),10),c.bufferFullTimeout=parseInt(r("BufferFullTimeout"),10),c.skinTimeout=parseInt(r("SkinTimeout"),10);for(var l=0;l<u.length;l++)i=a["default"].fromXml(u[l]),c.blocks.push(i);return c},e.load=function(t){var n=e.getUrl(t);return n?i.load(n,null,u).then(function(t){var n;try{n=e.fromXml(t)}catch(i){return Promise.reject(new r["default"](i.message,r["default"].PARSE_ERROR))}return n})["catch"](function(e){return e.isTimeoutError?Promise.reject(new r["default"]("Timeout of loading block info. PartnerId: "+t.partnerId+"; categoryId: "+t.category,r["default"].TIMEOUT_ERROR)):Promise.reject(new r["default"](e.message,r["default"].PARSE_ERROR))}):Promise.reject(new r["default"]("Invalid ad parameters",r["default"].PARAMS_ERROR))},e.createPrerollBlockInfo=function(){var t=new e;t.videoTimeout=1e4,t.skipDelay=-1,t.skipTimeLeftShow=!1,t.timeLeftShow=!1,t.vpaidEnabled=!1;var r=new a["default"];return r.adType=s.AdType.PREROLL,t.blocks=[r],t.skinUrl="",t},e.prototype.getBlockByAdType=function(e){for(var t=0;t<this.blocks.length;t++)if(this.blocks[t].adType===e)return this.blocks[t];return null},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=c}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t],i=function(e,t){"use strict";var r=function(e){function t(t,r){e.call(this,t),this.id=r,this.message=t}return o(t,e),t.PARSE_ERROR=1001,t.TIMEOUT_ERROR=1002,t.PARAMS_ERROR=1003,t}(Error);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";function r(e,t,r){return void 0===r&&(r=null),e.hasAttribute(t)?e.getAttribute(t).trim():r}function n(e){return e&&e.textContent?e.textContent.trim():""}function i(e){return e&&n(e).length}function o(e,t,r,n){var i=t.ownerDocument.createElement(e);if(t.appendChild(i),r&&(i.innerHTML="<![CDATA["+r+"]]>"),n)for(var o in n)n.hasOwnProperty(o)&&null!==n[o]&&i.setAttribute(o,String(n[o]));return i}t.readAttr=r,t.readElementText=n,t.isElementSet=i,t.appendNewElement=o}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t,r(8),r(10),r(1)],i=function(e,t,r,n,i){"use strict";function a(e){return r.isTrueYandexDomain(e)?n.addUrlParam(e,"video-api-version","js:"+i.ENVIRONMENT.SDK_FULL_VERSION):e}function s(e){return"//"===e.trim().substr(0,2)&&"undefined"!=typeof ya&&ya.mediaAd&&ya.mediaAd.util&&ya.mediaAd.util.URL_SCHEME&&(e=ya.mediaAd.util.URL_SCHEME+e),e}function u(e,t,r,i){return void 0===i&&(i=!0),new Promise(function(o,a){function u(e){a(e)}"https:"===window.location.protocol&&(e=n.setUrlProtocol(e,"https:"));var c=new XMLHttpRequest;c.open("GET",s(e)),c.timeout="number"==typeof r?r:0,c.withCredentials=i,c.ontimeout=function(){var e=new h("HTTP timeout error");e.isTimeoutError=!0,a(e)},c.onerror=function(){var t=new Error("XHROnError "+c.statusText+": "+e);t.id=c.status,u(t)},c.onreadystatechange=function(){if(4===c.readyState&&0!==c.status){if(200!==c.status){var t=new Error(c.statusText);return t.id=c.status,t.message+=": "+e,void u(t)}o(c.responseXML)}};try{c.send(t)}catch(l){l.message+=": "+e,u(l)}})}function c(e){return{url:e,promise:new Promise(function(t){var r=new Image;r.onload=function(){return t(!0)},r.onerror=function(){return t(!1)},r.src=s(a(e))})}}function l(e){return Array.isArray(e)?e.map(c):[]}function d(e,t){void 0===t&&(t=[]);var r=[],n=[],i=e&&e.hasOwnProperty("id")?encodeURIComponent(e.id.toString()):"0";r.push("errcode="+i),r.push("subsection="+i),e&&"string"==typeof e.message&&e.message.length>0&&r.push("errstring="+encodeURIComponent(e.message)),t=t.concat([f]);for(var o=0,a=t.length;o<a;o++){var s=t[o],u=s.indexOf("?")>-1?"&":"?";n.push(""+s+u+r.join("&"))}return l(n)}function p(e,t){var r=s(e);return new Promise(function(n,i){t&&setTimeout(function(){return i(new Error("Script Loading Error: loading timeout: "+t/1e3+"s : "+e))},t);var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.onload=n,o.onerror=function(){return i(new Error("Script Loading Error: "+r))},o.src=r,document.head.appendChild(o)})}var f="//awaps.yandex.ru/65/218/0.gif";t.appendVersion=a,t.fixUrlSheme=s;var h=function(e){function t(){e.apply(this,arguments)}return o(t,e),t}(Error);t.load=u,t.knock=c,t.knockEach=l,t.trackError=d,t.loadScript=p}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(7),r(9),r(10),r(1)],i=function(e,t,r,n,i,o){"use strict";function a(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.ENVIRONMENT.DEV_MODE&&console&&console.log&&console.log.apply(console,[e].concat(t))}function s(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.ENVIRONMENT.DEV_MODE&&console&&console.log&&console.error.apply(console,[e].concat(t))}function u(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(e)if("function"==typeof e)e.apply(void 0,t);else if(e&&e.hasOwnProperty("length")){var n=e;n.forEach(function(e){return e.apply(void 0,t)})}}function c(e,t){var r=function(){e.forEach(function(e){return document.removeEventListener(e,r)}),t()};e.forEach(function(e){return document.addEventListener(e,r)})}function l(e,t){return t===e.substring(e.length-t.length)}function d(e){return p(e,!0)}function p(e,t){if(void 0===t&&(t=!1),!e)return!1;var r=i.getUrlDomain(e),n=t?M:M.concat(L);return!(!r||0===r.length)&&n.some(function(e){return l(r,e)})}function f(e,t,n,i){var o=document.createElement("video");return o.id="yaVideoPlayer_"+Math.floor(1e6*Math.random()),o.setAttribute("x-webkit-airplay","allow"),Array.isArray(t)?t.forEach(function(e){var t=document.createElement("source");t.src=r.fixUrlSheme(e.src),t.type=e.type,o.appendChild(t)}):t&&(o.src=r.fixUrlSheme(t)),n&&(o.poster=n),o.autoplay=!!i,o.preload=i?"auto":"none",e.firstChild?e.insertBefore(o,e.firstChild):e.appendChild(o),o}function h(){if(v()){var e=window.navigator.mimeTypes;if(e.hasOwnProperty("application/x-shockwave-flash")){var t=e["application/x-shockwave-flash"];if(t.enabledPlugin&&t.enabledPlugin.version){var r=t.enabledPlugin.version.split(".").map(function(e){return parseInt(e,10)});if(4===r.length)for(var n=U.split(".").map(function(e){return parseInt(e,10)}),i=0;i<4;i++){if(r[i]<n[i])return!0;if(r[i]>n[i])return!1}}}}return!1}function v(){return window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function y(){return"ontouchstart"in window||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0}function m(){return navigator.userAgent.toLowerCase().indexOf("iphone")>-1}function g(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent)}function E(){return navigator.platform.indexOf("iPad")>-1}function T(){return navigator.userAgent.toLowerCase().indexOf("android")>-1}function A(){var e=navigator.userAgent.toLowerCase();return e.indexOf("iphone")>-1||e.indexOf("ipad")>-1||e.indexOf("ipod")>-1}function w(){return A()&&7===S()}function S(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseInt(e[1],10)}}function k(e){return"string"!=typeof e?NaN:e.split(":").reverse().reduce(function(e,t,r){return e+parseFloat(t)*Math.pow(60,r)},0)}function b(e){var t=Math.floor(e/60/60),r=Math.floor((e-60*t*60)/60),n=e-60*t*60-60*r,i=function(e,t){return void 0===t&&(t=0),e.toFixed(t).split(".").map(function(e,t){return 0!==t?e:1===e.length?"0"+e:e}).join(".")};return[i(t),i(r),i(n,3)].join(":")}function C(e,t){var r=document.createElement("div");return r.className=e,t&&(r.innerHTML=t),r}function _(e,t,r,n){var i=C(e,r);return i.addEventListener("click",t),n&&n.appendChild(i),i}function P(e){return"string"==typeof e?document.getElementById(e):e}function O(){var e;try{e=top.location.href}catch(t){e=location.href}return e}function I(){var e=document.querySelector("style[data-yamediaad]");e||(e=document.createElement("style"),e.setAttribute("data-yamediaad",""),e.innerHTML=o.ENVIRONMENT.DEFAULT_CSS,document.querySelector("head").appendChild(e))}function N(e,t){var r=t.split("."),n=e;for(var i in r)if(r.hasOwnProperty(i)){if(!n.hasOwnProperty(r[i]))return"$$"+t+"$$";var o=n[r[i]];if("string"==typeof o)return o;n=o}}function R(e,t){return e.split("$$").map(function(e,r){return r%2!==0?N(t,e):e}).join("")}function D(e,t){for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r])}function x(e){var t=new n["default"];return e.addEventListener("mouseenter",function(){t.trigger(!0)}),e.addEventListener("mouseleave",function(){t.trigger(!1)}),t}function V(e){return e instanceof Promise?e:Promise.resolve(e)}var M=["yandex.ru","yandex.com","yandex.net","yandex.com.tr","yandex.ua","yandex.by","yandex.kz","yastatic.net","yandex.st","yandex-team.ru","yandex-team.com","yandex-team.com.ua","yandex-team.net.ua","yandex-team.com.tr","ya.ru"],L=["kinopoisk.ru","kinopoisk.ua","kinopoisk.by","kinopoisk.tel","vidigital.ru","tns-counter.ru","adfox.ru"];t.log=a,t.logError=s,t.fireCallback=u,t.waitForDocumentEvents=c,t.endsWith=l,t.isTrueYandexDomain=d,t.isYandexDomain=p,t.createVideoNode=f;var U="20.0.0.306";t.isBlockedFlash=h,t.isFirefox=v,t.isTouchDevice=y,t.isIPhone=m,t.isIOSWebView=g,t.isIPad=E,t.isAndroid=T,t.isIOS=A,t.isIOS7=w,t.getIOSVersion=S,t.parseVASTTime=k,t.toVastTime=b,t.createDiv=C,t.createControl=_,t.getElement=P,t.getReferrer=O;var F=function(){function e(e){this.time=e,this.isFired=!1}return e.prototype.setup=function(){var e=this;return void 0===this.promise&&(this.promise=new Promise(function(t){e.id=setTimeout(function(){e.isFired=!0,t()},e.time)})),this.promise},e.prototype.stop=function(){void 0!==this.id&&(clearTimeout(this.id),this.id=void 0)},e}();t.Timer=F,t.addBuiltinSkin=I,t.getObjectProperty=N,t.replaceStringWith=R,t.applyStyles=D,t.createHoverE=x,t.toPromise=V}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";var r=function(){function e(){this.on=[],this.once=[]}return e.prototype.add=function(t){t instanceof e?this.on.push(function(e){return t.trigger(e)}):this.on.push(t)},e.prototype.addOne=function(t){t instanceof e?this.once.push(function(e){return t.trigger(e)}):this.once.push(t)},e.prototype.promise=function(){var e=this;return new Promise(function(t){e.addOne(function(e){return t(e)})})},e.prototype.trigger=function(e){this.triggerECallbacks(this.on,e),this.triggerECallbacks(this.once,e),this.once=[]},e.prototype.triggerECallbacks=function(e,t){for(var r in e)e.hasOwnProperty(r)&&e[r](t)},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";function r(e){return a.href=e,a.hostname}function n(e,t,r){a.href=e;var n=encodeURIComponent(t)+"="+encodeURIComponent(r);return a.search=a.search?a.search+"&"+n:"?"+n,a.href}function i(e,t){a.href=e;var r=a.search.substring(1).split("&");for(var n in r)if(r.hasOwnProperty(n)){var i=r[n].split("="),o=i[0],s=i[1];if(o===t)return s?decodeURIComponent(s):""}return null}function o(e,t){if(s.indexOf(t)===-1)throw new Error("setUrlProtocol Error: Unsupported protocol: "+t);return a.href=e,a.protocol=t,a.href}var a=document.createElement("a");t.getUrlDomain=r,t.addUrlParam=n,t.getUrlParam=i;var s=["http:","https:"];t.setUrlProtocol=o}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(8),r(8),r(40),r(53),r(49),r(12),r(55),r(29),r(10),r(3),r(1)],i=function(e,t,r,n,i,o,a,s,u,c,l,d,p){"use strict";function f(e,t){return new Promise(function(i,o){e.innerHTML="";var a=r.createVideoNode(e);a.volume=0,a.muted=!0,a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.style.backgroundColor="#000000",p.ENVIRONMENT.SDK_FULL_VERSION.indexOf(":inpage")===-1&&(p.ENVIRONMENT.SDK_FULL_VERSION+=":inpage"),t.autoplay=!(n.isIPhone()||r.isIPad()||r.isAndroid()),d.initAdDisplay(t,a.id,e,function(e){e instanceof Error?o(e):(e.config.impressionOffset=E,i(e))})})}function h(e,t,r){void 0===t&&(t=4),void 0===r&&(r=3);var n=e,i=n.width>0?n.width:e.clientWidth,o=Math.floor(i*r/t);"video"===e.nodeName.toLowerCase()?n.height=o:e.style.height=o+"px"}function v(e,t){if(t){var r=t.getAdDimensions();r&&r.width>w&&r.height?h(e,r.width,r.height):h(e)}else h(e)}function y(e){if(!e)return new Error('Parameter "adConfig" is required.');var t=e.adFoxUrl;return!t||(t.indexOf("getCode?")>-1||t.indexOf("getCodeTest?")>-1||t.indexOf("prepareCode?")>-1||t.indexOf("prepareCodeTest?")>-1)&&(t.indexOf("pp=")>-1&&t.indexOf("ps=")>-1&&t.indexOf("p2=")>-1||t.indexOf("p1=")>-1&&t.indexOf("p2=")>-1||t.indexOf("pfc=")>-1&&t.indexOf("pfb=")>-1)?null:new Error("Invalid format of 'adConfig.adFoxUrl' parameter.")}function m(e){e.beta&&(p.ENVIRONMENT.DOMAIN="betastatic.yastatic.net",p.ENVIRONMENT.DEV_MODE=!0),e.minimalGui=!0,e.qualityLevel=1,e.hasOwnProperty("noFlash")||(e.noFlash=!1),e.vastUrl&&r.endsWith(l.getUrlDomain(e.vastUrl),"adfox.ru")&&(e.vastUrl=l.addUrlParam(e.vastUrl,"tags","inpage")),e.adFoxUrl&&(e.adFoxUrl=l.addUrlParam(e.adFoxUrl,"tags","inpage"),e.preferAdfox=!1),void 0===e.startupTimeout&&(e.startupTimeout=T),e.switchVolumeOnRollOver=!0}function g(e,t,r){return r.noFlash===!0||n.isBlockedFlash()?f(t,r):s.checkForFlashPlayer().then(function(n){return n?(r.visibleAfterInit||(e.style.height="1px",t.style.width="1px",t.style.height="1px"),a.createSwfAdPlayer(t,r).then(function(n){return r.visibleAfterInit||(e.style.height="0px"),t.style.width="auto",t.style.height="auto",n})["catch"](function(){return r.visibleAfterInit||(e.style.height="0px"),t.style.width="auto",t.style.height="auto",f(t,r)})):f(t,r)})}var E=5;t.createHtmlAdPlayer=f;var T=1e3,A=.3,w=200;t.addInPageVideo=function(e,t,a){var s=y(t);if(s)return void n.fireCallback(a,s);var l,d=t.insertAfter,f=t.insertPosition;if(d&&"undefined"!==d){var h=document.querySelectorAll(d);if(0!==h.length){var E="string"==typeof f?parseInt(f,10):f;E=f?"string"==typeof f&&f.indexOf("%")>-1?Math.round(E*(h.length-1)/100):Math.max(0,E-1):0;var T=h[Math.min(h.length-1,E)],w=document.createElement("div");w.id="yaAdSdkContainer_"+Math.floor(1e7*Math.random()),w.className="yaAdSdkContainer",T.parentNode.insertBefore(w,T.nextSibling),l=w}}l||(l=n.getElement(e));var S=document.createElement("div");l.appendChild(S);var k=document.createElement("div");k.id="wrapper"+l.id;var b=new u["default"](S,k,t.visibleAfterInit,t.slide?A:0);v(k),m(t),g(S,k,t).then(function(e){var t=i.DisplayController.isJs(e)?e.gui.controls.play:null;e.onChangeHover.add(function(t){t?e.setMute(!1,!0):e.currentContentType===c.AdSourceType.video&&e.setMute(!0,!0)});var s=e.visibilitySensor;s.onResize.add(function(){return v(k,e)}),s.whenCanShow().then(function(){if(i.DisplayController.isJs(e)&&(r.isAndroid()&&e.videoNodeController.on("playing",function(){e.videoNode.muted=!1,e.videoNode.muted=!0}),n.isIPhone()&&e.on("ready",function(){e.currentContentType===c.AdSourceType.video?e.videoNode.preload="auto":e.currentContentType===c.AdSourceType.js&&e.play()}),e.videoNodeController.on("start",function(){e.play()})),e.on("afterEndAd",function(){return b.close().then(function(){return l.parentElement.removeChild(l)})}),n.isIPhone())e.on("ready",function(){return b.open()});else{var o=!1;i.DisplayController.isJs(e)?e.on("ready",function(){if(r.isIPad()||r.isAndroid()){var t=r.isIPad()?["touchstart"]:["touchstart","touchend"];r.waitForDocumentEvents(t,function(){return e.videoNodeController.play()})}}):e.play(),e.on({start:function(){v(k,e),b.open(),s.getVisibility()||e.pause(),s.onChangeVisibility.add(function(r){r?(o||e.play(),t&&o&&t.unBlock().show()):(e.pause(),t&&t.hide())})},clickThrough:function(){o=!0,t&&s.getVisibility()&&t.unBlock().show()}}).on(["start","resume"],function(){o=!1,t&&t.block()})}e.loadAndShowAd(p.AdType.PREROLL)["catch"](a)}),n.fireCallback(a,new o["default"](e))})["catch"](function(e){n.fireCallback(a,e)})}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(8),r(7),r(1)],i=function(e,t,r,n,i){"use strict";function o(e){return e.replace(/[^a-zA-Z0-9_]/g,"_")}function a(){function e(){return swfobject.getFlashPlayerVersion().major>0}return void 0===window.swfobject?n.loadScript("https://"+i.ENVIRONMENT.getActualDomain()+"/awaps-ad-sdk-js/"+i.ENVIRONMENT.getVersioningURL()+"/swfobject.min.js").then(function(){return e()}):Promise.resolve(e())}function s(e,t){var r=new Promise(function(r,o){var a=new XMLHttpRequest,s="https://"+i.ENVIRONMENT.getActualDomain()+"/swf/"+e+"/"+t+"/info?nc="+Math.random();a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&(200===a.status?r(a.responseText.split("'")[1]):o(new Error(a.statusText)))};try{a.open("GET",n.fixUrlSheme(s),!0),a.send()}catch(u){o(u)}});return r.then(function(r){return"//"+i.ENVIRONMENT.getActualDomain()+"/swf/"+e+"/"+t+"/v-"+r+"/"+e+".swf"})}function u(e,t){for(var n in e)e.hasOwnProperty(n)&&c[n]&&(t[c[n]]=e[n]);void 0!==e.adFoxUrl&&(t["ad-fox-url"]=encodeURIComponent(e.adFoxUrl)),void 0!==e.adFoxUrlMidRoll&&(t["ad-fox-url-midroll"]=encodeURIComponent(e.adFoxUrlMidRoll)),void 0!==e.adFoxUrlPauseRoll&&(t["ad-fox-url-pauseroll"]=encodeURIComponent(e.adFoxUrlPauseRoll)),void 0!==e.adFoxUrlPostRoll&&(t["ad-fox-url-postroll"]=encodeURIComponent(e.adFoxUrlPostRoll)),void 0!==e.vastUrl&&(t["vast-url"]=encodeURIComponent(e.vastUrl)),t["target-referrer"]=encodeURIComponent(r.getReferrer()),t["page-referrer"]=encodeURIComponent(document.referrer)||"unknown"}var c={partnerId:"partner-id",category:"category",tagsList:"tags-list",emptyId:"empty-id",extParam:"ext-param",videoContentId:"video-content-id",videoContentName:"video-content-name",videoPublisherId:"video-publisher-id",videoPublisherName:"video-publisher-name",videoGenreId:"video-genre-id",videoGenreName:"video-genre-name",duration:"duration"};t.sanitizeId=o,t.checkForFlashPlayer=a,t.loadSWFUrlByPackageAndBuild=s,t.adConfigToFlashvars=u}.apply(t,n),!(void 0!==i&&(e.exports=i))},,,,,function(e,t,r){var n,i;n=[r,t,r(6),r(1)],i=function(e,t,r,n){"use strict";var i=function(){function e(){this.id=0,this.adType="",this.startTime=0,this.duration=0,this.positionsCount=0}return e.fromXml=function(t){var i=t.querySelector("StartTime"),o=t.querySelector("Duration"),a=t.querySelector("PositionsCount"),s=new e;return s.id=r.readAttr(t,"BlockID",0),s.adType=r.readAttr(t,"type",n.AdType.PREROLL),s.startTime=+r.readElementText(i),s.duration=+r.readElementText(o),s.positionsCount=+r.readElementText(a),s},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(19),r(25),r(26),r(7),r(1)],i=function(e,t,r,n,i,o,a){"use strict";var s=function(){function e(e,t){this.adConfig=e,this.blockInfo=t}return e.sortMediaAdsBySequence=function(e){return e.sort(function(e,t){return e.vastAd.sequence-t.vastAd.sequence})},e.prototype.loadAd=function(e,t,r){return this.loadAdInternal(e).then(function(e){return"function"==typeof t&&t(e[0]),e})["catch"](function(e){return"function"==typeof r&&r(e),Promise.reject(e)})},e.prototype.loadAdInternal=function(t){var s=this;return new Promise(function(e,u){function c(){var t;if(!S){if(k&&b)return S=!0,void u(new n["default"](n["default"].NO_AD_TO_DISPLAY_MSG,n["default"].NO_AD_TO_DISPLAY));if(k)E&&g.partnerId?d&&(S=!0,t=i["default"].create(m,d)):A?S=!0:d&&(S=!0,t=i["default"].create(m,d));else if(b&&p)S=!0,t=i["default"].create(m,p);else if(p&&A||d&&!A){h=p?p.ads[0]:null,f=d?d.ads[0]:null;var a=h&&h.hasMedia(),s=f&&f.hasMedia();!a||!A&&s?!s||A&&a?p&&d&&(S=!0):(S=!0,A&&h?(h.isYandexAdxWrapper&&f&&h.merge(f),t=i["default"].create(m,h)):A||(t=i["default"].create(m,f))):(S=!0,t=i["default"].create(m,p))}S&&(t&&t[0]&&t[0].hasMedia()?e(t):h&&h.returnUrl&&A?r.loadVast(h.returnUrl,!0,m.vastTimeout,m.wrapperTimeout,m.wrapperMaxCount).then(l)["catch"](function(e){o.trackError(e),u(e)}):u(new n["default"](n["default"].NO_AD_TO_DISPLAY_MSG,n["default"].NO_AD_TO_DISPLAY)))}}function l(t){var r=i["default"].create(m,t);r&&r[0]&&r[0].hasMedia()?e(r):u(new n["default"](n["default"].NO_AD_TO_DISPLAY_MSG,n["default"].NO_AD_TO_DISPLAY))}var d,p,f,h,v,y,m=s.blockInfo,g=s.adConfig,E=g.yandexADXInsteadOfAdFoxFail,T=m.getBlockByAdType(t),A=void 0===g.preferAdfox||g.preferAdfox,w=!1,S=!1,k=!1,b=!1;return y=t===a.AdType.MIDROLL&&g.adFoxUrlMidRoll?g.adFoxUrlMidRoll:t===a.AdType.PAUSEROLL&&g.adFoxUrlPauseRoll?g.adFoxUrlPauseRoll:t===a.AdType.POSTROLL&&g.adFoxUrlPostRoll?g.adFoxUrlPostRoll:g.adFoxUrl,T?g[T.adType+"Vast"]?void l(g[T.adType+"Vast"]):((g.adFoxUrlVast||y)&&(w=!0,r.loadVast(g.adFoxUrlVast||y,!0,m.vastTimeout,m.wrapperTimeout,m.wrapperMaxCount).then(function(e){p=e,c()})["catch"](function(e){o.trackError(e),k=!0,c()})),v=g.vastUrl?g.vastUrl:g.vast?g.vast:r.getVastUrl(g,m,T.id),void r.loadVast(v,!1,m.vastTimeout,m.wrapperTimeout,m.wrapperMaxCount).then(function(e){return w?(d=e,void c()):void l(e)})["catch"](function(e){o.trackError(e),w?(b=!0,c()):u(e)})):void u(new Error("No ads of a given type "+t))}).then(function(t){return e.sortMediaAdsBySequence(t)})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(8),r(6),r(7),r(20),r(21),r(22),r(10)],i=function(e,t,r,n,i,o,a,s,u){"use strict";function c(e){return e.replace(f,encodeURIComponent(r.getReferrer()))}function l(e){return encodeURIComponent("string"==typeof e?e:e.join("\n"))}function d(e,t,r){var n,o,a=window.location.toString(),s=window.document.referrer;return o="imp-id="+r+"&target-ref="+encodeURIComponent(a)+"&page-ref="+encodeURIComponent(s),e.playerInfo&&(o+=":"+e.playerInfo),e.width&&(o+="&video-width="+e.width),e.height&&(o+="&video-height="+e.height),e.videoContentId&&(o+="&video-content-id="+e.videoContentId),e.videoContentName&&(o+="&video-content-name="+encodeURIComponent(e.videoContentName)),e.videoPublisherId&&(o+="&video-publisher-id="+e.videoPublisherId),e.videoPublisherName&&(o+="&video-publisher-name="+encodeURIComponent(e.videoPublisherName)),e.videoGenreId&&(o+="&video-genre-id="+l(""+e.videoGenreId)),e.videoGenreName&&(o+="&video-genre-name="+l(e.videoGenreName)),e.tagsList&&(o+="&tags-list="+l(e.tagsList)),e.extParam&&(o+="&ext-param="+encodeURIComponent(e.extParam)),o+="&charset="+encodeURIComponent(e.charset||"UTF-8"),t.sessionId&&(o+="&video-session-id="+encodeURIComponent(t.sessionId)),o+="&rnd="+Math.random(),n="https://an.yandex.ru/meta/"+encodeURIComponent(t.partnerId)+"?"+o,i.appendVersion(n)}function p(e,t,l,d,p,f){function m(e,t){return i.load(e,null,l).then(function(r){return g(r,e,t,f)})["catch"](function(e){return e.isTimeoutError?Promise.reject(new a["default"]("VAST load timeout",a["default"].VAST_LOAD_TIMEOUT)):e instanceof a["default"]?Promise.reject(e):Promise.reject(new a["default"]((e.id?e.id+": ":"")+e.message,t===o["default"].AD_FOX?a["default"].ADFOX_VAST_LOAD_ERROR:a["default"].YA_VAST_LOAD_ERROR))})}function g(e,t,r,n){if(!e)throw new a["default"]("No XML in Vast Document",a["default"].INVALID_VAST_XML);var i=e.querySelector("VAST"),o=Array.prototype.slice.call(e.querySelectorAll("VAST Ad"));if(!i)throw new a["default"]("No VAST tag found",a["default"].INVALID_VAST_XML);if(!n&&h.indexOf(i.getAttribute("version"))===-1)throw new a["default"]("Invalid VAST document version",a["default"].INVALID_VAST_XML);if(0===o.length)throw new a["default"]("No Ad section",a["default"].NO_IN_LINE_OR_WRAPPER_NODE);return Promise.all(o.map(function(e){return E(e,t,r)})).then(function(e){return new y(e)})}function E(e,t,n){var i,u=e.querySelector("InLine")||e.querySelector("Inline"),c=e.querySelector("Wrapper");if(u){if(n===o["default"].YANDEX&&!r.isYandexDomain(t))throw new a["default"]("Yandex wrapper ended with VAST loaded from not Yandex domain.",a["default"].YANDEX_WRAPPER_ENDED_WITH_NOT_YANDEX_VAST);try{i=s["default"].fromXml(e,n)}catch(l){throw new a["default"](l.toString(),a["default"].INVALID_VAST_XML)}return i}if(w.isFired)throw new a["default"]("There is no InLine or Wrapper node in the VAST document",a["default"].NO_IN_LINE_OR_WRAPPER_NODE);if(++A>p)throw new a["default"]("Limit of nested wrappers reached",a["default"].WRAPPER_MAX_COUNT_LIMIT);return T(c,n)}function T(e,t){var r,i=e.querySelector("VASTAdTagURI");if(!n.isElementSet(i))throw new a["default"]("There is no VASTAdTagURI in the 'Wrapper' node",a["default"].NO_VAST_ID_TAG_URI);r=s["default"].fromXml(e,t,!0);var o=n.readElementText(i);if(o===v){r.isYandexAdxWrapper=!0;var u=e.querySelector("Extension[type='ReturnURL']");return n.isElementSet(u)&&(r.returnUrl=n.readElementText(u)),r}return Promise.race([w.setup().then(function(){return Promise.reject(new a["default"]("Wrapper load timeout.",a["default"].WRAPPER_LOAD_TIMEOUT))}),m(o,t).then(function(e){for(var t=0,n=e.ads.length;t<n;t++)r.merge(e.ads[t]);return r})])}void 0===f&&(f=!1);var A=0,w=new r.Timer(d),S="<"===e.charAt(0);if(S){var k=void 0;try{k=(new DOMParser).parseFromString(e,"application/xml")}catch(b){return Promise.reject(new a["default"]("Inline VAST syntax error: "+b,a["default"].INVALID_VAST_XML))}return g(k,"",o["default"].EXTERNAL,f)}return m(c(e),t?o["default"].AD_FOX:r.endsWith(u.getUrlDomain(e),"adfox.ru")?o["default"].AD_FOX:r.isYandexDomain(e)?o["default"].YANDEX:o["default"].EXTERNAL)}var f="{REFERER}",h=["2.0","3.0"],v="Yandex ADX",y=function(){function e(e){this.ads=e}return e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=y,t.getVastUrl=d,t.loadVast=p}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";var r;!function(e){e[e.EXTERNAL=0]="EXTERNAL",e[e.AD_FOX=1]="AD_FOX",e[e.YANDEX=2]="YANDEX"}(r||(r={})),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t],i=function(e,t){"use strict";var r=function(e){function t(t,r){e.call(this,t),this.id=r,this.message=t}return o(t,e),t.INVALID_VAST_XML=40,t.NO_IN_LINE_OR_WRAPPER_NODE=53,t.NO_VAST_ID_TAG_URI=54,t.VAST_LOAD_TIMEOUT=60,t.WRAPPER_LOAD_TIMEOUT=61,t.WRAPPER_MAX_COUNT_LIMIT=44,t.INCORRECT_SKIPOFFSET_FORMAT=46,t.ADFOX_VAST_LOAD_ERROR=47,t.YA_VAST_LOAD_ERROR=48,t.YANDEX_WRAPPER_ENDED_WITH_NOT_YANDEX_VAST=49,t}(Error);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(6),r(21),r(20),r(8),r(7),r(23),r(24)],i=function(e,t,r,n,i,o,a,s,u){"use strict";var c=function(){function e(){this.mediaFiles=[],this.icons=[],this.trackings={},this.clickThrough="",this.isYandexAdxWrapper=!1,this.skipTime=NaN,this.skipOffset=NaN,this.progressOffset=NaN,this.duration=NaN,this.isClickable=!0,this.numRepeats=1,this.comscoreLinks=[]}return e.fromXml=function(t,c,l){
void 0===l&&(l=!1);var d=t.getAttribute("sequence"),p=null===d?Number.MAX_VALUE:parseInt(d,10),f=t.querySelector("VideoClicks"),h=t.querySelectorAll("MediaFile"),v=t.querySelector("Linear"),y=t.querySelectorAll("Tracking"),m=t.querySelectorAll("Impression"),g=t.querySelectorAll("ViewableImpression"),E=t.querySelectorAll("Error"),T=t.querySelector("Extensions"),A=t.querySelector("Description"),w=t.querySelectorAll("Icons Icon"),S=t.querySelector("AdParameters"),k=new e;if(k.sequence=p,k.adParameters=S?r.readElementText(S):"",!l){for(var b=0,C=h.length;b<C;b++)k.mediaFiles.push(s["default"].fromXml(h[b]));if(f){var _=r.readElementText(f.querySelector("ClickThrough"));_&&(k.clickThrough=_)}}if(f)for(var P=f.querySelectorAll("ClickTracking"),b=0,C=P.length;b<C;b++)k.addEventUrl("clickThrough",r.readElementText(P[b]));for(var b=0,C=y.length;b<C;b++){var O=r.readAttr(y[b],"event");k.addEventUrl(O,r.readElementText(y[b])),"progress"===O&&(k.progressOffset=o.parseVASTTime(r.readAttr(y[b],"offset","")))}for(var b=0,C=m.length;b<C;b++)k.addEventUrl("impression",r.readElementText(m[b]));for(var b=0,C=g.length;b<C;b++)for(var I=g[b].querySelectorAll("Viewable"),N=0,R=I.length;N<R;N++){var D=r.readElementText(I[N]);k.addEventUrl("viewable",D)}for(var b=0,C=E.length;b<C;b++)c===i["default"].AD_FOX?k.addEventUrl("adFoxError",r.readElementText(E[b])):k.addEventUrl("error",r.readElementText(E[b]));for(var b=0,C=w.length;b<C;b++)k.icons.push(u["default"].fromXml(w[b]));if(T){for(var x=T.querySelectorAll('Extension[type="dwell"]'),b=0,C=x.length;b<C;b++)k.addEventUrl("dwell",r.readElementText(x[b]));for(var V=T.querySelectorAll('Extension[type="skipAd"]'),b=0,C=V.length;b<C;b++)k.addEventUrl("skip",r.readElementText(V[b]));var M=T.querySelector('Extension[type="skipTime"]');r.isElementSet(M)&&(k.skipTime=o.parseVASTTime(r.readElementText(M)),k.skipTime>180&&(k.skipTime=0));var L=T.querySelector('Extension[type="isClickable"]');r.isElementSet(L)&&(k.isClickable="0"!==r.readElementText(L));var U=T.querySelectorAll('Extension[type="comscore"]');if(U.length)for(var b=0;b<U.length;b++)k.comscoreLinks.push(r.readElementText(U[b]))}if(r.isElementSet(A)&&(k.description=r.readElementText(A)),v){var _=r.readAttr(v,"skipoffset","").trim();if(""!==_){var F=o.parseVASTTime(_);isNaN(F)?a.trackError(new n["default"](_,n["default"].INCORRECT_SKIPOFFSET_FORMAT),k.trackings.error):k.skipOffset=F}var j=v.querySelector("Duration");j&&(k.duration=o.parseVASTTime(r.readElementText(j)))}return k},e.prototype.addEventUrl=function(e,t){t&&e&&(this.trackings[e]||(this.trackings[e]=[]),this.trackings[e].push(t))},e.prototype.merge=function(e){if(e.mediaFiles.length)for(var t=0,r=e.mediaFiles.length;t<r;t++)this.mediaFiles.push(e.mediaFiles[t]);for(var n in e.trackings)e.trackings.hasOwnProperty(n)&&(this.trackings[n]?this.trackings[n]=this.trackings[n].concat(e.trackings[n]):this.trackings[n]=e.trackings[n]);"string"==typeof e.clickThrough&&e.clickThrough.length&&(this.clickThrough=e.clickThrough),this.skipTime=e.skipTime,this.skipOffset=e.skipOffset,this.isClickable=e.isClickable,isNaN(e.progressOffset)||(this.progressOffset=e.progressOffset),this.comscoreLinks=this.comscoreLinks.concat(e.comscoreLinks),e.adParameters&&(this.adParameters=e.adParameters),isNaN(e.duration)||(this.duration=e.duration),e.sequence!==Number.MAX_VALUE&&(this.sequence=e.sequence)},e.prototype.hasMedia=function(){return Boolean(this.mediaFiles&&this.mediaFiles.length)},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=c}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(6)],i=function(e,t,r){"use strict";var n=function(){function e(){}return e.fromXml=function(t){var n=new e;return n.width=parseInt(r.readAttr(t,"width",0),10),n.height=parseInt(r.readAttr(t,"height",0),10),n.bitrate=parseInt(r.readAttr(t,"bitrate",0),10),n.delivery=r.readAttr(t,"delivery"),n.type=r.readAttr(t,"type"),n.isVpaid="VPAID"===r.readAttr(t,"apiFramework"),n.source=r.readElementText(t),n},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(6)],i=function(e,t,r){"use strict";var n=function(){function e(){}return e.fromXml=function(t){var n=t.querySelector("StaticResource"),i=new e;return i.src=r.readElementText(n),i.program=r.readAttr(t,"program"),i.xPosition=parseInt(r.readAttr(t,"xPosition",0),10),i.yPosition=parseInt(r.readAttr(t,"yPosition",0),10),i.width=parseInt(r.readAttr(t,"width",0),10),i.height=parseInt(r.readAttr(t,"height",0),10),i},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t],i=function(e,t){"use strict";var r=function(e){function t(t,r){e.call(this,t),this.id=r,this.message=t}return o(t,e),t.NO_AD_TO_DISPLAY=51,t.NO_AD_TO_DISPLAY_MSG="No ads to display in the VAST documents",t.SKIP_DELAY_WITHOUT_SKIPOFFSET=45,t.SKIP_DELAY_WITHOUT_SKIPOFFSET_MSG="BlockInfo-Skipoffset error",t}(Error);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(7),r(28),r(8),r(19),r(27),r(29),r(10),r(6),r(1)],i=function(e,t,r,n,i,o,a,s,u,c,l){"use strict";var d=["image/jpeg","image/gif","image/png"],p=[l.TrackingEventType.START,l.TrackingEventType.FIRST_QUARTILE,l.TrackingEventType.MIDPOINT,l.TrackingEventType.THIRD_QUARTILE,l.TrackingEventType.COMPLETE,l.TrackingEventType.MUTE,l.TrackingEventType.UNMUTE,l.TrackingEventType.PAUSE,l.TrackingEventType.REWIND,l.TrackingEventType.RESUME,l.TrackingEventType.FULLSCREEN,l.TrackingEventType.EXIT_FULLSCREEN,l.TrackingEventType.EXPAND,l.TrackingEventType.COLLAPSE,l.TrackingEventType.ACCEPT_INVITATION,l.TrackingEventType.SKIP,l.TrackingEventType.PROGRESS,"closeLinear"],f=function(){function e(e,t){this.vastAd=t,this.numRepeats=1,this.duration=0,this.clickThroughUrl=t.clickThrough,this.numRepeats=t.numRepeats,this.duration=0,this.sources=t.mediaFiles.map(function(e){return new n["default"](e)}),this.imageSources=this.sources.filter(function(e){return d.indexOf(e.type)>-1}).sort(function(e,t){return d.indexOf(e.type)-d.indexOf(t.type)}),this.icons=t.icons.map(function(e){return a["default"].fromVastIcon(e)}),this.playbackParams={isClickable:t.isClickable&&!!this.clickThroughUrl,title:e.title,description:t.description,skinUrl:e.skinUrl,skipTimeLeftShow:e.skipTimeLeftShow,timeLeftShow:e.timeLeftShow,videoTimeout:e.videoTimeout,vpaidTimeout:e.vpaidTimeout,bufferFullTimeout:e.bufferFullTimeout,bufferEmptyLimit:e.bufferEmptyLimit,progressOffset:t.progressOffset,visitSiteShow:e.visitSiteShow,autoplay:!0,minimalGui:!1,skipDelay:0,pauseAllowed:!1},isNaN(t.skipOffset)?this.sources.length>0&&e.skipDelay:isNaN(t.skipTime)?this.playbackParams.skipDelay=0===e.skipDelay?t.skipOffset:Math.min(e.skipDelay,t.skipOffset):this.playbackParams.skipDelay=t.skipTime,isNaN(t.duration)||(this.duration=t.duration)}return e.create=function(t,r){var n=[];return r instanceof o["default"]?r.ads.forEach(function(e){n.push(e)}):n.push(r),n[0]?n.map(function(r){return new e(t,r)}):null},e.prototype.toXML=function(){var e=(new DOMParser).parseFromString("<VAST></VAST>","application/xml"),t=e.querySelector("VAST");t.setAttribute("version","2.0");var r=this.vastAd,n=c.appendNewElement("Ad",t),o=c.appendNewElement("InLine",n);r.trackings.impression&&r.trackings.impression.forEach(function(e){return c.appendNewElement("Impression",n,e)}),r.trackings.error&&r.trackings.error.forEach(function(e){return c.appendNewElement("Error",n,e)}),r.trackings.adFoxError&&r.trackings.adFoxError.forEach(function(e){return c.appendNewElement("Error",n,e,{isAdFox:!0})});var a=c.appendNewElement("Creatives",o),s=c.appendNewElement("Creative",a),u=c.appendNewElement("Linear",s);this.duration&&c.appendNewElement("Duration",u,i.toVastTime(this.duration));var d=c.appendNewElement("TrackingEvents",u),p=function(e){if(l.TrackingEventType.hasOwnProperty(e)){var t=l.TrackingEventType[e];r.trackings[t]&&r.trackings[t].forEach(function(e){var n={event:t};"progress"===t&&(n.offset=String(r.progressOffset||i.toVastTime(0))),c.appendNewElement("Tracking",d,e,n)})}};for(var f in l.TrackingEventType)p(f);var h=c.appendNewElement("MediaFiles",u);r.mediaFiles.forEach(function(e){return c.appendNewElement("MediaFile",h,e.source,{width:e.width,height:e.height,bitrate:e.bitrate,apiFramework:e.isVpaid?"VPAID":null,type:e.type,delivery:e.delivery})}),r.adParameters&&c.appendNewElement("AdParameters",u,r.adParameters);var v=c.appendNewElement("VideoClicks",u);r.clickThrough&&c.appendNewElement("ClickThrough",v,r.clickThrough),r.trackings.clickThrough&&r.trackings.clickThrough.forEach(function(e){return c.appendNewElement("ClickTracking",v,e)});var y=c.appendNewElement("Extensions",o);return r.trackings.dwell&&r.trackings.dwell.forEach(function(e){return c.appendNewElement("Extension",y,e,{type:"dwell"})}),r.skipTime&&c.appendNewElement("Extension",y,i.toVastTime(r.skipTime),{type:"skipTime"}),r.isClickable&&c.appendNewElement("Extension",y,"1",{type:"isClickable"}),r.comscoreLinks&&r.comscoreLinks.forEach(function(e){return c.appendNewElement("Extension",y,e,{type:"comscore"})}),e},e.prototype.toXMLString=function(){return(new XMLSerializer).serializeToString(this.toXML())},e.prototype.trackError=function(e){i.log("Track error ==> ",e),r.trackError(e,this.vastAd.trackings.error),r.knockEach(this.vastAd.trackings.adFoxError)},e.prototype.trackEvent=function(e){var t=this;i.log("Track event ==> ",e);var n=this.vastAd.trackings[e];return Array.isArray(n)?n.map(function(n){var o=u.getUrlParam(n,"vce4v");if("1"===o){var a=t.displayController,s=a.getAdDimensions(),c=a.wrapperNode,l=a.videoNode;return cs_vce_.trackEvent(e,n,{ns_ad_cd:a.duration,ns_ad_fs:a.videoNodeController.isFullscreen,ns_ad_vs:a.muted,ns_ad_ctp:!t.playbackParams.autoplay,ns_ad_sz:c.clientWidth+"x"+c.clientHeight,ns_ad_ps:l.clientWidth+"x"+l.clientHeight,ns_ad_ct:"linear",ns_ad_of:"0x0",ns_ad_fts:i.isTouchDevice(),ns_ad_fsr:s?s.width+"x"+s.height:"0x0",ns_ad_fpt:"html5"},t.displayController.videoNode.id),{url:n,promise:Promise.resolve(!0)}}if("0"!==o)return r.knock(n)}):[]},e.prototype.hasMedia=function(){return Boolean(this.sources&&this.sources.length)},e.prototype.initComscore=function(e){var t=this;this.displayController=e,this.vastAd.comscoreLinks.length&&this.vastAd.comscoreLinks.forEach(function(r){cs_vce_.init("yandex",{playerNode:e.videoNode,defaultTrackingURL:r}),p.forEach(function(e){t.vastAd.addEventUrl(e,r)})})},Object.defineProperty(e.prototype,"contentType",{get:function(){var e={vpaid:[],video:[],swf:[]};return this.sources.forEach(function(t){if(t.isVpaid)if("application/javascript"===t.type)e.vpaid.push(t);else{if("application/x-shockwave-flash"!==t.type)throw new Error("AdSDKJS Error: unexpected mediaSource vpaid type: "+t.type);e.swf.push(t)}else e.video.push(t)}),e.vpaid.length?s.AdSourceType.js:e.video.length?s.AdSourceType.video:s.AdSourceType.flash},enumerable:!0,configurable:!0}),e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=f}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";var r=function(){function e(){this.x=NaN,this.y=NaN,this.width=NaN,this.height=NaN}return e.fromVastIcon=function(t){var r=new e;return r.src=t.src,r.type=t.program,r.x=t.xPosition,r.y=t.yPosition,r.width=t.width,r.height=t.height,r},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";var r=function(){function e(e){var t=e.source,r=e.type,n=e.bitrate,i=e.width,o=e.height,a=e.isVpaid;this.isVpaid=!1,this.src=t,this.type=r,this.bitrate=n,this.width=i,this.height=o,this.isVpaid=a}return e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";!function(e){e[e.js=0]="js",e[e.video=1]="video",e[e.flash=2]="flash"}(t.AdSourceType||(t.AdSourceType={}));t.AdSourceType}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t,r(8),r(9),r(38),r(40),r(34),r(31),r(42),r(46),r(35),r(29),r(48),r(1)],i=function(e,t,r,n,i,a,s,u,c,l,d,p,f,h){"use strict";var v=function(e){function t(t,o,a,s){var u=this;e.call(this,r.getElement(s)),this.config=t,this.adManager=o,this.qualityLevel=0,this.onAdLoaded=new n["default"],this.onPlayRequest=new n["default"],this.onBeforeStartAd=new n["default"],this.viewersList=[],this.desiredBitrate=t.desiredBitrate,this.indulgentlyForMobile=t.indulgentlyForMobile;var c=r.getElement(a);this.videoNodeController=new i["default"](c),this.videoNodeController.on("click",function(){return u.clickThrough()}),t.qualityLevel&&(this.qualityLevel=t.qualityLevel),this.on({afterEndAd:function(){return u.setVisibleNativeControls(!0)},ready:function(){return u.setVisibleNativeControls(!1)}}),this.addGui(),this.on({afterStartAdMedia:function(){return c.style.cursor=u.getCurrentClickability()?"pointer":"default"},afterEndAdMedia:function(){return c.style.cursor="default"},currentPositionChange:function(e){var t=e.currentTime,r=e.duration,n=t>=u.currentViewer.playbackParams.skipDelay&&u.currentViewer.playbackParams.skipDelay>0,i=r-t,o=Math.floor(i/60),a=Math.floor(u.currentViewer.playbackParams.skipDelay-t),s=Math.floor(i-60*o);u.gui.controls.skipTimeLeft.setVisible(!n),u.gui.controls.skip.setVisible(n),n||u.gui.controls.skipTimeLeft.setText("&#1055;&#1088;&#1086;&#1087;&#1091;&#1089;&#1090;&#1080;&#1090;&#1100; &#1088;&#1077;&#1082;&#1083;&#1072;&#1084;&#1091;: "+a+" &#1089;&#1077;&#1082;"),u.gui.controls.timeLeft.setText("&#1056;&#1077;&#1082;&#1083;&#1072;&#1084;&#1072; "+(s<10?"0"+s:s))}})}return o(t,e),t.prototype.loadAndShowAd=function(e){var t=this;return this.isFinished=!1,this.currentAdType=e,this.videoNodeController.pause(),this.loadAd().then(function(e){return t.viewersList=e}).then(function(){return t.showAd()})["catch"](function(e){return t.emit("error",e),Promise.reject(e)})},t.prototype.getPartnerIdAndCategory=function(){return{partnerId:parseInt(this.adManager.blockInfo.partnerId,10)||139995,category:this.adManager.blockInfo.categoryID||0}},t.prototype.getClickThroughURL=function(){return this.viewersList[0].mediaAd.clickThroughUrl},t.prototype.destroy=function(){this.videoNodeController.destroy()},t.prototype.setMute=function(e,t){this.videoNodeController.setMute(e,t)},t.prototype.clickThrough=function(){this.currentViewer&&this.currentViewer.clickThrough()},t.prototype.play=function(e){return void 0===e&&(e=!0),e&&this.onPlayRequest.trigger(),this.currentViewer?this.currentViewer.play(e):Promise.reject(new Error("AdSDK Error: play request without AdMedia"))},t.prototype.pause=function(){this.currentViewer&&this.currentViewer.pause()},t.prototype.resume=function(){this.currentViewer.resume()},t.prototype.skip=function(e){this.isFinished=!0,this.currentViewer.skip(e),this.emitAdEnd()},t.prototype.stop=function(){this.isFinished=!0,this.emit("stop"),this.emitAdEnd()},t.prototype.getAdDimensions=function(){return this.currentViewer?this.currentViewer.getAdDimensions():d.ZERO_DIMENSION},t.prototype.trackEvent=function(e){this.currentViewer&&this.currentViewer.trackEvent(e)},t.prototype.trackError=function(e){this.currentViewer&&this.currentViewer.trackError(e)},t.prototype.getCurrentContentType=function(){return this.currentViewer?this.currentViewer.contentType:null},t.prototype.getCurrentTime=function(){return this.getCurrentViewerStartTime()+this.currentViewer.getCurrentTime()},t.prototype.getDuration=function(){var e=0;return this.viewersList.forEach(function(t){e+=t.duration}),e},t.prototype.getPaused=function(){return this.videoNode.paused},t.prototype.getVolume=function(){return this.videoNodeController.volume},t.prototype.setVolume=function(e){this.videoNodeController.volume=e},t.prototype.getMuted=function(){return this.videoNode.muted},t.prototype.getAutoplay=function(){var e=!this.config.hasOwnProperty("autoplay")||this.config.autoplay;return e||this.getCurrentViewerIndex()>0},t.prototype.setVisibleNativeControls=function(e){e?this.nativeControlsHidder&&this.nativeControlsHidder.parentElement&&document.head.removeChild(this.nativeControlsHidder):(this.nativeControlsHidder||(this.nativeControlsHidder=document.createElement("style"),this.nativeControlsHidder.innerHTML="\n                    #"+this.videoNode.id+"::-webkit-media-controls{\n                        display:none !important;\n                    }\n                "),document.head.appendChild(this.nativeControlsHidder))},t.prototype.getCurrentClickability=function(){return this.currentViewer&&this.currentViewer.playbackParams.isClickable&&!this.currentViewer.playbackParams.visitSiteShow},t.prototype.getCurrentSrc=function(){return this.currentViewer?this.currentViewer.getSrc():""},t.prototype.addGui=function(){var e=this,t=this.gui=new l["default"](this.wrapperNode),n=t.controls;return r.isTouchDevice()&&t.wrapper.addClass("yaAdSdkGui-mobile"),n.play.setVisible(!this.getAutoplay()),this.on("pause",function(){n.play.show()}).on(["start","resume"],function(){n.play.hide()}).once("playAdMedia",function(){n.play.setVisible(!e.getAutoplay()||e.indulgentlyForMobile&&(r.isIPhone()||r.isAndroid()))}),r.isTouchDevice()?this.on(["start","resume"],function(){e.currentViewer.playbackParams.pauseAllowed&&!r.isIPhone()&&n.pause.show()}):(this.onChangeHover.add(function(t){t?e.currentViewer&&e.currentViewer.playbackParams.pauseAllowed&&!n.play.isVisible&&!n.unmuteInviter.isVisible&&n.pause.show():n.pause.hide()}),this.on(["start","resume"],function(){e.currentViewer.playbackParams.pauseAllowed&&e.isHovered&&n.pause.show()})),this.on({pause:function(){return n.pause.hide()}}),t.on({changeMute:function(t){return e.setMute(!e.videoNodeController.muted,t)},click:function(){return e.clickThrough()},pause:function(){return e.pause()},play:function(){e.currentContentType===p.AdSourceType.video?e.videoNode.play():e.play(),e.currentViewer.isStarted&&e.trackEvent(h.TrackingEventType.RESUME)},skip:function(){return e.skip()}}),this.once("playAdMedia",function(){var r=e.currentViewer.playbackParams;t.addSkin(r.skinUrl),e.getCurrentClickability()?t.wrapper.addClass("pointer"):t.wrapper.removeClass("pointer")}).on({afterEndAd:function(){return t.hide()},afterStartAdMedia:function(i){var o=i.playbackParams;i.contentType===p.AdSourceType.video?t.show():n.unmuteInviter.isVisible||t.hide(),t.topRightBlock.className=o.minimalGui?"topRightBlockMinimal":"topRightBlock",n.skip.setBlocked(o.minimalGui),n.skipTimeLeft.setBlocked(o.minimalGui||!o.skipTimeLeftShow),n.timeLeft.setVisible(o.timeLeftShow),n.title.setText(o.title).setVisible(!!o.title.trim()&&!o.minimalGui),n.mute.setVisible(!r.isIOS()&&(r.isTouchDevice()||!o.minimalGui)),n.visitSite.setVisible(o.isClickable&&o.visitSiteShow),t.setMute(e.videoNodeController.muted)},muteChange:function(e){return t.setMute(e)}}),this.onBeforeStartAd.add(function(){return t.show()}),t},t.prototype.getCurrentViewerIndex=function(){return Math.max(this.viewersList.indexOf(this.currentViewer),0)},t.prototype.showAd=function(){var e=this;return new Promise(function(t,r){e.emitAdEnd=t,e.onBeforeStartAd.trigger(),e.viewersList[0].once({ready:function(){return e.emit("ready")},start:function(){return e.emit("afterStartAd")}}),e.viewersList.forEach(function(t){e.reemit(t,["start","resume","muteChange","pause","clickThrough","impression"]),t.once("start",function(){return e.emit("afterStartAdMedia",t)}).on("currentPositionChange",function(t){var r=t.currentTime;return e.emit("currentPositionChange",{currentTime:e.getCurrentViewerStartTime()+r,duration:e.duration})})});var n=Promise.resolve();return e.viewersList.forEach(function(t){n=n.then(function(){return e.isFinished?null:e.playAdMedia(t).then(function(){return e.emit("afterEndAdMedia")})["catch"](function(t){e.emit("afterEndAdMedia"),e.isFinished=!0,r(t)})})}),n.then(t)}).then(function(){return e.emit("afterEndAd")})["catch"](function(t){return e.emit("afterEndAd",t),Promise.reject(t)})},t.prototype.playAdMedia=function(e){var t=this;return this.currentViewer=e,new Promise(function(n,i){var o=e.playbackParams,a=e.contentType===p.AdSourceType.video,u=a?o.videoTimeout:o.vpaidTimeout,c=a?s["default"].VIDEO_TIMEOUT:s["default"].VPAID_START_TIMEOUT,l=!0,d=function(){return t.onPlayRequest.addOne(function(){if(!e.isStarted){var n=setTimeout(function(){if(t.indulgentlyForMobile&&(r.isIPhone()||r.isAndroid())&&e.contentType===p.AdSourceType.video&&l)l=!1,d();else{var n=new s["default"]("Timeout of "+e.getContentTypeString()+": "+u/1e3+"s: "+t.getCurrentSrc(),c);t.trackError(n),i(n)}},u);e.once(["start","resume"],function(){return clearTimeout(n)})}})};d(),t.emit("playAdMedia"),t.play(t.getAutoplay()).then(n)["catch"](i)}).then(function(){t.currentViewer=null,e.destroyAdMedia()})["catch"](function(r){return t.currentViewer=null,e.destroyAdMedia(),Promise.reject(r)})},t.prototype.loadAd=function(){var e=this;return this.adManager.loadAd(this.currentAdType).then(function(t){return e.onAdLoaded.trigger(t),t.map(function(t){return e.createAdMedia(t)})})},t.prototype.getCurrentViewerStartTime=function(){for(var e=this.getCurrentViewerIndex(),t=0,r=0;r<e;r++)t+=this.viewersList[r].duration;return t},t.prototype.createAdMedia=function(e){var t,r=e.playbackParams,n=this.config;switch(e.contentType){case p.AdSourceType.js:t=new c["default"](this,e);break;case p.AdSourceType.video:t=new u["default"](this,e);break;case p.AdSourceType.flash:t=new f["default"](this,e);break;default:throw new Error("AdSDKJS Error: Unresolved content type of mediaAd: "+e.contentType)}return n.numruns&&t.setNumRepeats(n.numruns),void 0!==n.impressionOffset&&(t.impressionTrackOffset=n.impressionOffset),!n.duration&&this.videoNodeController.videoNode.duration&&(n.duration=this.videoNodeController.videoNode.duration),n.minimalGui===!0&&(r.minimalGui=!0),n.timeLeftShow===!0&&(r.timeLeftShow=!0),n.skipDelay&&(r.skipDelay=n.skipDelay),void 0!==n.visitSiteShow&&(r.visitSiteShow=n.visitSiteShow),void 0!==n.pauseAllowed&&(r.pauseAllowed=n.pauseAllowed),n.width=this.videoNodeController.getWidth(),n.height=this.videoNodeController.getHeight(),t},Object.defineProperty(t.prototype,"videoNode",{get:function(){return this.videoNodeController.videoNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return 0===this.videoNode.volume},enumerable:!0,configurable:!0}),t}(a.DisplayController);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=v}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t,r(32),r(33),r(34),r(7),r(35),r(36),r(1)],i=function(e,t,r,n,i,a,s,u,c){"use strict";var l=function(e){function t(t,r){var n=this;e.call(this,t,r),this.videoCurrentTime=NaN,this.videoDuration=NaN;var i=!1,o=!1,a=!1,s=!1,u=!1;this.on("currentPositionChange",function(e){var t=e.currentTime,c=e.duration;!i&&t>=n.impressionTrackOffset&&(i=!0,n.emit("impression")),!o&&t>=r.playbackParams.progressOffset&&(o=!0,n.emit("progress")),!a&&t>=c/4&&(a=!0,n.emit("firstQuartile")),!s&&t>=c/2&&(s=!0,n.emit("midpoint")),!u&&t>=3*c/4&&(u=!0,n.emit("thirdQuartile"))}),this.on({firstQuartile:function(){return n.trackEvent(c.TrackingEventType.FIRST_QUARTILE)},midpoint:function(){return n.trackEvent(c.TrackingEventType.MIDPOINT)},thirdQuartile:function(){return n.trackEvent(c.TrackingEventType.THIRD_QUARTILE)},pause:function(){return n.trackEvent(c.TrackingEventType.PAUSE)},skip:function(){return n.trackEvent(c.TrackingEventType.SKIP)},start:function(){n.trackEvent(c.TrackingEventType.START),n.trackEvent(c.TrackingEventType.CREATIVE_VIEW)},complete:function(){return n.trackEvent(c.TrackingEventType.COMPLETE)},clickThrough:function(){return n.trackEvent(c.TrackingEventType.CLICK_THROUGH)},impression:function(){return n.trackEvent(c.TrackingEventType.IMPRESSION)},progress:function(){return n.trackEvent(c.TrackingEventType.PROGRESS)}})}return o(t,e),t.prototype.resume=function(){this.videoNodeController.resume()},t.prototype.changeMute=function(e,t){void 0===t&&(t=!1),this.adDisplayController.setMute(e,t)},t.prototype.play=function(e){var t=this;return void 0===e&&(e=!0),this.preload()["catch"](function(e){return t.onStop.trigger(e)}),e?this.isStarted?this.resume():(this.isStarted=!0,this.subscribeEvents(),this.start()):this.videoNodeController.once(["start","resume"],function(){t.isStarted||t.videoNodeController.videoNode.currentSrc===t.preferredSource.src&&(t.isStarted=!0,t.subscribeEvents(),t.start())}),this.onStop.promise().then(function(e){if(e)return Promise.reject(e)})},t.prototype.pause=function(){this.videoNodeController.pause()},t.prototype.skip=function(e){void 0===e&&(e=c.TrackingEventType.SKIP),this.emit("skip"),this.onStop.trigger()},t.prototype.getSkippable=function(){return this.playbackParams.skipDelay>0&&this.getCurrentTime()>this.playbackParams.skipDelay},t.prototype.getAdDimensions=function(){var e=this.videoNodeController.videoNode;return e.videoWidth>0?{width:e.videoWidth,height:e.videoHeight}:this.preferredSource?{width:this.preferredSource.width,height:this.preferredSource.height}:s.ZERO_DIMENSION},t.prototype.getCurrentTime=function(){return this.videoCurrentTime},t.prototype.getDuration=function(){return this.videoDuration||this.mediaAd.duration},t.prototype.getSrc=function(){return this.preferredSource?this.preferredSource.src:""},t.prototype.destroy=function(){this.videoNodeCallbacks&&this.videoNodeController.off(this.videoNodeCallbacks)},t.prototype.getPreferredSource=function(e){for(var t,r=[],i=this.videoNodeController.videoNode,o=0,a=e.length;o<a;o++){var s=e[o];"probably"===i.canPlayType(s.type)&&r.push(s)}if(0===r.length)for(var o=0,a=e.length;o<a;o++){var s=e[o];"maybe"===i.canPlayType(s.type)&&r.push(s)}if(0===r.length)for(var o=0,a=e.length;o<a;o++){var s=e[o];"application/x-shockwave-flash"!==s.type&&"video/mp4"!==s.type&&s.src.indexOf(".mp4")>-1&&r.push(s)}if(0===r.length)return Promise.reject(new n["default"](n["default"].NO_APPROPRIATE_VIDEO_SOURCE,"Cannot find an appropriate video source."));r.sort(function(e,t){return e.bitrate&&t.bitrate?e.bitrate-t.bitrate:e.width&&t.width?e.width-t.width:e.height&&t.height?e.height-t.height:void 0});var u=this.adDisplayController.desiredBitrate;if(this.adDisplayController.desiredBitrate){var c=r.filter(function(e){return!!e.bitrate});if(c.length)return c.reduce(function(e,t){return Math.abs(u-e.bitrate)<Math.abs(u-t.bitrate)?e:t})}for(var o=0;o<this.adDisplayController.qualityLevel&&r.length>1;o++)r.shift();for(var l=Number.MAX_VALUE,o=0,a=r.length;o<a;o++){var s=r[o],d=Math.max(Math.abs(this.videoNodeController.getWidth()-s.width),Math.abs(this.videoNodeController.getHeight()-s.height));d<l&&(l=d,t=s)}var p=t;if(!p){var f="Cannot find an appropriate video source.";return e.some(function(e){return e.isVpaid})&&(f="VPAID returned. "+f),Promise.reject(new n["default"](n["default"].NO_APPROPRIATE_VIDEO_SOURCE,f))}return/\.yandex\.(ru|net)\/get/.test(p.src)?this.loadSourceRedirect(p.src).then(function(e){return p.src=e,p}):p},t.prototype.loadSourceRedirect=function(e){var t=new XMLHttpRequest;return void 0===t.responseURL?Promise.resolve(e):new Promise(function(t){var r=new XMLHttpRequest;r.open("HEAD",a.fixUrlSheme(e)),r.onload=function(){t(200===r.status?r.responseURL:e)},r.onerror=function(){return t(e)},r.ontimeout=function(){return t(e)},r.send()})},t.prototype.preload=function(){var e=this;if(this.isPreloaded)return Promise.resolve();var t=this.getPreferredSource(this.mediaAd.sources);return this.mediaAd.imageSources.length&&this.videoNodeController.setPoster(this.mediaAd.imageSources[0].src),t instanceof Promise?t.then(function(t){return e.setMediaSource(t)}):(this.setMediaSource(t),Promise.resolve())},t.prototype.setMediaSource=function(e){this.isPreloaded=!0,this.preferredSource=e,this.videoNodeController.setSrc(e.src),this.emit("ready")},t.prototype.subscribeEvents=function(){var e=this,t=this.mediaAd,n=this.videoNodeController,o=0,a=0,s=!0;this.videoNodeCallbacks={error:function(t){return e.onStop.trigger(t)},pause:function(){return e.emit("pause")},resume:function(){return e.emit("resume")},complete:function(){o++,1===o?e.emit("complete"):e.trackEvent(c.TrackingEventType.COMPLETE+o),o===t.numRepeats?e.onStop.trigger():n.resume()},fullscreen:function(){e.trackEvent(c.TrackingEventType.FULLSCREEN)},exitFullscreen:function(){e.trackEvent(c.TrackingEventType.EXIT_FULLSCREEN)},muteChange:function(t){e.isPlaying&&e.trackEvent(t?c.TrackingEventType.MUTE:c.TrackingEventType.UNMUTE),e.emit("muteChange",t)},bufferEmpty:function(){if(++a>t.playbackParams.bufferEmptyLimit)e.onStop.trigger(new i["default"]("Buffer empty limit",i["default"].BUFFER_EMPTY_LIMIT));else if(s)s=!1;else{e.trackEvent(r["default"].BUFFER_EMPTY);var n=setTimeout(function(){e.onStop.trigger(new i["default"]("Buffer full timeout",i["default"].BUFFER_FULL_TIMEOUT))},e.mediaAd.playbackParams.bufferFullTimeout);e.onStop.addOne(function(){return clearTimeout(n)}),e.videoNodeController.once("bufferFull",function(){return clearTimeout(n)})}},bufferFull:function(){e.trackEvent(r["default"].BUFFER_FULL)},currentPositionChange:function(r){var n=r.currentTime,i=r.duration;if(!i){if(!t.duration)return;i=t.duration}e.videoCurrentTime=n,e.videoDuration=i,e.emit("currentPositionChange",{currentTime:n,duration:i})}},n.on(this.videoNodeCallbacks);var u=function(){e.emit("start"),n.off("playing",u),e.off("currentPositionChange",l)},l=function(e){var t=e.currentTime;t>0&&u()};n.once("playing",u),this.on("currentPositionChange",l)},t.prototype.start=function(){this.videoNodeController.play(),this.videoNodeController.setVisibleControls(!1)},Object.defineProperty(t.prototype,"muted",{get:function(){return this.videoNodeController.muted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoNodeController",{get:function(){return this.adDisplayController.videoNodeController},enumerable:!0,configurable:!0}),t}(u.Viewer);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=l}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";var r={BUFFER_EMPTY:"bufferEmpty",BUFFER_FULL:"bufferFull"};Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t],i=function(e,t){"use strict";var r=function(e){function t(t,r){e.call(this,r),this.id=t,this.message=r}return o(t,e),t.NO_APPROPRIATE_VIDEO_SOURCE=52,t.FETCHING_ABORTED=101,t.NETWORK_ERROR=102,t.DECODE_ERROR=103,t.SRC_NOT_SUPPORTED=104,t.VIDEO_ERROR=10,t}(Error);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t],i=function(e,t){"use strict";var r=function(e){function t(t,r){e.call(this,t),this.id=r,this.message=t}return o(t,e),t.VIDEO_TIMEOUT=62,t.VPAID_START_TIMEOUT=65,t.BUFFER_FULL_TIMEOUT=63,t.BUFFER_EMPTY_LIMIT=64,
t}(Error);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";t.ZERO_DIMENSION={width:0,height:0}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t,r(37),r(9),r(29)],i=function(e,t,r,n,i){"use strict";var a=function(e){function t(t,r){var i=this;e.call(this),this.adDisplayController=t,this.mediaAd=r,this.impressionTrackOffset=0,this.viewability=!1,this.isPreloaded=!1,this.isStarted=!1,this.isPlaying=!1,this.onStop=new n["default"];var o=function(){i.isPlaying=!1,i.setViewability(!1)};this.on(["start","resume"],function(){i.isPlaying=!0,t.visibilitySensor.getVisibility()&&i.setViewability(!0)}).on("pause",o),this.onStop.add(o),t.visibilitySensor.onChangeVisibility.add(function(e){return i.setViewability(e&&i.isPlaying)}),r.initComscore(this.adDisplayController)}return o(t,e),t.prototype.trackEvent=function(e){this.adDisplayController.emit("trackEvent",e),this.mediaAd.trackEvent(e)},t.prototype.trackError=function(e){this.mediaAd.trackError(e)},t.prototype.clickThrough=function(){var e=this.mediaAd.clickThroughUrl;e&&(window.open(e,"_blank"),this.pause(),this.emit("clickThrough"))},t.prototype.setNumRepeats=function(e){this.mediaAd.numRepeats=e},t.prototype.destroyAdMedia=function(){this.resetEventBus(),this.destroy()},t.prototype.setViewability=function(e){this.viewability!==e&&(this.viewability=e,this.emit("changeViewability",e))},t.prototype.getContentTypeString=function(){switch(this.mediaAd.contentType){case i.AdSourceType.video:return"VIDEO";case i.AdSourceType.js:return"JAVASCRIPT_VPAID";case i.AdSourceType.flash:return"SHOCKWAVE_FLASH_VPAID";default:throw new Error("AdSDK JS Error: Unresolver AdSourceType: "+this.mediaAd.contentType)}},Object.defineProperty(t.prototype,"duration",{get:function(){return this.getDuration()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playbackParams",{get:function(){return this.mediaAd.playbackParams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentType",{get:function(){return this.mediaAd.contentType},enumerable:!0,configurable:!0}),t}(r["default"]);t.Viewer=a}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";var r=function(){function e(){this.resetEventBus()}return e.toEventsArr=function(e,t){var r=[];if("string"==typeof e)r.push({name:e,callback:t});else if(e instanceof Array){for(var n in e)if(e.hasOwnProperty(n)){if("function"!=typeof t)throw new Error("You MUST pass callback in the second parameter with eventsName array");e.hasOwnProperty(n)&&r.push({name:e[n],callback:t})}}else{if("object"!=typeof e)throw new Error("Event name MUST be a string");for(var n in e)e.hasOwnProperty(n)&&r.push({name:n,callback:e[n]})}return r},e.addEvent=function(e,t){var r=t.name,n=t.callback;if("function"!=typeof n)throw new Error("Event listener MUST be a function");e[r]||(e[r]=[]),e[r].indexOf(n)===-1&&e[r].push(n)},e.addEvents=function(t,r){for(var n in r)r.hasOwnProperty(n)&&e.addEvent(t,r[n])},e.offCallbackByCallbacks=function(e,t){if(e){var r=e.indexOf(t);r!==-1&&e.splice(r,1)}},e.prototype.resetEventBus=function(){return this._events={on:{},once:{}},this},e.prototype.on=function(t,r){return e.addEvents(this._events.on,e.toEventsArr(t,r)),this},e.prototype.once=function(t,r){return e.addEvents(this._events.once,e.toEventsArr(t,r)),this},e.prototype.when=function(e){var t=this;return new Promise(function(r){if("string"==typeof e)t.once(e,function(e){return r(e)});else{if(!(e instanceof Array))throw new Error('EventBus "when" method can take a string on string array parameter');for(var n in e)e.hasOwnProperty(n)&&t.once(e[n],function(e){return r(e)})}})},e.prototype.off=function(t,r){return this.offEvents(e.toEventsArr(t,r)),this},e.prototype.emit=function(e,t){if("string"==typeof e)this.emitEvent(e,t);else if(e instanceof Array)for(var r in e)e.hasOwnProperty(r)&&this.emitEvent(e[r],t);else if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&this.emitEvent(n,e[n]);return this},e.prototype.reemit=function(e,t){var r=this,n=t instanceof Array?t:[t];for(var i in n)n.hasOwnProperty(i)&&!function(t){return e.on(t,function(e){return r.emit(t,e)})}(n[i]);return this},e.prototype.offEvents=function(t){for(var r in t)if(t.hasOwnProperty(r)){var n=t[r],i=n.name,o=n.callback;e.offCallbackByCallbacks(this._events.on[i],o),e.offCallbackByCallbacks(this._events.once[i],o)}},e.prototype.emitEvent=function(e,t){this.emitEvents(this._events.on[e],t),this.emitEvents(this._events.once[e],t),this._events.once[e]=void 0},e.prototype.emitEvents=function(e,t){if(e)for(var r in e)e.hasOwnProperty(r)&&e[r].apply(this,[t])},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t,r(33),r(37),r(39)],i=function(e,t,r,n,i){"use strict";var a=1e3,s=400,u=function(e){function t(t){e.call(this),this.videoNode=t,this.isFullscreen=!1,this.lastMutedValue=!1,this.isStarted=!1,this.justStarted=!1,this.isLagging=!1,this._muted=!1,this.init()}return o(t,e),t.prototype.resetState=function(){this.isStarted=!1,this.isLagging=!1,this.timeUpdateIntervalId&&(clearInterval(this.timeUpdateIntervalId),this.timeUpdateIntervalId=0)},t.prototype.play=function(){var e=this,t=function(){e.videoNode.removeEventListener("abort",t),setTimeout(function(){return e.videoNode.play()},0)};this.videoNode.addEventListener("abort",t),this.resume()},t.prototype.getVideoState=function(){return new i["default"](this.videoNode)},t.prototype.setVideoState=function(e){this.resetState(),this.videoNode.autoplay=!1,e.applyTo(this.videoNode)},t.prototype.resume=function(){this.videoNode.autoplay=!0,this.videoNode.preload="auto",this.videoNode.play()},t.prototype.pause=function(){this.videoNode.pause()},t.prototype.setMute=function(e,t){void 0===t&&(t=!1),this._muted=e,t?this.muteWithFade(e):(this.videoNode.muted=e,this.videoNode.volume=e?0:1)},t.prototype.setSrc=function(e){this.videoNode.src=e},t.prototype.getWidth=function(){return this.videoNode.clientWidth},t.prototype.getHeight=function(){return this.videoNode.clientHeight},t.prototype.setVisibleControls=function(e){this.videoNode.controls=e},t.prototype.setPoster=function(e){this.videoNode.poster=e},t.prototype.getVideoNodeError=function(){var e=new r["default"](r["default"].VIDEO_ERROR,"Cannot play the video source");if(this.videoNode.error)switch(this.videoNode.error.code){case MediaError.MEDIA_ERR_ABORTED:e=new r["default"](r["default"].FETCHING_ABORTED,"The fetching process for the video resource was aborted by the user agent");break;case MediaError.MEDIA_ERR_NETWORK:e=new r["default"](r["default"].NETWORK_ERROR,"A network error occurred");break;case MediaError.MEDIA_ERR_DECODE:e=new r["default"](r["default"].DECODE_ERROR,"An error occurred while decoding the video resource");break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:e=new r["default"](r["default"].SRC_NOT_SUPPORTED,"AdSDK VideoError: video src not supported: "+this.videoNode.currentSrc)}return e},t.prototype.init=function(){var e=this,t=this.videoNode;this._muted=this.lastMutedValue=t.muted,t.addEventListener("click",function(t){e.emit("click",t)});var r=function(){(e.isLagging||e.justStarted)&&(e.isLagging=!1,e.justStarted=!1)},n=function(){document.fullscreenEnabled?document.fullscreenElement===t&&(e.isFullscreen=!0,e.emit("fullscreen")):e.isFullscreen&&(e.isFullscreen=!1,e.emit("exitFullscreen"))},i=function(){e.emit("currentPositionChange",{currentTime:t.currentTime,duration:t.duration})},o=300,a=0,s=0,u=!1,c=function(){s=e.videoNode.currentTime;var t=1/o;!u&&s<a+t&&!e.videoNode.paused&&(e.emit("bufferEmpty"),u=!0),u&&s>a+t&&!e.videoNode.paused&&(e.emit("bufferFull"),u=!1),a=s};setInterval(c,o);var l=[{name:"error",handler:function(){return e.emit("error",e.getVideoNodeError())}},{name:"waiting",handler:function(){e.isStarted&&!e.justStarted&&(e.isLagging=!0)}},{name:"timeupdate",handler:i},{name:"play",handler:function(){e.timeUpdateIntervalId||(e.timeUpdateIntervalId=setInterval(i,500)),e.justStarted=!0,e.isStarted?e.emit("resume"):(e.isStarted=!0,e.emit("start"))}},{name:"canplay",handler:r},{name:"playing",handler:function(){e.lastMutedValue=t.muted,r(),e.emit("playing")}},{name:"ended",handler:function(){e.resetState(),e.emit("complete")}},{name:"pause",handler:function(){t.currentTime!==t.duration&&e.emit("pause")}},{name:"volumechange",handler:function(){e.lastMutedValue!==t.muted&&(e.lastMutedValue=t.muted,e.emit("muteChange",t.muted))}},{name:"fullscreenchange",handler:n,target:window.document}];l.forEach(function(e){var r=e.target,n=e.name,i=e.handler;(r?r:t).addEventListener(n,i)}),n(),this.destroy=function(){e.resetState(),l.forEach(function(e){var r=e.target,n=e.name,i=e.handler;(r?r:t).removeEventListener(n,i)}),t.pause(),t.src="",e.destroy=null}},t.prototype.muteWithFade=function(e){var t=this;this.muteIntervalId&&clearInterval(this.muteIntervalId);var r=(new Date).getTime(),n=this.videoNode.volume,i=e?0:1,o=Math.abs((e?a:s)*(n-i));0!==o&&(this.videoNode.muted=!1,this.muteIntervalId=setInterval(function(){var a=((new Date).getTime()-r)/o;t.videoNode.volume=e?Math.max(i,(1-a)*(n-i)):Math.min(i,a*(i-n)),a>=1&&(clearInterval(t.muteIntervalId),t.muteIntervalId=0,e&&(t.videoNode.muted=!0))},20))},Object.defineProperty(t.prototype,"muted",{get:function(){return this.muteIntervalId>0?this._muted:this.videoNode.muted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this.videoNode.volume},set:function(e){this.videoNode.volume=e},enumerable:!0,configurable:!0}),t}(n["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=u}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";var r=function(){function e(e){this.src=e.currentSrc,this.controls=e.controls,this.poster=e.poster}return e.prototype.applyTo=function(e){e.src=this.src||"",e.controls=this.controls,e.poster=this.poster},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t,r(41),r(37),r(8),r(29)],i=function(e,t,r,n,i,a){"use strict";var s=function(e){function t(t){var n=this;e.call(this),this.wrapperNode=t,this.visibilitySensor=new r["default"](t,.5),this.onChangeHover=i.createHoverE(t),this.onChangeHover.add(function(e){return n.isHovered=e})}return o(t,e),t.isJs=function(e){return e.currentContentType!==a.AdSourceType.flash},Object.defineProperty(t.prototype,"paused",{get:function(){return this.getPaused()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this.getMuted()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.getDuration()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.getCurrentTime()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContentType",{get:function(){return this.getCurrentContentType()},enumerable:!0,configurable:!0}),t}(n["default"]);t.DisplayController=s}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(9)],i=function(e,t,r){"use strict";var n=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),i="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,o="visibilityState"in document?"visibilityState":"webkitVisibilityState"in document?"webkitVisibilityState":"mozVisibilityState"in document?"mozVisibilityState":null,a=function(){function e(t,n){var a=this;this.el=t,this.threshold=n,this.onResize=new r["default"],this.onChangeVisibility=new r["default"],this.onShow=new r["default"],this.onHide=new r["default"],this.onChangeState=new r["default"],this.onDocumentFullScroll=new r["default"],this.onChangeDocumentVisibility=new r["default"],this.visibility=!1,this.isEndOfTheBody=!1;var s=t.ownerDocument,u=s.defaultView,c=this.el.getBoundingClientRect(),l=c.width,d=c.height;if(this.onChangeState.add(function(){var e=a.el.getBoundingClientRect();e.width===l&&e.height===d||(a.onResize.trigger(e),l=e.width,d=e.height);var t=a.getTheEndOfTheBody();t!==a.isEndOfTheBody&&(a.isEndOfTheBody=t,t&&a.onDocumentFullScroll.trigger());var r=a.getVisibility();a.getVisibility()!==a.visibility&&(a.visibility=r,a.onChangeVisibility.trigger(r),r?a.onShow.trigger():a.onHide.trigger())}),null!==i&&null!==o){var p=i.replace(/hidden/i,"visibilitychange");s.addEventListener(p,function(){return a.onChangeDocumentVisibility.trigger(e.getDocumentVisibility(s))})}for(var f=function(e){if("function"==typeof e.onscroll){var t=e.onscroll;e.onscroll=function(e){t(e),a.onChangeState.trigger()}}else e.onscroll=function(){return a.onChangeState.trigger()}},h=t.parentElement;h;h=h.parentElement)f(h);u.addEventListener("resize",function(){return a.onChangeState.trigger()}),u.addEventListener("scroll",function(){return a.onChangeState.trigger()}),this.onChangeDocumentVisibility.add(this.onChangeState),this.visibility=this.getVisibility(),this.isEndOfTheBody=this.getTheEndOfTheBody()}return e.getDocumentVisibility=function(e){return!e[i]},e.getDifferenceBetweenCoordinates=function(e,t){return{winWidth:t.winWidth,winHeight:t.winHeight,left:e.left+t.left,top:e.top+t.top,width:e.width,height:e.height}},e.getElementRelativeCoordinades=function(e){var t=e.ownerDocument,r=t.defaultView,i=t.documentElement,o=e.getBoundingClientRect();return{winWidth:n?Math.max(i.clientWidth,r.innerWidth||0):r.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,winHeight:n?Math.max(i.clientHeight,r.innerHeight||0):r.innerHeight||t.documentElement.clientHeight||t.body.clientHeight,left:o.left,top:o.top,width:o.width,height:o.height}},e.sliceExtraSpace=function(e){var t=e.width,r=e.height,n=e.top,i=e.left,o=e.winWidth,a=e.winHeight,s=i+t,u=n+r,c=i<0?0:i<o?i:o,l=n<0?0:n<a?n:a,d=s>o?o:s>c?s:c,p=u>a?a:u>l?u:l;return{winWidth:o,winHeight:a,left:c,top:l,width:d-c,height:p-l}},e.getAreaRatio=function(e,t){return e.width*e.height/(t.width*t.height)},e.getElemintVisibility=function(t,r){for(var n=e.getElementRelativeCoordinades(t),i=e.sliceExtraSpace(n),o=e.getAreaRatio(i,n);t.ownerDocument.defaultView.frameElement&&o>r;){t=t.ownerDocument.defaultView.frameElement;var a=e.getElementRelativeCoordinades(t),s=e.getDifferenceBetweenCoordinates(i,a);i=e.sliceExtraSpace(s),o=e.getAreaRatio(i,n)}return o>r},e.prototype.getDocumentHeight=function(){var e=this.el.ownerDocument,t=e.body,r=e.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight)},e.prototype.whenShow=function(){return this.getVisibility()?Promise.resolve():this.onShow.promise()},e.prototype.isFullScrolledElement=function(e){var t=this.el.ownerDocument,r=t.defaultView,n=t.documentElement;if(e===n||e===t.body){var i=(r.pageYOffset||n.scrollTop)-(n.clientTop||0);return this.getDocumentHeight()-(i+r.innerHeight)<40}return!(e.scrollHeight>e.clientHeight&&e.scrollHeight-(e.scrollTop+e.clientHeight)>40)},e.prototype.whenCanShow=function(){var e=this;return this.getVisibility()?Promise.resolve():this.getTheEndOfTheBody()&&this.getIsAfterBody()?Promise.resolve():new Promise(function(t){e.onShow.promise().then(t),e.onDocumentFullScroll.add(function(){e.getIsAfterBody()&&t()})})},e.prototype.getVisibility=function(){var t=this.el.ownerDocument;return!!e.getDocumentVisibility(t)&&e.getElemintVisibility(this.el,this.threshold)},e.prototype.getTheEndOfTheBody=function(){if(!this.el.parentElement||!this.el.parentElement.parentElement)return!1;for(var e=this.el.parentElement.parentElement,t=e;t;t=t.parentElement)if(!this.isFullScrolledElement(t))return!1;return!0},e.prototype.getIsAfterBody=function(){return this.el.getBoundingClientRect().bottom>this.el.ownerDocument.body.getBoundingClientRect().bottom},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t,r(43),r(44),r(36),r(8),r(1)],i=function(e,t,n,i,a,s,u){"use strict";var c=r(45),l=function(e){function t(t,r){var n=this;e.call(this,t,r),this.adParameters=r.vastAd.adParameters,this.on({firstQuartile:function(){return n.trackEvent(u.TrackingEventType.FIRST_QUARTILE)},midpoint:function(){return n.trackEvent(u.TrackingEventType.MIDPOINT)},thirdQuartile:function(){return n.trackEvent(u.TrackingEventType.THIRD_QUARTILE)},pause:function(){return n.trackEvent(u.TrackingEventType.PAUSE)},resume:function(){return n.trackEvent(u.TrackingEventType.RESUME)},skip:function(){return n.trackEvent(u.TrackingEventType.SKIP)},close:function(){return n.trackEvent(u.TrackingEventType.CLOSE)},start:function(){return n.trackEvent(u.TrackingEventType.CREATIVE_VIEW)},videoStart:function(){return n.trackEvent(u.TrackingEventType.START)},complete:function(){return n.trackEvent(u.TrackingEventType.COMPLETE)},clickThrough:function(){return n.trackEvent(u.TrackingEventType.CLICK_THROUGH)},impression:function(){return n.trackEvent(u.TrackingEventType.IMPRESSION)},error:function(e){return n.trackError(e)}}),this.videoNodeCallbacks={muteChange:function(e){return n.emit("muteChange")}},this.once({error:function(e){return n.onStop.trigger("string"==typeof e?new Error("AdSDK Js Error: Error from VPAID: "+e):e?e:new Error("AdSDK error: unknown error from VPAID creative"))},start:function(){return n.isStarted=!0}})}return o(t,e),t.checkVPAIDInterface=function(e){return e.handshakeVersion&&"function"==typeof e.handshakeVersion&&e.initAd&&"function"==typeof e.initAd&&e.startAd&&"function"==typeof e.startAd&&e.stopAd&&"function"==typeof e.stopAd&&e.skipAd&&"function"==typeof e.skipAd&&e.resizeAd&&"function"==typeof e.resizeAd&&e.pauseAd&&"function"==typeof e.pauseAd&&e.resumeAd&&"function"==typeof e.resumeAd&&e.expandAd&&"function"==typeof e.expandAd&&e.collapseAd&&"function"==typeof e.collapseAd&&e.subscribe&&"function"==typeof e.subscribe&&e.unsubscribe&&"function"==typeof e.unsubscribe},t.prototype.play=function(e){var t=this;return void 0===e&&(e=!0),this.preload().then(function(){e&&(t.containerNode.style.display="block",t.isStarted?t.creative.resumeAd():(t.isStarted=!0,t.creative.startAd()))}),this.onStop.promise().then(function(e){if(e)return Promise.reject(e)})},t.prototype.getCurrentTime=function(){var e=this.creative&&"function"==typeof this.creative.getAdRemainingTime&&this.creative.getAdRemainingTime()||0;return this.duration-e},t.prototype.pause=function(){this.creative.pauseAd()},t.prototype.resume=function(){this.creative.resumeAd()},t.prototype.skip=function(){this.getSkippable()?this.creative.skipAd():s.log("AdSDK ==> Creative is not skippable: ",this.creative)},t.prototype.getSkippable=function(){return this.creative&&"function"==typeof this.creative.getAdSkippableState&&this.creative.getAdSkippableState()},t.prototype.getDuration=function(){return this.creative&&"function"==typeof this.creative.getAdDuration&&this.creative.getAdDuration()||this.mediaAd.duration||0},t.prototype.getAdDimensions=function(){return this.creative&&"function"==typeof this.creative.getAdDimensions?this.creative.getAdDimensions():null},t.prototype.getSrc=function(){return this.getScriptSrc()},t.prototype.destroy=function(){this.videoNodeController.off(this.videoNodeCallbacks),this.removeControls()},t.prototype.preload=function(){var e=this;return this.videoNodeController.on(this.videoNodeCallbacks),this.isPreloaded?Promise.resolve():new Promise(function(t,r){e.load()["catch"](r),e.when("loaded").then(function(){e.isPreloaded=!0,t(),e.emit("ready")})})},t.prototype.load=function(){var e=this;return this.createControls().then(function(){return e.putScriptInIFrame()}).then(function(){return e.initIFrame()}).then(function(){return e.initAd()})},t.prototype.createControls=function(){var e=this;return new Promise(function(t){var r=e.videoWrapperNode,n=e.containerNode=document.createElement("div");n.className="yaAdSdkVpaidContainer",n.style.display="none",r.style.position="relative";var i=e.style=document.createElement("style");i.type="text/css",i.innerHTML=c,n.appendChild(i);var o=e.iframe=document.createElement("iframe");o.scrolling="no",n.appendChild(o),o.addEventListener("load",function(){o.contentDocument.body.style.margin="0",t()}),r.appendChild(n)})},t.prototype.putScriptInIFrame=function(){var e=this;return new Promise(function(t,r){var n=e.iframe.contentWindow.document,i=n.createElement("script");i.type="text/javascript",i.src=e.getScriptSrc(),i.onload=t,i.onerror=r,n.head.appendChild(i)})},t.prototype.initIFrame=function(){if("function"!=typeof this.iframe.contentWindow.getVPAIDAd)throw new Error("VPAID does not provide getVPAIDAd function: "+this.getScriptSrc());if(this.creative=this.iframe.contentWindow.getVPAIDAd(),!t.checkVPAIDInterface(this.creative))throw new Error("VPAID does not implement all of the required functions: "+this.getScriptSrc())},t.prototype.initAd=function(){var e=this.videoNodeController.videoNode,t=e.clientWidth,r=e.clientHeight,n=i["default"].NORMAL,o=this.adDisplayController.desiredBitrate||700,a={AdParameters:this.adParameters},s={slot:this.iframe.contentDocument.body,videoSlot:this.videoNodeController.videoNode,videoSlotCanAutoPlay:!0};this.subscribeCreativeEvents(),this.creative.initAd(t,r,n,o,a,s)},t.prototype.removeControls=function(){this.videoWrapperNode.removeChild(this.containerNode)},t.prototype.getScriptSrc=function(){return this.getCurrentSource().src},t.prototype.getCurrentSource=function(){return this.mediaAd.sources.filter(function(e){return"application/javascript"===e.type})[0]},t.prototype.subscribeCreativeEvents=function(){var e=this;for(var t in n.RevertTable)n.RevertTable.hasOwnProperty(t)&&this.subscribeCreativeEvent(t,n.RevertTable[t]);this.creative.subscribe(function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];return e.onStop.trigger(t.length>1?t:t[0])},"AdStopped")},t.prototype.subscribeCreativeEvent=function(e,t){var r=this;this.creative.subscribe(function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];return r.emit(t,e.length>1?e:e[0])},e)},Object.defineProperty(t.prototype,"videoWrapperNode",{get:function(){return this.adDisplayController.wrapperNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoNodeController",{get:function(){return this.adDisplayController.videoNodeController},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.adDisplayController.config},enumerable:!0,configurable:!0}),t}(a.Viewer);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=l}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";t.LookupTable={start:"AdStarted",stop:"AdStopped",close:"AdUserClose",videoStart:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",resume:["AdPlaying","AdResumed"],loaded:"AdLoaded",clickThrough:"AdClickThru",volumeChange:["AdVolumeChanged","AdVolumeChange"],sizeChange:"AdSizeChange",expanded:"AdExpanded",skip:"AdSkipped",error:"AdError",impression:"AdImpression",finish:"AdFinished",bufferFull:"AdBufferFull",bufferEmpty:"AdBufferEmpty",creativeView:"AdStarted"},t.RevertTable=function(){function e(e,t){r[e]?r[e].push(t):r[e]=[t]}var r={},n=function(r){if(t.LookupTable.hasOwnProperty(r)){var n=t.LookupTable[r];"string"==typeof n?e(n,r):n instanceof Array&&n.forEach(function(t){return e(t,r)})}};for(var i in t.LookupTable)n(i);return r}()}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";var r={NORMAL:"normal",THUMBNAIL:"thumbnail",FULLSCREEN:"fullscreen"};Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t){e.exports=".yaAdSdkVpaidContainer{position:absolute;top:0;right:0;bottom:0;left:0}.yaAdSdkVpaidContainer>iframe{position:absolute;top:0;left:0;width:100%;height:100%;margin:0;padding:0;border:0}"},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t,r(7),r(8),r(37),r(47),r(1)],i=function(e,t,r,n,i,a,s){"use strict";var u=function(e){function t(t,r){var i=this;e.call(this,"unmuteInviter",null,null,t);var o=n.createDiv("unmuteInviterWrapper"),a=n.createDiv("unmuteInviterIcon");o.appendChild(a);var s=n.createDiv("unmuteInviterText","&#1053;&#1072;&#1074;&#1077;&#1076;&#1080;&#1090;&#1077; &#1082;&#1091;&#1088;&#1089;&#1086;&#1088;,<br>&#1095;&#1090;&#1086;&#1073;&#1099; &#1074;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100; &#1079;&#1074;&#1091;&#1082;");o.appendChild(s),this.el.appendChild(o),n.createHoverE(this.el).add(function(e){if(e){if(i.timeout)return;i.timeout=setTimeout(function(){i.hide(),r()},1e3)}else clearTimeout(i.timeout),i.timeout=0}),a.addEventListener("click",function(e){return e.preventDefault()}),s.addEventListener("click",function(e){return e.preventDefault()})}return o(t,e),t.prototype.remove=function(){clearTimeout(this.timeout),this.hide()},t}(a["default"]),c=function(e){function t(t){e.call(this),this.container=t,this.controls={};var r=this.wrapper=new a["default"]("yaAdSdkGui",null,null,t,(!1));t.style.position&&"static"!==t.style.position||(t.style.position="relative"),n.isIOS7()&&(r.el.style.display="none"),this.createControls()}return o(t,e),t.prototype.addSkin=function(e){if(!e){if(s.ENVIRONMENT.DEFAULT_CSS)return void n.addBuiltinSkin();e="//"+s.ENVIRONMENT.getActualDomain()+"/awaps-ad-sdk-js/"+s.ENVIRONMENT.getVersioningURL()+"/skin.css"}for(var t=this.container.ownerDocument,i=t.querySelectorAll("link"),o=0;o<i.length;o++)if(i[o].href===e)return;var a=t.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=r.fixUrlSheme(e);var u=t.querySelector('head link[rel="stylesheet"]');u?t.querySelector("head").insertBefore(a,u):t.querySelector("head").appendChild(a)},t.prototype.setMute=function(e){this.controls.mute.setClasses(e?"unMute":"mute")},t.prototype.show=function(){this.wrapper.show()},t.prototype.hide=function(){this.wrapper.hide()},t.prototype.destroy=function(){this.hide(),this.wrapper=null},t.prototype.createControls=function(){var e=this,t=this.topRightBlock=n.createDiv("topRightBlock"),r=this.wrapper;r.appendChild(t),this.controls.timeLeft=new a["default"]("timeLeft",null,"Реклама 00",r.el);var i=n.createDiv("visitSiteWrapper");r.appendChild(i),this.controls.visitSite=new a["default"]("visitSite pointer",function(){return e.emit("click")},"Перейти на сайт рекламодателя",i,(!1)),this.controls.play=new a["default"]("play",function(){return e.emit("play")},null,r.el),this.controls.pause=new a["default"]("pause",function(){return e.emit("pause")},null,r.el).hide(),this.controls.mute=new a["default"]("mute",function(){return e.emit("changeMute")},null,t),this.controls.mute.el.style.zIndex="10",this.controls.skipTimeLeft=new a["default"]("skipTimeLeft",null,"&#1055;&#1088;&#1086;&#1087;&#1091;&#1089;&#1090;&#1080;&#1090;&#1100; &#1088;&#1077;&#1082;&#1083;&#1072;&#1084;&#1091;: 5 &#1089;&#1077;&#1082;",t),this.controls.skip=new a["default"]("skip",function(){return e.emit("skip")},"&#1055;&#1088;&#1086;&#1087;&#1091;&#1089;&#1090;&#1080;&#1090;&#1100;",t),this.controls.skip.hide(),this.controls.title=new a["default"]("title",function(){return e.emit("click")},null,r.el),this.controls.unmuteInviter=new u(r.el,function(){e.emit("changeMute",!0)}),this.controls.unmuteInviter.el.style.zIndex="9"},t}(i["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=c}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(8)],i=function(e,t,r){"use strict";var n=function(){function e(e,t,n,i,o){void 0===o&&(o=!0),this.elementClass=e,this.clickHandler=t,this.text=n,this.parent=i,this.blocked=!1,this.el=r.createDiv(e,n),this.el.addEventListener("click",function(e){o&&e.stopPropagation(),"function"==typeof t&&t()})}return e.prototype.setText=function(e){return this.el.innerHTML=e.trim()||"",this},e.prototype.setVisible=function(e){return this.blocked||this.isVisible===!!e||(e?this.parent.appendChild(this.el):this.parent.removeChild(this.el)),this},e.prototype.getClasses=function(){return this.el.className.split(/\s+/)},e.prototype.hasClass=function(e){return this.getClasses().indexOf(e)>-1},e.prototype.addClass=function(e){return this.hasClass(e)||(this.el.className+=" "+e),this},e.prototype.removeClass=function(e){if(this.hasClass(e)){var t=this.getClasses();t.splice(t.indexOf(e),1),this.el.className=t.join(" ")}return this},e.prototype.setClasses=function(e){return this.el.className=e,this},e.prototype.hide=function(){return this.setVisible(!1)},e.prototype.show=function(){return this.setVisible(!0)},e.prototype.setBlocked=function(e){return e&&this.hide(),this.blocked=e,this},e.prototype.block=function(){return this.setBlocked(!0)},e.prototype.unBlock=function(){return this.setBlocked(!1)},e.prototype.appendChild=function(e){return this.el.appendChild(e),this},e.prototype.removeChild=function(e){return this.el.removeChild(e),this},Object.defineProperty(e.prototype,"isVisible",{get:function(){return this.el.parentElement===this.parent},enumerable:!0,configurable:!0}),e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t,r(36),r(8),r(49),r(12)],i=function(e,t,r,n,i,a){"use strict";var s=function(e){function t(t,r){e.call(this,t,r),this.wrapperNode=t.wrapperNode}return o(t,e),t.prototype.play=function(e){var t=this;return this.preload().then(function(r){t.isPreloaded||(t.flashDisplayController=r,t.reemit(r,["ready","start","resume"]),t.flashDisplayController.on("afterEndAd",function(e){return t.onStop.trigger(e)})),t.isPreloaded=!0,e&&t.flashDisplayController.play()})["catch"](function(e){return t.onStop.trigger(e)}),this.onStop.promise().then(function(e){if(e)return Promise.reject(e)})},t.prototype.skip=function(e){},t.prototype.pause=function(){this.flashDisplayController&&this.flashDisplayController.pause()},t.prototype.resume=function(){this.flashDisplayController&&this.flashDisplayController.play()},t.prototype.getCurrentTime=function(){return 0},t.prototype.getDuration=function(){return 0},t.prototype.getAdDimensions=function(){return this.flashDisplayController.getAdDimensions()},t.prototype.getSkippable=function(){return!1},t.prototype.getSrc=function(){var e=this.getMediaSource();return e?e.src:""},t.prototype.destroy=function(){this.containerElement&&this.containerElement.parentElement&&this.containerElement.parentElement.removeChild(this.containerElement);
},t.prototype.preload=function(){var e=this;return this.isPreloaded?Promise.resolve():a.checkForFlashPlayer().then(function(t){if(t){e.createPlayerContainer();var r=e.mediaAd.toXMLString(),n=e.adDisplayController.getPartnerIdAndCategory();return n.xml=r,i.createSwfAdPlayer(e.playerElement,n)}throw new Error("AdSDK Js Error: cannot play FLASH Ad: FlashPlayer is not available")})},t.prototype.createPlayerContainer=function(){var e={position:"absolute",top:"0",left:"0",width:"100%",height:"100%"};this.containerElement=document.createElement("div"),n.applyStyles(this.containerElement,e),this.playerElement=document.createElement("div"),this.playerElement.id="yandex_flash_vpaid_"+Math.floor(1e9*Math.random()),n.applyStyles(this.playerElement,e),this.containerElement.appendChild(this.playerElement),this.wrapperNode.insertBefore(this.containerElement,this.adDisplayController.gui.wrapper.el)},t.prototype.getMediaSource=function(){return this.mediaAd.sources.filter(function(e){return e.isVpaid&&"application/x-shockwave-flash"===e.type})[0]},t}(r.Viewer);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i;n=[r,t,r(12),r(50)],i=function(e,t,r,n){"use strict";function i(e,t,n,i){return new Promise(function(o){ya.mediaAd.inPage[t]||(ya.mediaAd.inPage[t]={});var a={onStateChange:"window.ya.mediaAd.inPage."+t+".onStateChange",onError:"window.ya.mediaAd.inPage."+t+".onError","hide-ui":"true",autostart:"false",inpage:i.switchVolumeOnRollOver?"true":"false","switch-volume-on-roll-over":i.switchVolumeOnRollOver?"true":"false",awapsXMLProvider:i.xml?function(){return ya.mediaAd.inPage[t].awapsXMLProvider=function(){return i.xml},"window.ya.mediaAd.inPage."+t+".awapsXMLProvider"}():""},s={id:e.id,name:e.id,bgcolor:"#000000",background:"#000000",width:"100%",height:"100%"},c={movie:n,allowfullscreen:"true",bgcolor:"#000000",allowscriptaccess:"always",wmode:"opaque"};r.adConfigToFlashvars(i,a),swfobject.embedSWF(n,e.id,"100%","100%",u,null,a,c,s,o)})}function o(e,t){var o=r.sanitizeId(e.id);return r.loadSWFUrlByPackageAndBuild(a,s).then(function(r){var a=document.createElement("div");return e.appendChild(a),a.id=e.id+"swf",e.style.overflow="hidden",i(a,o,r,t).then(function(t){return t instanceof Error?Promise.reject(t):t.ref?new Promise(function(r,i){var o=t.ref,a=new n["default"](o,e),s=setTimeout(function(){return i(new Error("AdSDK error: FlashDisplayController ready timeout"))},5e3);a.on({ready:function(){clearTimeout(s),r(a)},afterEndAd:function(e){e&&i(e)}})}):Promise.reject(new Error("Error creating object element"))})})}var a="adplayer",s="1_2",u="10.2";t.createSwfAdPlayer=o}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,r){var n,i,o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};n=[r,t,r(40),r(12),r(29)],i=function(e,t,r,n,i){"use strict";var a=function(e){function t(t,r){var i=this;e.call(this,r),this.adPlayer=t,this.isStarted=!1;var o=ya.mediaAd.inPage,a=n.sanitizeId(r.id);o[a].onStateChange=function(e){"stop"===e&&i.emit("afterEndAd"),"ready"===e&&i.emit("ready"),"play"===e&&i.emit("start")},o[a].onError=function(e){i.emit("afterEndAd",new Error("AdSDK Js Error: FlashDisplayController Error: "+e))}}return o(t,e),t.prototype.getAdDimensions=function(){var e,t;try{e=this.adPlayer.getMediaWidth(),t=this.adPlayer.getMediaHeight()}catch(r){return null}return{width:e,height:t}},t.prototype.pause=function(){"function"==typeof this.adPlayer.pause&&this.adPlayer.pause()},t.prototype.loadAndShowAd=function(){return this.play(),this.when("afterEndAd")},t.prototype.play=function(){this.isStarted?this.adPlayer.resume():(this.adPlayer.start(),this.isStarted=!0),this.emit("resume")},t.prototype.setMute=function(e,t){},t.prototype.getCurrentTime=function(){return 0},t.prototype.getDuration=function(){return 0},t.prototype.getPaused=function(){return!1},t.prototype.getMuted=function(){return!1},t.prototype.skip=function(){},t.prototype.getCurrentContentType=function(){return i.AdSourceType.flash},t}(r.DisplayController);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t){!function(){var e="encodeURIComponent",t="decodeURIComponent",r="createElement",n="location",i="getElementsByTagName",o="getElementById",a="length",s="script",u="indexOf",c="charAt",l="href",d="replace",p="split",f="substr",h="src",v="http",y="addEventListener",m="queryParams",g="optionalParams",E="ns_ad_",T=E+"pcd",A=E+"vs",w="defaultTrackingURL",S="handlerForVCECallback",k="loader",b="playerNode",C="playerId",_="partnerId",P="notInited",O=window,I=document;ns_=O.ns_||{},ns_.vce_vh=ns_.vce_vh||{},ns_.vce_vh.player_cache=ns_.vce_vh.player_cache||{},ns_.vce_vh.Loader=ns_.vce_vh.Loader||function(E){function w(e){return e?e[d](/\s+/g,""):e}function S(){try{return E.ns_.vce_v.R&&E.ns_.vce_v&&E.ns_}catch(e){return!1}}function k(){var e=w(ce);return e=e+"#cs_vp_sv="+J+"&ns_ad_pa="+B+"&ns_swfid="+Z}function b(e){var t=X[r](s);t.type="text/javascript",t[h]=e,t.async=!0;try{var n=X[o](H);if(!n)return;n[y]("loadedmetadata",function(e){n.duration&&(ee[T]=Math.floor(n.duration)),n.volume&&(ee[A]=0!==n.volume)},!1),n.parentNode.insertBefore(t,n.nextSibling)}catch(i){}}function C(e){var t={};return t=D(e),!t[T]&&ee[T]&&(t[T]=ee[T]),!t[A]&&ee[A]&&(t[A]=ee[A]),t}function _(e,t,r){t||(t=q),e&&t&&(r?Y.push({eventType:e,eventURL:t,optionalParams:r}):Y.push({eventType:e,eventURL:t,optionalParams:{}}),setTimeout(P,0))}function P(){var e=0,t=Y[a],r={},n="",i={};if(G>K){for(e=0;e<t;++e)O(Y[e]);return void(Y[a]=0)}if(!S())return G+=z,void setTimeout(P,z);if(0!==t){for(e=0;e<t;++e){try{r=R(Y[e].eventURL),n=r.url+"?"+N(r[m]),x(),i=C(Y[e][g]),i.bufferTime=G}catch(o){}try{E.ns_.vce_v.Tr(Z,Y[e].eventType,n,N(i))}catch(o){}}Y[a]=0}}function O(e){var t,r,n={},i="",o={},a="v_"+e.eventType,s=e[g],u={},c="";try{n=R(e.eventURL),i=n.url;for(t in n[m])o[t]=n[m][t];if(r=o.c2+""+o.c3,o.ns__t=(new Date).getTime(),r in le?(o.ns__p=le[r],$=le[r]):le[r]=o.ns__t,o.ns_ad_vevent=a,o.ns_ad_event="video",o.ns_ad_pa=B,$)for(var l=["c3","ca3","cb3","cc3","cd3","ce3","cf3","cg3","ch3","ci3","cj3","ck3","cl3"],d=0;d<l.length;d++){var p=l[d],f=p.replace(/3/gi,1);o.hasOwnProperty(p)&&3==o[f]&&(o[p]="_e0_"+o[p])}if(o.cs_vp_sv=J,o.ns_ad_wt=G,s){x(),u=C(s);for(var h in u)o[h]=u[h]}c=i+"?"+N(o),V(c)}catch(v){}}function I(e){var t,r=0;for(t in e)e[t]&&r++;return r}function N(e){var t="";for(var r in e)""!==t&&(t+="&"),t+=r+"="+ie(e[r]).replace(/-/g,"%2D").replace(/@/g,"%40").replace(/\*/g,"%2A");return t}function R(e){var r="",n={},i="",o=0,s=[];if(!e)return{url:null,queryParams:null};if(e=w(e),0!==e[u](v)&&(e=v+"://"+e),ae[c](4)!=e[c](4)&&(e=ae+("s"==ae[c](4)?e[f](7):e[f](9))),e[u]("?")!=-1){if(r=e[f](0,e[u]("?")),i=e[f](e[u]("?")+1),i[u]("&")!=-1){n={},i=i.replace(/&amp;/gi,"&").replace(/amp;/gi,"");var l=i[p]("&");for(o=0;o<l[a];++o)if(s=l[o][p]("="),2==s[a])try{n[E[t](s[0])]=E[t](s[1])}catch(d){n[s[0]]=s[1]}}else if(s=i[p]("="),2==s[a]){n={};try{n[E[t](s[0])]=E[t](s[1])}catch(d){n[s[0]]=s[1]}}}else r=e;return{url:r,queryParams:n}}function D(e){var r,n={};if(!e)return{};if(0===I(e))return{};for(r in e)try{n[E[t](r)]=E[t](e[r])}catch(i){r=E[t](r),n[r]=e[r]}return n}function x(){if(H){var e=X[o](H);!ee[T]&&e.duration&&(ee[T]=e.duration),!ee[A]&&e.volume&&(ee[A]=0!==e.volume)}}function V(e){var t=new Image;t.src=e}function M(){var e=X[o](H),t=!1;if(!e)return!1;for(var r=0,n=ne[a];r<n;++r)t=t||e==X[ne[r]],X[ne[r]]&&(t=t||e==X[ne[r]][i]("video")[0]),t=t||te;return t}function L(e,t){W&&W(e,t)}function U(){var e,t=Q+"evt",r=Q+"fs";H&&(e=X[o](H)),e&&(e[t]=L,e[r]=M)}function F(e){W=e}function j(e,t,r){B=e;var n=X[o](t);n&&(n[Z]=function(){return!0},H=t,b(k()),U(),r&&(q=r),n[y]("webkitbeginfullscreen",function(){te=!0},!1),n[y]("webkitendfullscreen",function(){te=!1},!1))}var B,H,W,q,X=E.document,Y=[],G=0,K=5e3,z=500,Q="cs_",J="1.1601.05h",Z=Q+Math.floor(1e13*Math.random()+1),$=0,ee={},te=!1,re="FullscreenElement",ne=["ms"+re,"webkit"+re,"mozFullScreenElement","fullscreenElement","o"+re,"khtml"+re],ie=E[e]?E[e]:escape,oe=ie(X[n]&&X[n][l]?X[n][l]:X.URL),ae="http"+("s"==oe[c](4)?"s://s":"://"),se=ae+"b.scorecardresearch.com",ue="/c2/vce4v/",ce=se+ue+"rs.js",le={};return{init:j,addCallback:F,trackEvent:_}},ns_.vce_vh.boot=ns_.vce_vh.boot||function(){function e(e){if(e.length<2)return!1;var t=e[0];if("string"==typeof t&&t.trim().length>0){for(var r=1,n=e.length;r<n;++r){var i=e[r];if(i.constructor!==Object||!i[b]&&!i[C])break}if(r===n)return!0}return!1}function t(){if(e(arguments)){for(var t=arguments,r=t[0].trim(),a=1,s=t.length;a<s;++a){var u,c,l,d=t[a],p=!!(d[C]&&d[C].trim().length>0);if(p?(u=d[C].trim(),l=O,c=I[o][u]):(c=d[b],l=c.ownerDocument.defaultView||c.ownerDocument.parentWindow,u=c.id),u.trim().length<=0)return;var f=new i(l);n[u]={},c&&(n[u][b]=c),n[u][k]=f,n[u][_]=r,n[u][w]=d[w]?d[w].trim():null,n[u][S]=d[S],n[u][P]=!0}for(var h in n)if(n.hasOwnProperty(h)){var v=n[h],y=v[_];if(v[P]){var m=v[S];m&&m instanceof Function&&v[k].addCallback(m),v[k].init(y,h,v[w]),v[P]=!1}}}}function r(e,t,r,i){var o="",a="";if(i)o="string"==typeof i?i.trim():i.id;else for(var s in n)if(n.hasOwnProperty(s)){o=s;break}o&&n[o]&&(a=t?t:n[o][w],n[o][k].trackEvent(e,a,r))}var n=ns_.vce_vh.player_cache,i=ns_.vce_vh.Loader;return{init:t,redirect:r}}(),O.cs_vce_=O.cs_vce_||{init:ns_.vce_vh.boot.init,trackEvent:ns_.vce_vh.boot.redirect}}()},function(e,t){!function(e){"use strict";function t(t,r){var n=e.createEvent("Event");n.initEvent(t,!0,!1),r.dispatchEvent(n)}function r(r){e[u.enabled]=e[i.enabled],e[u.element]=e[i.element],t(u.events.change,r.target)}function n(e){t(u.events.error,e.target)}var i,o,a=!0,s={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreen",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},u=s.w3;for(o in s)if(s[o].enabled in e){i=s[o];break}return!a||u.enabled in e||!i||(e.addEventListener(i.events.change,r,!1),e.addEventListener(i.events.error,n,!1),e[u.enabled]=e[i.enabled],e[u.element]=e[i.element],e[u.exit]=e[i.exit],Element.prototype[u.request]=function(){return this[i.request].apply(this,arguments)}),i}(document)},function(e,t,r){var n,i;n=[r,t,r(5),r(40),r(25),r(21),r(8),r(34)],i=function(e,t,r,n,i,o,a,s){"use strict";var u=[o["default"].INVALID_VAST_XML,o["default"].NO_IN_LINE_OR_WRAPPER_NODE,o["default"].NO_VAST_ID_TAG_URI,o["default"].VAST_LOAD_TIMEOUT,o["default"].WRAPPER_LOAD_TIMEOUT,o["default"].WRAPPER_MAX_COUNT_LIMIT,o["default"].INCORRECT_SKIPOFFSET_FORMAT,o["default"].ADFOX_VAST_LOAD_ERROR,o["default"].YA_VAST_LOAD_ERROR,o["default"].YANDEX_WRAPPER_ENDED_WITH_NOT_YANDEX_VAST,s["default"].VIDEO_TIMEOUT,s["default"].VPAID_START_TIMEOUT,s["default"].BUFFER_FULL_TIMEOUT,i["default"].NO_AD_TO_DISPLAY,i["default"].SKIP_DELAY_WITHOUT_SKIPOFFSET,r["default"].PARSE_ERROR,r["default"].TIMEOUT_ERROR,r["default"].PARAMS_ERROR],c=function(){function e(e){var t=this;this.displayController=e,this.adStarted=!1,this.paused=!0,e.on(["resume","start"],function(){t.paused=!1,t.adStarted&&a.fireCallback(t.onPlayStateChanged,!0)}).on({afterEndAdMedia:function(){a.fireCallback(t.onComplete)},afterStartAdMedia:function(){t.adStarted=!0,t.paused||a.fireCallback(t.onPlayStateChanged,!0)},clickThrough:function(){return a.fireCallback(t.onClickThrough)},pause:function(){t.paused=!0,a.fireCallback(t.onPlayStateChanged,!1)}}),this.addStartErrorHandler()}return e.prototype.play=function(e){void 0===e&&(e=!1),this.displayController.setMute(e),this.displayController.play()},e.prototype.resume=function(){this.play()},e.prototype.pause=function(){this.displayController.pause()},e.prototype.skip=function(e){this.displayController.skip(e)},e.prototype.getPaused=function(){return this.displayController.paused},e.prototype.getMuted=function(){return this.displayController.muted},e.prototype.getDuration=function(){return this.displayController.duration},e.prototype.getCurrentTime=function(){return this.displayController.currentTime},e.prototype.destroy=function(){},e.prototype.addStartErrorHandler=function(){var e=this;if(n.DisplayController.isJs(this.displayController))this.displayController.on("error",function(t){u.indexOf(t.id)>-1&&a.fireCallback(e.onStartError,t)});else{var t=!1;this.displayController.on({start:function(){return t=!0},afterEndAd:function(){t||a.fireCallback(e.onStartError)}})}},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=c}.apply(t,n),!(void 0!==i&&(e.exports=i))},,function(e,t,r){var n,i;n=[r,t],i=function(e,t){"use strict";var r;!function(e){e[e.ZERO=0]="ZERO",e[e.CHILD=1]="CHILD",e[e.AUTO=2]="AUTO"}(r||(r={}));var n=function(){function e(e,t,n,i){void 0===n&&(n=!1),void 0===i&&(i=0),this.container=e,this.childElement=t,this.isOpened=n,this.duration=i,this.setState(n?r.AUTO:r.ZERO),e.style.overflow="hidden",e.style.display="block",e.style.padding="0",this.setEnabledTransition(!0),e.appendChild(t)}return e.prototype.open=function(){return this.setOpen(!0)},e.prototype.close=function(){return this.setOpen(!1)},e.prototype.setEnabledTransition=function(e){var t=e&&this.duration>0?"height "+this.duration+"s ease-out":"none";this.container.style.transition=t,this.container.style.webkitTransition=t},e.prototype.setOpen=function(e){var t=this;if(this.isOpened!==e){this.isOpened=e;var n=1e3*this.duration;return new Promise(function(i){t.setState(r.CHILD),setTimeout(function(){t.setEnabledTransition(!e),setTimeout(function(){t.setState(e?r.AUTO:r.ZERO),setTimeout(i,e?0:n)},0)},e?n:0)})}return Promise.resolve()},e.prototype.setState=function(e){this.container.style.height=this.getHeightByState(e)},e.prototype.getChildHeight=function(){return this.childElement.offsetHeight},e.prototype.getHeightByState=function(e){switch(e){case r.ZERO:return"0px";case r.CHILD:return this.getChildHeight()+"px";case r.AUTO:return"auto"}},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n}.apply(t,n),!(void 0!==i&&(e.exports=i))}]);
//# sourceMappingURL=inpage.bundle.js.map
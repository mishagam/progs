/* LEGAL NOTICE: COPYRIGHT 2016 THE RUBICON PROJECT, INC.  ALL RIGHTS RESERVED. THIS CODE CONTAINS TRADE SECRETS OR OTHERWISE CONFIDENTIAL AND/OR PROPRIETARY INFORMATION THAT IS THE EXCLUSIVE INTELLECTUAL PROPERTY OF THE RUBICON PROJECT, INC.  AND IS PROTECTED BY COPYRIGHT, TRADE SECRET AND/OR OTHER STATE AND FEDERAL LAW.  SEE http://bit.ly/1g7QAOO FOR FULL TERMS AND CONDITIONS. */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,c){"use strict";"object"==typeof b&&"object"==typeof b.exports?b.exports=c():"function"==typeof define&&define.amd?define([],c):a.objectPath=c()}(this,function(){"use strict";function a(a){if(!a)return!0;if(l(a)&&0===a.length)return!0;if(!d(a)){for(var b in a)if(k.call(a,b))return!1;return!0}return!1}function b(a){return j.call(a)}function c(a){return"number"==typeof a||"[object Number]"===b(a)}function d(a){return"string"==typeof a||"[object String]"===b(a)}function e(a){return"object"==typeof a&&"[object Object]"===b(a)}function f(a){return"boolean"==typeof a||"[object Boolean]"===b(a)}function g(a){var b=parseInt(a);return b.toString()===a?b:a}function h(b,e,f,i){if(c(e)&&(e=[e]),a(e))return b;if(d(e))return h(b,e.split(".").map(g),f,i);var j=e[0];if(1===e.length){var k=b[j];return void 0!==k&&i||(b[j]=f),k}return void 0===b[j]&&(c(e[1])?b[j]=[]:b[j]={}),h(b[j],e.slice(1),f,i)}function i(b,e){if(c(e)&&(e=[e]),!a(b)){if(a(e))return b;if(d(e))return i(b,e.split("."));var f=g(e[0]),h=b[f];if(1===e.length)void 0!==h&&(l(b)?b.splice(f,1):delete b[f]);else if(void 0!==b[f])return i(b[f],e.slice(1));return b}}var j=Object.prototype.toString,k=Object.prototype.hasOwnProperty,l=Array.isArray||function(a){return"[object Array]"===j.call(a)},m=function(a){return Object.keys(m).reduce(function(b,c){return"function"==typeof m[c]&&(b[c]=m[c].bind(m,a)),b},{})};return m.has=function(b,f){if(a(b))return!1;if(c(f)?f=[f]:d(f)&&(f=f.split(".")),a(f)||0===f.length)return!1;for(var g=0;g<f.length;g++){var h=f[g];if(!e(b)&&!l(b)||!k.call(b,h))return!1;b=b[h]}return!0},m.ensureExists=function(a,b,c){return h(a,b,c,!0)},m.set=function(a,b,c,d){return h(a,b,c,d)},m.insert=function(a,b,c,d){var e=m.get(a,b);d=~~d,l(e)||(e=[],m.set(a,b,e)),e.splice(d,0,c)},m.empty=function(b,g){if(a(g))return b;if(!a(b)){var h,i;if(!(h=m.get(b,g)))return b;if(d(h))return m.set(b,g,"");if(f(h))return m.set(b,g,!1);if(c(h))return m.set(b,g,0);if(l(h))h.length=0;else{if(!e(h))return m.set(b,g,null);for(i in h)k.call(h,i)&&delete h[i]}}},m.push=function(a,b){var c=m.get(a,b);l(c)||(c=[],m.set(a,b,c)),c.push.apply(c,Array.prototype.slice.call(arguments,2))},m.coalesce=function(a,b,c){for(var d,e=0,f=b.length;f>e;e++)if(void 0!==(d=m.get(a,b[e])))return d;return c},m.get=function(b,e,f){if(c(e)&&(e=[e]),a(e))return b;if(a(b))return f;if(d(e))return m.get(b,e.split("."),f);var h=g(e[0]);return 1===e.length?void 0===b[h]?f:b[h]:m.get(b[h],e.slice(1),f)},m.del=function(a,b){return i(a,b)},m})},{}],2:[function(a,b,c){var d=a(20),e=a(15);b.exports.rubicontag=new e,void 0!==d&&("object"==typeof d.rubicontag&&"object"==typeof d.rubicontag.cmd&&"[object Array]"!==Object.prototype.toString.call(d.rubicontag.cmd)||(d.rubicontag&&(d.origrubicontag=d.rubicontag),d.rubicontag=b.exports.rubicontag))},{15:15,20:20}],3:[function(a,b,c){"use strict";var d=a(21),e=a(12),f=a(19),g=function(){var a,b=this,c=new d;b.requestTime=0;var g=null,h=null,i=null,j={url:"",type:"post",cache:!1,async:!0,dataType:"json",data:null,timeout:0,jsonpCallback:"",jsonpCallbackParam:""};b.ajax=function(d){if(j=f.mergeObjects(j,d,!0),"jsonp"===j.dataType.toLowerCase()){if(j.type="GET",!j.jsonpCallback){if(!j.jsonpCallbackParam)return f.error("cannot create a jsonp request with no callback or callbackParam specified:",j),b;var h="rp_callback_"+parseInt(1e8*Math.random(),10);j.data=j.data||{},j.data[j.jsonpCallbackParam]=h,j.jsonpCallback=h}c=new e(j.jsonpCallback)}var i=[];if("get"===j.type.toLowerCase()&&j.data)for(var k in j.data)j.data.hasOwnProperty(k)&&i.push(encodeURIComponent(k)+"="+encodeURIComponent(j.data[k]));return j.cache!==!0&&"get"===j.type.toLowerCase()&&i.push(1e18*Math.random()),i.length>0&&(j.url+=j.url.indexOf("?")>0?"&":"?",j.url+=i.join("&")),c.open(j.type,j.url,j.async),c.withCredentials=!0,j.timeout&&j.async&&(c.timeout=j.timeout),"post"===j.type.toLowerCase()&&c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onreadystatechange=g,a=(new Date).getTime(),c.send("get"!==j.type.toLowerCase()?j.data:null),b},g=function(){if(4===c.readyState)if(b.requestTime=(new Date).getTime()-a,200===c.status)for(;h.length;)h.shift()(c);else for(;i.length;)i.shift()(c)},h=[],i=[],b.done=function(a){return c&&4===c.readyState&&200===c.status?a(c):h.push(a),b},b.fail=function(a){return c&&4===c.readyState&&200!==c.status?a(c):i.push(a),b},b.always=function(a){return c&&4===c.readyState?a(c):(h.push(a),i.push(a)),b},b.abort=function(){return c.abort(),b}};b.exports=g},{12:12,19:19,21:21}],4:[function(a,b,c){"use strict";var d=a(7),e=a(19),f=a(3),g=function(){var a=this,b=!1,c=null,g=null,h=e.browserSupportsXHR(),i={nAccountId:null,oBatching:{bEnabled:!0,nBatchSize:100,nBatchWindow:3e3},sHost:"stats.aws.rubiconproject.com/stats/",sBucket:"fastlane"},j=[],k=null,l=function(b){var c=b[0];i.nAccountId=c.accountId;var d=c&&c.configuration&&c.configuration.analytics?c.configuration.analytics:{};return i.sBucket=d.bucket?d.bucket:i.sBucket,i.sHost=d.host?d.host:i.sHost,i.sHost.match(/^http(s)?:/)||(i.sHost=e.getProtocol()+i.sHost),d.batching&&(i.oBatching.bEnabled="boolean"==typeof d.batching.enabled?d.batching.enabled:i.oBatching.bEnabled,i.oBatching.nBatchSize=isNaN(d.batching.batchSize)?i.oBatching.nBatchSize:d.batching.batchSize,i.oBatching.nBatchWindow=isNaN(d.batching.batchWindow)?i.oBatching.nBatchWindow:d.batching.batchWindow),e.addUserDistractionEventListener(function(){a.flushEvents()}),a};a.publish=function(e,f){return b||(b=!0,l(d.getConfigs())),i.oBatching.bEnabled&&h?c(e,f):g([{sEventCode:e,sLine:f}]),a},c=function(b,c){j.push({sEventCode:b,sLine:c}),j.length>=i.oBatching.nBatchSize?a.flushEvents():null===k&&(k=setTimeout(function(){a.flushEvents()},i.oBatching.nBatchWindow))},g=function(a){var b=[],c=0;if(h){for(c=0;c<a.length;c++)b.push(encodeURIComponent(i.sBucket+"/"+a[c].sLine));var d=b.join("|"),e=new f;e.ajax({url:i.sHost,type:"POST",async:!0,data:d})}else for(c=0;c<a.length;c++){var g=i.sHost;g+=encodeURIComponent(i.sBucket)+"/";var j=encodeURIComponent(a[c].sLine);j=j.replace(/%2F/g,"/"),(new Image).src=g+j+"?rnd="+Math.random()}},a.flushEvents=function(){var a=j;j=[],null!==k&&(clearTimeout(k),k=null),a.length&&g(a)}};b.exports=new g},{19:19,3:3,7:7}],5:[function(a,b,c){"use strict";function d(a,b,c){var d=this,f=[],g=!1,h=function(){g=!1,a.blur(),window.focus()},i=function(){g=!0},j=function(){a.onmouseover=function(){i()},a.onmouseout=function(){h()},"undefined"!=typeof window.attachEvent?window.attachEvent("onblur",function(){d.firePixels()}):"undefined"!=typeof window.addEventListener&&window.addEventListener("blur",function(){d.firePixels()},!1)};d.init=function(){var a=!1;e.isArray(b)||(b=[b]),f=[];for(var c=0;c<b.length;c++)a=d.addTrackingUrl(b[c]),a||e.debug("Click tracker URL is not valid and could not be added",b[c]);j()},d.addTrackingUrl=function(a){return e.isUrl(a)?Boolean(f.push(a)):!1},d.replaceMacrosInUrl=function(a,b){var c={};if(!e.isArray(a)||!a.length)return[];c.siteId=b.siteId||"",c.zoneId=b.zoneId||"",c.sizeId=b.sizeId||"",c.userId=b.userId||"";for(var d=0;d<a.length;d++)"string"==typeof a[d]&&e.isUrl(a[d])&&(a[d]=e.replaceMacrosWithinUrl(a[d],b));return a},d.firePixels=function(){var a,b;if(g&&e.isArray(f)&&f.length){a=d.replaceMacrosInUrl(f,c),e.debug("Tracking click using the following pre-resolved, pre-cleaned URLs",f),e.warn("Tracking click using the following fully-resolved URLs",a);for(var h=0;h<a.length;h++)b=new window.Image,b.src=a[h];b=void 0}},d.init()}var e=a(19);b.exports=d},{19:19}],6:[function(a,b,c){"use strict";var d=(a(20),function(){var a=this;a.push=function(a){a()}});b.exports=new d},{20:20}],7:[function(a,b,c){"use strict";var d=function(){var b=this,c=[],d=[],e=a(1);b.getConfigs=function(){return c},b.hasConfig=function(){return c.length>0},b.addConfig=function(a){c.push(a);for(var b=0;b<d.length;b++)d[b]()},b.onLoad=function(a){"[object Function]"===Object.prototype.toString.call(a)&&d.push(a)},b.getConfigValue=function(a,b,d){return a>=c.length?d:e.get(c[a],b,d)}};b.exports=new d},{1:1}],8:[function(a,b,c){"use strict";var d=a(19),e=a(17),f=(a(9),function(){var a=this,b=new e,c={},f={},g=null;a.setFPI=function(a,b){d.isArray(b)||(b=[b]),c[a]=b},a.addFPI=function(a,b){c.hasOwnProperty(a)&&d.isArray(c[a])||(c[a]=[]),d.isArray(b)||(b=[b]);for(var e=0;e<b.length;e++){var f=b[e];d.inArray(f,c[a])||c[a].push(f)}},a.getFPI=function(){return g(c)},a.setFPV=function(a,b){d.isArray(b)||(b=[b]),f[a]=b},a.addFPV=function(a,b){f.hasOwnProperty(a)&&d.isArray(f[a])||(f[a]=[]),d.isArray(b)||(b=[b]);for(var c=0;c<b.length;c++){var e=b[c];d.inArray(e,f[a])||f[a].push(e)}},a.getFPV=function(){return g(f)},a.addKW=function(a){d.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++)b.add(a[c])},a.getKWs=function(){return b.toArray()},g=function(a){return d.convertKeyValuePairObjectToArray(a)}});b.exports=f},{17:17,19:19,9:9}],9:[function(a,b,c){"use strict";var d=a(7),e=a(4),f=a(19),g={},h={},i={LOG_DISABLE:1/0,LOG_ALWAYS:0,LOG_ERROR:1,LOG_WARN:2,LOG_INFO:3,LOG_DEBUG:4},j={BAD_EVENT:{sLabel:"badEvent",sAnalyticsPattern:"bad-event/{sEventType}",sLogPattern:"Unknown event triggered: {sEventType}",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_ERROR},HL_INIT:{sLabel:"init",sAnalyticsPattern:"init/{nAccountId}/{sVersion}/{sIntegration}",sLogPattern:"initialized account: {nAccountId}",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},HL_RUN_CALLED:{sLabel:"runCalled",sAnalyticsPattern:"run-called/{nAccountId}",sLogPattern:"rubicontag.run() function called",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},HL_BAD_TIMEOUT:{sLabel:"badTimeout",sAnalyticsPattern:"badtimeout/{nTimeout}",sLogPattern:"Invalid timeout value: {nTimeout}. Must be at least 300",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_ERROR},HL_BAD_DEFINE_SLOT:{sLabel:"badDefineSlot",sAnalyticsPattern:"",sLogPattern:"Too few arguments passed to defineSlot. Name: {sSlotName}; sizes list: {aDimensions}; element ID: {sElementId}.",nAnalyticsLevel:i.LOG_WARN,nLogLevel:i.LOG_WARN},HL_BAD_DEFINE_SLOT_FROM_OBJ:{sLabel:"badDefineSlotFromObj",sAnalyticsPattern:"",sLogPattern:"Incorrect object params passed to defineSlot. SiteId: {nSiteId}; zoneId: {nZoneId}; sizes list: {aSizes}; unique id: {nId}.",nAnalyticsLevel:i.LOG_WARN,nLogLevel:i.LOG_WARN},SLOT_SIZE_NOT_MAPPED:{sLabel:"slotSizeNotMapped",sAnalyticsPattern:"slot-size-not-mapped/{sDimensions}/{sSlotName}",sLogPattern:"Could not map dimension: {sDimensions} for slot: {sSlotName}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},SLOT_GET_TARGETING:{sLabel:"getTargeting",sAnalyticsPattern:"slot-targeting-get/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{sTier}/{sValue}/{sIntegration}/{sContext}/{nLatency}",sLogPattern:"Getting targeting for slot: {sSlotName}. Key: {sKey} Value: {sValue}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_INFO},SLOT_MAPPING_PERFORMANCE:{sLabel:"slotMappingPerformance",sAnalyticsPattern:"slot-mapping-performance/{nTotalTime}/{nAverageTime}",sLogPattern:"Slot mapping took {nTotalTime}ms to execute.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_INFO},HL_CREATIVE_RENDERED:{sLabel:"creativeRenderCalled",sAnalyticsPattern:"render/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{sTier}/{nCpm}/{sAuctionId}/{sIntegration}",sLogPattern:"Creative rendering called for size: {nSizeId}, element: {sElementId}, account: {nAccountId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_DEBUG,oListenerParams:{accountId:"nAccountId",siteId:"nSiteId",zoneId:"nZoneId",sizeId:"nSizeId",slotId:"sSlotName",elementId:"sElementId",creativeId:"nCreativeId",adId:"nAdId",advertiserId:"nAdvertiserId",networkId:"nNetworkId"}},HL_CREATIVE_RENDER_SLOT_NOT_FOUND:{sLabel:"creativeRenderSlotNotFound",sAnalyticsPattern:"render-no-slot/{nSizeId}/{sElementId}/{nAccountId}",sLogPattern:"Creative rendering could not find slot for size: {nSizeId}, element: {sElementId}, account: {nAccountId}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_ERROR},HL_CREATIVE_RENDER_CREATIVE_NOT_FOUND:{sLabel:"creativeRenderCreativeNotFound",sAnalyticsPattern:"render-no-creative/{nSizeId}/{sElementId}/{nAccountId}",sLogPattern:"Creative rendering could not find creative for size: {nSizeId}, element: {sElementId}, account: {nAccountId}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_ERROR},FL_RUN:{sLabel:"runLatency",sAnalyticsPattern:"run/{nLatency}/",sLogPattern:"Execution from init to run took {nLatency} ms",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_DEBUG},FL_RESPONSE_SUCCESS:{sLabel:"responseSuccess",sAnalyticsPattern:"response/success/{nStatusCode}/{sRequestType}/{nTimeout}/{nRequestTime}/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}",sLogPattern:"Auction request finished successfully before timeout {nTimeout} in {nRequestTime} ms, elementId: {sElementId}, sizeId: {nSizeId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_DEBUG},FL_RESPONSE_TIMEOUT:{sLabel:"responseTimeout",sAnalyticsPattern:"response/timeout/{nStatusCode}/{sRequestType}/{nTimeout}/{nRequestTime}/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}",sLogPattern:"Auction request finished AFTER timeout {nTimeout} in {nRequestTime} ms, elementId: {sElementId}, sizeId: {nSizeId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_DEBUG},FL_RESPONSE_FAILURE:{sLabel:"responseFailure",sAnalyticsPattern:"response/failure/{nStatusCode}/{sRequestType}/{nTimeout}/{nRequestTime}/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}",sLogPattern:"Auction request failed: {sStatus}, with status code {nStatusCode}, elementId: {sElementId}, sizeId: {nSizeId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_WARN},FL_RESPONSE_PARSE_ERROR:{sLabel:"responseParseError",sAnalyticsPattern:"parse-error/{sSlotName}/size/{nSizeId}/response/{sRequestData}",sLogPattern:"Error parsing response data: {sRequestData}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},FL_BAD_RESPONSE_STATUS:{sLabel:"badResponseStatus",sAnalyticsPattern:"status/{sStatus}",sLogPattern:"Invalid auction ad: {sStatus} / {sReason}",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},FL_AUCTION_CPM_OVERRIDE:{sLabel:"auctionCpmOverride",sAnalyticsPattern:"cpm-override/{nOriginalCpm}/{nOverrideCpm}",sLogPattern:"Overriding Auction CPM. Original: {nOriginalCpm}. Override: {nOverrideCpm}",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_ERROR},FL_NO_ADS:{sLabel:"noAds",sAnalyticsPattern:"no-ads/{sSlotName}",sLogPattern:"No ads found for slot: {sSlotName}",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},FL_RESPONSE_UNFIT:{sLabel:"responseUnfit",sAnalyticsPattern:"response-unfit/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{sSlotName}/{bResponseTimedOut}/{sIntegration}",sLogPattern:"Response for slot: {sSlotName} using size: {nSizeId}. Did not have any ads associated with it.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_INFO},FL_TIER_MAPPED:{sLabel:"tierMapped",sAnalyticsPattern:"tier-mapped/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{sTier}/{nCpm}/{bResponseTimedOut}/{sIntegration}",sLogPattern:"Tier mapped. Price: {nCpm}. Tier: {sTier}. Slot: {sElementId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_INFO},FL_TIER_NOT_MAPPED:{sLabel:"tierNotMapped",sAnalyticsPattern:"tier-not-mapped/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{nPrice}/{bResponseTimedOut}/{sIntegration}",sLogPattern:'Could not map "{nPrice}" to any tier for slot "{sSlotName}".',nAnalyticsLevel:i.LOG_WARN,nLogLevel:i.LOG_DEBUG},FL_TIER_SPECIFICITY_PRICE:{sLabel:"tierSpecificityPrice",sAnalyticsPattern:"",sLogPattern:"Price matched for tier: {sTierMapping}. Bounds: {nFloor} <= {nAuctionCpm} <= {nCeiling}. Points: {nPoints}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_INFO},FL_EXCEEDED_REQUESTS_PER_SLOT:{sLabel:"exceededReqPerSlotLimit",sAnalyticsPattern:"exceed-slot-requests/{sSlotName}/limit/{nLimit}",sLogPattern:"Exceeded size limit per slot for slot: {sSlotName}. Limit: {nLimit}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_WARN},FL_EXCEEDED_REQUESTS_PER_PAGE:{sLabel:"exceededReqPerPageLimit",sAnalyticsPattern:"exceed-page-requests/{nLimit}",sLogPattern:"Exceeded requests-per-page limit: {nLimit}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_WARN},FL_USING_JSONP_REQUEST:{sLabel:"usingJsonpRequest",sAnalyticsPattern:"using-jsonp-request/{nAccountId}",sLogPattern:"Using JSONP rather than xhr for auction requests.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_INFO},FL_CREATIVE_CACHED:{sLabel:"creativeCached",sAnalyticsPattern:"creative-cached/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}",sLogPattern:"Found creative for slot: {sSlotName}, size: {nSizeId}. Skipping auction.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_WARN},FL_SLOT_AUCTION:{sLabel:"slotAuction",sAnalyticsPattern:"slot-auction/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{sIntegration}",sLogPattern:"Running auction for slot: {sSlotName}, size: {nSizeId}, account: {nAccountId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_DEBUG}},k=!1,l=function(){k||(k=!0,g.nAnalyticsLevel=d.getConfigValue(0,"configuration.analyticsLevel"),g.nAccountId=d.getConfigValue(0,"accountId"),g.nLogLevel=parseInt(f.getUrlCookieParam("rp_loglevel"),10),isNaN(g.nLogLevel)&&(g.nLogLevel=d.getConfigValue(0,"configuration.logLevel",0)))},m=function(a,b){var c=this;l();var d,k=!1;c.publish=function(){if(!k){k=!0,j.hasOwnProperty(a)||(b={sEventType:a},a="BAD_EVENT");var c=j[a];f.getIntegration()&&(b.sIntegration=f.getIntegration()),c.nAnalyticsLevel<=g.nAnalyticsLevel&&(d=f.formatString(c.sAnalyticsPattern,b,!0),d="account/"+g.nAccountId+"/"+d,e.publish(c.sLabel,d)),c.nLogLevel<=g.nLogLevel&&(d=f.formatString(c.sLogPattern,b),c.nLogLevel===i.LOG_ERROR?f.error(d):c.nLogLevel===i.LOG_WARN?f.warn(d):c.nLogLevel===i.LOG_INFO?f.info(d):c.nLogLevel===i.LOG_DEBUG&&f.debug(d))}};var m=function(){var c=h[a];if(c){var d=j[a].oListenerParams,e={};for(var g in d)d.hasOwnProperty(g)&&(e[g]=b[d[g]]);for(var i=0;i<c.length;i++)try{c[i](e)}catch(k){f.error(a,"event listener failed:",c[i],k)}}};m()};m.factory=function(a,b,c){var d=new m(a,b);return(arguments.length<=2||c)&&d.publish(),d},m.addEventListener=function(a,b){var c=d.getConfigValue(0,"configuration.exposedEvents",[]);return f.inArray(a,c)?j[a]&&j[a].oListenerParams?f.isFunction(b)?(h[a]||(h[a]=[]),h[a].push(b),!0):(f.error("Event listener is not a function:",b),!1):(f.error("Unconfigured event:",a),!1):(f.error("Unrecognized event:",a),!1)},b.exports=m},{19:19,4:4,7:7}],10:[function(a,b,c){"use strict";var d=a(3),e=a(14),f=a(17),g=a(9),h=a(19),i=function(){var b=this,c=null,i=0,j=0,k=null,l=a(7),m=a(19),n=a(11),o=a(13),p=[],q=[],r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=0,z={nPrice:10,nDealWildcard:25,nDealExact:50,nPrimaryAccount:100},A=!m.browserSupportsXHR();b.init=function(a){if(j=a,p=l.getConfigValue(j,"tiers",p),k=l.getConfigValue(j,"accountId"),i=x(p),q=l.getConfigValue(j,"fastlane.optimizedHosts",["optimized-by.rubiconproject.com/a/api/fastlane.json"]),A)for(var b=0;b<q.length;b++)q[b]+="p"};var B=function(a,b,c,d){var e;void 0===d&&(d=!1);try{e="object"==typeof c?c:JSON.parse(c)}catch(f){return g.factory("FL_RESPONSE_PARSE_ERROR",{sSlotName:a.getSlotName(),nSizeId:b,sRequestData:c}),void E(d,a,k,b)}if(!e||!e.ads||e.ads.length<1||!e.ads[0])return g.factory("FL_NO_ADS",{sSlotName:a.getSlotName(),nSizeId:b}),void E(d,a,k,b);if("ok"!==e.ads[0].status)return g.factory("FL_BAD_RESPONSE_STATUS",{sStatus:e.ads[0].status,sReason:e.ads[0].reason}),void E(d,a,k,b);var j=parseFloat(m.getUrlCookieParam("rp_cpm_override"));j&&(g.factory("FL_AUCTION_CPM_OVERRIDE",{nOriginalCpm:e.ads[0].cpm,nOverrideCpm:j}),e.ads[0].cpm=j);var l=e.ads[0].cpm;if(i>l)return h.warn("CPM is below the lowest floor for slot: "+a.getSlotName()+" using size: "+b+"."),void E(d,a,k,b);var n=r(e,p),o=n.nPoints?n.oTier.mapping:!1;o!==!1?(a.storeCreative(e.account_id,e.size_id,e.ads[0],e.ads[0].impression_id,o),g.factory("FL_TIER_MAPPED",{nAccountId:k,sElementId:a.getElementId(),nSiteId:a.getSiteId(k),nZoneId:a.getZoneId(k),bResponseTimedOut:d?1:0,nSizeId:b,sTier:o,nCpm:l})):g.factory("FL_TIER_NOT_MAPPED",{sSlotName:a.getSlotName(),sElementId:a.getElementId(),nAccountId:k,nSiteId:a.getSiteId(k),nZoneId:a.getZoneId(k),bResponseTimedOut:d?1:0,nSizeId:b,nPrice:l})};r=function(a,b){o.mark("fastlane.mapResponseToTier.start");for(var c,d={nPoints:0,oTier:{}},e=0;e<b.length;e++)c=s(a,b[e]),c>d.nPoints&&(d.nPoints=c,d.oTier=b[e]);return o.mark("fastlane.mapResponseToTier.complete"),o.measure("tierMapping","fastlane.mapResponseToTier.start","fastlane.mapResponseToTier.complete"),d},s=function(a,b){var c=0,d=Math.round(100*a.ads[0].cpm)/100;if(b.hasOwnProperty("floor")&&b.hasOwnProperty("ceiling")){if(!(d>=b.floor&&d<=b.ceiling))return 0;c+=z.nPrice,h.info("Price matched for tier: "+b.mapping+". Bounds: "+b.floor+" <= "+d+" <= "+b.ceiling+". Points: "+c+".")}if(b.hasDeals){var e=a.ads[0].deal?parseInt(a.ads[0].deal,10):!1;if(b.hasDeals!==!0||!e)return h.info("Deal did not match for tier: "+b.mapping+". Deal ID: "+e+"."),0;c+=z.nDealWildcard,h.info("Deal wildcard matched for tier: "+b.mapping+". Deal ID: "+e+". Points: "+c+".")}else if(b.deals){var f=a.ads[0].deal?parseInt(a.ads[0].deal,10):!1;if(!m.isArray(b.deals)||!m.inArray(f,b.deals))return h.info("Deal did not match for tier: "+b.mapping+". Deal ID: "+f+"."),0;c+=z.nDealExact,h.info("Deal matched for tier: "+b.mapping+". Deal ID: "+f+". Points: "+c+".")}if(b.primaryAccountIds){var g=l.getConfigValue(0,"accountId");if(!m.inArray(g,b.primaryAccountIds))return m.debug("Primary accountId did not match for tier:",b.mapping,", Primary account: ",g,", configured: ",b.primaryAccountIds),0;c+=z.nPrimaryAccount,m.debug("Primary accountId match for tier:",b.mapping,", Primary account: ",g,", configured: ",b.primaryAccountIds,", points:",c)}return c},b.run=function(a,c){if("function"!=typeof a)throw new Error("first argument to 'run' must be a callback function");if(!w())return void a([]);m.setTimestamp("nRunTimestamp"),o.mark("fastlane.run"),g.factory("FL_RUN",{nLatency:Number(new Date)-m.getDataStoreValue("nInitTimestamp")});var h="";m.getIntegration()||(h="plain",l.getConfigValue(0,"configuration.exposeRawResponses",!1)&&(h="custom"),m.setIntegration(h));var i=new e(15e3),j=new f,p={bTimedout:!1,nTimeout:c.nTimeout||2e3};p.oTimeout=setTimeout(function(){m.info("fastlane:"," timeout after "+p.nTimeout+" ms. "+i.getSuccessfulRequests().length+"/"+i.totalRequests()+" requests finished successfully before timeout"),p.bTimedout=!0,a(j.toArray())},p.nTimeout);var q={url:"",type:"GET",cache:!0,async:!0,dataType:"",data:null};A&&(q.dataType="jsonp",q.jsonpCallbackParam="cb",g.factory("FL_USING_JSONP_REQUEST",{nAccountId:k}));for(var r=l.getConfigValue(0,"configuration.maximumRequestsPerPage",100),s=l.getConfigValue(0,"configuration.maximumSizesPerSlot",10),x=l.getConfigValue(0,"configuration.cacheResponses",!1),y=m.getNow(),z=D(c.aSlots),B={},C=0;C<z.length;C++){var E=z[C].slot,F=z[C].size;if(B[E.getElementId()]=B[E.getElementId()]||0,i.totalRequests()>=r){g.factory("FL_EXCEEDED_REQUESTS_PER_PAGE",{nLimit:r});break}if(!(B[E.getElementId()]>s))if(B[E.getElementId()]!==s){var G=E.getCreative(k,F);if(null!==G)if(G.nExpires<=y)n.purgeCreative(G.sImpressionId);else if(x){if(x){g.factory("FL_CREATIVE_CACHED",{sSlotName:E.getSlotName(),nAccountId:k,nSiteId:E.getSiteId(k),nZoneId:E.getZoneId(k),nSizeId:F});continue}}else E.purgeCreative(k,F);g.factory("FL_SLOT_AUCTION",{sSlotName:E.getSlotName(),nAccountId:k,nSiteId:E.getSiteId(k),nZoneId:E.getZoneId(k),nSizeId:F}),q.url=v(E,F),o.mark("fastlane.run.auctionRequest"),o.measure("buildAuctionRequest","fastlane.run","fastlane.run.auctionRequest");var H=new d;i.addRequest(H.ajax(q).done(t(E,F,j,H,p)).fail(u(E,F,H,p))),B[E.getElementId()]++}else g.factory("FL_EXCEEDED_REQUESTS_PER_SLOT",{sSlotName:E.getSlotName(),nLimit:s}),B[E.getElementId()]++}i.allRequestsAdded(),m.info("fastlane:","sent ",i.totalRequests()," auction request(s)"),i.finished(function(){p.bTimedout||(m.info("fastlane:",i.getSuccessfulRequests().length+"/"+i.totalRequests()+" requests finished successfully before timeout ("+p.nTimeout+" ms)"),clearTimeout(p.oTimeout),a(j.toArray()))}),setTimeout(b.purgeExpiredCreatives,3e5)},b.purgeExpiredCreatives=function(){for(var a=m.getNow(),b=n.getCreatives(),c=0;c<b.length;c++){var d=b[c];d&&d.nExpires<=a&&n.purgeCreative(d.sImpressionId)}},t=function(a,b,c,d,e){return function(f){o.mark("fastlane.run.auctionResponse"),o.measure("auctionRequest","fastlane.run.auctionRequest","fastlane.run.auctionResponse"),e.bTimedout?g.factory("FL_RESPONSE_TIMEOUT",{nAccountId:k,sElementId:a.getElementId(),nSiteId:a.getSiteId(k),nZoneId:a.getZoneId(k),nSizeId:b,nTimeout:e.nTimeout,nRequestTime:d.requestTime,sRequestType:f.isJsonp?"jsonp":"xhr",nStatusCode:f.status}):g.factory("FL_RESPONSE_SUCCESS",{nAccountId:k,sElementId:a.getElementId(),nSiteId:a.getSiteId(k),nZoneId:a.getZoneId(k),nSizeId:b,nTimeout:e.nTimeout,nRequestTime:d.requestTime,sRequestType:f.isJsonp?"jsonp":"xhr",nStatusCode:f.status}),c.add(a.getPublicVersion()),B(a,b,f.responseText,e.bTimedout),o.mark("fastlane.run.responseParsed"),o.measure("responseParsed","fastlane.run.auctionResponse","fastlane.run.responseParsed")}},u=function(a,b,c,d){return function(e){E(d.bTimedout,a,k,b),g.factory("FL_RESPONSE_FAILURE",{nAccountId:k,sElementId:a.getElementId(),nSiteId:a.getSiteId(k),nZoneId:a.getZoneId(k),nSizeId:b,nTimeout:d.nTimeout,nRequestTime:c.requestTime,sRequestType:e.isJsonp?"jsonp":"xhr",nStatusCode:e.status,sStatus:e.statusText||""})}};var C=function(){return y++,y>=q.length&&(y=0),q[y]};v=function(a,b){var c=m.getProtocol(),d=C(),e=i,f=Math.random(),g=a.getKWs(),h=a.getFPV(),j=a.getFPI(),l={account_id:k,site_id:a.getSiteId(k),zone_id:a.getZoneId(k),size_id:b,p_pos:a.getPosition(),rp_floor:Math.max(e,.01),rf:m.getFullPageUrl(),p_screen_res:m.getScreenResolution()};if(g.push("rp.fastlane"),l.kw=g.join(","),m.getIntegration()&&(l.tk_flint=m.getIntegration()),h.length){var o=m.generateComplexQueryStringObject(h,"tg_v");l=m.mergeObjects(l,o,!0)}if(j.length){var p=m.generateComplexQueryStringObject(j,"tg_i");l=m.mergeObjects(l,p,!0)}var q=n.getUserKey();return q&&(l.tk_user_key=q),l.rand=f,[c,d,"?",m.convertObjectToQueryString(l)].join("")},w=function(){if("boolean"==typeof c)return c;var a=parseInt(l.getConfigValue(j,"fastlane.pageSampling",1),10);return c=a>Math.random()},x=function(a){for(var b=[],c=0;c<a.length;c++)b.push(parseFloat(a[c].floor));return b.sort(function(a,b){return a-b}),b.length?b[0]:0};var D=function(a){for(var b,c=[],d=0;d<a.length;d++)a[d].getSiteId(k)&&a[d].getZoneId(k)&&(b=(a[d].getRubiconSizeIds(k)||[]).slice(),c.push({slot:a[d],sizes:b}));var e=[];for(d=0;c.length;){var f=c[d].slot;b=c[d].sizes,f&&b.length&&e.push({slot:f,size:b.shift()}),b.length||c.splice(d--,1),++d>=c.length&&(d=0)}return e},E=function(a,b,c,d){g.factory("FL_RESPONSE_UNFIT",{bResponseTimedOut:a?1:0,nSiteId:b.getSiteId(c),nZoneId:b.getZoneId(c),sSlotName:b.getSlotName(),sElementId:b.getElementId(),nAccountId:c,nSizeId:d})}};b.exports=i},{11:11,13:13,14:14,17:17,19:19,3:3,7:7,9:9}],11:[function(a,b,c){"use strict";var d=a(20),e=a(18),f=a(10),g=a(7),h=a(8),i=a(19),j=a(9),k=(a(4),a(16)),l=a(5),m=function(){var b,c=this,m=a(13),n=null,o=null,p=null,q=null,r={},s={},t=new h,u=!1,v=[],w=[],x=1e3,y=300,z='<!doctype html>\n\n<html lang="en"><head><meta charset="utf-8"><title></title><script type="text/javascript">var inDapIF = true;</script></head><body style="margin: 0px; padding: 0px;"><script type="text/javascript">',A="</script></body></html>";c.loadConfiguration=function(a){u||g.addConfig(a)},c.init=function(){if(!u){u=!0,i.setTimestamp("nInitTimestamp"),m.mark("highlander.init"),c.writeDnsPrefetchElements();var a=g.getConfigValue(0,"sizeMap",!1);a&&(i.oSizeMap=a),v=n(),d.origrubicontag&&d.origrubicontag.cmd&&i.isArray(d.origrubicontag.cmd)&&c.processCommands(d.origrubicontag.cmd),j.factory("HL_INIT",{nAccountId:g.getConfigValue(0,"accountId"),sVersion:g.getConfigValue(0,"configuration.version")})}},c.writeDnsPrefetchElements=function(){var a=d.document.createElement("link");a.rel="dns-prefetch",a.href="//optimized-by.rubiconproject.com/";var b=d.document.getElementsByTagName("script")[0];b&&b.parentNode.appendChild(a)},n=function(){for(var a=[],b=g.getConfigs(),c=0;c<b.length;c++)for(var d=g.getConfigValue(c,"services",[]),e=0;e<d.length;e++){var h=d[e];if("fastlane"===h){var i=new f;i.init(c),a.push(i)}}return a},c.run=function(a,b){j.factory("HL_RUN_CALLED",{nAccountId:g.getConfigValue(0,"accountId")}),"function"!=typeof a&&(i.error("Missing or invalid callback provided to rubicontag.run(). Overiding with empty function."),a=function(){});var c=o(b);k.run(v,a,c)},o=function(a){if(a=a||{},a&&i.isInteger(a)){var b=a;a={timeout:b}}var d=!!a.slots,e={nTimeout:a.timeout?a.timeout:g.getConfigValue(0,"configuration.timeout",x),aSlots:a.slots?a.slots:!1,bSlotsSpecified:d};e.nTimeout<y&&(j.factory("HL_BAD_TIMEOUT",{nTimeout:e.nTimeout}),e.nTimeout=y);var f=[];if(e.bSlotsSpecified){if(i.isArray(e.aSlots))for(var h=0;h<e.aSlots.length;h++)if(e.aSlots[h]&&"function"==typeof e.aSlots[h].getElementId){var k=c.getSlot(e.aSlots[h].getElementId());k&&f.push(k)}}else f=c.getAllSlots();return e.aSlots=f,e},c.processCommands=function(a){for(var b=0;b<a.length;b++)a[b]()},q=function(a){var b=a.oVisitor||{},c=a.aKeywords||[],d=a.oInventory||{},f=new e(a.sName||null,a.aSizes||[],a.sId||null);a.sPosition&&f.setPosition(a.sPosition);for(var g in b)b.hasOwnProperty(g)&&f.addFPV(g,b[g]);for(var h in d)d.hasOwnProperty(h)&&f.addFPI(h,d[h]);return f.addKW(c),f},c.defineSlot=function(a,b,d){if(1===arguments.length&&i.isObject(a))return p(a);if(arguments.length<3)return j.factory("HL_BAD_DEFINE_SLOT",{sSlotName:a,aDimensions:b,sElementId:d}),q({sId:d,sName:a,aSizes:b});var e=c.getSlot(d);return e?e:(r[d]=q({sId:d,sName:a,aSizes:b}),r[d])},p=function(a){if(!(i.isObject(a)&&i.isArray(a.sizes)&&a.siteId&&a.zoneId&&a.id))return j.factory("HL_BAD_DEFINE_SLOT_FROM_OBJ",{aSizes:a.sizes,nSiteId:a.siteId,nZoneId:a.zoneId,nId:a.id}),q({sId:a.id,sName:a.id});var b=c.getSlot(a.id);if(b)return b;a.url&&i.setUrl(a.url),b=q({sId:a.id,oVisitor:a.visitor,sPosition:a.position,aKeywords:a.keywords,oInventory:a.inventory,sName:a.name||a.id,aSizes:i.normalizeDimensions(a.sizes)});var d=g.getConfigValue(0,"accountId"),e={siteId:a.siteId,zoneId:a.zoneId};return b.loadSlotConfiguration(d,e),r[a.id]=b,b},c.getAllSlots=function(){var a=[];for(var b in r)r.hasOwnProperty(b)&&a.push(r[b]);return a},c.getSlot=function(a){for(var b in r)if(r.hasOwnProperty(b)&&b===a)return r[b];return!1},c.setTargetingForGPTSlot=function(a){if(!(a&&i.isObject(a)&&i.isFunction(a.getSlotElementId)&&i.isFunction(a.setTargeting)))return!1;var b=c.getSlot(a.getSlotElementId());return b&&i.isObject(b)&&i.isFunction(b.getAdServerTargeting)?b.setTargetingForGPTSlot(a):!1},c.renderCreative=function(a){var d,e,f;if(m.mark("highlander.renderCreative"),arguments.length>1&&(a={parentNode:arguments[0],elementId:arguments[1],sizeId:null,accountId:arguments[3]||0},arguments[2]&&(f=arguments[2].match&&arguments[2].match(/^([0-9]+)_.+$/),i.isArray(f)&&2===f.length?a.sizeId=f[1]:a.sizeId=arguments[2])),a.sizeId||a.accountId){if(a.accountId||(a.accountId=g.getConfigValue(0,"accountId")),e=c.getSlot(a.elementId),e===!1)return void j.factory("HL_CREATIVE_RENDER_SLOT_NOT_FOUND",{sElementId:a.elementId,nSizeId:a.sizeId,nAccountId:a.accountId});d=e.getCreative(a.accountId,a.sizeId),a.auctionId=d&&d.sImpressionId}else a.auctionId||(a.auctionId=a.elementId),d=c.getCreative(a.auctionId),d&&(a.sizeId=d.nSizeId,a.accountId=d.nAccountId,e=d.oSlot);if(null===d)return void j.factory("HL_CREATIVE_RENDER_CREATIVE_NOT_FOUND",{
sElementId:a.elementId,nSizeId:a.sizeId,nAccountId:a.accountId});c.purgeCreative(a.auctionId),j.factory("HL_CREATIVE_RENDERED",{nAccountId:a.accountId,sElementId:a.elementId,nSiteId:e.getSiteId(a.accountId),nZoneId:e.getZoneId(a.accountId),nSizeId:a.sizeId,sTier:d.sTier,nCpm:d.oResponse.cpm,sAuctionId:a.auctionId,sSlotName:e.getSlotName(),nCreativeId:d.oResponse.creative_id,nAdId:d.oResponse.ad_id,nAdvertiserId:d.oResponse.advertiser,nNetworkId:d.oResponse.network});var h=i.getProtocol()+"stats.aws.rubiconproject.com/stats/fastlaneimps/"+d.sImpressionId+"/a"+d.nAccountId+"/s"+d.oSlot.getSiteId(d.nAccountId)+"/z"+d.oSlot.getZoneId(d.nAccountId)+"/d/"+Math.round(1e15*Math.random());(new Image).src=h,c.writeContentToFriendlyIFrame({oContainer:a.parentNode,sContent:d.oResponse.script,sId:["rpfl",a.accountId,e.getSlotName().replace(/[^a-zA-Z0-9]/g,"_"),a.sizeId].join("_"),nSizeId:a.sizeId,sImpressionId:a.auctionId,aClickTrackingUrls:a.clickTrackingUrls,oClickTrackingMacroData:{siteId:e.getSiteId(a.accountId),zoneId:e.getZoneId(a.accountId),sizeId:a.sizeId,userId:b}})},c.writeContentToFriendlyIFrame=function(a){try{a.sId=a.sId?a.sId:"rp_ct_"+Math.round(1e15*Math.random());var b=d.document.createElement("iframe");b.setAttribute("scrolling","no"),b.src="about:blank";var c=i.convertSizeIdToDimensions(a.nSizeId);if(b.style.cssText="width: "+c[0]+"px; height: "+c[1]+"px; border: 0; margin: 0; padding: 0; overflow: hidden;",b.id=a.sId,b.className="rp-creative-iframe-wrapper",i.isArray(a.aClickTrackingUrls)&&a.aClickTrackingUrls.length){new l(b,a.aClickTrackingUrls,a.oClickTrackingMacroData)}b.setAttribute("data-rp-impression-id",a.sImpressionId),a.oContainer.appendChild(b);var e=b.contentWindow.document;e.open(),e.write(z+a.sContent+A),e.close(),m.mark("highlander.writeContentToFriendlyIFrame.complete"),m.measure("renderCreative","highlander.renderCreative","highlander.writeContentToFriendlyIFrame.complete")}catch(f){i.error(f)}},c.storeCreative=function(a,b,c,d,e,f){var h=i.getNow()+g.getConfigValue(0,"configuration.creativeTTL",18e4);s[a]={oResponse:b,nExpires:h,nAccountId:c,nSizeId:d,sTier:e,oSlot:f,sImpressionId:a}},c.getCreative=function(a){return s.hasOwnProperty(a)?s[a]:null},c.getCreatives=function(){var a=[];for(var b in s)s.hasOwnProperty(b)&&a.push(s[b]);return a},c.purgeCreative=function(a){var b=null;return s.hasOwnProperty(a)&&(b=s[a],b.oSlot.purgeCreative(b.nAccountId,b.nSizeId),delete s[a]),b},c.setUserKey=function(a){return b=a,c},c.getUserKey=function(){return b},c.setFPI=function(a,b){return t.setFPI(a,b),c},c.addFPI=function(a,b){return t.addFPI(a,b),c},c.getFPI=function(){return t.getFPI()},c.setFPV=function(a,b){return t.setFPV(a,b),c},c.addFPV=function(a,b){return t.addFPV(a,b),c},c.getFPV=function(){return t.getFPV()},c.addKW=function(a){return t.addKW(a),c},c.getKWs=function(){return t.getKWs()},c.addContext=function(){for(var a=0;a<arguments.length;a++)w.push(arguments[a]);return c},c.getContexts=function(){return w},c.setUrl=i.setUrl,c.setIntegration=i.setIntegration};b.exports=new m},{10:10,13:13,16:16,18:18,19:19,20:20,4:4,5:5,7:7,8:8,9:9}],12:[function(a,b,c){"use strict";var d=a(19),e=a(20),f=function(a){d.debug("creating jsonp request object with callback:",a);var b,c,f,g,h=this,i=!1,j=null,k=null,l=null,m=null,n=null,o=null,p=null;h.readyState=0,h.status=0,h.statusText="",h.responseText="",h.timeout=0,h.onreadystatechange=function(){d.debug('jsonp "onreadystatechange" function called for request:',h,", url:",b)},h.isJsonp=!0,h.jsonpArgs=[],h.open=function(a,c){b=c},h.send=function(){return i?void d.warn('"send" called multiple times for jsonp request:',b):(i=!0,b?a?(d.debug("sending jsonp request:",b),j(),n(),void(h.timeout&&(g=setTimeout(o,h.timeout)))):(d.error("no callback given for jsonp request"),void p(0,"jsonp: no callback")):(d.error("no url given for jsonp request"),void p(0,"jsonp: no url")))},h.abort=function(){p(0,"jsonp aborted")},j=function(){var b=k().contentWindow;b[a]=m};var q=function(){if(f&&f.contentWindow)try{delete f.contentWindow[a]}catch(b){f.contentWindow[a]=void 0}};k=function(){for(var b=e.rp_fl_iframes=e.rp_fl_iframes||[],c=0;c<b.length;c++)if(!b[c].contentWindow[a]){f=b[c];break}return f||(f=l(),b.push(f)),f},l=function(){var a="rp_fl_iframe_"+parseInt(1e8*Math.random(),10),b=d.createInvisibleIframe(a),c=document.getElementsByTagName("head")[0];c.insertBefore(b,c.firstChild);var e='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><base target="_top" /><script>inDapIF=true;</script></head><body></body></html>',f=b.contentWindow.document;return f.open(),f.write(e),f.close(),b},m=function(){for(var a=0;a<arguments.length;a++)h.jsonpArgs.push(arguments[a]);var b=arguments.length>0?arguments[0]:"";p(200,"success",b)},n=function(){var a=f.contentWindow.document;c=a.createElement("script");var d=a.getElementsByTagName("script")[0];c.async=1,c.src=b,d.parentNode.insertBefore(c,d)},o=function(){p(0,"jsonp timeout")},p=function(a,e,f){4!==h.readyState&&(200===a?d.info("jsonp request finished successfully:",b,"arguments: ",h.jsonpArgs):d.warn(e,": closing jsonp request:",b),h.readyState=4,h.status=a,h.statusText=e||"",h.responseText=f||"",clearTimeout(g),q(),c&&c.parentNode&&c.parentNode.removeChild(c),"function"==typeof h.onreadystatechange&&h.onreadystatechange())}};b.exports=f},{19:19,20:20}],13:[function(a,b,c){"use strict";var d=a(20),e=a(19),f=d&&d.performance&&d.performance.mark&&d.performance.measure,g={mark:function(){},measure:function(){}};f&&1===parseInt(e.getUrlCookieParam("rp_performance"),10)&&(g=d.performance,g.mark("highlander.loaded")),b.exports=g},{19:19,20:20}],14:[function(a,b,c){"use strict";var d=a(17),e=a(19),f=function(a){var b,c=this,f=new d,g=new d,h=new d,i=new d,j=!1,k=!1,l=[],m=null,n=null;c.setTimeout=function(a){b=setTimeout(function(){e.warn("RequestManager:","timeout (after "+a+"ms)"),c.abort()},a)},a&&c.setTimeout(a),c.addRequest=function(a){return f.contains(a)||g.contains(a)?!0:j?!1:f.add(a)?(a.always(function(b){m(a,b)}),k&&a.abort(),!0):!1},m=function(a,b){return f.remove(a)&&g.add(a)?(200===b.status?h.add(a):i.add(a),n(),!0):!1},c.allRequestsAdded=function(){j=!0,n()},c.allRequestsFinished=function(){return!(!j||c.haveOpenRequests())},c.haveOpenRequests=function(){return!f.isEmpty()},c.finished=function(a){return"function"==typeof a?(l.push(a),!0):!1};var o=function(){for(;l.length;)l.shift()();l={length:0,push:function(a){a()}}};n=function(){c.allRequestsFinished()&&(clearTimeout(b),o())},c.abort=function(){e.warn("RequestManager:","aborting "+f.length()+" open request(s)");for(var a=f.toArray(),b=0;b<a.length;b++)a[b].abort();k=!0,o()},c.getOpenRequests=function(){return f.toArray()},c.getClosedRequests=function(){return g.toArray()},c.totalRequests=function(){return f.length()+g.length()},c.getSuccessfulRequests=function(){return h.toArray()},c.getFailedRequests=function(){return i.toArray()}};b.exports=f},{17:17,19:19}],15:[function(a,b,c){"use strict";var d=a(11),e=a(6),f=a(9),g=function(){var a=this;a.loadConfiguration=function(){return d.loadConfiguration.apply(a,arguments),a},a.init=function(){return d.init.apply(a,arguments),a},a.run=function(){return d.run.apply(a,arguments),a},a.cmd=e,a.getSlot=function(){var b=d.getSlot.apply(a,arguments);return b===!1?null:b.getPublicVersion()},a.defineSlot=function(){return d.defineSlot.apply(a,arguments).getPublicVersion()},a.getAllSlots=function(){for(var b=d.getAllSlots.apply(a,arguments),c=[],e=0;e<b.length;e++)c.push(b[e].getPublicVersion());return c},a.setUserKey=function(){return d.setUserKey.apply(a,arguments),a},a.setFPI=function(){return d.setFPI.apply(a,arguments),a},a.addFPI=function(){return d.addFPI.apply(a,arguments),a},a.setFPV=function(){return d.setFPV.apply(a,arguments),a},a.addFPV=function(){return d.addFPV.apply(a,arguments),a},a.addKW=function(){return d.addKW.apply(a,arguments),a},a.addContext=function(){return d.addContext.apply(a,arguments),a},a.renderCreative=function(){d.renderCreative.apply(a,arguments)},a.addEventListener=function(){return f.addEventListener.apply(a,arguments)},a.setTargetingForGPTSlot=function(){d.setTargetingForGPTSlot.apply(a,arguments)},a.setUrl=function(){d.setUrl.apply(a,arguments)},a.setIntegration=function(){d.setIntegration.apply(a,arguments)}};b.exports=g},{11:11,6:6,9:9}],16:[function(a,b,c){"use strict";var d=(a(4),a(9)),e=a(13),f=function(){var a=this,b=[],c=0,f=function(){},g=null,h=!1,i={},j=null,k=null;a.execute=function(a,l,m){b=a,i=m,c=0,h=!1,f=l,g=setTimeout(function(){k()},i.nTimeout);var n=Number(new Date);e.mark("runner.execute.slotMapping");for(var o=0;o<i.aSlots.length;o++)i.aSlots[o].configure();var p=Number(new Date),q=p-n;d.factory("SLOT_MAPPING_PERFORMANCE",{nTotalTime:q,nAverageTime:Math.round(q/(i.aSlots.length||1))}),e.mark("runner.execute.slotMappingComplete"),e.measure("slotMapping","runner.execute.slotMapping","runner.execute.slotMappingComplete");for(var r=0;r<b.length;r++)b[r].run(j,i)},j=function(a){c++,c>=b.length&&k()},k=function(){h||(h=!0,clearTimeout(g),f(i))}};f.run=function(a,b,c){var d=new f;return d.execute(a,b,c),d},b.exports=f},{13:13,4:4,9:9}],17:[function(a,b,c){"use strict";var d=function(){var a=this,b=[];a.add=function(c){return a.contains(c)?!1:(b.push(c),!0)},a.remove=function(a){for(var c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},a.removeByIndex=function(a){return a<b.length&&a>=0?(b.splice(a,1),!0):!1},a.contains=function(a){for(var c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},a.isEmpty=function(){return 0===b.length},a.length=function(){return b.length},a.get=function(a){return b[a]},a.toArray=function(){return b.slice(0)}};b.exports=d},{}],18:[function(a,b,c){"use strict";function d(a){if(void 0!==e)return e[a];e={};for(var b=0;b<k.getConfigs().length;b++){var c=k.getConfigValue(b,"accountId"),d=k.getConfigValue(b,"whitelistedSizes",{});e[c]=d}return e[a]}var e,f=a(20),g=a(8),h=a(17),i=a(19),j=a(9),k=a(7),l=a(13),m=function(a){var b=this,c=a;b.setFPI=function(){return c.setFPI.apply(b,arguments),b},b.addFPI=function(){return c.addFPI.apply(b,arguments),b},b.setFPV=function(){return c.setFPV.apply(b,arguments),b},b.addFPV=function(){return c.addFPV.apply(b,arguments),b},b.addKW=function(){return c.addKW.apply(b,arguments),b},b.setPosition=function(){return c.setPosition.apply(b,arguments),b},b.clearTargeting=function(){return c.clearTargeting.apply(b,arguments),b},b.getInfo=c.getInfo,b.getElementId=c.getElementId,b.getSlotName=c.getSlotName,b.getAdServerTargeting=c.getAdServerTargeting,b.getAdServerTargetingByKey=c.getAdServerTargetingByKey,b.getRawResponses=c.getRawResponses,b.getRawResponseBySize=c.getRawResponseBySize,b.isConfigured=c.isConfigured},n=function(b,c,e){var n=this,o=null,p=null,q=!1,r=null,s={nUrlPattern:10,nDeviceType:50,nContextKeyword:100,nPosition:500,nSlotIdPattern:1e3,nSlotIdExact:2e3,nElementIdPattern:1e4,nElementIdExact:2e4,nPrimaryAccount:4e4},t=new g,u=a(11),v={},w={},x={sElementId:null,sSlotName:null,sPos:"btf",oAccountConfigs:{},aBaseDimensions:[],aBaseRubiconSizeIds:[]},y=0;n.init=function(a,b,c){x.sSlotName=a,x.sElementId=c;var d=i.cleanseDimensionsList(b);b!=d&&[b]!=d&&i.debug("Given dimensions "+b.toString()+" were parsed to "+d.toString()),x.aBaseDimensions=d,x.aBaseRubiconSizeIds=[];for(var e=0;e<d.length;e++){var f=i.convertDimensionsToSizeId(d[e]);f===!1||i.inArray(f,x.aBaseRubiconSizeIds)?j.factory("SLOT_SIZE_NOT_MAPPED",{sDimensions:d[e].toString(),sSlotName:n.getSlotName()}):x.aBaseRubiconSizeIds.push(f)}},n.getInfo=function(){var a=x.oAccountConfigs,b=n.getElementId(),c=n.getSlotName(),d=n.getPosition(),e=n.getKWs(),f=n.getFPI(),g=n.getFPV(),h={},j={},k={};for(var l in a)if(a.hasOwnProperty(l)){var m=[],o=[],p="rpfl_"+l,q=n.getSiteId(l),r=n.getZoneId(l),s=n.getRubiconSizeIds(l);w.hasOwnProperty(p)&&(o=w[p].toArray());for(var t=0;t<s.length;t++){var u=s[t],v=i.convertSizeIdToDimensions(u);m.push({w:v[0],h:v[1]})}k[l]={siteId:q,zoneId:r,sizes:s,targeting:o,dimensions:m}}for(var y=0;y<f.length;y++){var z=f[y].key,A=f[y].value;h[z]=A}for(var B=0;B<g.length;B++){var C=g[B].key,D=g[B].value;j[C]=D}return{id:b,name:c,position:d,keywords:e,inventory:h,visitor:j,accounts:k}},n.clearTargeting=function(){return t=new g,x.sPos="btf",n},n.isConfigured=function(){return q},n.setFPI=function(a,b){return t.setFPI(a,b),n},n.addFPI=function(a,b){return t.addFPI(a,b),n},n.getFPI=function(a){return arguments.length<1&&(a=!0),r("getFPI",a)},n.setFPV=function(a,b){return t.setFPV(a,b),n},n.addFPV=function(a,b){return t.addFPV(a,b),n},n.getFPV=function(a){return arguments.length<1&&(a=!0),r("getFPV",a)},r=function(a,b){if("getFPV"!==a&&"getFPI"!==a)return i.error("Passing in undefined first party data accessor: "+a),[];var c=[];if(b){var d=i.convertKeyValuePairArrayToObject(u[a]()),e=i.convertKeyValuePairArrayToObject(t[a]());for(var f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)?d[f]=d[f].concat(e[f]):d[f]=e[f]);c=i.convertKeyValuePairObjectToArray(d)}else c=t[a]();return c},n.addKW=function(a){return t.addKW(a),n},n.getKWs=function(a){arguments.length<1&&(a=!0);var b,c=new h,d=t.getKWs(),e=a?u.getKWs():[];for(b=0;b<d.length;b++)c.add(d[b]);for(b=0;b<e.length;b++)c.add(e[b]);return c.toArray()},n.setPosition=function(a){return"atf"!==a&&"btf"!==a||(x.sPos=a),n},n.getPosition=function(){return x.sPos},n.getElementId=function(){return x.sElementId},n.getSlotName=function(){return x.sSlotName},n.getSiteId=function(a){return x.oAccountConfigs.hasOwnProperty(a)?x.oAccountConfigs[a].nSiteId:null},n.getZoneId=function(a){return x.oAccountConfigs.hasOwnProperty(a)?x.oAccountConfigs[a].nZoneId:null},n.getRubiconSizeIds=function(a){if(!x.oAccountConfigs.hasOwnProperty(a))return[];var b=x.oAccountConfigs[a].aRubiconSizeIds,c=n.getWhitelistedSizes(a);if(!i.isArray(c)||0===c.length)return b;var d=b.filter(function(a){return-1!==c.indexOf(a)});return b.length!==d.length&&i.warn("Given size ids ["+b.join(",")+"] were whitelisted to ["+d.join(",")+"]"),d},n.getWhitelistedSizes=function(a){var b=n.getZoneId(a),c=d(a)||{};return null!==b&&i.isArray(c[b])?c[b].slice():null},n.storeCreative=function(a,b,c,d,e){u.storeCreative(d,c,a,b,e,n),v.hasOwnProperty(a)||(v[a]={}),v[a][b]=d,z(a,b,e)},n.removeCreative=function(a,b){v.hasOwnProperty(a)&&delete v[a][b]},n.purgeCreative=function(a,b){n.removeCreative(a,b),n.removeAdServerTargetingForSize("rpfl_"+a,b);var c=p||n.findMatchingGPTSlot();c&&n.setTargetingForGPTSlot(c,n.retrieveAdServerTargeting())},n.findMatchingGPTSlot=function(){var a=!1;if(f.googletag&&f.googletag.apiReady)for(var b=f.googletag.pubads().getSlots(),c=0;c<b.length;c++)if(b[c].getSlotElementId()===n.getElementId()){a=b[c];break}return a},n.getCreative=function(a,b){return v.hasOwnProperty(a)&&v[a].hasOwnProperty(b)&&u.getCreative(v[a][b])||null},n.addAdServerTargeting=function(a,b){w.hasOwnProperty(a)?w[a].add(b):(w[a]=new h,w[a].add(b))};var z=function(a,b,c){var d="rpfl_"+a;n.removeAdServerTargetingForSize(d,b),n.addAdServerTargeting(d,[b,"_",c].join("")),n.addAdServerTargeting("rpfl_elemid",n.getElementId())};n.removeAdServerTargetingByKey=function(a){delete w[a]},n.removeAdServerTargetingForSize=function(a,b){var c=new RegExp("^"+b+"_");if(w[a])for(var d=w[a].length();d>=0;d--)if(c.test(w[a].get(d))){w[a].removeByIndex(d);break}},n.retrieveAdServerTargeting=function(){var a=[];for(var b in w)if(w.hasOwnProperty(b)){var c=w[b].toArray(),d={key:b,values:c};a.push(d)}return a},n.getAdServerTargeting=function(a){var b=i.getDataStoreValue("nRunTimestamp");k.getConfigValue(0,"configuration.testKvp")&&n.addAdServerTargeting("rpfl_"+k.getConfigValue(0,"accountId"),"test");var c=n.retrieveAdServerTargeting();l.mark("slot.getAdServerTargeting"),l.measure("getTargeting","fastlane.run","slot.getAdServerTargeting"),void 0===a&&(a="other");for(var d=0;d<c.length;d++){var e=c[d],f=e.values,g=e.key;if(g.match(/^rpfl_[0-9]+$/))for(var h=g.replace(/^rpfl_/,""),m=0;m<f.length;m++){var o=f[m],p=o.match(/^([0-9]+)_(.*)$/);p&&(y=Number(new Date)-b,j.factory("SLOT_GET_TARGETING",{nSiteId:n.getSiteId(h),nZoneId:n.getZoneId(h),sSlotName:n.getSlotName(),nSizeId:p[1],sTier:p[2],nAccountId:h,sValue:o,sContext:a,sKey:g,nLatency:y}))}}return c},n.getAdServerTargetingByKey=function(a){return w.hasOwnProperty(a)?w[a].toArray():[]},n.configure=function(){if(!q){for(var a=k.getConfigs(),b=0;b<a.length;b++){var c=n.findBestMatchForConfig(b);c!==!1?n.loadSlotConfiguration(k.getConfigValue(b,"accountId"),c):0===b?(i.debug("No configuration match found for slot: "+n.getSlotName()+", element ID: "+n.getElementId()+". Using catch-all."),n.loadSlotConfiguration(k.getConfigValue(b,"accountId"),k.getConfigValue(b,"catchAll"))):i.debug("No configuration match found for slot:",n.getSlotName(),", element Id:",n.getElementId(),", skipping catch-all because this is a secondary account:",k.getConfigValue(b,"accountId"))}return n}},n.findBestMatchForConfig=function(a){l.mark("slot.findBestMatchForConfig");for(var b=k.getConfigValue(a,"slots",[]),c=u.getContexts(),d={nPoints:0,oConfig:!1},e=0;e<b.length;e++){var f=b[e];i.debug("Starting slot specificity calculation for slot name: "+n.getSlotName()+", element ID: "+n.getElementId()+", contexts: "+(c.toString()||"(none)")+".");var g=n.calculateSlotConfigurationPoints(f,c);i.debug("End slot specificity calculation for slot name: "+n.getSlotName()+", element ID: "+n.getElementId()+", contexts: "+(c.toString()||"(none)")+", Points: "+g+"."),g>d.nPoints&&(d.nPoints=g,d.oConfig=f)}return l.mark("slot.findBestMatchForConfig.complete"),l.measure("findBestMatchForConfig","slot.findBestMatchForConfig","slot.findBestMatchForConfig.complete"),d.oConfig},n.calculateSlotConfigurationPoints=function(a,b){var c=null,d=0;if(a.slotId)if(c=new RegExp(a.slotId),a.slotId===n.getSlotName())d+=s.nSlotIdExact,i.debug("Exact slot name match. slot name: "+n.getSlotName()+", pattern: "+a.slotId+", points: "+d+".");else{if(!c.test(n.getSlotName()))return i.debug("Slot name match failed. Slot name: "+n.getSlotName()+", pattern: "+a.slotId+", Skipping."),0;d+=s.nSlotIdPattern,i.debug("Partial slot name match. slot name: "+n.getSlotName()+", pattern: "+a.slotId+", points: "+d+".")}if(a.elementIdPattern)if(c=new RegExp(a.elementIdPattern),a.elementIdPattern===n.getElementId())d+=s.nElementIdExact,i.debug("Exact element ID match. element ID: "+n.getElementId()+", pattern: "+a.elementIdPattern+", points: "+d+".");else{if(!c.test(n.getElementId()))return i.debug("Element Id match failed. Element Id: "+n.getElementId()+", pattern: "+a.elementIdPattern+". Skipping."),0;d+=s.nElementIdPattern,i.debug("Partial element ID match. element ID: "+n.getElementId()+", pattern: "+a.elementIdPattern+", points: "+d+".")}if(a.position){if(a.position!==n.getPosition())return i.debug("Position match failed. Slot position: "+n.getPosition()+", configured: oConfig.position. Skipping."),0;d+=s.nPosition,i.debug("Position match. Position: "+a.position+", points: "+d+".")}var e=i.getDeviceType();if(a.deviceType){if(!i.inArray(e,a.deviceType))return i.debug("Device type match failed. Device type: "+e+", configured: "+a.deviceType.join(",")+". Skipping."),0;d+=s.nDeviceType,i.debug("Device type match. Device type: "+e+", configured: "+a.deviceType.join(",")+", points: "+d+".")}var f=i.getFullPageUrl();if(a.urlPattern){if(c=new RegExp(a.urlPattern),!c.test(f))return i.debug("URL match failed. URL: "+f+", pattern: "+a.urlPattern+". Skipping."),0;d+=s.nUrlPattern,i.debug("Partial URL match. URL: "+f+", pattern: "+a.urlPattern+", points: "+d+".")}if(a.contextKeywords){var g=i.getArrayIntersection(a.contextKeywords,b);if(!g.length)return i.debug("Context match failed. Page contexts: "+(b.toString()||"(none)")+", configured , contexts:"+(a.contextKeywords?a.contextKeywords.toString():"(none)")+", Skipping."),0;d+=g.length*s.nContextKeyword,i.debug("Context matching. Page contexts:"+(b.toString()||"(none)")+", configured contexts:"+(a.contextKeywords?a.contextKeywords.toString():"(none)")+", matches: "+g.length+", points: "+d+".")}if(a.primaryAccountIds){var h=k.getConfigValue(0,"accountId");if(!i.inArray(h,a.primaryAccountIds))return i.debug("Primary accountId match failed. Primary account: ",h,", configured: ",a.primaryAccountIds,", Skipping"),0;d+=s.nPrimaryAccount,i.debug("Primary accountId match. Primary account: ",h,", configured: ",a.primaryAccountIds,", points:",d)}return d},n.loadSlotConfiguration=function(a,b){q=!0;var c={siteId:"nSiteId",zoneId:"nZoneId",sizes:"aRubiconSizeIds"};x.oAccountConfigs[a]={nSiteId:null,nZoneId:null,aRubiconSizeIds:x.aBaseRubiconSizeIds.slice()};for(var d in b)b.hasOwnProperty(d)&&x.oAccountConfigs[a].hasOwnProperty(c[d])&&(x.oAccountConfigs[a][c[d]]=b[d])},n.setTargetingForGPTSlot=function(a,b){p=a,void 0===b&&(b=n.getAdServerTargeting("gpt"));for(var c=0;c<b.length;c++)p.setTargeting(b[c].key,b[c].values);return!0},n.getRawResponses=function(a){var b=[];if(!k.getConfigValue(0,"configuration.exposeRawResponses",!1))return b;a=a||k.getConfigValue(0,"accountId");for(var c in v[a])if(v[a].hasOwnProperty(c)){var d="rpfl_"+a,e=c+"_unused",f=n.getRawResponseBySizeId(c);b.push(f),j.factory("SLOT_GET_TARGETING",{nSiteId:n.getSiteId(a),nZoneId:n.getZoneId(a),sSlotName:n.getSlotName(),nSizeId:c,nAccountId:a,sKey:d,sValue:e,sContext:"raw",sTier:"unused"})}return b},n.getRawResponseBySize=function(a,b){var c=i.convertDimensionsToSizeId(a);return n.getRawResponseBySizeId(c)},n.getRawResponseBySizeId=function(a,b){var c={};if(!k.getConfigValue(0,"configuration.exposeRawResponses",!1))return c;b=b||k.getConfigValue(0,"accountId");var d=n.getCreative(b,a);if(d&&d.hasOwnProperty("oResponse")){var e=d.oResponse;c.advertiser=e.advertiser,c.cpm=e.cpm,c.dimensions=i.convertSizeIdToDimensions(a),c.auction_id=e.impression_id,e.hasOwnProperty("deal")&&(c.deal=e.deal)}return c},n.getPublicVersion=function(){return null===o&&(o=new m(n)),o},n.init(b,c,e)};b.exports=n},{11:11,13:13,17:17,19:19,20:20,7:7,8:8,9:9}],19:[function(a,b,c){"use strict";var d=a(20),e=a(7),f={sUrl:"",sIntegration:"",nInitTimestamp:0,nRunTimestamp:0},g=function(){var a,b,c=this,g=[],h=null,i=null,j=null,k=null;c.oSizeMap={"468x60":1,"728x90":2,"120x600":8,"160x600":9,"300x600":10,"300x250":15,"336x280":16,"320x50":43,"300x50":44,"300x1050":54,"970x90":55,"970x250":57,"1000x90":58,"320x480":67,"1800x1000":68,"480x320":101,"768x1024":102},c.sVersion="beaced7",c.DEVICE_DESKTOP="desktop",c.DEVICE_TABLET="tablet",c.DEVICE_PHONE="phone",c.init=function(d){a=b=h(d),c.hookUserDistractionEvents(),i(d)},h=function(a){var b="http:";try{a.location.protocol.match(/^http/)&&(b=a.location.protocol)}catch(c){}return b+"//"},c.getProtocol=function(){return b},c.setProtocol=function(a){a&&a.match(/^http(s)?:\/\/$/)&&(b=a)},c.getFullPageUrl=function(){return c.getUrlCookieParam("rp_url")?c.getUrlCookieParam("rp_url"):c.getUrl()?c.getUrl():d.location.toString()},c.getScreenResolution=function(){return d.screen.width+"x"+d.screen.height},c.debug=function(){},c.info=function(){},c.warn=function(){},c.error=function(){},i=function(a){j(a);var b=parseInt(c.getUrlCookieParam("rp_loglevel"));isNaN(b)&&!e.hasConfig()&&e.onLoad(function(){i(a)}),k(b)},j=function(a){if(a.console)for(var b={debug:"log",info:"info",warn:"warn",error:"error"},d=["debug","info","warn","error"],e=0;e<d.length;e++){var f=d[e],g=b[f];if(a.console[g])try{c[f]=Function.prototype.bind.call(a.console[g],a.console,"RP:")}catch(h){}else e>0&&(c[f]=c[d[e-1]])}},k=function(a){var b=0,d=1,f=2,g=3,h=4;a=isNaN(a)?e.getConfigValue(0,"configuration.logLevel",b):a,h>a&&(c.debug=function(){}),g>a&&(c.info=function(){}),f>a&&(c.warn=function(){}),d>a&&(c.error=function(){})},c.getUrlCookieParam=function(a){if(a){var b=c.getQueryStringParam(a);b=null===b?c.getHashParam(a):b;var d="rp_param_"+a;return b?c.setCookie(d,b,{path:"/"}):null===b?b=c.getCookie(d):c.setCookie(d,"",{path:"/",exp:-1e4}),b||null}},c.getCookie=function(a){if(!a)return null;var b=new RegExp("\\b"+a+"=([^;]*)"),c=b.exec(d.document.cookie||"");return c&&c.length>1?c[1]:null},c.setCookie=function(a,b,c){if(a){var e=[a+"="+b];if(c=c||{},c.domain&&e.push("domain="+c.domain),c.exp||0===c.exp){var f=new Date((new Date).getTime()+c.exp);e.push("expires="+f.toUTCString())}var g=c.path||"/";e.push("path="+g),d.document.cookie=e.join(";")}},c.getQueryStringParam=function(a){if(!a)return null;var b=new RegExp("[?&]"+a+"((=([^&]*))|(&|$))"),c=b.exec(decodeURIComponent(d.location.search)||"");return!c||c.length<5?null:c[3]||""},c.queryStringParamExists=function(a){if(!a)return!1;var b=new RegExp("[?&]"+a+"([=&]|$)");return b.test(d.location.search||"")},c.getHashParam=function(a){if(!a)return null;var b=new RegExp("[#&]"+a+"((=([^&]*))|(&|$))"),c=b.exec(d.location.hash||"");return!c||c.length<5?null:c[3]||""},c.hashParamExists=function(a){if(!a)return!1;var b=new RegExp("[#&]"+a+"([=&]|$)");return b.test(d.location.hash||"")},c.mergeObjects=function(a,b,c){var d,e={};if(c)for(var f=0;2>f;f++)for(d in arguments[f])arguments[f].hasOwnProperty(d)&&(e[d]=arguments[f][d]);else for(d in a)a.hasOwnProperty(d)&&(e[d]=b.hasOwnProperty(d)?b[d]:a[d]);return e},c.isInteger=function(a){return/string|number/.test(typeof a)&&/^[0-9]+$/.test(a.toString())},c.isSingleSlotSize=function(a){return c.isArray(a)&&2===a.length&&c.isInteger(a[0])&&c.isInteger(a[1])},c.isArray=function(a){return(a||!1)&&c.isObject(a)&&a.hasOwnProperty("length")&&"number"==typeof a.length&&a.length>-1&&"[object Array]"===Object.prototype.toString.call(a)},c.inArray=function(a,b){if(!c.isArray(b))return!1;for(var d=0;d<b.length;d++)if(b[d]==a)return!0;return!1},c.getArrayIntersection=function(a,b){var d=[];if(!c.isArray(a)||!c.isArray(b))return d;for(var e=0;e<a.length;e++)c.inArray(a[e],b)&&d.push(a[e]);return d},c.isObject=function(a){return"object"==typeof a},c.isFunction=function(a){return(a||!1)&&"[object Function]"===Object.prototype.toString.call(a)},c.generateComplexQueryStringObject=function(a,b){for(var c={},d=null,e=0;e<a.length;e++)d=b+"."+a[e].key,c[d]=a[e].value.join(",");return c},c.convertObjectToQueryString=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},c.convertKeyValuePairArrayToObject=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].key]=a[c].value;return b},c.convertKeyValuePairObjectToArray=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push({key:c,value:a[c]});return b},c.formatString=function(a,b,c){var d=a;c=c||!1;for(var e in b)b.hasOwnProperty(e)&&(d=d.replace(new RegExp("{"+e+"}","g"),c?encodeURIComponent(b[e]):b[e]));return d},c.convertDimensionsToSizeId=function(a){if(!c.isSingleSlotSize(a))return!1;var b=a[0]+"x"+a[1];return c.oSizeMap.hasOwnProperty(b)?c.oSizeMap[b]:!1},c.convertSizeIdToDimensions=function(a){for(var b in c.oSizeMap)if(c.oSizeMap.hasOwnProperty(b)&&parseInt(c.oSizeMap[b],10)===parseInt(a,10)){var d=b.split("x");return d[0]=parseInt(d[0],10),d[1]=parseInt(d[1],10),d}return!1},c.normalizeDimensions=function(a){if(c.convertDimensionsToSizeId(a)&&(a=[a]),!c.isArray(a))return[];var b=[];for(var d in a)if(a.hasOwnProperty(d)){var e=a[d],f=c.convertSizeIdToDimensions(e);f!==!1?b.push(f):b.push(e)}return c.cleanseDimensionsList(b)},c.cleanseDimensionsList=function(a){var b=[];if(c.isArray(a)&&0!==a.length)if(c.isSingleSlotSize(a))b=[a];else for(var d=0;d<a.length;d++)c.isSingleSlotSize(a[d])&&b.push(a[d]);else;return b},c.addUserDistractionEventListener=function(a){g.push(a)},c.hookUserDistractionEvents=function(){var a=function(a){c.userDistractionEventOccurred(a)};d.addEventListener?(d.addEventListener("unload",a,!1),d.addEventListener("blur",a,!1)):d.attachEvent&&(d.attachEvent("onunload",a),d.attachEvent("onblur",a))},c.userDistractionEventOccurred=function(a){for(var b=0;b<g.length;b++)g[b](a)},c.getNow=function(){return(new Date).getTime()},c.browserSupportsXHR=function(){var a=c.isIE();return!(a&&10>a)},c.isIE=function(){var a=d.navigator.userAgent.toLowerCase();return-1!==a.indexOf("msie")?parseInt(a.split("msie")[1]):!1},c.getDeviceType=function(){var a=d.screen.height||1025,b=d.screen.width||1025,e=Math.max(a,b),f=c.DEVICE_DESKTOP;return 736>=e?f=c.DEVICE_PHONE:1024>=e&&(f=c.DEVICE_TABLET),f},c.createInvisibleIframe=function(a){var b=document.createElement("iframe");return b.id=a,b.height=0,b.width=0,b.border="0px",b.hspace="0",b.vspace="0",b.marginWidth="0",b.marginHeight="0",b.style.border="0",b.scrolling="no",b.frameBorder="0",c.isIE()&&c.isIE()<10?b.src='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();})()':b.src="about:self",b.style.display="none",b},c.setUrl=function(a){return e.getConfigValue(0,"configuration.allowSetUrl")!==!0?void c.warn("Cannot manually set URL since it is not allowed in the configuration."):void(c.isUrl(a)&&(f.sUrl=a))},c.getUrl=function(a){return f.sUrl},c.isUrl=function(a){return"string"!=typeof a?!1:/^(https?:)?\/\/[a-zA-Z\d\-]+/.test(a)},c.replaceMacrosWithinUrl=function(a,b){var c;if("string"!=typeof a)return"";for(var d in b)b.hasOwnProperty(d)&&(c=new RegExp("\\$\\$"+d+"\\$\\$","gi"),a=a.replace(c,encodeURIComponent(b[d])));return a=a.replace(/\$\$[^<>&?=+*#@!%^~;\s'"]+\$\$/gi,"")},c.setIntegration=function(a){f.sIntegration=a,"localhost"===document.location.hostname&&c.setCookie("highlander-test.sIntegration",a,{exp:2e3})},c.getIntegration=function(){return f.sIntegration},c.setTimestamp=function(a){f[a]=Number(new Date)},c.getDataStoreValue=function(a){return f[a]}},h=new g;h.init(d),b.exports=h},{20:20,7:7}],20:[function(a,b,c){"use strict";b.exports="undefined"!=typeof window?window:void 0},{}],21:[function(a,b,c){"use strict";b.exports="undefined"!=typeof XMLHttpRequest?XMLHttpRequest:void 0},{}]},{},[2]);window.rubicontag.loadConfiguration({"accountId":11850,"services":["fastlane"],"configuration":{"analyticsLevel":4,"logLevel":0,"timeout":1500},"fastlane":{"pageSampling":1},"catchAll":{"siteId":86322,"zoneId":408562},"sizeMap":{"728x90":2,"160x600":9,"300x600":10,"300x250":15,"320x50":43},"slots":[{"slotId":"allure","siteId":55468,"zoneId":260878},{"slotId":"arch","siteId":55512,"zoneId":260984},{"slotId":"ars","siteId":55522,"zoneId":260994},{"slotId":"bonapp","siteId":55534,"zoneId":261008},{"slotId":"brides","siteId":55540,"zoneId":261014},{"slotId":"cntraveler","siteId":55546,"zoneId":261020},{"slotId":"epi","siteId":55484,"zoneId":260902},{"slotId":"glamour","siteId":55490,"zoneId":260914},{"slotId":"golfdigest","siteId":55590,"zoneId":261216},{"slotId":"gourmet","siteId":55598,"zoneId":261250},{"slotId":"gq","siteId":55608,"zoneId":261260},{"slotId":"newyorker","siteId":55482,"zoneId":260904},{"slotId":"pitchfork","siteId":84520,"zoneId":400312},{"slotId":"self","siteId":55576,"zoneId":261156},{"slotId":"teenvogue","siteId":55616,"zoneId":261284},{"slotId":"vanityfair","siteId":55500,"zoneId":260960},{"slotId":"wiredcom","siteId":55518,"zoneId":260990},{"slotId":"wmagazine","siteId":55622,"zoneId":261290}],"tiers":[{"floor":0,"ceiling":0,"mapping":"tier0000","hasDeals":false},{"floor":0.01,"ceiling":0.09,"mapping":"tier0001","hasDeals":false},{"floor":0.1,"ceiling":0.19,"mapping":"tier0010","hasDeals":false},{"floor":0.2,"ceiling":0.29,"mapping":"tier0020","hasDeals":false},{"floor":0.3,"ceiling":0.39,"mapping":"tier0030","hasDeals":false},{"floor":0.4,"ceiling":0.49,"mapping":"tier0040","hasDeals":false},{"floor":0.5,"ceiling":0.59,"mapping":"tier0050","hasDeals":false},{"floor":0.6,"ceiling":0.69,"mapping":"tier0060","hasDeals":false},{"floor":0.7,"ceiling":0.79,"mapping":"tier0070","hasDeals":false},{"floor":0.8,"ceiling":0.89,"mapping":"tier0080","hasDeals":false},{"floor":0.9,"ceiling":0.99,"mapping":"tier0090","hasDeals":false},{"floor":1,"ceiling":1.09,"mapping":"tier0100","hasDeals":false},{"floor":1.1,"ceiling":1.19,"mapping":"tier0110","hasDeals":false},{"floor":1.2,"ceiling":1.29,"mapping":"tier0120","hasDeals":false},{"floor":1.3,"ceiling":1.39,"mapping":"tier0130","hasDeals":false},{"floor":1.4,"ceiling":1.49,"mapping":"tier0140","hasDeals":false},{"floor":1.5,"ceiling":1.59,"mapping":"tier0150","hasDeals":false},{"floor":1.6,"ceiling":1.69,"mapping":"tier0160","hasDeals":false},{"floor":1.7,"ceiling":1.79,"mapping":"tier0170","hasDeals":false},{"floor":1.8,"ceiling":1.89,"mapping":"tier0180","hasDeals":false},{"floor":1.9,"ceiling":1.99,"mapping":"tier0190","hasDeals":false},{"floor":2,"ceiling":2.09,"mapping":"tier0200","hasDeals":false},{"floor":2.1,"ceiling":2.19,"mapping":"tier0210","hasDeals":false},{"floor":2.2,"ceiling":2.29,"mapping":"tier0220","hasDeals":false},{"floor":2.3,"ceiling":2.39,"mapping":"tier0230","hasDeals":false},{"floor":2.4,"ceiling":2.49,"mapping":"tier0240","hasDeals":false},{"floor":2.5,"ceiling":2.59,"mapping":"tier0250","hasDeals":false},{"floor":2.6,"ceiling":2.69,"mapping":"tier0260","hasDeals":false},{"floor":2.7,"ceiling":2.79,"mapping":"tier0270","hasDeals":false},{"floor":2.8,"ceiling":2.89,"mapping":"tier0280","hasDeals":false},{"floor":2.9,"ceiling":2.99,"mapping":"tier0290","hasDeals":false},{"floor":3,"ceiling":3.49,"mapping":"tier0300","hasDeals":false},{"floor":3.5,"ceiling":3.99,"mapping":"tier0350","hasDeals":false},{"floor":4,"ceiling":4.49,"mapping":"tier0400","hasDeals":false},{"floor":4.5,"ceiling":4.99,"mapping":"tier0450","hasDeals":false},{"floor":5,"ceiling":5.49,"mapping":"tier0500","hasDeals":false},{"floor":5.5,"ceiling":5.99,"mapping":"tier0550","hasDeals":false},{"floor":6,"ceiling":6.49,"mapping":"tier0600","hasDeals":false},{"floor":6.5,"ceiling":6.99,"mapping":"tier0650","hasDeals":false},{"floor":7,"ceiling":7.49,"mapping":"tier0700","hasDeals":false},{"floor":7.5,"ceiling":7.99,"mapping":"tier0750","hasDeals":false},{"floor":8,"ceiling":8.49,"mapping":"tier0800","hasDeals":false},{"floor":8.5,"ceiling":8.99,"mapping":"tier0850","hasDeals":false},{"floor":9,"ceiling":9.49,"mapping":"tier0900","hasDeals":false},{"floor":9.5,"ceiling":9.99,"mapping":"tier0950","hasDeals":false},{"floor":10,"ceiling":10.99,"mapping":"tier1000","hasDeals":false},{"floor":11,"ceiling":11.99,"mapping":"tier1100","hasDeals":false},{"floor":12,"ceiling":12.99,"mapping":"tier1200","hasDeals":false},{"floor":13,"ceiling":13.99,"mapping":"tier1300","hasDeals":false},{"floor":14,"ceiling":14.99,"mapping":"tier1400","hasDeals":false},{"floor":15,"ceiling":15.99,"mapping":"tier1500","hasDeals":false},{"floor":16,"ceiling":16.99,"mapping":"tier1600","hasDeals":false},{"floor":17,"ceiling":17.99,"mapping":"tier1700","hasDeals":false},{"floor":18,"ceiling":18.99,"mapping":"tier1800","hasDeals":false},{"floor":19,"ceiling":19.99,"mapping":"tier1900","hasDeals":false},{"floor":20,"ceiling":99999,"mapping":"tier2000","hasDeals":false}],"version":"1466455617L","modified":1466455617000});window.rubicontag.init();
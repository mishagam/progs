!function(a){function b(){function b(a,b){self.autoplay=b===!1?!1:!0;var c=a.closest(".video-image-wrapper").find(".video-container .video").first(),d=c.closest(".video-image-wrapper"),e=d.find(".image-button-wrapper"),h=d.closest(".video-text-wrapper").find(".text-container"),i=e.find(".imm-video-play-btn");e.find(".wp-loading");c.attr("data-aspect-ratio",g(a));var j={onPlayCompleted:function(){i.show(),e.css({"z-index":"2"}),h.css({"z-index":"2"})},onPlayerCreated:function(){b&&TWP.PostTV.players[c[0].getAttribute("id")].play(),i.click(function(){TWP.PostTV.players[c[0].getAttribute("id")].play(),e.css({"z-index":"-1"}),h.css({"z-index":"-1"})})}},k=function(){function a(){return"html5"==f.playerType?"html5":"flash"}return{callbacks:j,type:a()}};self.autoplay?(e.css({"z-index":"-1"}),h.css({"z-index":"-1"})):c.attr("data-autoplay",!1),c.hasClass("initialized")||(TWP.PostTV.initPostTvPlayer(c[0],k()),c.addClass("initialized"))}function d(){var c=a(".video");if(c.length>0){var d=a(c[0]);b(a(d),!1)}}c(),a(".imm-video-play-btn").on("click",function(){var c=a(this).parent().parent().parent(),d=c.find(".video"),e=(c.find(".wp-loading"),c.find(".imm-video-play-btn"));d.attr("id");isMobile.any()&&!d.hasClass("initialized")?b(d,!1):(e.hide(),b(d,!0))}),d();var e=a(".not-lead").closest(".span4, .span12").width();a(".innerWrapper").width(e);var h=9*e/16;a(".innerWrapper").height(h),a(".top-video .innerWrapper").css({width:i.width(),height:i.height()})}function c(){a(window).resize(function(){a(".video").attr("style","width:auto !important;height:100% !important;margin-top: 0px")}),a(window).resize(function(){a(".top-video .video").css({width:i.width(),height:i.height()})})}var d=PubSub.subscribe("playerCreated",function(){a(".imm-video-play-btn").show(),PubSub.unsubscribe(d)}),e=function(){if(!window.location.search)return{};for(var a=window.location.search.slice(1).split("&"),b=a.length,c={},d=0;b>d;d++)query=a[d].split("="),query[0]&&(query.length<2&&query.push(""),c[decodeURIComponent(query[0])]=decodeURIComponent(query[1]));return c},f=e(),g=function(a){function b(a,c){return 0==c?a:b(c,a%c)}function c(){var c=a.width(),d=a.height(),e=b(c,d),f=c/e,g=d/e;return f+":"+g}return c()},h=a(".video-container"),i=a(".top-video").find(".photo-stretch .photo-stretch");h.length>0&&b()}(jQuery);
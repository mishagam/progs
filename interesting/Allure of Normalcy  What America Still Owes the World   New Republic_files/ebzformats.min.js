Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(!this)throw new TypeError;var c=this.length,d=b||0;if(0===c||d>=c)return-1;0>d&&(d=c-Math.abs(d));for(var e=d;c>e;e++)if(this[e]===a)return e;return-1}),document.getElementsByClassName||(document.getElementsByClassName=function(a){return this.querySelectorAll("."+a)}),window.getComputedStyle||(window.getComputedStyle=function(a){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"===b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle[b]?a.currentStyle[b]:null},this}),Date.now||(Date.now=function(){return(new Date).getTime()});var ebz;!function(a){!function(a){!function(a){a[a.CRUNCH=1]="CRUNCH",a[a.EBZ=2]="EBZ"}(a.AdServer||(a.AdServer={}));a.AdServer;!function(a){a[a.JAVASCRIPT=2]="JAVASCRIPT",a[a.PIXEL=1]="PIXEL"}(a.CallbackMode||(a.CallbackMode={}));a.CallbackMode;!function(a){a[a.ADVERTISER=2]="ADVERTISER",a[a.EBUZZING=1]="EBUZZING",a[a.EBZ_PUBLISHER=5]="EBZ_PUBLISHER",a[a.EBZ_ADVERTISER=4]="EBZ_ADVERTISER",a[a.PUBLISHER=3]="PUBLISHER"}(a.CallbackSource||(a.CallbackSource={}));a.CallbackSource;!function(a){a[a.SWF=2]="SWF",a[a.FACEBOOK=1]="FACEBOOK",a[a.NORMAL=0]="NORMAL"}(a.Embed||(a.Embed={}));a.Embed;!function(a){a[a.COUNTDOWN=3]="COUNTDOWN",a[a.INLINE=4]="INLINE",a[a.MOUSEOVER=2]="MOUSEOVER",a[a.CLICK=1]="CLICK",a[a.FASTCOUNTDOWN=5]="FASTCOUNTDOWN"}(a.ExpandStartMode||(a.ExpandStartMode={}));a.ExpandStartMode;!function(a){a[a.DAILYMOTION=3]="DAILYMOTION",a[a.VPAID=5]="VPAID",a[a.EBUZZING=1]="EBUZZING",a[a.YOUTUBE=2]="YOUTUBE",a[a.FLV=6]="FLV",a[a.YOUTUBE_NAKED=7]="YOUTUBE_NAKED",a[a.VAST=4]="VAST"}(a.MediaProvider||(a.MediaProvider={}));a.MediaProvider;!function(a){a[a.OVER_NO_MUTE_BUTTON=4]="OVER_NO_MUTE_BUTTON",a[a.START_NO_MUTE_BUTTON=2]="START_NO_MUTE_BUTTON",a[a.START_MUTE_BUTTON=1]="START_MUTE_BUTTON",a[a.OVER_ON_LEAVE_OFF=5]="OVER_ON_LEAVE_OFF",a[a.OVER_MUTE_BUTTON=3]="OVER_MUTE_BUTTON"}(a.NativeSoundOption||(a.NativeSoundOption={}));a.NativeSoundOption;!function(a){a[a.VIDEOSOUND_OFF=1]="VIDEOSOUND_OFF",a[a.VIDEO_ON_SOUNDS_ON=2]="VIDEO_ON_SOUNDS_ON",a[a.VIDEO_ON_SOUNDS_OFF=3]="VIDEO_ON_SOUNDS_OFF"}(a.NativeVideoPauseOption||(a.NativeVideoPauseOption={}));a.NativeVideoPauseOption;!function(a){a[a.SCREEN=2]="SCREEN",a[a.POPUP=1]="POPUP",a[a.CUSTOM=3]="CUSTOM"}(a.ShareType||(a.ShareType={}));a.ShareType;!function(a){a[a.COUNTDOWN=4]="COUNTDOWN",a[a.MOUSEOVER=2]="MOUSEOVER",a[a.CLICK=1]="CLICK",a[a.AUTOPLAY=3]="AUTOPLAY"}(a.StartMode||(a.StartMode={}));a.StartMode}(a.thrift||(a.thrift={}));a.thrift}(ebz||(ebz={}));var ebz;!function(a){a.page=a.page||{},a.playlists=a.playlists||[],a.isIframed,a.lastEventName,a.config={deployedHash:"defaultDeployHash",urls:{ebzformats:"http://assets.ebz.io/ebzFormats",buzzplayer:"http://assets.ebz.io/ebzFormats/buzzplayer",playerAssets:"http://assets.ebz.io/ebzFormats",share:"http://bzzvid.ebuzzing.com",ping:"",tracking:"http://stat.ebuzzing.com",player:"http://assets.ebz.io/ebzFormats/buzzplayer",api:"http://api.ebuzzing.com/partners/1.0",root:"http://social.ebuzzing.com",bigData:"http://d.ebz.io/i"},playerSizes:{1:{width:300,height:250,type:1,id:1},2:{width:300,height:275,type:1,id:2},3:{width:300,height:225,type:1,id:3},4:{width:336,height:280,type:1,id:4},5:{width:400,height:353,type:1,id:5},6:{width:420,height:257,type:1,id:6},7:{width:425,height:375,type:1,id:7},8:{width:640,height:360,type:1,id:8},11:{width:185,height:185,type:2,id:11},14:{width:300,height:183,type:1,id:14},15:{width:560,height:315,type:1,id:15}},jsSuffix:".js",legacyParams:null,routes:{feed:"/feed_channel{pid}.js?target={target}&targetInBoard={targetInBoard}&type={scriptType}",seed:"/seed_campaign{cid}_channel{pid}.js?target={target}&targetInBoard={targetInBoard}",buzz:"/seed_buzz{id}.js?target={target}",campaign:"/seed_campaign{cid}.js?target={target}"}}}(ebz||(ebz={}));var ebz;!function(a){!function(a){var b=function(){function a(){}return a.stringify=function(b){if(JSON&&JSON.stringify&&JSON.parse){var c,d=a.jsonIsBroken();return c=d?JSON.stringify(b,function(a,b){return"string"==typeof b&&0===b.indexOf("[")&&d?new Function("return "+b)():b}):JSON.stringify(b)}return"Error, JSON not present on this page"},a.parse=function(b){if(!(JSON&&JSON.stringify&&JSON.parse))return"Error, JSON not present on this page";var c=a.jsonIsBroken();return c?void JSON.parse(b,function(a,b){if(!b)return null;var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g;return b.replace&&c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?new Function("return "+b)():b}):JSON.parse(b)},a.jsonIsBroken=function(){return"string"==typeof JSON.parse(JSON.stringify([]))},a}();a.Json=b}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(){}return b.fire=function(b,c,d,e){var f={a:"v",ar:"F"+b,v:"4",d:this.sequenceId++,e:Math.round(Date.now()/1e3)};if(c&&("object"==typeof c&&(c=a.helper.Json.stringify(c)),f.at=c),d&&(d.displaySettings&&(f.ac=d.displaySettings.language),d.campaign&&(f.f=d.campaign.id,f.g=d.campaign.name,d.campaign.advertiserChannel&&d.campaign.advertiserChannel.advertiser&&(f.k=d.campaign.advertiserChannel.advertiser.id)),d.publisherChannel&&(f.i=d.publisherChannel.id,f.j=d.publisherChannel.name,f.h=d.buzzID)),e&&("object"==typeof e&&(e.message||e.name)?(e.message&&(f.au=e.message),e.name&&(f.av=e.name),e.lineNumber&&(f.aw=e.lineNumber),e.fileName&&(f.ax=e.fileName)):f.au=e),f.l=window.location.host,f.m=window.location.pathname,f.n=window.location.search,f.o=window.location.protocol.slice(0,-1),f.p=window.location.hash.slice(1),a.page.referer){var g=document.createElement("a");g.href=a.page.referer,f.q=g.host,f.r=g.pathname,f.s=g.search,f.t=g.protocol.slice(0,-1),f.u=g.hash.slice(1)}var h=[];for(var i in f)f.hasOwnProperty(i)&&h.push(i+"="+encodeURIComponent(f[i]));var j=new Image;j.src=a.config.urls.bigData+"?"+h.join("&")},b.APP_UNKNOWN_FORMAT="A1",b.PLAYLIST_TARGET_NOT_FOUND="P1",b.PLAYLIST_SCRIPT_TAG_NOT_FOUND="P3",b.PLAYLIST_WRONG_USER_DATA="P2",b.RME_SWFOBJECT_EMBED="R1",b.RME_ASSET_NOT_FOUND="R2",b.BP_JS_TRACKING="B1",b.BP_TRIGGER_EVENT="B2",b.BP_CORRUPTED_EVENT_DATA="B3",b.BP_POSTED_EXCEPTION="B4",b.BP_RECEIVED_ERROR="B5",b.BP_SWFOBJECT_EMBED="B6",b.BP_VAST_FILE_NOT_ACCESSIBLE="B7",b.TRACKER_JS_TRACKING="T1",b.TRACKER_IMPRESSION="T2",b.IFRAME_BUZZPLAYER_INIT="I1",b.NATIVE_UNKNOWN_TAG="N1",b.sequenceId=1,b}();b.ErrorTracker=c}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(a){!function(a){a[a.ANDROID=0]="ANDROID",a[a.WEBOS=1]="WEBOS",a[a.IPHONE=2]="IPHONE",a[a.IPAD=3]="IPAD",a[a.IPOD=4]="IPOD",a[a.BLACKBERRY=5]="BLACKBERRY",a[a.WINDOWS_PHONE=6]="WINDOWS_PHONE",a[a.ALL=7]="ALL"}(a.MobileName||(a.MobileName={}));var b=(a.MobileName,function(){function a(){}return a.isMobile=function(a){"undefined"==typeof a&&(a=7);var b=/Android|webOS|iPhone|iPad|iPod|Blackberry|Windows Phone/i;switch(a){case 0:b=/Android/i;break;case 1:b=/webOS/i;break;case 2:b=/iPhone/i;break;case 3:b=/iPad/i;break;case 4:b=/iPod/i;break;case 5:b=/Blackberry/i;break;case 6:b=/Windows Phone/i}return b.test(navigator.userAgent)},a.isViewport=function(){var a=document.getElementsByTagName("head")[0];for(var b in a.children)if("viewport"===a.children[b].name)return!0;return!1},a.isAndroidNative=function(){return navigator.userAgent.indexOf("Mozilla/5.0")>-1&&navigator.userAgent.indexOf("Android ")>-1&&navigator.userAgent.indexOf("AppleWebKit")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1)},a.isAndroid=function(){return/Android/i.test(navigator.userAgent)},a.isSdk=function(){return"undefined"!=typeof EbzSDK},a.isMraid=function(){return"undefined"!=typeof window.mraid},a.isOldIE=function(a){return"undefined"==typeof a&&(a=9),new RegExp("MSIE [2-"+a+"]{1}").test(navigator.userAgent)},a.isIE10=function(){return/MSIE 1/.test(navigator.userAgent)},a}());a.Context=b}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function a(){}return a.prototype.log=function(){},a.prototype.info=function(){},a.prototype.warn=function(){},a.prototype.error=function(){},a}(),d={};b.START_TIME=b.START_TIME||Date.now();var e=function(){function e(a){this.category=a,d[a]?d[a]++:d[a]=0,this.categoryInstanceNum=d[a],this.console=window.console&&"undefined"!=typeof window.console.log?window.console:new c}return e.prototype.debug=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this._log(this.console.log,1,a)},e.prototype.info=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this._log(this.console.info,2,a)},e.prototype.warn=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this._log(this.console.warn,3,a)},e.prototype.error=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this._log(this.console.error,4,a)},e.prototype._log=function(c,d,e){if(0!==e.length&&0===window.name.indexOf(a.PREFIX)){var f=parseInt(window.name[3],10);if(!(f>d)){if(window.name.length>4){var g=window.name.substr(4);if(g!==this.category.toLowerCase())return}var h=Date.now()-b.START_TIME;e.unshift((h/1e3).toFixed(3)+"s ["+a.PREFIX+"."+this.category+"#"+this.categoryInstanceNum+"]");try{c.apply(this.console,e)}catch(i){Function.prototype.apply.apply(c,[this.console,e])}}}},e}();b.ConsoleLogger=e}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){!function(a){a[a.IMG=0]="IMG",a[a.IFRAME=1]="IFRAME",a[a.SWF=2]="SWF",a[a.VIDEO=3]="VIDEO"}(b.DomTag||(b.DomTag={}));b.DomTag;!function(a){a[a.HORIZONTAL=0]="HORIZONTAL",a[a.VERTICAL=1]="VERTICAL",a[a.BOTH=2]="BOTH"}(b.Align||(b.Align={}));b.Align;!function(a){a[a.ABSOLUTE=0]="ABSOLUTE",a[a.FIXED=1]="FIXED"}(b.StylePosition||(b.StylePosition={}));b.StylePosition;!function(a){a[a.PORTRAIT=0]="PORTRAIT",a[a.LANDSCAPE=1]="LANDSCAPE"}(b.Orientation||(b.Orientation={}));var c=(b.Orientation,function(){function b(){}return b.getWindow=function(){return window},b.getWindowSize=function(){return"number"==typeof a.helper.Dom.getWindow().innerWidth?[a.helper.Dom.getWindow().innerWidth,a.helper.Dom.getWindow().innerHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:[1e3,600]},b.getWindowScroll=function(){if("number"==typeof a.helper.Dom.getWindow().pageXOffset)return[a.helper.Dom.getWindow().pageXOffset,a.helper.Dom.getWindow().pageYOffset];var b=[0,0],c=[0,0];return document.body&&"number"==typeof document.body.scrollTop&&(b=[document.body.scrollLeft,document.body.scrollTop]),document.documentElement&&"number"==typeof document.documentElement.scrollTop&&(c=[document.documentElement.scrollLeft,document.documentElement.scrollTop]),c[0]>b[0]||c[1]>b[1]?c:b},b.getDocumentSize=function(){return[Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth),Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)]},b.isAboveWaterline=function(a,c){"undefined"==typeof c&&(c=0);var d=b.getOffset(a),e=b.getWindowSize();return d[1]+c<e[1]},b.tagFromSrc=function(a){var b,c=a.substr(a.lastIndexOf(".")+1).toLowerCase();switch(c){case"jpg":case"jpeg":case"gif":case"png":b=0;break;case"html":case"htm":case"php":b=1;break;case"swf":b=2;break;case"mp4":case"ogg":case"ogv":case"webm":b=3;break;default:b=/youtube|dailymotion/i.test(a)?3:1}return b},b.applyStyle=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c],"opacity"===c&&(a.style.filter="alpha(opacity="+Math.round(100*b[c])+")"))},b.applyVendorProperties=function(b,c,d){b.style[c]=d,c=a.helper.Util.capitalize(c),b.style["Moz"+c]=d,b.style["webkit"+c]=d,b.style["O"+c]=d,b.style["ms"+c]=d},b.readyIEtop=function(){try{var a=document.documentElement;a.doScroll("left");for(var c;c=b.readyQueue.shift();)c()}catch(d){setTimeout(b.readyIEtop,50)}},b.onDomReady=function(c){!document||"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState?a.helper.Dom.getWindow().addEventListener?a.helper.Dom.getWindow().addEventListener("DOMContentLoaded",c,!1):a.helper.Dom.getWindow().attachEvent&&window===a.helper.Dom.getWindow().top?1===b.readyQueue.push(c)&&b.readyIEtop():a.helper.Dom.getWindow().attachEvent&&a.helper.Dom.getWindow().attachEvent("onload",c):"interactive"===document.readyState&&document.attachEvent?document.attachEvent("onreadystatechange",function(){("complete"===document.readyState||"loaded"===document.readyState)&&c()}):c()},b.attach=function(a){var b=document.getElementsByTagName("script")[0];if(b&&b.parentNode)b.parentNode.insertBefore(a,b);else{var c=document.getElementsByTagName("head")[0],d=document.getElementsByTagName("body")[0];(c||d).appendChild(a)}},b.getOffset=function(b){var c=b.getBoundingClientRect(),d=a.helper.Dom.getWindow().pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,e=a.helper.Dom.getWindow().pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;return[c.left-d-document.documentElement.clientLeft,c.top+e-document.documentElement.clientTop]},b.addEvent=function(c,d,e,f){"undefined"==typeof f&&(f=!1);var g,h=e;if("load"===c){if("complete"===d.readyState||"loaded"===d.readyState)return void setTimeout(function(){return e(null)},1);if("undefined"!=typeof d.readyState)return void(d.onreadystatechange=function(){("complete"===d.readyState||"loaded"===d.readyState||"interactive"===d.readyState)&&(d.onreadystatechange=null,e(null))})}return f&&(g=e,e=function(a){b.removeEvent(c,d,e),h(a)}),a.helper.Context.isAndroid()&&(g=e,e=function(a){setTimeout(function(){return g(a)},300)}),"undefined"!=typeof d.addEventListener?void d.addEventListener(c,e,!0):void(b.HTML_EVENTS.indexOf(c)>-1?d.attachEvent("on"+c,function(b){"undefined"==typeof b&&(b=a.helper.Dom.getWindow().event),"undefined"!=typeof b&&(b.target=b.srcElement),e(b)}):(d[c]||(d[c]=[]),d[c].push({handler:e,call:function(){var a=document.createEventObject();a.target=d,a.type=c,e(a)}})))},b.removeEvent=function(a,c,d){if("undefined"!=typeof c.removeEventListener)c.removeEventListener(a,d,!0);else if(b.HTML_EVENTS.indexOf(a)>-1)c.detachEvent("on"+a,d);else for(var e=0;e<c[a].length;++e)c[a][e].handler===d&&c[a].splice(e,1)},b.dispatchEvent=function(c,d){if("function"==typeof a.helper.Dom.getWindow().event){var e=new Event;e.type=c,d.dispatchEvent(e)}else if(/MSIE [2-8]{1}/.test(navigator.userAgent))if(b.HTML_EVENTS.indexOf(c)>-1){var f=document.createEventObject();f.type=c,d.fireEvent("on"+f.type,f)}else{if(d[c])for(var g=0;g<d[c].length;++g)d[c][g].call();d!==document&&b.dispatchEvent(c,d.parentNode)}else{var h=document.createEvent("HTMLEvents");h.initEvent(c,!0,!0),d.dispatchEvent(h)}},b.centerMe=function(a,b,c){"undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=2);var d="px",e="px",f=a.offsetWidth,g=a.offsetHeight,h="%|px|em|pt";if(null===f||0===f){var i=a.style.width;i.match(h)&&(d=i.match(h)[0],f=parseFloat(i.replace(d,"")))}if(null===g||0===g){var j=a.style.height;j.match(h)&&(e=j.match(h)[0],g=parseFloat(j.replace(e,"")))}switch((2===c||0===c)&&(a.style.left="50%",a.style.marginLeft="-"+(f/2+d)),(2===c||1===c)&&(a.style.top="50%",a.style.marginTop="-"+(g/2+e)),b){case 0:a.style.position="absolute";break;case 1:a.style.position="fixed"}},b.createIframe=function(b){var c=document.createElement("iframe");return a.helper.Dom.applyStyle(c,{background:"transparent",border:0,width:b?b.width+"px":"100%",height:b?b.height+"px":"100%"}),c.setAttribute("allowTransparency","true"),c.border="0",c.frameBorder="0",c.scrolling="no",c.setAttribute("allowfullscreen","true"),c.setAttribute("webkitallowfullscreen","true"),c.setAttribute("mozallowfullscreen","true"),c},b.convertToDeviceSize=function(c){var d,e=[a.helper.Dom.getWindow().screen.availWidth,a.helper.Dom.getWindow().screen.availHeight],f=b.getWindowSize(),g={width:null,height:null,convertInPercent:c.convertInPercent};return a.helper.Context.isAndroidNative()?(c.convertInPercent&&c.width&&(c.width=100*c.width/f[0]),c.convertInPercent&&c.height&&(c.height=100*c.height/f[1]),c):(c.width&&(d=0===b.getOrientation()?0:1,g.width=c.width*f[d]/e[d],c.convertInPercent&&(g.width=100*g.width/f[d])),c.height&&(d=0===b.getOrientation()?1:0,g.height=c.height*f[d]/e[d],c.convertInPercent&&(g.height=100*g.height/f[d])),g)},b.getOrientation=function(){return"undefined"!=typeof a.helper.Dom.getWindow().orientation?0===a.helper.Dom.getWindow().orientation||180===a.helper.Dom.getWindow().orientation?0:1:void 0},b.addCssClass=function(a,c){for(var d=0;d<c.length;++d)b.hasCssClass(a,c[d])||(a.className+=""===a.className?c[d]:" "+c[d])},b.removeCssClass=function(a,c){for(var d=0;d<c.length;++d)if(b.hasCssClass(a,c[d])){for(var e=a.className.split(" "),f="",g=0;g<e.length;++g)f+=e[g]===c[d]?"":" "+e[g];a.className=f}},b.hasCssClass=function(a,b){return a.className.split(" ").indexOf(b)>-1},b.forceOrientation=function(c,d){"undefined"==typeof d&&(d=0),a.helper.Context.isMobile()&&b.addEvent("orientationchange",window,function(){var a=b.getWindowSize();0===b.getOrientation()?b.applyStyle(c,{"-webkit-transform-origin":"","-webkit-transform":"",width:"",height:""}):1===b.getOrientation()&&b.applyStyle(c,{"-webkit-transform-origin":a[0]/2+"px "+a[0]/2+"px","-webkit-transform":"rotate(90deg)",width:a[1]+"px",height:a[0]+"px"})})},b.openExternalPage=function(b){""!==b&&(a.helper.Context.isMraid()?window.mraid.open(b):a.helper.Context.isSdk()?EbzSDK.openBrowser({url:b}):window.open(b))},b.useCustomClose=function(){a.helper.Context.isSdk()?(EbzSDK.activityIndicator({show:"false"}),EbzSDK.webView({viewId:"mainView",closeButtonPos:0})):a.helper.Context.isMraid()&&window.mraid.useCustomClose(!0)},b.HTML_EVENTS=["load","unload","resize","scroll","blur","change","focus","reset","select","submit","abort","keydown","keypress","keyup","click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup"],b.readyQueue=[],b}());b.Dom=c}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){b.nextPlaylistId=b.nextPlaylistId||0;var c=function(){function c(c,d,e){this.campaigns=c,this.userData=e,this.logger=new a.helper.ConsoleLogger("Playlist"),this.videoIndex=0,this.id=b.nextPlaylistId++,this.findTarget(d),a.playlists[this.id]=this,this.parentContainer=this.container;for(var f in window._ebz)window._ebz.hasOwnProperty(f)&&window._ebz[f]&&"playlist"===window._ebz[f].name&&(window._ebz[f].id===this.id||"undefined"==typeof window._ebz[f].id)&&window._ebz[f].callback(!!c.length)}return c.prototype.next=function(){if(this.videoIndex>=this.campaigns.length)this.logger.warn("No more campaigns"),0===this.videoIndex&&(this.format=new a.format.Fallback(this.container,this.userData),a.core.publisherCallback(0));else{var b=this.campaigns[this.videoIndex++];this.loadVideo(b)}this.logger.info("player #"+this.id+":",this.format)},c.prototype.findTarget=function(b){if(b){var c=document.getElementById(b);if(!c)return this.logger.error("Specified target '"+b+"' not found"),void a.helper.ErrorTracker.fire(a.helper.ErrorTracker.PLAYLIST_TARGET_NOT_FOUND,b);if(!this.userData){var d="EbuzzingScriptParams_"+b.replace(/-/g,"_");if(window[d])this.userData=window[d];else if(window.EbuzzingScriptParams)this.userData=window.EbuzzingScriptParams;else try{this.userData=this.findUserTagScript(c.parentNode)[1],this.userData||(this.userData={})}catch(e){this.userData={}}this.userData.width||this.userData.size||(this.userData.width=c.offsetWidth),this.userData.height||this.userData.size||(this.userData.height=c.offsetHeight)}var f=c.style.display;"IFRAME"!==c.nodeName||f&&"none"!==f?"none"===f&&(f=""):f="inline-block",this.container=document.createElement("div"),a.helper.Dom.applyStyle(this.container,{position:c.style.position,top:c.style.top,left:c.style.left,display:f}),c.id&&(this.container.id=c.id),c.parentNode.replaceChild(this.container,c)}else{try{var g=this.findUserTagScript(document)}catch(e){return void a.helper.ErrorTracker.fire(a.helper.ErrorTracker.PLAYLIST_SCRIPT_TAG_NOT_FOUND)}var h=g[0];if(this.userData||(this.userData=g[1]?g[1]:{}),this.container=document.createElement("div"),this.container.id=a.PREFIX+this.id,document.body)h.parentNode.replaceChild(this.container,h);else{var i=Date.now()+Math.random();document.write('<div id="ebz_"'+i+'"></div>'),a.helper.Dom.onDomReady(function(){document.getElementById("ebz_"+i).appendChild(this.container)}),h.parentNode.removeChild(h)}}if(a.config.legacyParams){var j,k,l=["size","context"];for(j=0,k=l.length;k>j;j++)a.config.legacyParams[l[j]]&&(this.userData[l[j]]=a.config.legacyParams[l[j]]);!this.userData.tracking&&(a.config.legacyParams.view||a.config.legacyParams.click||a.config.legacyParams.share)&&(this.userData.tracking={});var m=["click","view","share"];for(j=0,k=m.length;k>j;j++)a.config.legacyParams[m[j]]&&(this.userData.tracking[m[j]]=a.config.legacyParams[m[j]]);var n=this.container.nextSibling;if(n&&1!==n.nodeType&&(n=n.nextSibling),n&&1===n.nodeType&&"A"===n.nodeName){var o=n.innerText||n.textContent;("wikio-widget-ebmini"===n.className||o.toLowerCase().indexOf("ebuzzing")>0)&&n.parentNode.removeChild(n)}var p=this.container.parentNode;-1!==p.className.indexOf("ebuzzing_box")&&"none"===p.style.display&&(p.style.display="block")}this.userData.origin&&(a.page.referer=this.userData.origin)},c.prototype.findUserTagScript=function(b){var c,d,e=b.getElementsByTagName("script"),f=e.length;if(0===e.length)throw new Error("cannot find a script tag");do c=e[--f],d=c.src;while(!c||!new RegExp(".ebu?z","i").test(c.src));var g=c.innerHTML.replace(/(^|\n|\s|\r)+\/\/.*/g,"").replace(/^\s+|\s+$/g,""),h=null;if(g)try{h=a.helper.Json.parse(g)}catch(i){this.logger.error("Cannot read user data for this player tag (incorrect object string): "+i,g),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.PLAYLIST_WRONG_USER_DATA,g)}return[c,h]},c.prototype.loadVideo=function(b){b.urls=a.helper.Util.merge(b.urls,a.config.urls),b.jsSuffix=a.config.jsSuffix,b.page=a.page,b.displaySettings.language="en",this.userData.lang?b.displaySettings.language=this.userData.lang:window.navigator&&(navigator.language?b.displaySettings.language=navigator.language.substr(0,2):navigator.userLanguage&&(b.displaySettings.language=navigator.userLanguage.substr(0,2))),b.displaySettings.debug=0===window.name.indexOf("ebz"),this.userData.hideFooter&&(b.displaySettings.hideFooter=!0),this.userData.hideHeader&&(b.displaySettings.hideHeader=!0),this.userData.isNative&&(b.displaySettings.isNative=!0),this.userData.unclickable&&(b.displaySettings.unclickable=!0),this.userData.noPause&&(b.displaySettings.noPause=!0);var c,d,e=Math.round(Date.now()/1e3).toString();if(b.tracking||(b.tracking={}),b.tracking.callbacks||(b.tracking.callbacks={view:[]}),this.userData.context){if(b.displaySettings.expand=null,b.displaySettings.miniExpand=null,this.userData.ebuzzingViewTrackingUrl&&b.tracking.callbacks.view)for(c=0,d=b.tracking.callbacks.view.length;d>c;c++)(1===b.tracking.callbacks.view[c].source||5===b.tracking.callbacks.view[c].source||4===b.tracking.callbacks.view[c].source)&&(b.tracking.callbacks.view[c].content=this.userData.ebuzzingViewTrackingUrl);var f=document.getElementsByTagName("a");for(c=0,d=f.length;d>c;c++)f[c].href=f[c].href.replace(/(\[|%5B)timestamp(\]|%5D)/gi,e)}if(this.userData.tracking){var g,h,i=["click","view","pause","share","start"];for(c=0,d=i.length;d>c;c++)if(g=this.userData.tracking[i[c]]){h="string"==typeof g?[g]:g;for(var j,k=0,l=h.length;l>k;k++)j=0===h[k].indexOf("http")?{content:h[k].replace(/^https?:/i,""),mode:1,source:3}:{content:h[k],mode:2,source:3},b.tracking.callbacks[i[c]].push(j)}}if(b.displaySettings.clientUrl&&(b.displaySettings.clientUrl=b.displaySettings.clientUrl.replace(/(\[|%5B)timestamp(\]|%5D)/gi,e)),b.displaySettings.isMobile=a.helper.Context.isMobile(),this.userData.noControls&&(b.displaySettings.noControls=!0),this.userData.startMode&&(b.displaySettings.startMode=this.userData.startMode),this.userData.skippable&&(b.displaySettings.showSkipButton=!0,b.displaySettings.autoSkip=!0),this.userData.isPreroll&&(b.displaySettings.showSkipButton=!0,b.displaySettings.autoSkip=!0,b.displaySettings.hideFooter=!0,b.displaySettings.miniExpand=null),b.displaySettings.isNative&&(b.displaySettings.expand=null,b.displaySettings.miniExpand=null,b.displaySettings.hideFooter=!0,b.dimension&&b.dimension.width&&b.dimension.height)){b.displaySettings.dimension||(b.displaySettings.dimension={width:this.userData.width,height:this.userData.height});var m=b.displaySettings.dimension.width*b.dimension.height/b.dimension.width;b.displaySettings.dimension.height=Math.round(m)}var n,o=!1,p=a.helper.Dom.getWindowSize();if(b.displaySettings.expand&&!b.displaySettings.expand.customContent&&(n=b.displaySettings.expand.dimension.width+"x"+b.displaySettings.expand.dimension.height,p[0]<.7*b.displaySettings.expand.dimension.width?o=!0:p[1]<.7*b.displaySettings.expand.dimension.height&&(o=!0)),b.displaySettings.miniExpand&&(n=a.format.ElasticoBuzzplayer.SIZE.width+"x"+a.format.ElasticoBuzzplayer.SIZE.height,(p[0]<a.format.ElasticoBuzzplayer.SIZE.width||p[1]<a.format.ElasticoBuzzplayer.SIZE.height)&&(o=!0)),o){var q=p[0]+"x"+p[1];this.logger.warn("Expand has not enough room to show up: needs "+n+", got "+q+" (campaign "+b.campaign.id+", buzz "+b.buzzID+")"),b.displaySettings.expand=null,b.displaySettings.miniExpand=null,b.displaySettings.startMode=1,a.isIframed&&(this.container.parentNode.removeChild(this.container),a.helper.Dom.applyStyle(this.container,{position:"absolute",top:0,left:0,width:p[0]+"px",height:(p[1]<p[0]?p[1]:p[0])+"px"}),document.body.style.overflow="hidden",document.body.appendChild(this.container))}if(b.displaySettings.expand){this.userData.tracking&&(b.displaySettings.expand.url+="&publisherTracking="+encodeURIComponent(a.helper.Json.stringify(this.userData.tracking))),this.userData.lang&&(b.displaySettings.expand.url+="&lang="+this.userData.lang),a.page.referer&&(b.displaySettings.expand.url+="&origin="+encodeURIComponent(a.page.referer)),0===window.name.indexOf("ebz")&&(b.displaySettings.expand.url+="&debug=1"),"flash"===this.userData.version&&(b.displaySettings.expand.url+="&version=flash"),this.userData.nocache&&(b.displaySettings.expand.url+="&nocache=1");var r=function(){this.displaySettings.expand.customContent&&!this.displaySettings.expand.lead&&(a.core.advertiserViewTrackingTimeout=setTimeout(function(){a.helper.Tracker.fire(this.tracking.callbacks.view,{sizeId:this.displaySettings.dimension.id,position:this.tracking.delay,replay:0,referer:encodeURIComponent(this.page.url)},[2,4,1])}.bind(this),1e3*this.tracking.advertiserDelay),a.core.publisherViewTrackingTimeout=setTimeout(function(){a.helper.Tracker.fire(this.tracking.callbacks.view,{sizeId:this.displaySettings.dimension.id,position:this.tracking.delay,replay:0,referer:encodeURIComponent(this.page.url)},[3,5])}.bind(this),1e3*this.tracking.publisherDelay),a.helper.Tracker.fire(this.tracking.callbacks.start,{}))}.bind(b);this.format=b.displaySettings.miniExpand?new a.format.ElasticoRichMedia(b,this.id,this.container,this.userData,r):4===b.displaySettings.expand.startMode?new a.format.RichMediaInline(b,this.id,this.container,this.userData,r):new a.format.RichMediaExpand(b,this.id,this.container,this.userData,r)}else if(b.displaySettings.miniExpand)this.format=new a.format.ElasticoBuzzplayer(b,this.id,this.container,this.userData),this.format.player.addListener("nextVideo",this.next.bind(this));else if(b.displaySettings.isNative){var s=!1,t=null,u=document.getElementById(a.PREFIX+"Native_above");u&&(b.displaySettings.nativeAboveWaterline?u.parentNode.replaceChild(this.container.parentNode,u):u.parentNode.removeChild(u)),3===b.displaySettings.startMode&&(t=b.tracking.callbacks.start,b.tracking.callbacks.start=new Array,(4===b.mediaProvider||5===b.mediaProvider)&&(b.displaySettings.startMode=1,s=!0)),this.format=new a.format.NativeBuzzplayer(b,this.id,this.container,this.userData,t,s)}else this.format=new a.format.Buzzplayer(b,this.id,this.container,this.userData),this.format.player.addListener("nextVideo",this.next.bind(this));this.handleCampaignEvent(this.container,b)},c.prototype.handleCampaignEvent=function(b,c){var d=function(d){var e={cid:d,target:String(b.id)},f="EbuzzingScriptParams_"+e.target.replace(/-/g,"_");window[f]={width:c.displaySettings.dimension.width,height:c.displaySettings.dimension.height,size:c.displaySettings.dimension.id},window.EbuzzingScriptParams=window[f];var g;c.publisherChannel?(g=a.config.routes.seed,e.pid=c.publisherChannel.id):g=a.config.routes.campaign;var h=document.createElement("script");h.async=!0,h.defer=!0,h.src=c.urls.player+a.helper.Util.format(g,e),a.helper.Dom.attach(h)}.bind(this);this.format&&this.format.player&&this.format.player.addListener("campaign",d)},c}();b.Playlist=c}(a.core||(a.core={}));a.core}(ebz||(ebz={}));var ebz;!function(a){!function(b){b.advertiserViewTrackingTimeout=null,b.publisherViewTrackingTimeout=null;var c=function(){function b(b,c,d,e){"undefined"==typeof e&&(e={}),this.data=b,this.parentContainer=d,this.userData=e,this.logger=new a.helper.ConsoleLogger(this.constructor.name||"Placeful"),this.data.id=c,this.userData.width&&this.userData.height?this.data.displaySettings.dimension={id:this.userData.size&&a.config.playerSizes[this.userData.size]?this.userData.size:7,width:this.userData.width,height:this.userData.height}:this.userData.size&&a.config.playerSizes&&a.config.playerSizes[this.userData.size]?this.data.displaySettings.dimension=a.config.playerSizes[this.userData.size]:this.data.displaySettings.dimension&&this.data.displaySettings.dimension.width&&this.data.displaySettings.dimension.height||(this.data.displaySettings.dimension={id:15,width:560,height:315}),this.parentContainer.innerHTML="",this.parentContainer.id||(this.parentContainer.id=a.PREFIX+"Parent"+c),a.helper.Dom.applyStyle(this.parentContainer,{width:this.data.displaySettings.dimension.width+"px",height:this.data.displaySettings.dimension.height+"px",overflow:"hidden",backgroundColor:"black"})}return b}();b.Placeful=c}(a.core||(a.core={}));a.core}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(){}return b.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},b.camelcase=function(a){for(var c=a.split("_"),d="",e=0;e<c.length;e++)d+=b.capitalize(c[e]);return d},b.clone=function(a){if(null===a||"object"!=typeof a)return a;var b=Object.prototype.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},b.merge=function(b,c){if(!b)return c;if(!c)return b;var d=a.helper.Util.clone(c);for(var e in b)!b.hasOwnProperty(e)||null===b[e]&&"undefined"!=typeof d[e]||(d[e]=b[e]);return d},b.format=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a=a.replace("{"+c+"}",b[c]));return a},b.addProtocol=function(a){return 0===a.indexOf("//")?("https:"===window.location.protocol?"https:":"http:")+a:a},b.hashString=function(a){var b,c,d,e=0;if(0===a.length)return e.toString();for(b=0,d=a.length;d>b;b++)c=a.charCodeAt(b),e=(e<<5)-e+c,e|=0;return e.toString()
},b.isYoutubeUrl=function(a){return/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/.test(a)},b}();b.Util=c}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c;!function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.USER=1]="USER",a[a.AUTO=2]="AUTO",a[a.SELECTOR=3]="SELECTOR"}(c||(c={}));var d=function(){function b(b,c,d,e){this.channelId=b,this.campaignId=c,this.nativeSelectors=d,this.nativeInBoardSelectors=e,this.bestSpot={score:0,node:null},this.logger=new a.helper.ConsoleLogger("Native"),this.raisedHtml5Error=!1,!b&&a.helper.Dom.getWindow().EbuzzingChannelId&&(this.channelId=a.helper.Dom.getWindow().EbuzzingChannelId)}return b.prototype.init=function(){return a.helper.Dom.getWindow().EbuzzingNative?void this.logger.error("Native already launched"):this.channelId?(a.helper.Dom.onDomReady(function(){this.searchNativePlacement()}.bind(this)),void(a.helper.Dom.getWindow().EbuzzingNative=!0)):void this.logger.error("No channel ID provided")},b.prototype.searchNativePlacement=function(){var a=null,b=null;this.nativeSelectors&&(a=this.insertTag(this.nativeSelectors,"Native")),this.nativeInBoardSelectors&&(b=this.insertTag(this.nativeInBoardSelectors,"NativeInBoard")),(a||b)&&this.addFormatScript(a,b)},b.prototype.throwHtml5Error=function(b){if(this.raisedHtml5Error===!1){this.logger.error("Your browser could not read this tag, probably because it is an HTML5 tag and the polyfill has not been executed before the tag was read");var c={name:b.nodeName,id:b.id,"class":b.className};a.helper.ErrorTracker.fire(a.helper.ErrorTracker.NATIVE_UNKNOWN_TAG,c),this.raisedHtml5Error=!0}},b.prototype.findBestSpot=function(c){try{c instanceof HTMLUnknownElement&&!this.raisedHtml5Error&&this.throwHtml5Error(c)}catch(d){this.throwHtml5Error(c)}var e,f,g={length:0,currentScore:0,childrenScore:0,minWidthReach:!1},h=c.innerText||c.textContent||c.nodeValue;if(h&&(3===c.nodeType||b.textNodes[c.nodeName.toUpperCase()]))g.length=h.replace(/\s+/g," ").length;else if(c===a.helper.Dom.getWindow().document.body||1===c.nodeType&&b.nodeScores[c.nodeName.toUpperCase()]){var i=0,j=0;for(e=0,f=c.childNodes.length;f>e;e++){var k=this.findBestSpot(c.childNodes[e]);i+=k.length,j+=k.currentScore,(k.minWidthReach||c.offsetWidth>=b.MINIMUM_WIDTH)&&(g.minWidthReach=!0)}g.currentScore=i,g.childrenScore=j}if(g.childrenScore&&g.minWidthReach&&g.childrenScore>b.MINIMUM_CHARS){var l,m=b.nodeScores[c.nodeName.toUpperCase()]||0,n=c.className.split(" "),o=1;for(e=0,f=n.length;f>e;e++)l=n[e].replace(/^\s+|\s+$/g,""),o+=b.classBonuses[l]||0;var p=g.childrenScore*m*o;p>this.bestSpot.score&&(this.bestSpot={score:p,node:c},this.logger.info("found a better node scoring "+this.bestSpot.score,this.bestSpot.node))}return g},b.prototype.addFormatContainer=function(b,c,d){var e=a.helper.Dom.getWindow().document.createElement("center");a.helper.Dom.applyStyle(e,{overflow:"hidden",width:"100%",height:0,margin:"auto"});var f,g=navigator.browserLanguage?navigator.browserLanguage:navigator.language;switch(g.substr(0,2)){case"de":f="WERBUNG";break;default:f="de"===window.location.host.split(".")[2]?"WERBUNG":"ADVERTISEMENT"}var h=a.helper.Dom.getWindow().document.createElement("div");a.helper.Dom.applyStyle(h,{textAlign:"center",fontSize:"10px",color:"#888888",paddingTop:"10px",paddingBottom:"5px"}),h.style.textAlign="center",h.innerHTML=f,e.appendChild(h);var i=a.helper.Dom.getWindow().document.createElement("div");if(i.id=a.PREFIX+c,e.appendChild(i),b.beforeElement?b.beforeElement.parentNode.insertBefore(e,b.beforeElement):b.containerElement.appendChild(e),d&&d.maxWidth){var j=d.maxWidth;e.style.maxWidth=j+"px"}return e},b.prototype.addFormatScript=function(c,d){var e="0";c&&(a.helper.Dom.getWindow()["EbuzzingScriptParams_"+c.children[1].id.replace(/-/g,"_")]={isNative:!0,width:c.offsetWidth,height:Math.round(c.offsetWidth/b.ASPECT_RATIO)},a.helper.Dom.isAboveWaterline(c)?(this.logger.debug("Can only display 'above the waterline' campaigns",c),e="1"):this.logger.debug("Tag is bellow the waterline",c)),d&&(a.helper.Dom.getWindow()["EbuzzingScriptParams_"+d.children[1].id.replace(/-/g,"_")]={isNative:!0,width:d.offsetWidth,height:Math.round(d.offsetWidth/b.ASPECT_RATIO)});var f,g={pid:this.channelId,cid:this.campaignId,target:c?c.children[1].id:"",targetInBoard:d?d.children[1].id:"",scriptType:"native",publisherTracking:a.config.publisherTracking?decodeURI(a.config.publisherTracking):"",onlyAboveWaterlineCampaigns:e},h=a.helper.Dom.getWindow().document.createElement("script");f=this.campaignId?a.config.routes.seed:a.config.routes.feed,h.src=a.config.urls.player+a.helper.Util.format(f,g),this.logger.debug("Embed Buzzplayer:",c?c.id:"",d?d.id:"",h.src),a.helper.Dom.attach(h)},b.prototype.insertTag=function(c,d,e){"undefined"==typeof e&&(e=0);var f=null,g=this.getSpotPosition(c,d);if(g&&g.containerElement){if(2===g.type){this.logger.debug("Using automatic positionning:",g.containerElement,"Inserting before:",g.beforeElement);var h=g.containerElement.children||g.containerElement.childNodes,i=h[0],j=a.helper.Dom.getWindow().document.createElement("div");j.id=a.PREFIX+"Native_above",i.parentNode.insertBefore(j,i)}f=this.addFormatContainer(g,d,c)}else e<b.RETRY_ATTEMPTS?setTimeout(function(){this.logger.warn("Native, retry insertTag",e),this.insertTag(c,d,++e)}.bind(this),1e3):(this.logger.warn("No add, no more attempts"),a.core.publisherCallback(0));return f},b.prototype.getSpotPosition=function(c,d){this.logger.warn("getSpotPosition()");var e={containerElement:null,beforeElement:null,type:0},f=this.findUserTarget(d);if(f)this.logger.info("User mode",f),e.type=1,e.containerElement=f;else if(c&&!c.allowHomePage&&""===location.pathname.replace(/^\/|\/$/g,""))this.logger.warn("Not on homepage"),a.core.publisherCallback(0);else{if(c&&c.selectors){var g,h;for(g=0,h=c.selectors.length;h>g;g++){var i=c.selectors[g];if(f=this.findSelectorTarget(i)){switch(e.type=3,i.position){case"before":e.containerElement=f.parentNode,e.beforeElement=f;break;case"after":e.containerElement=f.parentNode,e.beforeElement=f.nextSibling;break;case"append":e.containerElement=f;break;case"prepend":e.containerElement=f,e.beforeElement=f.firstChild;break;default:this.logger.error("Position '"+i.position+"' unknown => unable to insert Native around this element:",f)}break}}this.logger.info("Selector mode",c,f)}if(!f)if(c&&c.selectorsFallback===!1)this.logger.warn("No selector match, and EbuzzingNativeSelectorsFallback is false => no action taken"),a.core.publisherCallback(0);else if(this.findBestSpot(a.helper.Dom.getWindow().document.body),f=this.bestSpot.node,this.logger.info("Automatic mode",f),this.bestSpot.score>=b.MINIMUM_SCORE)this.logger.info("OK: score="+this.bestSpot.score,f),e.beforeElement=this.findNodeJustUnderWaterline(f),e.beforeElement&&(e.containerElement=e.beforeElement.parentNode,e.type=2);else{var j="maximum score found is "+this.bestSpot.score+", minimum required is "+b.MINIMUM_SCORE;this.logger.warn("no good container found ("+j+")",f)}}return e},b.prototype.findUserTarget=function(b){var c=a.helper.Dom.getWindow().document.getElementsByClassName("ebz"+b);return 0===c.length?null:c[0]},b.prototype.findSelectorTarget=function(b){var c=null,d=a.helper.Dom.getWindow().document.querySelectorAll(b.parentQuery);return d.length&&(c=b.parentIndex?b.parentIndex>=d.length?d[d.length-1]:d[b.parentIndex-1]:d[0],b.childQuery&&(d=c.querySelectorAll(b.childQuery),c=d.length?b.childIndex?b.childIndex>=d.length?d[d.length-1]:d[b.childIndex-1]:d[0]:null)),this.logger.debug("Selector "+b+" matches:",c),c},b.prototype.findNodeJustUnderWaterline=function(b){var c,d,e,f=b.children||b.childNodes,g=a.helper.Dom.getWindowSize()[1]+a.helper.Dom.getWindowScroll()[1],h=0;e=f[0];do c=f[h++],d=a.helper.Dom.getOffset(c)[1];while(f[h]&&(g>d||3===c.nodeType));if(g>d&&(c.children||c.childNodes)&&(c.children||c.childNodes).length>0){b=c,f=b.children||b.childNodes;do c=f[h],d=a.helper.Dom.getOffset(c)[1];while(f[h++]&&(g>d||3===c.nodeType))}return c},b.MINIMUM_SCORE=5e3,b.MINIMUM_CHARS=500,b.MINIMUM_WIDTH=320,b.ASPECT_RATIO=16/9,b.RETRY_ATTEMPTS=6,b.nodeScores={DIV:10,P:4,ARTICLE:20,SECTION:5,SPAN:2,FORM:4,STRONG:2,EM:3,B:1,I:1,U:1,MAIN:2},b.textNodes={SPAN:!0,STRONG:!0,EM:!0,B:!0,I:!0,U:!0},b.classBonuses={article:4,"ob-text":6,"ob-section-html":4,contenuArticle:6},b}();b.Native=d}(a.core||(a.core={}));a.core}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(b,c,d){"undefined"==typeof c&&(c=!1),"undefined"==typeof d&&(d=!1),this.channelId=b,this.preroll=c,this.postroll=d,this.videoNodes={Youtube:[],Jwplayer:[]},this.replacedNodes={Youtube:{},Jwplayer:{}},this.youtubeLoading=!1,this.jwplayerLoading=!1,this.trackingPixels={INSTANCIATED_API:7576859,PLAYER_START:7576861,PLAYER_END:7576862},this.logger=new a.helper.ConsoleLogger("Roll"),!b&&window.EbuzzingChannelId&&(this.channelId=window.EbuzzingChannelId),c||d||(window.EbuzzingPostroll||window.EbuzzingPreroll?(this.preroll=window.EbuzzingPreroll,this.postroll=window.EbuzzingPostroll):this.postroll=!0),window.onYouTubeIframeAPIReady=this.onYouTubeIframeAPIReady.bind(this),window.onJwplayerReady=this.onJwplayerReady.bind(this)}return b.prototype.init=function(){if(!this.channelId)return void this.logger.error("No channel ID provided");a.helper.Dom.onDomReady(this.replacePlayers.bind(this)),a.helper.Dom.addEvent("load",window,this.replacePlayers.bind(this));setInterval(this.replacePlayers.bind(this),500)},b.prototype.fireTracking=function(b){var c=new Image;c.src=a.helper.Util.addProtocol("//ww17.smartadserver.com/call/pubimppixel/"+b+"/"+Math.round(Date.now()/1e3)+"?")},b.prototype.embedBuzzPlayer=function(b,c){window["EbuzzingScriptParams_"+b.id.replace(/-/g,"_")]={noreplace:!0,isPreroll:"preroll"===c};var d={pid:this.channelId,target:b.id,scriptType:c};a.helper.Context.isOldIE()&&(b.style.display="none");var e=document.createElement("script");e.src=a.config.urls.player+a.helper.Util.format(a.config.routes.feed,d),a.helper.Dom.attach(e)},b.prototype.reEmbedYT=function(a){a.api=new window.YT.Player(a.ref.id,{videoId:a.id,width:a.width,height:a.height,playerVars:{autoplay:1},events:{onStateChange:function(a){var b=a.target.getIframe();a.data===window.YT.PlayerState.ENDED&&(this.fireTracking(this.trackingPixels.PLAYER_END),this.postroll&&this.embedBuzzPlayer(b,"postroll"))}.bind(this)}})},b.prototype.addNode=function(a,b,c){if("hooked"!==b.getAttribute("data-ebz-roll")&&!/EbzRoll/.test(b.id)){if("Jwplayer"===a)b.setAttribute("data-ebz-roll","hooked");else{var d=document.createElement("div");d.setAttribute("width",String(b.offsetWidth)),d.setAttribute("height",String(b.offsetHeight)),b.parentNode.replaceChild(d,b),b=d,b.id=a+"EbzRoll"+this.videoNodes[a].length}this.videoNodes[a].push({ref:b,id:c,width:parseInt(b.getAttribute("width"),10)||b.offsetWidth,height:parseInt(b.getAttribute("height"),10)||b.offsetHeight}),this.logger.info("Added a "+a+" video ("+c+") to videoNodes for pre/post roll",b)}},b.prototype.replacePlayers=function(){var b,c,d,e,f=document.getElementsByTagName("iframe");for(b=0,c=f.length;c>b;b++)if(f[b]&&f[b].src)switch(d=f[b].src,!0){case!!(e=d.match(/youtube\.com\/embed\/([A-Za-z0-9_\-]+)/i)):this.addNode("Youtube",f[b],e[1])}var g,h=document.getElementsByTagName("object");for(b=0,c=h.length;c>b;b++)if(h[b]){if(g=h[b].getAttribute("data"),!g){var i=h[b].getElementsByTagName("embed");i.length&&(g=i[0].getAttribute("src"))}switch(!0){case!(!g||!(e=g.match(/youtube\.com\/v\/([A-Za-z0-9_\-]+)/i))):this.addNode("Youtube",h[b],e[1]);break;case!(!g||-1===g.indexOf("jwplayer")):this.addNode("Jwplayer",h[b])}}var j;this.videoNodes.Youtube.length&&(window.YT&&window.YT.Player?this.onYouTubeIframeAPIReady():this.youtubeLoading||(this.youtubeLoading=!0,j=document.createElement("script"),j.src=a.helper.Util.addProtocol("//www.youtube.com/iframe_api"),a.helper.Dom.attach(j))),this.videoNodes.Jwplayer.length&&(window.jwplayer?this.onJwplayerReady():this.jwplayerLoading||(this.jwplayerLoading=!0,j=document.createElement("script"),j.src=a.helper.Util.addProtocol("//cdn1.static.videobash.com/js/jwplayer.js"),a.helper.Dom.attach(j)))},b.prototype.onYouTubeIframeAPIReady=function(){for(var b;b=this.videoNodes.Youtube.shift();)b.api=new window.YT.Player(b.ref.id,{videoId:b.id,width:b.width,height:b.height,events:{onStateChange:function(b){var c=b.target.getIframe();b.data===window.YT.PlayerState.ENDED&&(this.fireTracking(this.trackingPixels.PLAYER_END),this.postroll&&this.embedBuzzPlayer(c,"postroll")),b.data===window.YT.PlayerState.PLAYING&&(!b.target||b.target.getCurrentTime()<.5)&&(this.fireTracking(this.trackingPixels.PLAYER_START),this.preroll&&(this.replacedNodes.Youtube[a.core.nextPlaylistId]=this.replacedNodes.Youtube[c.id],this.embedBuzzPlayer(c,"preroll")))}.bind(this)}}),this.preroll&&(this.replacedNodes.Youtube[b.ref.id]=b,window.Ebuzzing.addEventListener("skipRequest",function(a,b,c){this.reEmbedYT(this.replacedNodes.Youtube[c])}.bind(this))),this.fireTracking(this.trackingPixels.INSTANCIATED_API),this.logger.info("instanciated a YT.Player from videoNodes",b,this.preroll)},b.prototype.onJwplayerReady=function(){if(this.postroll){window.Ebuzzing.addEventListener("videoReady",function(){window.stopRelatedVideo&&window.stopRelatedVideo()});for(var a;a=this.videoNodes.Jwplayer.shift();)a.api=window.jwplayer(a.ref.id),a.api.onPlay(function(){this.fireTracking(7576861)}.bind(this)),a.api.onComplete(function(a){this.fireTracking(7576862),this.embedBuzzPlayer(a,"postroll")}.bind(this,a.ref)),this.fireTracking(7576859),this.logger.info("hooked on a JWPlayer from videoNodes",a)}},b}();b.Roll=c}(a.core||(a.core={}));a.core}(ebz||(ebz={}));var ebz;!function(a){!function(b){b.distributionCallbacks=[],window._comscore=window._comscore||[];var c=function(){function c(b){this.currentCallbackId=0,this.logger=new a.helper.ConsoleLogger("Distribution"),this.apis={hasDeal:[],getDeal:[],getBuzzInfo:["buzz_id"],showDeal:[]},this.logger.info("Initialized API"),this.legacy="undefined"!=typeof b?b:!1,window.ebuzzing=window.ebuzzing||{},window.ebuzzing.init=this.init.bind(this),window.ebuzzing.getHasDeal=this.load.bind(this,"hasDeal"),window.ebuzzing.getDeal=this.load.bind(this,"getDeal"),window.ebuzzing.showFeedChannel=this.showFeed.bind(this),window.ebuzzing.showSeedBuzz=this.showSeed.bind(this);for(var c in this.apis)this.apis.hasOwnProperty(c)&&(this[c]=this.load.bind(this,c),window.ebuzzing[c]=this.load.bind(this,c));window.ebzDistributionInitCallback&&window.ebzDistributionInitCallback()}return c.prototype.init=function(a,b){this.userId=a,this.token=b},c.prototype.load=function(c,d,e){if(!this.userId||!this.token)return void this.logger.error("You must initialize the API with your user ID and token");if(!e)return void this.logger.error("You must provide a callback function");var f=this.apis[c];if(!f)return void this.logger.error("Unexisting API: "+c);var g=this.currentCallbackId++;b.distributionCallbacks[g]=function(a,b){b.error?this.logger.error(b.error.message||b.error):a.bind(this)(b)}.bind(this,e);var h=["legacy="+(this.legacy?"1":"0"),"user_id="+this.userId,"token="+this.token,"format=json","callback=ebz.core.distributionCallbacks["+g+"]","ts="+Date.now()];d=d||{};for(var i in d)!d.hasOwnProperty(i)||-1===f.indexOf(i)&&0!==f.length||h.push(i+"="+encodeURIComponent(d[i]));var j=document.createElement("script");j.src=a.config.urls.api+"/"+c+"?"+h.join("&"),a.helper.Dom.attach(j)},c.prototype.comscore=function(){window._comscore.push({c1:"8",c2:"9881420",c3:"1000000000000000000"});var b=document.createElement("script");b.async=!0,b.src=("https:"===window.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",a.helper.Dom.attach(b)},c.prototype.embed=function(c,d,e,f,g,h){var i,j,k,l;if(l=a.helper.Util.clone(h),l.tracking)for(i in l.tracking)if(l.tracking.hasOwnProperty(i)){"object"!=typeof l.tracking[i]&&(l.tracking[i]=[l.tracking[i]]);for(j in l.tracking[i])l.tracking[i].hasOwnProperty(j)&&"function"==typeof l.tracking[i][j]&&(k=this.currentCallbackId++,b.distributionCallbacks[k]=l.tracking[i][j],l.tracking[i][j]="ebz.core.distributionCallbacks["+k+"]()")}if(l.events)for(i in l.events)l.events.hasOwnProperty(i)&&"function"==typeof l.events[i]&&window.Ebuzzing.addEventListener(i,l.events[i]);var m=[];if(l.playerUrlParams){for(i in l.playerUrlParams)l.playerUrlParams.hasOwnProperty(i)&&m.push(i+"="+encodeURIComponent(decodeURIComponent(l.playerUrlParams[i])));delete l.playerUrlParams}window.EbuzzingScriptParams=l;var n=a.config.routes[c]+"&relayparams=1&game=1&force=1";m.length>0&&(n+="&"+m.join("&"));var o={target:g,pid:d,cid:e,id:f},p=document.createElement("script");p.src=a.config.urls.player+a.helper.Util.format(n,o).replace(/[&\?][^&^\?]+={[^\}]*\}/g,""),a.helper.Dom.attach(p)},c.prototype.showSeed=function(a,b,c){var d=/^(\d+)_(\d+)$/.exec(a);d?this.embed("seed",parseInt(d[1],10),parseInt(d[2],10),null,b,c):this.embed("buzz",null,null,parseInt(a,10),b,c)},c.prototype.showFeed=function(a,b,c){var d=parseInt(a,10);this.legacy&&4e5>d&&(d+=4e5),this.embed("feed",d,null,null,b,c)},c}();b.Distribution=c}(a.core||(a.core={}));a.core}(ebz||(ebz={}));var ebz;!function(a){!function(a){!function(a){a[a.JAVASCRIPT=2]="JAVASCRIPT",a[a.PIXEL=1]="PIXEL"}(a.FormatCallbackMode||(a.FormatCallbackMode={}));a.FormatCallbackMode;!function(a){a[a.BILLABLE_PUBLISHER=1]="BILLABLE_PUBLISHER",a[a.AFFICHAGE_CAMPAGNE=3]="AFFICHAGE_CAMPAGNE",a[a.AFFICHAGE_CREA=4]="AFFICHAGE_CREA",a[a.BILLABLE_ADVERTISER=2]="BILLABLE_ADVERTISER",a[a.BILLABLE_MIXTE=0]="BILLABLE_MIXTE"}(a.TrackingImpression||(a.TrackingImpression={}));a.TrackingImpression}(a.thrift||(a.thrift={}));a.thrift}(ebz||(ebz={}));var ebz;!function(ebz){!function(helper){var Tracker=function(){function Tracker(){}return Tracker.fire=function(resources,replacements,filterSources,sendOnce){if("undefined"==typeof filterSources&&(filterSources=[]),"undefined"==typeof sendOnce&&(sendOnce=!1),resources){for(var timestamp=String(Math.round(Date.now()/1e3)),random=timestamp+ebz.PREFIX+Math.round(1e4*Math.random()),i=0,length=resources.length;length>i;i++){var resource=resources[i];if(!filterSources.length||-1!==filterSources.indexOf(resource.source)){var content=resource.content.replace(/(\[|%5B)timestamp(\]|%5D)/gi,timestamp).replace(/(\[|%5B)random(\]|%5D)/gi,random);if(1===resource.mode){if(resource.content===content){var separator=-1===content.indexOf("?")?"?":"&";content+=separator+"ts="+timestamp}replacements.logId=random,content=ebz.helper.Util.format(content,replacements);var img=new Image;img.src=content}else if(2===resource.mode)try{eval(content)}catch(e){this.logger.error("Error when trying to execute Javascript tracking: "+e+"\nJavascript was: "+content),ebz.helper.ErrorTracker.fire(ebz.helper.ErrorTracker.TRACKER_JS_TRACKING,content,null,e)}else this.logger.error("Wrong impression tracking resource:",resource),ebz.helper.ErrorTracker.fire(ebz.helper.ErrorTracker.TRACKER_IMPRESSION,resource)}}sendOnce&&resources.splice(0,resources.length)}},Tracker.impression=function(a,b,c){var d=[];if(a.tracking||(a.tracking={}),a.tracking.callbacks||(a.tracking.callbacks={impression:[]}),c)a.tracking.callbacks.impression&&(d=a.tracking.callbacks.impression);else{var e,f,g=a.tracking.callbacks.impression;if(g)for(e=0,f=g.length;f>e;e++)1===g[e].source&&d.push(g[e]);var h=a.tracking.callbacks.expandTeaserImpression;if(h)for(e=0,f=h.length;f>e;e++)d.push(h[e])}if(Tracker.fire(d,{type:b}),a.tracking.adloox&&a.publisherChannel&&"http:"===window.location.protocol){window.adloox_alerte_id=a.campaign.domain.code+"_"+a.publisherChannel.id;var i=document.createElement("script");i.src=ebz.helper.Util.addProtocol("//j.adlooxtracking.com/ads/js/tfa_ebuzz_creaebz.js"),ebz.helper.Dom.attach(i)}},Tracker.logger=new ebz.helper.ConsoleLogger("Tracker"),Tracker.SocialTypes={SINGLE:2,EXPAND:5},Tracker}();helper.Tracker=Tracker}(ebz.helper||(ebz.helper={}));var helper=ebz.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(b,c,d,e){this.data=b,this.container=c,this.version=d,this.context=e,this.logger=new a.helper.ConsoleLogger("VideoPlayer"),this.initContainer(),this.data.urls.alternate&&0===this.data.urls.alternate.length&&(this.data.urls.alternate=null),4===this.data.mediaProvider?this.loadVast():this.loadBuzzplayer()}return b.getVideoCampaign=function(c,d,e,f){"undefined"==typeof d&&(d=null),"undefined"==typeof e&&(e=3),"undefined"==typeof f&&(f=!1);var g=a.helper.Util.merge({displaySettings:{startMode:e,showSkipButton:f,dimension:{type:2}},id:b.INC_ID},a.config);return d&&(g.tracking={callbacks:{start:d.videoStart||[],firstQuartile:d.video25||[],midpoint:d.video50||[],thirdQuartile:d.video75||[],complete:d.videoEnd||[]}}),b.INC_ID++,-1!==c.indexOf("youtube.com/watch?v=")?(g.mediaProvider=2,g.youtubeVideo={id:c.split("/watch?v=")[1],activateAnnotations:!1,url:c,optimize:!1}):-1!==c.indexOf("dailymotion.com/video/")?(g.mediaProvider=3,g.dailymotionVideo={id:c.split("video/")[1],url:c,activateAnnotations:!1}):"mp4"===c.slice(-3)?(g.mediaProvider=1,g.ebuzzingVideo={mp4:c,ogv:null}):"xml"===c.slice(-3)&&(g.mediaProvider=4,g.vastVideo={url:c,activateAnnotations:!0}),g},b.prototype.addListener=function(a,b){window.Ebuzzing.addEventListener(a,b,this.data.id)},b.prototype.triggerEvent=function(b,c){try{"undefined"!=typeof c&&-1===b.indexOf(":")&&(b+=":"+c),this.flash?this.playerContainer.triggerEvent(b):(b="api:"+b,"undefined"!=typeof this.iframe.contentWindow&&null!=this.iframe.contentWindow&&this.iframe.contentWindow.postMessage(b,"*"))}catch(d){this.logger.error("triggerEvent('"+b+"') error: "+d),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.BP_TRIGGER_EVENT,null,this.data,d)}},b.prototype.executeJavascriptInFrame=function(a){this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.postMessage("javascript:"+a,"*")},b.prototype.initContainer=function(){this.playerContainer=document.createElement("div"),this.playerContainer.id=a.PREFIX+"Player"+this.data.id,this.container.appendChild(this.playerContainer)},b.prototype.loadVast=function(){if("undefined"==typeof EbzVastPlugin){var b=new a.helper.FileLoader;return void b.load([this.data.urls.buzzplayer+"/vast.js"],this.loadVast.bind(this))}var c=new EbzVastPlugin(0===window.name.indexOf("ebz"));c.load(this.data,function(a){this.data=a,this.loadBuzzplayer()}.bind(this),function(b){this.logger.error("VAST file not accessible even through Ebz proxy",b),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.BP_VAST_FILE_NOT_ACCESSIBLE,this.data.vastVideo.url,this.data,b),this.onError(b)}.bind(this))},b.prototype.loadBuzzplayer=function(){var b=this.data.displaySettings;document.createElement("video").canPlayType&&window.postMessage&&!a.helper.Context.isOldIE()&&5!==this.data.mediaProvider&&6!==this.data.mediaProvider&&3!==this.data.mediaProvider?(this.flash=a.helper.Context.isIE10()?"html"!==this.version:"flash"===this.version,1!==this.data.mediaProvider||null!==this.data.ebuzzingVideo.ogv||document.createElement("video").canPlayType("video/mp4")||(this.flash=!0)):this.flash=!0;var c=a.helper.Util.camelcase(a.thrift.MediaProvider[this.data.mediaProvider].toLowerCase());if(a.helper.Dom.applyStyle(this.playerContainer,{width:"100%",height:"100%"}),this.flash){var d=function(b){if(b.success)this.playerContainer=b.ref;else{var c=swfobject.getFlashPlayerVersion(),d=c.major+"."+c.minor+"."+c.release;this.logger.error("Could not embed a Buzzplayer using swfobject. Client has Flash Player "+d),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.BP_SWFOBJECT_EMBED,d,this.data),this.onError(b)}}.bind(this),e=function(){swfobject.embedSWF((this.data.urls.alternate?this.data.urls.alternate+"/buzzplayer":this.data.urls.buzzplayer)+"/"+c+"BuzzPlayer.swf?"+a.config.deployedHash,this.playerContainer.id,"100%","100%","10.2.0",null,{config:encodeURIComponent(a.helper.Json.stringify(this.data))},{allowFullScreen:!0,allowScriptAccess:"always",scale:"noscale",wmode:"transparent",bgcolor:"#000000"},{name:this.playerContainer.id},d)}.bind(this);if("undefined"==typeof swfobject){var f=new a.helper.FileLoader;f.load([a.config.urls.ebzformats+"/assets/js/swfobject"+a.config.jsSuffix],e)}else e()}else{this.iframe=a.helper.Dom.createIframe(),this.iframe.id=a.PREFIX+"Iframe"+this.data.id;var g=a.helper.Json.stringify(this.data);a.helper.Dom.addEvent("load",this.iframe,function(){this.iframe.contentWindow.postMessage(g,"*")}.bind(this));var h=1,i=setInterval(function(){h++,10===h&&clearInterval(i);var b=document.getElementById(a.PREFIX+"Iframe"+this.data.id);b&&b.contentWindow&&(b.contentWindow.postMessage(g,"*"),this.iframe=b)}.bind(this),1e3);this.iframe.src=(this.data.urls.alternate?this.data.urls.alternate:this.data.urls.ebzformats)+"/assets/html/iframe.html?h="+a.config.deployedHash,this.playerContainer.appendChild(this.iframe)}if(b.endscreenCountdown){this.endCountdown=document.createElement("img"),this.endCountdown.src=this.data.urls.ebzformats+"/assets/img/countdown/"+b.dimension.id+".gif",a.helper.Dom.applyStyle(this.endCountdown,{width:"100%",height:"100%"});var j=function(){this.playerContainer.parentNode.replaceChild(this.endCountdown,this.playerContainer),setTimeout(function(){window.location.href=this.data.displaySettings.clientUrl}.bind(this),1515)}.bind(this);this.addListener("playerEnd",j)}a.helper.Dom.addEvent("mousemove",document,function(b){var c=b.target,d=new RegExp("^"+a.PREFIX+"(Player|Iframe)"+this.data.id+"$");this.focus&&!d.test(c.id)&&(this.triggerEvent("playerBlur"),this.focus=!1)}.bind(this)),this.addListener("playerFocus",function(){this.focus=!0}.bind(this)),a.helper.Tracker.impression(this.data,this.context?a.helper.Tracker.SocialTypes.EXPAND:a.helper.Tracker.SocialTypes.SINGLE,!0)},b.prototype.onError=function(){},b.INC_ID=0,b}();b.VideoPlayer=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},ebz;!function(a){!function(b){var c=function(b){function c(c,d,e,f){"undefined"==typeof f&&(f={}),b.call(this,c,d,e,f),this.container=e,this.player=new a.component.VideoPlayer(c,e,f.version,f.context),this.player.onError=this.onError.bind(this)}return __extends(c,b),c.prototype.onError=function(b){a.helper.Dom.applyStyle(this.container,{display:"none"}),this.container.innerHTML="<!-- an error occured : "+b+" -->"},c}(a.core.Placeful);b.Buzzplayer=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(ebz){!function(core){function updateConfigUrls(a){try{!a.urls&&ebz.config.urls&&(a.urls=ebz.config.urls),!a.deployedHash&&ebz.config.deployedHash&&(a.deployedHash=ebz.config.deployedHash)}catch(b){}return a&&a.urls&&!a.urls.ebzformats&&a.urls.playerAssets&&(a.urls.ebzformats=a.urls.playerAssets),a&&a.urls&&!a.urls.buzzplayer&&a.urls.ebzformats&&(a.urls.buzzplayer=a.urls.ebzformats+"/buzzplayer"),a&&a.urls&&!a.urls.playerAssets&&a.urls.ebzformats&&(a.urls.playerAssets=a.urls.ebzformats),a}!function(a){a[a.IN_CONTENT_NO_AD=0]="IN_CONTENT_NO_AD",a[a.IN_PAGE_NO_AD=1]="IN_PAGE_NO_AD"}(core.PublisherCbk||(core.PublisherCbk={}));var PublisherCbk=core.PublisherCbk;window.Ebuzzing&&window.Ebuzzing.listeners||(window.Ebuzzing={receiveMessage:function(a){if(0!==a.data.indexOf("api:")){if(0===a.data.indexOf("buzzplayer_"))window.Ebuzzing.receiveEvent(a.data);else if(0===a.data.indexOf("js:"))window.Ebuzzing.executeJavascript(a.data.substr(3));else if(0===a.data.indexOf("exception:")){var b,c,d;try{d=ebz.helper.Json.parse(a.data.substr(10)),c=ebz.helper.ErrorTracker.IFRAME_BUZZPLAYER_INIT}catch(a){d=a,c=ebz.helper.ErrorTracker.BP_POSTED_EXCEPTION}this.logger.error("Received error "+c+" from iframe: "+d),ebz.helper.ErrorTracker.fire(c,null,b,d)}}else for(var e=window.document.getElementsByTagName("iframe"),f=0,g=e.length;g>f;f++){var h=e[f];0===h.id.indexOf(ebz.PREFIX)&&h.contentWindow.postMessage(a.data,"*")}},executeJavascript:function(code,id){if("undefined"==typeof id&&(id=0),window.Ebuzzing.instances[id].userData.context&&window.self!==window.top)window.parent.postMessage("js:"+code,"*");else try{eval(code)}catch(e){window.Ebuzzing.trace("Error in third-party Javascript: "+(e.message||e)+"\nJS code was: "+code),ebz.helper.ErrorTracker.fire(ebz.helper.ErrorTracker.BP_JS_TRACKING,code,null,e)}},receiveEvent:function(a){var b=a.split("_");if(!(b.length<4)){b=b.slice(0,3).concat([b.slice(3).join("_")]);var c,d,e=parseInt(b[1],10),f=b[2];if(window.Ebuzzing.instances[e]&&(d=window.Ebuzzing.instances[e].userData.context),d&&window.self!==window.top?(window.Ebuzzing.trace("Pass event to parent frame too:",a),window.parent.postMessage(a,"*")):d="parent page","videoReady"===f){window.Ebuzzing.videoReady[e]=!0;for(var g=0,h=window.Ebuzzing.asyncTriggerEvent.length;h>g;g++)if(window.Ebuzzing.asyncTriggerEvent[g]){var i=window.Ebuzzing.asyncTriggerEvent[g];window.Ebuzzing.triggerEvent(i.name,i.data,i.id),window.Ebuzzing.asyncTriggerEvent[g]=void 0}}try{c=ebz.helper.Json.parse(b[3])}catch(i){window.Ebuzzing.trace("error",'Corrupted event info for "'+f+'": '+b[3],i),ebz.helper.ErrorTracker.fire(ebz.helper.ErrorTracker.BP_CORRUPTED_EVENT_DATA,a,this.data,i),c=null}for(var j,k=[],l=0,m=0,n=window.Ebuzzing.listeners.length;n>m;m++)j=window.Ebuzzing.listeners[m],j.name!==f||j.playerId!==e&&"undefined"!=typeof j.playerId||(j.callback(c,f,e),l++,j.once&&k.push(m));for(g=0,n=k.length;n>g;g++)window.Ebuzzing.listeners[m].splice(k[m],1);var o="error",p="videoError",q="onBuffer",r="onProgress",s="mousemove",t=[q,r,s];f!==window.Ebuzzing.lastEventName&&-1===t.indexOf(f)&&(window.Ebuzzing.trace("Got event '"+f+"' from "+ebz.format+" #"+e+" in "+d+" and trigerred "+l+" attached callbacks",c),(f===o||f===p)&&ebz.helper.ErrorTracker.fire(ebz.helper.ErrorTracker.BP_RECEIVED_ERROR,{name:f,format:ebz.format,data:c},this.data),window.Ebuzzing.lastEventName=f)}},addEventListener:function(a,b,c){"undefined"==typeof c&&(c=0),window.Ebuzzing.listeners.push({name:a,callback:b,playerId:c})},triggerEvent:function(a,b,c){"undefined"==typeof c&&(c=0);try{var d=window.Ebuzzing.instances[c];if(!d||!window.Ebuzzing.videoReady[c])return void window.Ebuzzing.asyncTriggerEvent.push({name:a,data:b,id:c});"undefined"!=typeof b&&-1===a.indexOf(":")&&(a+=":"+b),window.postMessage("api:"+a,"*")}catch(e){window.Ebuzzing.trace('window.Ebuzzing.triggerEvent("'+a+'") error (we have been notified): '+e),ebz.helper.ErrorTracker.fire(ebz.helper.ErrorTracker.BP_TRIGGER_EVENT,null,this.data,e)}},videoReady:[],listeners:[],asyncTriggerEvent:[],lastEventName:null,instances:ebz.playlists,attachScript:ebz.helper.Dom.attach,applyVendorProperties:ebz.helper.Dom.applyVendorProperties,trace:function(a,b,c){window.Ebuzzing.logger||(window.Ebuzzing.logger=new ebz.helper.ConsoleLogger("Legacy Buzzplayer API")),window.Ebuzzing.logger.info(a,b,c)},logger:null});try{ebz.helper.Context.isOldIE(8)||Object.defineProperty(window,"Ebuzzing",{writable:!1,enumerable:!1,configurable:!1,value:window.Ebuzzing})}catch(e){}for(var i in window._ebz)if(window._ebz.hasOwnProperty(i)&&window._ebz[i])switch(window._ebz[i].type){case"addEventListener":window.Ebuzzing.addEventListener(window._ebz[i].name,window._ebz[i].callback,window._ebz[i].id),window._ebz[i]=void 0;break;case"triggerEvent":window.Ebuzzing.triggerEvent(window._ebz[i].name,window._ebz[i].callback(),window._ebz[i].id),window._ebz[i]=void 0;break;case"applyVendorProperties":var args=window._ebz[i].callback();window.Ebuzzing.applyVendorProperties(args[0],args[1],args[2]),window._ebz[i]=void 0;break;case"attachScript":window.Ebuzzing.attachScript(window._ebz[i].callback()),window._ebz[i]=void 0}ebz.helper.Dom.addEvent("message",window,window.Ebuzzing.receiveMessage),core.publisherCallback=function(a){switch(a){case 0:window.ebz_inContentNoAd&&window.ebz_inContentNoAd();break;case 1:window.beead_noAds&&window.beead_noAds()}},core.updateConfigUrls=updateConfigUrls
}(ebz.core||(ebz.core={}));var core=ebz.core}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(){this.isLoading=!1,this.loaded=0,this.callbacks=[],this.num=0,this.logger=new a.helper.ConsoleLogger("FileLoader")}return b.prototype.load=function(b,c){if(this.num=b.length,0===this.num)c&&c();else if(c&&this.callbacks.push(c),!this.isLoading){this.isLoading=!0;for(var d=0,e=b.length;e>d;d++){var f=b[d].split("?")[0].substr(b[d].lastIndexOf(".")+1);if("js"===f){var g=document.createElement("script");g.async=!0,g.defer=!0,a.helper.Dom.addEvent("load",g,function(a){a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(this.loaded++,this.loaded===this.num&&(this.fireCallbacks(),this.isLoading=!1),a.onreadystatechange=null,this.logger.debug("Loaded JS:",a.src))}.bind(this,g)),g.src=b[d],a.helper.Dom.attach(g)}else if("css"===f){var h=document.createElement("link");h.rel="stylesheet",a.helper.Dom.addEvent("load",h,function(a){this.loaded++,this.loaded===this.num&&(this.fireCallbacks(),this.isLoading=!1),this.logger.debug("Loaded CSS:",a.href)}.bind(this,h)),h.href=b[d],a.helper.Dom.attach(h),a.helper.Context.isAndroidNative()&&this.loaded++}}}},b.prototype.fireCallbacks=function(){for(;this.callbacks.length;)this.callbacks.shift()()},b}();b.FileLoader=c}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(ebz){!function(format){var Fallback=function(){function Fallback(container,userData){if("undefined"==typeof userData&&(userData={}),this.logger=new ebz.helper.ConsoleLogger("Fallback"),this.logger.info("No video to display at the moment for this channel"),userData.fallback){var sandbox=document.createElement("div");sandbox.innerHTML=userData.fallback.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"'),this.logger.info("Using fallback code\n",sandbox.innerHTML);for(var scripts=sandbox.getElementsByTagName("script"),externalScripts=[],inlineScripts="",i=0,length=scripts.length,script=scripts[0];length>i;i++,script=scripts[i])script.getAttribute("src")?("https:"===window.location.protocol&&script.src.replace(/^http:/i,"https:"),externalScripts.push(script.src)):script.innerHTML&&(inlineScripts+=script.innerHTML+";");for(i=scripts.length-1;i>=0;i--)scripts[i].parentNode.removeChild(scripts[i]);container.innerHTML=sandbox.innerHTML;var loader=new ebz.helper.FileLoader;try{eval(inlineScripts),loader.load(externalScripts)}catch(e){loader.load(externalScripts,function(){eval(inlineScripts)})}}else this.logger.info("No fallback code"),userData.noreplace||(container.innerHTML="<!-- "+ebz.PREFIX+": no video to display -->")}return Fallback}();format.Fallback=Fallback}(ebz.format||(ebz.format={}));var format=ebz.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(a,c,d,e){"undefined"==typeof e&&(e={}),b.call(this,a,c,d,e),this.pageIsLoad=!1,this.init()}return __extends(c,b),c.prototype.init=function(){var b=this;this.width=c.SIZE.width,this.height=c.SIZE.height;var d=this.data.displaySettings;if(!d.expand){if(d.dimension.width>=this.width||d.dimension.height>=this.height)return;if(3===d.startMode)return}this.mainContainer=document.createElement("div"),a.helper.Dom.applyStyle(this.mainContainer,{position:"absolute",zIndex:9e4,backgroundColor:"black"}),a.helper.Dom.applyStyle(this.parentContainer,{background:"transparent"}),this.player.playerContainer.style.overflow="hidden",this.mainContainer.appendChild(this.player.playerContainer),this.trigger=document.createElement("div"),a.helper.Dom.applyStyle(this.trigger,{position:"absolute",top:0,left:0,width:d.dimension.width+"px",height:d.dimension.height+"px",backgroundColor:"black",opacity:0}),this.mainContainer.appendChild(this.trigger),1===d.startMode&&(this.closeButton=document.createElement("a"),this.closeButton.href="javascript:;",a.helper.Dom.applyStyle(this.closeButton,{opacity:0,position:"absolute",width:"23px",height:"19px",backgroundImage:"url("+this.data.urls.ebzformats+"/assets/img/miniexpand_close.png)",top:"-3px",right:"-5px"}),a.helper.Dom.applyVendorProperties(this.closeButton,"transitionProperty","opacity"),a.helper.Dom.applyVendorProperties(this.closeButton,"transitionDuration",c.EXPANDTIME+"ms"),this.mainContainer.appendChild(this.closeButton)),this.status="closed",this.reposition(),a.helper.Dom.addEvent("load",window,function(){return b.pageIsLoad=!0}),a.helper.Dom.addEvent("resize",window,this.reposition.bind(this)),a.helper.Dom.addEvent("load",window,this.reposition.bind(this)),a.helper.Dom.onDomReady(this.reposition.bind(this)),this.repositionInterval=setInterval(this.reposition.bind(this),200),document.body.appendChild(this.mainContainer),a.helper.Dom.addEvent(1===d.startMode?"click":"mousemove",document,this.close.bind(this)),a.helper.Dom.addEvent("mousemove",this.trigger,this.open.bind(this)),this.player.addListener("nextVideo",this.clear.bind(this)),this.player.addListener("campaign",this.clear.bind(this))},c.prototype.clear=function(){document.body.contains(this.mainContainer)&&(document.body.removeChild(this.mainContainer),a.helper.Dom.removeEvent("resize",window,this.reposition.bind(this)),a.helper.Dom.removeEvent("load",window,this.reposition.bind(this)),clearInterval(this.repositionInterval))},c.prototype.reposition=function(){if("closed"===this.status){if(!document.body.contains(this.container))return void this.clear();try{this.parentContainer=document.getElementById(this.parentContainer.id),this.position=a.helper.Dom.getOffset(this.parentContainer),this.mainContainer.style.visibility=0!==this.position[0]&&0!==this.position[1]||this.pageIsLoad?"visible":"hidden",a.helper.Dom.applyStyle(this.mainContainer,{left:this.position[0]+"px",top:this.position[1]+"px",width:this.data.displaySettings.dimension.width+"px",height:this.data.displaySettings.dimension.height+"px"})}catch(b){this.clear()}}},c.prototype.open=function(){if("closed"===this.status){this.status="opening",setTimeout(function(){this.status="opened",this.player.triggerEvent("miniExpandEnter")}.bind(this),c.EXPANDTIME-150),this.trigger.style.display="none",a.helper.Dom.applyVendorProperties(this.mainContainer,"transitionProperty","width, height, top, left, boxShadow"),a.helper.Dom.applyVendorProperties(this.mainContainer,"transitionDuration",c.EXPANDTIME+"ms");var b=a.helper.Dom.getWindowScroll(),d=a.helper.Dom.getWindowSize(),e=[b[0]+c.MARGIN,b[1]+c.MARGIN],f=[b[0]+d[0]-this.width-c.MARGIN,b[1]+d[1]-this.height-c.MARGIN],g=Math.round((this.width-this.data.displaySettings.dimension.width)/2),h=Math.round((this.height-this.data.displaySettings.dimension.height)/2),i=[Math.max(e[0],Math.min(f[0],this.position[0]-g)),Math.max(e[1],Math.min(f[1],this.position[1]-h))];a.helper.Dom.applyStyle(this.mainContainer,{left:i[0]+"px",top:i[1]+"px",width:this.width+"px",height:this.height+"px"}),a.helper.Dom.applyVendorProperties(this.mainContainer,"boxShadow","black 0px 0px 4px 1px"),this.closeButton&&a.helper.Dom.applyStyle(this.closeButton,{opacity:1})}},c.prototype.close=function(b){var d=new RegExp("^"+a.PREFIX+"(Player|Iframe)"+this.data.id+"$"),e=b.target;"opened"!==this.status||d.test(e.id)||(a.core.advertiserViewTrackingTimeout&&(clearTimeout(a.core.advertiserViewTrackingTimeout),a.core.advertiserViewTrackingTimeout=null),a.core.publisherViewTrackingTimeout&&(clearTimeout(a.core.publisherViewTrackingTimeout),a.core.publisherViewTrackingTimeout=null),this.trigger.style.display="block",this.position=a.helper.Dom.getOffset(this.parentContainer),a.helper.Dom.applyStyle(this.mainContainer,{left:this.position[0]+"px",top:this.position[1]+"px",width:this.data.displaySettings.dimension.width+"px",height:this.data.displaySettings.dimension.height+"px"}),this.status="closing",setTimeout(function(){a.helper.Dom.applyVendorProperties(this.mainContainer,"boxShadow","black 0px 0px 0px 0px"),this.status="closed",this.player.triggerEvent("miniExpandExit")}.bind(this),c.EXPANDTIME-150),this.closeButton&&a.helper.Dom.applyStyle(this.closeButton,{opacity:0}))},c.prototype.onError=function(a){b.prototype.onError.call(this,a),this.mainContainer.parentNode.removeChild(this.mainContainer)},c.SIZE={width:560,height:315},c.MARGIN=40,c.EXPANDTIME=400,c}(a.format.Buzzplayer);b.ElasticoBuzzplayer=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(a,c,d,e,f){"undefined"==typeof e&&(e={}),this.onIframeReady=f,a.displaySettings.startMode=1,a.tracking.callbacks.impression=[],b.call(this,a,c,d,e)}return __extends(c,b),c.prototype.init=function(){this.data.displaySettings.dimension.width>=this.data.displaySettings.expand.dimension.width||this.data.displaySettings.dimension.height>=this.data.displaySettings.expand.dimension.height||(b.prototype.init.call(this),this.width=this.data.displaySettings.expand.dimension.width,this.height=this.data.displaySettings.expand.dimension.height,this.richMediaIframe=a.helper.Dom.createIframe(),this.richMediaIframe.style.display="none",this.mainContainer.appendChild(this.richMediaIframe),a.helper.Tracker.impression(this.data,a.helper.Tracker.SocialTypes.SINGLE,!1))},c.prototype.open=function(){b.prototype.open.call(this),setTimeout(function(){this.player.playerContainer.style.display="none",this.richMediaIframe.style.display="block",this.richMediaIframe.src=this.data.displaySettings.expand.url,"function"==typeof this.onIframeReady&&this.onIframeReady()}.bind(this),a.format.ElasticoBuzzplayer.EXPANDTIME-150)},c.prototype.close=function(c){b.prototype.close.call(this,c),this.player.playerContainer.style.display="block",this.richMediaIframe.style.display="none",this.richMediaIframe.src=null,a.core.advertiserViewTrackingTimeout&&(clearTimeout(a.core.advertiserViewTrackingTimeout),a.core.advertiserViewTrackingTimeout=null),a.core.publisherViewTrackingTimeout&&(clearTimeout(a.core.publisherViewTrackingTimeout),a.core.publisherViewTrackingTimeout=null)},c}(a.format.ElasticoBuzzplayer);b.ElasticoRichMedia=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(c,d,e,f){"undefined"==typeof f&&(f={}),b.call(this,c,d,e,f),c.displaySettings.expand.lead&&a.helper.Dom.addEvent("message",window,function(a){0===a.data.indexOf("ebz:lead")&&this.onLead(c)}.bind(this))}return __extends(c,b),c.prototype.onLead=function(b){a.helper.Tracker.fire(b.tracking.callbacks.view,{})},c}(a.core.Placeful);b.RichMedia=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(c,d,e,f,g){"undefined"==typeof f&&(f={}),b.call(this,c,d,e,f);var h=a.helper.Dom.createIframe(c.displaySettings.expand.dimension);h.id=a.PREFIX+"Inline"+c.id,this.parentContainer.parentNode.replaceChild(h,this.parentContainer),"function"==typeof g&&a.helper.Dom.addEvent("load",h,g),h.src=c.displaySettings.expand.url,c.displaySettings.expand.customContent&&a.helper.Tracker.impression(this.data,a.helper.Tracker.SocialTypes.EXPAND,!0)}return __extends(c,b),c}(a.format.RichMedia);b.RichMediaInline=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){b.openedExpand=b.openedExpand||!1;var c=function(c){function d(b,d,e,f,g){"undefined"==typeof f&&(f={}),c.call(this,b,d,e,f),this.teaserContainer=document.createElement("div"),this.teaserContainer.id=a.PREFIX+"Teaser"+this.data.id,this.parentContainer.appendChild(this.teaserContainer);var h=this.data.displaySettings;if(h.assets&&h.assets.teasers&&h.assets.teasers[String(h.dimension.id)]){var i=h.assets.teasers[String(h.dimension.id)],j=this.open.bind(this,g);if(2===this.data.mediaProvider&&this.data.youtubeVideo.id&&window.postMessage&&1===h.expand.startMode&&!/(Opera|OPR)/.test(navigator.userAgent)&&!/MSIE [5678]/.test(navigator.userAgent)){this.embedTeaser(i);var k=a.helper.Dom.createIframe(h.dimension);a.helper.Dom.applyStyle(k,{position:"relative",border:0,opacity:0}),a.helper.Dom.addEvent("message",window,function(a){var b=a.data.split(":");"open"===b[0]&&b[1]===String(this.data.id)&&j()}.bind(this)),k.src=a.config.urls.ebzformats+"/assets/html/youtube.html?h="+a.config.deployedHash+"#"+this.data.youtubeVideo.id+":"+this.data.id+":open",this.parentContainer.appendChild(k)}else this.embedTeaser(i,j);a.helper.Tracker.impression(this.data,a.helper.Tracker.SocialTypes.SINGLE,!1)}else this.logger.error("Asset not found: teasers["+h.dimension.id+"]",h.assets,h.dimension),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.RME_ASSET_NOT_FOUND,"teasers["+h.dimension.id+"]",this.data)}return __extends(d,c),d.prototype.open=function(c){if(!b.openedExpand){b.openedExpand=!0;for(var e=document.getElementsByClassName(a.PREFIX+"ExpandTeaser"),f=0,g=e.length;g>f;f++){e[f].style.display="none";var h=e[f].nextSibling;h&&h.className===a.PREFIX+"BlackTrigger"&&a.helper.Dom.applyStyle(h,{opacity:1})}var i=this.data.displaySettings,j=i.expand,k=document.createElement("div");k.id=a.PREFIX+"ExpandContainer",a.helper.Dom.applyStyle(k,{position:"fixed",background:j.overlayColor,border:0,zIndex:65520});var l=document.createElement("div");l.id=a.PREFIX+"ExpandOverlay",a.helper.Dom.applyStyle(l,{position:"fixed",background:j.overlayColor,border:0,top:0,left:0,zIndex:65515,overflow:"hidden",width:"100%",height:"100%",opacity:j.overlayOpacity/100}),a.helper.Dom.applyVendorProperties(l,"transitionProperty","opacity"),a.helper.Dom.applyVendorProperties(l,"transitionDuration",d.EXPANDTIME+"ms");var m=document.createElement("a");if(a.helper.Dom.applyStyle(m,{position:"absolute",top:0,right:"-5px",background:"url('"+a.config.urls.ebzformats+"/assets/img/expand_close.png?"+a.config.deployedHash+"') no-repeat",width:"37px",height:"25px",zIndex:65525}),m.href="#",k.appendChild(m),j.youtubeClose&&!/Opera/.test(navigator.userAgent)){var n=document.createElement("div");a.helper.Dom.applyStyle(n,{position:"absolute",top:"-5px",right:"-10px",width:"45px",height:"30px",opacity:0,overflow:"hidden",zIndex:65530});var o=a.helper.Dom.createIframe({width:150,height:120,id:null,type:null});o.id=a.PREFIX+"YoutubeClose",a.helper.Dom.applyStyle(o,{position:"absolute",top:"-30px",left:"-30px",border:0}),a.helper.Dom.addEvent("message",window,function(a){var b=a.data.split(":");"close"===b[0]&&this.close()}.bind(this)),o.src=a.config.urls.ebzformats+"/assets/html/youtube.html?h="+a.config.deployedHash+"#"+this.data.youtubeVideo.id+":"+this.data.id+":close",n.appendChild(o),k.appendChild(n)}else m.onclick=this.close;var p=a.helper.Dom.getWindowSize(),q=a.helper.Dom.getWindowScroll(),r=[Math.round(p[0]/2)-Math.round(j.dimension.width/2),Math.round(p[1]/2)-Math.round(j.dimension.height/2)];p[0]<j.dimension.width+15&&(r[0]=p[0]-j.dimension.width-15),p[1]<j.dimension.height&&(r[1]=0);var s=a.helper.Dom.getOffset(this.parentContainer);s[0]-=q[0],s[1]-=q[1],a.helper.Dom.applyStyle(k,{left:s[0]+"px",top:s[1]+"px",width:i.dimension.width+"px",height:i.dimension.height+"px"}),a.helper.Dom.applyVendorProperties(k,"transitionProperty","width, height, top, left"),a.helper.Dom.applyVendorProperties(k,"transitionDuration",d.EXPANDTIME+"ms"),document.body.appendChild(l),document.body.appendChild(k);var t=function(){var b=a.helper.Dom.createIframe();b.id=a.PREFIX+"Expand",k.appendChild(b),a.helper.Dom.addEvent("load",b,function(a){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a.style.background="transparent","function"==typeof c&&c())}.bind(b,k)),b.src=j.url}.bind(this),u=function(){a.helper.Dom.applyStyle(k,{left:r[0]+"px",top:r[1]+"px",width:j.dimension.width+"px",height:j.dimension.height+"px"})},v=function(){a.helper.Dom.applyStyle(l,{opacity:j.overlayOpacity/100})};setTimeout(u,10),setTimeout(v,10),setTimeout(t,Math.round(.8*d.EXPANDTIME)),j.customContent&&a.helper.Tracker.fire(this.data.tracking.callbacks.impression,{type:a.helper.Tracker.SocialTypes.EXPAND}),a.helper.Tracker.fire(this.data.tracking.callbacks.expandOpening,{})}},d.prototype.close=function(){if(!b.openedExpand)return!1;b.openedExpand=!1;for(var c=document.getElementsByClassName(a.PREFIX+"ExpandTeaser"),e=0,f=c.length;f>e;e++){c[e].style.display="block";var g=c[e].nextSibling;g&&g.className===a.PREFIX+"BlackTrigger"&&a.helper.Dom.applyStyle(g,{opacity:0})}var h=document.getElementById(a.PREFIX+"ExpandContainer"),i=document.getElementById(a.PREFIX+"ExpandOverlay");document.body.removeChild(h),a.helper.Dom.applyStyle(i,{opacity:0});var j=function(){i&&document.body.removeChild(i)};return setTimeout(j,d.EXPANDTIME),a.core.advertiserViewTrackingTimeout&&(clearTimeout(a.core.advertiserViewTrackingTimeout),a.core.advertiserViewTrackingTimeout=null),a.core.publisherViewTrackingTimeout&&(clearTimeout(a.core.publisherViewTrackingTimeout),a.core.publisherViewTrackingTimeout=null),!1},d.prototype.embedTeaser=function(b,c){var d=this.data.displaySettings;this.teaserContainer.style.position="absolute";var e=this.teaserContainer;if("swf"===b.extension||"flv"===b.extension){"flv"===b.extension&&(b.url=a.config.urls.buzzplayer+"/flvplayer.swf?url="+encodeURIComponent(b.url)+"&"+a.config.deployedHash);var f=function(){swfobject.embedSWF(b.url,this.teaserContainer.id,d.dimension.width,d.dimension.height,"10.2.0",null,null,{allowFullScreen:!0,allowScriptAccess:!0,wmode:"transparent",scale:"exactfit"},{style:"display:block; position: absolute; width: "+d.dimension.width+"px; height: "+d.dimension.height+"px"},function(b){if(!b.success){var c=swfobject.getFlashPlayerVersion(),d=c.major+"."+c.minor+"."+c.release;this.logger.error("Could not embed a teaser using swfobject. Client has Flash Player "+d),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.RME_SWFOBJECT_EMBED,d,this.data)}}.bind(this))}.bind(this);if("undefined"==typeof swfobject){var g=new a.helper.FileLoader;g.load([a.config.urls.ebzformats+"/assets/js/swfobject"+a.config.jsSuffix],f)}else f();c&&!d.playImage&&(e=document.createElement("div"),a.helper.Dom.applyStyle(e,{position:"absolute",width:d.dimension.width+"px",height:d.dimension.height+"px",cursor:"pointer",opacity:0,backgroundColor:"#000"}),e.className=a.PREFIX+"BlackTrigger",this.parentContainer.appendChild(e))}else a.helper.Dom.applyStyle(this.teaserContainer,{width:d.dimension.width+"px",height:d.dimension.height+"px",background:"url('"+b.url+"') no-repeat center center",cursor:"pointer"});var h=e;if(d.playImage&&(h=document.createElement("div"),h.className=a.PREFIX+"Trigger",a.helper.Dom.applyStyle(h,{position:"absolute",width:d.dimension.width+"px",height:d.dimension.height+"px",background:"url('"+a.config.urls.ebzformats+"/assets/img/play.png?"+a.config.deployedHash+"') no-repeat center center",cursor:"pointer"}),this.parentContainer.appendChild(h)),c)if(!d.expand||3!==d.expand.startMode&&5!==d.expand.startMode){var i=d.expand?1===d.expand.startMode:1===d.startMode;i?h.onclick=c:h.onmouseover=c}else{var j="countdown/",k=1515;5===d.expand.startMode&&(j="countdown_fast/",k=950);var l=a.config.urls.ebzformats+"/assets/img/"+j+d.dimension.id+".gif?h="+a.config.deployedHash;(new Image).src=l;var m=document.createElement("img");a.helper.Dom.applyStyle(m,{position:"absolute",width:d.dimension.width+"px",height:d.dimension.height+"px",cursor:"pointer",border:0,margin:0,padding:0,display:"none"}),this.parentContainer.appendChild(m);var n;h.onmouseover=function(){this.teaserContainer.style.visibility="hidden",m.style.display="block",m.src=l,n=setTimeout(c,k)}.bind(this),m.onmouseout=function(){this.teaserContainer.style.visibility="visible",m.style.display="none",m.src="",clearTimeout(n)}.bind(this),m.onclick=c}},d.EXPANDTIME=400,d}(a.format.RichMedia);b.RichMediaExpand=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(c,d,e,f,g,h){if("undefined"==typeof f&&(f={}),"undefined"==typeof g&&(g=null),"undefined"==typeof h&&(h=!1),b.call(this,c,d,e,f),this.openedNative=!1,this.startedNative=!1,this.endedNative=!1,this.overridenAutoplay=!1,this.muted=!1,this.soundOptionCalled=!1,this.playing=!1,this.soundStopedByVisibility=!1,this.interceptTouch=!1,this.startCallbacks=g,this.overridenAutoplay=h,this.displaySettings=this.data.displaySettings,this.nativeNode=this.parentContainer.parentNode,a.helper.Dom.applyVendorProperties(this.nativeNode,"transitionProperty","height"),a.helper.Dom.applyVendorProperties(this.nativeNode,"transitionDuration","1s"),this.interceptTouch=3===this.displaySettings.startMode&&a.helper.Context.isMobile(),1!==this.displaySettings.startMode||this.overridenAutoplay)switch(c.displaySettings.nativeSoundOption){case 1:this.displaySettings.nativeSoundOnClick?this.player.addListener("videoReady",this.muteControl.bind(this,!0)):this.player.addListener("videoReady",this.muteControl.bind(this,!1));break;case 2:this.displaySettings.nativeSoundOnClick?this.player.addListener("videoReady",this.muteControl.bind(this,!0)):this.player.addListener("videoReady",this.muteControl.bind(this,!1));break;case 3:this.player.addListener("videoReady",this.muteControl.bind(this,!0)),this.displaySettings.nativeSoundOnClick||this.soundControlByMouse("mouseover",!1);break;case 4:this.player.addListener("videoReady",this.muteControl.bind(this,!0)),this.displaySettings.nativeSoundOnClick||this.soundControlByMouse("mouseover",!1);break;case 5:this.player.addListener("videoReady",this.muteControl.bind(this,!0)),this.displaySettings.nativeSoundOnClick||(this.soundControlByMouse("mouseover",!1),this.soundControlByMouse("mouseout",!0));break;default:this.logger.error("NativeSoundOption '"+c.displaySettings.nativeSoundOption+"' unknown option.")}this.init()}return __extends(c,b),c.prototype.muteControl=function(a){"undefined"!=typeof this.muted&&(a?!this.muted:this.muted)&&(this.player.triggerEvent("volumeRequest",a?0:1),this.muted=a)},c.prototype.soundControlByMouse=function(b,c){var d=this;a.helper.Dom.addEvent(b,this.parentContainer.parentNode,function(){d.muteControl(c),d.soundOptionCalled||5!==d.data.displaySettings.nativeSoundOption||(d.soundOptionCalled=!0)})},c.prototype.onScrollEvent=function(){if(!this.endedNative){var b,c=a.helper.Dom.getOffset(this.player.playerContainer),d=([this.player.playerContainer.offsetWidth,this.player.playerContainer.offsetHeight],a.helper.Dom.getWindowScroll()),e=a.helper.Dom.getWindowSize(),f=a.helper.Dom.getDocumentSize(),g=c[1]>=f[1]-Math.round(this.displaySettings.dimension.height);c[0]-=d[0],c[1]-=d[1],b=g?[c[0]+Math.round(this.displaySettings.dimension.width/2),c[1]-30]:[c[0]+Math.round(this.displaySettings.dimension.width/2),c[1]+Math.round(this.displaySettings.dimension.height/2)],b[0]<0||b[1]<0||b[0]>e[0]||b[1]>e[1]?this.openedNative&&(1===this.data.displaySettings.nativeVideoPauseOption?(this.player.triggerEvent("pauseRequest"),this.playing=!1):3===this.data.displaySettings.nativeVideoPauseOption&&(this.muted||this.soundOptionCalled||(this.muteControl(!0),this.soundStopedByVisibility=!0))):(this.openedNative||(a.helper.Dom.applyStyle(this.nativeNode,{height:this.displaySettings.dimension.height+40+"px"}),this.openedNative=!0,a.helper.Tracker.fire(this.data.tracking.callbacks.nativeOpening,{})),this.startedNative&&(this.playing||(this.player.triggerEvent("playRequest"),this.playing=!0),this.soundStopedByVisibility&&!this.soundOptionCalled&&this.muteControl(!1)),this.overridenAutoplay&&this.openedNative&&!this.startedNative&&(this.player.triggerEvent("playRequest"),this.soundStopedByVisibility&&!this.soundOptionCalled&&this.muteControl(!1)),this.startCallbacks&&(a.helper.Tracker.fire(this.startCallbacks,{}),this.startCallbacks=null))}},c.prototype.onSkip=function(){this.endedNative=!0,a.helper.Dom.applyStyle(this.nativeNode,{height:0}),setTimeout(function(){this.nativeNode.parentNode.removeChild(this.nativeNode)}.bind(this),1200)},c.prototype.onStart=function(){this.openedNative||this.player.triggerEvent("pauseRequest"),this.startedNative=!0},c.prototype.onVideoReady=function(){a.helper.Dom.addEvent("resize",window,function(){this.onScrollEvent()}.bind(this)),a.helper.Dom.addEvent("scroll",window,function(){this.onScrollEvent()}.bind(this)),this.onScrollEvent()},c.prototype.onTrackClick=function(a){"muteButton"===a&&(this.soundOptionCalled||(this.soundOptionCalled=!0))},c.prototype.init=function(){a.helper.Dom.addCssClass(this.nativeNode,[c.NATIVE_CONTAINER_CLASS]),this.player.addListener("playerStart",this.onStart.bind(this)),this.player.addListener("videoReady",this.onVideoReady.bind(this)),this.player.addListener("skipRequest",this.onSkip.bind(this)),this.player.addListener("playerEnd",this.onSkip.bind(this)),this.player.addListener("trackClick",this.onTrackClick.bind(this)),this.interceptTouch&&(this.logger.info("Touch interceptor is required"),a.helper.Dom.addCssClass(this.nativeNode,[c.NATIVE_INTERCEPT_CLASS]),this.player.addListener("apiReady",function(){this.player.triggerEvent("touchInterceptor")}.bind(this)),this.player.addListener("touchIntercepted",function(){this.logger.info("Touch event intercepted. Experience is now ready."),a.helper.Dom.removeCssClass(this.nativeNode,[c.NATIVE_INTERCEPT_CLASS])}.bind(this)))},c.NATIVE_CONTAINER_CLASS="ebz_native",c.NATIVE_INTERCEPT_CLASS="ebz_intercept",c}(a.format.Buzzplayer);b.NativeBuzzplayer=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(a){this.SHAREBAR_CLASS="ebz_sharebar",this.SHAREBAR_LOGO_CLASS="ebz_sharebar_logo",this.SHAREBAR_BUTTON_CLASS="ebz_sharebar_button",this.SHAREBAR_BUTTON_FACEBOOK_CLASS="ebz_sharebar_button_facebook",this.SHAREBAR_BUTTON_TWITTER_CLASS="ebz_sharebar_button_twitter",this.SHAREBAR_BUTTON_GPLUS_CLASS="ebz_sharebar_button_gplus",this.initWrapper(a),this.setHeight("20px")}return b.prototype.initWrapper=function(b){this.wrapperSharebar=document.createElement("div"),a.helper.Dom.addCssClass(this.wrapperSharebar,[this.SHAREBAR_CLASS]),this.wrapperLogo=document.createElement("div"),a.helper.Dom.addCssClass(this.wrapperLogo,[this.SHAREBAR_LOGO_CLASS]),a.helper.Dom.addEvent("click",this.wrapperLogo,this.onLogoClick.bind(this)),this.wrapperButton=document.createElement("div"),a.helper.Dom.addCssClass(this.wrapperButton,[this.SHAREBAR_BUTTON_CLASS]),this.wrapperSharebar.appendChild(this.wrapperLogo),this.wrapperSharebar.appendChild(this.wrapperButton),b.appendChild(this.wrapperSharebar)},b.prototype.onLogoClick=function(a){this.callbackLogo&&this.callbackLogo(a)},b.prototype.onShareClick=function(a,b){switch(a){case this.buttonFacebook:this.callbackFacebook(b);break;case this.buttonTwitter:this.callbackTwitter(b);break;case this.buttonGplus:this.callbackGplus(b)}},b.prototype.createShareButton=function(b,c){return b||(b=document.createElement("div"),a.helper.Dom.addCssClass(b,[c]),a.helper.Dom.addEvent("click",b,this.onShareClick.bind(this,b)),b.style.backgroundImage="url('"+a.config.urls.ebzformats+"/assets/img/sharebar/"+c.replace("ebz_sharebar_button_","")+".png')",this.wrapperButton.appendChild(b),this.updateButtonsWidth()),b},b.prototype.updateButtonsWidth=function(){var a,b=this.wrapperButton.childNodes.length,c=100/b;for(var d in this.wrapperButton.childNodes)this.wrapperButton.childNodes.hasOwnProperty(d)&&(a=this.wrapperButton.childNodes[d],a.style&&(a.style.width=c+"%"))},b.prototype.setHeight=function(b){this.wrapperSharebar.style.height=a.helper.Context.isMobile()&&!a.helper.Context.isViewport()?a.helper.Dom.convertToDeviceSize({height:parseInt(b,10),convertInPercent:!1}).height+"px":b},b.prototype.getHeight=function(){return this.wrapperSharebar.style.height},b.prototype.setLogoCallback=function(b,c){var d=this;this.wrapperLogo.innerHTML="";var e=document.createElement("img");e.src=b,a.helper.Dom.addEvent("load",e,function(){e.height>d.wrapperSharebar.offsetHeight&&(e.height=d.wrapperSharebar.offsetHeight),d.wrapperLogo.appendChild(e),a.helper.Dom.centerMe(e,0,2)},!0),c&&(this.callbackLogo=c)},b.prototype.getLogoCallback=function(){return this.callbackLogo},b.prototype.setFacebookCallback=function(a){this.buttonFacebook=this.createShareButton(this.buttonFacebook,this.SHAREBAR_BUTTON_FACEBOOK_CLASS),this.callbackFacebook=a},b.prototype.getFacebookCallback=function(){return this.callbackFacebook},b.prototype.setTwitterCallback=function(a){this.buttonTwitter=this.createShareButton(this.buttonTwitter,this.SHAREBAR_BUTTON_TWITTER_CLASS),this.callbackTwitter=a},b.prototype.getTwitterCallback=function(){return this.callbackTwitter},b.prototype.setGplusCallback=function(a){this.buttonGplus=this.createShareButton(this.buttonGplus,this.SHAREBAR_BUTTON_GPLUS_CLASS),this.callbackGplus=a},b.prototype.getGplusCallback=function(){return this.callbackGplus},b}();b.Sharebar=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){!function(a){a[a.CLOSABLE=0]="CLOSABLE",a[a.SKIPPABLE=1]="SKIPPABLE"}(b.HeaderState||(b.HeaderState={}));var c=(b.HeaderState,function(){function b(b,c){this.headerHeight=32,this.state=0,this.headerContainer=document.createElement("div"),this.closeButtonContainer=document.createElement("div"),this.closeButtonContainer.className="ebz_header_closeButton",this.headerContainer.appendChild(this.closeButtonContainer),this.closeButton=new a.component.CloseButton(this.closeButtonContainer,c),this.closeButton.setBackgroundColor("#FFF"),this.closeButton.setIconColor("#BF0000"),this.setHeight(this.headerHeight),this.headerContainer.className="ebz_header",b.appendChild(this.headerContainer)}return b.prototype.setHeight=function(a){this.headerHeight=a,this.headerContainer.style.height=a+"px",this.closeButton.setSize(a,!0)},b.prototype.getHeight=function(){return this.headerHeight},b.prototype.createLogo=function(){this.logo=document.createElement("img"),this.logo.className="ebz_header_logo",this.headerContainer.appendChild(this.logo)},b.prototype.setLogo=function(a){this.logo||this.createLogo(),this.logo.src=a},b.prototype.createText=function(){this.text=document.createElement("span"),this.text.className="ebz_header_text",this.headerContainer.appendChild(this.text)},b.prototype.setText=function(a){this.text||this.createText(),this.text.innerHTML=a},b.prototype.setState=function(a){this.state=a,1===a?(this.closeButton.setIcon(3),this.closeButton.setIconColor("#458B00")):0===a&&(this.closeButton.setIcon(0),this.closeButton.setIconColor("#BF0000"))},b.prototype.getState=function(){return this.state},b}());b.Header=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){!function(a){a[a.SQUARE=0]="SQUARE",a[a.CIRCLE=1]="CIRCLE",a[a.TRIANGLE=2]="TRIANGLE"}(b.Shape||(b.Shape={}));b.Shape;!function(a){a[a.CROSS=0]="CROSS",a[a.PREV=1]="PREV",a[a.NEXT=2]="NEXT",a[a.TICKER=3]="TICKER"}(b.Icon||(b.Icon={}));var c=(b.Icon,function(){function b(b,c){this.size=10,this.icon=0,this.shape=0,this.backgroundColor="#000000",this.iconColor="#FFFFFF",this.className="",this.CROSS_RATIO=.7,this.CROSS_LINE_WIDTH=30,this.CROSS_LINE_CAP="round",this.RATIO_QUALITY=8,this.canvas=document.createElement("canvas"),this.setSize(this.size),b.appendChild(this.canvas),c&&a.helper.Dom.addEvent("click",this.canvas,c)}return b.prototype.draw=function(){var a=this;clearTimeout(this.timeoutDraw),this.timeoutDraw=setTimeout(function(){var b=a.canvas.getContext("2d");b.clearRect(0,0,a.canvas.width,a.canvas.height),a.drawBg(b),a.drawIcon(b)},10)},b.prototype.drawBg=function(a){var b=this.size*this.RATIO_QUALITY;switch(a.fillStyle=this.backgroundColor,this.shape){case 0:a.fillRect(0,0,b,b);break;case 1:a.beginPath(),a.arc(b/2,b/2,b/2,0,2*Math.PI,!0),a.fill();break;case 2:a.beginPath(),a.moveTo(b/2,0),a.lineTo(0,b),a.lineTo(b,b),a.lineTo(b/2,0),a.fill()}a.closePath()},b.prototype.drawIcon=function(a){a.lineWidth=this.CROSS_LINE_WIDTH,a.lineCap=this.CROSS_LINE_CAP,a.strokeStyle=this.iconColor;var b=this.size*this.RATIO_QUALITY,c=b-b*this.CROSS_RATIO,d=b-c;switch(a.beginPath(),this.icon){case 0:a.moveTo(c,c),a.lineTo(d,d),a.moveTo(c,d),a.lineTo(d,c);break;case 1:a.moveTo(d,c),a.lineTo(c,c/2+d/2),a.lineTo(d,d);break;case 2:a.moveTo(c,c),a.lineTo(d,c/2+d/2),a.lineTo(c,d);
break;case 3:a.moveTo(c,c/2+d/2),a.lineTo(c/2+d/2,d),a.lineTo(d,c)}a.stroke(),a.closePath()},b.prototype.setSize=function(b,c){"undefined"==typeof c&&(c=!1),!a.helper.Context.isMobile()||a.helper.Context.isViewport()||c?(this.CROSS_LINE_WIDTH=a.helper.Context.isMobile()&&a.helper.Context.isViewport()&&1===a.helper.Dom.getOrientation()?15:30,this.size=b):this.size=a.helper.Dom.convertToDeviceSize({height:b,convertInPercent:!1}).height,this.canvas.width=this.canvas.height=this.size*this.RATIO_QUALITY,this.canvas.style.width=this.canvas.style.height=this.size+"px",this.draw()},b.prototype.getSize=function(){return this.size},b.prototype.setIcon=function(a){this.icon=a,this.draw()},b.prototype.getIcon=function(){return this.icon},b.prototype.setBackgroundShape=function(a){this.shape=a,this.draw()},b.prototype.getBackgroundShape=function(){return this.shape},b.prototype.setBackgroundColor=function(a){this.backgroundColor=a,this.draw()},b.prototype.getBackgroundColor=function(){return this.backgroundColor},b.prototype.setIconColor=function(a){this.iconColor=a,this.draw()},b.prototype.getIconColor=function(){return this.iconColor},b.prototype.setDelay=function(a){var b=this;this.startDelay=[Date.now(),a],this.canvas.style.display="none",clearTimeout(this.timeoutDelay),this.timeoutDelay=setTimeout(function(){return b.canvas.style.display="block"},a)},b.prototype.getDelay=function(){return this.startDelay[0]+this.startDelay[1]-Date.now()},b}());b.CloseButton=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(a){var b=function(){function a(){}return a.choosePositionClass=function(b){var c=a.TOP_LEFT_POSITION_CLASS;switch(b.toUpperCase()){case"TL":c=a.TOP_LEFT_POSITION_CLASS;break;case"TR":c=a.TOP_RIGHT_POSITION_CLASS;break;case"BL":c=a.BOTTOM_LEFT_POSITION_CLASS;break;case"BR":c=a.BOTTOM_RIGHT_POSITION_CLASS}return c},a.TOP_LEFT_POSITION_CLASS="ebz_TL",a.TOP_RIGHT_POSITION_CLASS="ebz_TR",a.BOTTOM_LEFT_POSITION_CLASS="ebz_BL",a.BOTTOM_RIGHT_POSITION_CLASS="ebz_BR",a.SCROLLABLE_CLASS="ebz_scrollable",a.FULLSCREEN_ELEMENT="ebz_fullscreen",a.FULLSCREEN_ELEMENT_CLOSE_BUTTON="ebz_fullscreen_button",a.FULLSCREEN_ELEMENT_HIDE="ebz_fullscreen_hide",a.FULLSCREEN_ELEMENT_CLOSE_BUTTON_HIDE="ebz_fullscreen_button_hide",a}();a.CommonCss=b}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(b,c){this.hasScrolling=!0,this.border=!1,this.allowTransparency=!0,this.iframeWidth="100%",this.iframeHeight="100%",this.pmKey="",this.ALLOW_FULLSCREEN=!0,this.iframe=document.createElement("iframe"),this.iframe.allowfullscreen=this.iframe.webkitallowfullscreen=this.iframe.mozallowfullscreen=this.ALLOW_FULLSCREEN,this.setTransparency(this.allowTransparency),this.setBorder(this.border),this.setScrolling(this.hasScrolling),this.setIframeWidth(this.iframeWidth),this.setIframeHeight(this.iframeHeight),b.appendChild(this.iframe),c&&(this.zoneClick=document.createElement("div"),this.zoneClick.className="ebz_iframe_zoneClick",a.helper.Dom.addEvent("click",this.zoneClick,c),b.appendChild(this.zoneClick))}return b.prototype.load=function(b,c,d){var e=-1!==b.indexOf("?")?"&":"?";this.pmKey=a.helper.Util.hashString(b),this.iframe.src=b+e+"viewport="+a.helper.Context.isViewport()+"&android="+a.helper.Context.isAndroid()+"&mraid="+a.helper.Context.isMraid()+"&mraidPlayVideo="+(a.helper.Context.isMraid()&&window.mraid.playVideo?!0:!1)+"&sdk="+a.helper.Context.isSdk()+"&pmKey="+this.pmKey,c&&a.helper.Dom.addEvent("load",this.iframe,c,!0),d&&a.helper.Dom.addEvent("error",this.iframe,d,!0),window.addEventListener("message",this.receiveMessage.bind(this))},b.prototype.receiveMessage=function(b){if(b&&b.data&&-1!==b.data.indexOf(this.pmKey)){var c=JSON.parse(b.data);switch(c.type){case"redirect":a.helper.Dom.openExternalPage(c.url);break;case"video":window.mraid.playVideo(c.url)}}},b.prototype.setScrolling=function(b){this.hasScrolling=b,this.iframe.scrolling=b?"yes":"no",b?a.helper.Dom.addCssClass(this.iframe,[a.helper.CommonCss.SCROLLABLE_CLASS]):a.helper.Dom.removeCssClass(this.iframe,[a.helper.CommonCss.SCROLLABLE_CLASS])},b.prototype.getScrolling=function(){return this.hasScrolling},b.prototype.setBorder=function(a){this.border=a,this.iframe.border=this.iframe.frameBorder=this.iframe.style.border=a?"1":"0"},b.prototype.getBorder=function(){return this.border},b.prototype.setTransparency=function(a){this.allowTransparency=this.iframe.allowTransparency=a},b.prototype.getTransparency=function(){return this.allowTransparency},b.prototype.setIframeWidth=function(a){this.iframeWidth=this.iframe.style.width=a},b.prototype.getIframeWidth=function(){return this.iframeWidth},b.prototype.setIframeHeight=function(a){this.iframeHeight=this.iframe.style.height=a},b.prototype.getIframeHeight=function(){return this.iframeHeight},b.prototype.getHtmlElement=function(){return this.iframe},b}();b.Iframe=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(b,c,d){"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=3),this.videoUrl=b,this.callbacks=c,this.startMode=d,this.logger=new a.helper.ConsoleLogger("MobileVideoController"),this.cuePointCallback=[],this.videoConfig=a.component.VideoPlayer.getVideoCampaign(b,c,d),this.videoConfig&&(this.setHeaderVisible(!1),this.setFooterVisible(!1),this.setShareButtonsVisible(!1),this.setExternalLinkEnable(!1))}return b.prototype.append=function(b,c){"undefined"==typeof c&&(c=null),this.videoPlayer&&this.videoPlayer.playerContainer&&this.videoPlayer.playerContainer.parentNode&&this.videoPlayer.playerContainer.parentNode.removeChild(this.videoPlayer.playerContainer),this.videoPlayer=new a.component.VideoPlayer(this.videoConfig,b),c&&this.setVideoEnd(c),this.mobileEventConfiguration()},b.prototype.mobileEventConfiguration=function(){var b=this;a.helper.Context.isMraid()&&(this.videoPlayer.addListener("play",function(){window.mraid.isViewable()||b.videoPlayer.triggerEvent("pauseRequest")}),window.mraid.addEventListener("viewableChange",function(a){"false"===a?b.videoPlayer.triggerEvent("pauseRequest"):"true"===a&&3===b.startMode&&b.videoPlayer.triggerEvent("playRequest")}))},b.prototype.setVideoEnd=function(a){return this.videoPlayer?(this.videoPlayer.addListener("playerEnd",a),!0):!1},b.prototype.setHeaderVisible=function(a){this.videoConfig.displaySettings.hideHeader=!a},b.prototype.setFooterVisible=function(a){this.videoConfig.displaySettings.hideFooter=!a},b.prototype.setShareButtonsVisible=function(a){this.videoConfig.displaySettings.alwaysHideShareButtons=!a},b.prototype.setExternalLinkEnable=function(a){this.videoConfig.displaySettings.disableExternalLinks=!a},b.prototype.setPoster=function(a){this.videoConfig.displaySettings.assets={mobile:{url:a}}},b.prototype.setCanPlayInline=function(a){this.videoConfig.displaySettings.canPlayInline=a},b.prototype.setCuePointCallback=function(a,b){this.cuePointCallback.push({time:a,callback:b,done:!1,once:!0}),this.listeningOnProgress||(this.videoPlayer.addListener("onProgress",this.onProgress.bind(this)),this.listeningOnProgress=!0,this.videoPlayer.addListener("playerEnd",this.resetCuePoint.bind(this)))},b.prototype.onProgress=function(a){if(this.cuePointCallback&&a&&a.currentTime)for(var b in this.cuePointCallback)a.currentTime>=this.cuePointCallback[b].time&&!this.cuePointCallback[b].done&&this.cuePointCallback.hasOwnProperty(b)&&(this.cuePointCallback[b].callback(a),this.cuePointCallback[b].done=!0)},b.prototype.resetCuePoint=function(){for(var a in this.cuePointCallback)this.cuePointCallback.hasOwnProperty(a)&&!this.cuePointCallback[a].once&&(this.cuePointCallback[a].done=!1)},b.prototype.pauseVideo=function(){this.videoPlayer.triggerEvent("pauseRequest")},b}();b.MobileVideoController=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(c){this.logger=new a.helper.ConsoleLogger("AdDisplay"),this.components={background:{container:this.initContainerDiv(c,b.BACKGROUND_CLASS),content:null},iframe:{container:this.initContainerDiv(c,b.IFRAME_CLASS),content:null},image:{container:this.initContainerDiv(c,b.IMAGE_CLASS),content:null},clickOverCreation:{container:this.initContainerDiv(c,b.CLICK_OVER_CLASS),content:null},video:{container:this.initContainerDiv(c,b.VIDEO_CLASS),content:null},clickOverVideo:{container:this.initContainerDiv(c,b.CLICK_OVER_CLASS),content:null},btShare:{container:this.initContainerDiv(c,b.BT_SHARE_CLASS),content:null},header:{container:this.initContainerDiv(c,b.HEADER_CLASS),content:null},closeButton:{container:this.initContainerDiv(c,b.CLOSE_BUTTON_CLASS),content:null}},this.setBackground("#000","100%"),a.helper.Dom.addEvent("click",this.components.clickOverCreation.container,this.onClick.bind(this)),a.helper.Dom.addEvent("click",this.components.clickOverVideo.container,this.onClick.bind(this))}return b.prototype.initContainerDiv=function(b,c){var d=b.appendChild(document.createElement("div"));return a.helper.Dom.addCssClass(d,[c]),d},b.prototype.onClick=function(a){this.clickCallback&&this.clickCallback(a)},b.prototype.onClose=function(a){this.isFullScreen?this.hideVideoFullScreen():this.closeCallback&&this.closeCallback(a)},b.prototype.setBackground=function(b,c){return a.helper.Dom.applyStyle(this.components.background.container,{backgroundColor:b,height:c,display:"block"}),this.components.background},b.prototype.getBackground=function(){return{color:this.components.background.container.style.backgroundColor,height:this.components.background.container.style.height}},b.prototype.setRedirectCallback=function(a){this.components.clickOverCreation.container.style.display="block",this.clickCallback=a},b.prototype.getRedirectCallback=function(){return this.clickCallback},b.prototype.setVideoClickable=function(a){this.components.clickOverVideo.container.style.display=a?"block":"none"},b.prototype.getVideoClickable=function(){return"block"===this.components.clickOverVideo.container.style.display?!0:!1},b.prototype.setCloseCallback=function(a){this.closeCallback=a},b.prototype.getCloseCallback=function(){return this.closeCallback},b.prototype.loadIframe=function(b,c){return"undefined"==typeof c&&(c=null),this.components.iframe.container.style.display="block",this.components.iframe.container.innerHTML="",this.components.iframe.content=new a.component.Iframe(this.components.iframe.container),this.components.iframe.content.load(b,c),this.components.iframe.content.setScrolling(!1),this.components.iframe},b.prototype.loadImage=function(b,c){return"undefined"==typeof c&&(c=null),this.components.image.container.style.display="block",this.components.image.container.innerHTML="",this.components.image.content=document.createElement("img"),a.helper.Dom.addEvent("load",this.components.image.content,c),this.components.image.content.src=b,this.components.image.container.appendChild(this.components.image.content),this.components.image},b.prototype.createVideo=function(b,c,d,e,f){"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=null),"undefined"==typeof e&&(e=3);var g,h=this.components.video.container;if(h.style.display="block",h.innerHTML="",a.helper.Context.isMobile())g=new a.component.MobileVideoController(b,d,e),f&&f(g),g.append(h,c);else{var i=a.component.VideoPlayer.getVideoCampaign(b,d,e);f&&f(i),g=new a.component.VideoPlayer(i,h),g.addListener("playerEnd",c)}return this.components.video.content=g,this.components.video},b.prototype.createCloseButton=function(){return this.components.closeButton.container.style.display="block",this.components.closeButton.container.innerHTML="",this.components.closeButton.content=new a.component.CloseButton(this.components.closeButton.container,this.onClose.bind(this)),this.components.closeButton.content.setSize(25),this.components.closeButton.container.style.width=this.components.closeButton.container.style.height=this.components.closeButton.content.getSize()+"px",this.components.closeButton},b.prototype.createCloseButtonCustom=function(b){var c,d=this,e=this.components.closeButton.container;return e.style.display="block",e.innerHTML="",""!==b&&(c=document.createElement("img"),c.src=b,a.helper.Dom.addEvent("load",c,function(){e.style.width=a.helper.Dom.convertToDeviceSize({width:c.width,convertInPercent:!1}).width+"px",e.style.height=a.helper.Dom.convertToDeviceSize({width:c.height,convertInPercent:!1}).width+"px",c.style.width=c.style.height="100%",a.helper.Dom.addEvent("click",e,d.onClose.bind(d)),e.appendChild(c)},!0)),this.components.closeButton.content=c,this.components.closeButton},b.prototype.createSharebar=function(){return this.components.btShare.container.style.display="block",this.components.btShare.content=new a.component.Sharebar(this.components.btShare.container),this.components.btShare},b.prototype.createHeader=function(b){return this.components.header.container.style.display="block",this.components.header.content=new a.component.Header(this.components.header.container,b),this.components.header},b.prototype.clickToPlayMode=function(c){var d=this;if(a.helper.Context.isAndroid()||a.helper.Context.isMobile(3))this.components.video.container.style.height="100%",this.components.video.container.style.width="80%",this.components.video.container.style.opacity="0.01",c.isYoutubeVideo?this.components.video.content.videoPlayer.addListener("youtubePlayerStateChange",function(a){-1===a&&d.showVideoFullScreen()}):this.components.video.content.videoPlayer.addListener("trackClick",function(){d.showVideoFullScreen()}),this.components.video.content.videoPlayer.addListener("playerEnd",function(){d.hideVideoFullScreen()});else{a.helper.Dom.addCssClass(this.components.video.container,[b.ZONE_CLICK_VIDEO_CLASS]);var e=c.isYoutubeVideo?"pause":"videoReady";this.components.video.content.videoPlayer.addListener(e,function(){d.components.video.content.videoPlayer.executeJavascriptInFrame("document.getElementsByClassName('VideoManager')[0].style.marginTop = '100%'")}),this.components.video.content.videoPlayer.addListener("playerEnd",function(){d.components.video.content.videoPlayer.addListener("trackClick",function(){d.videoEnded=!0,d.components.video.content.videoPlayer.triggerEvent("playRequest"),setTimeout(function(){return d.components.video.content.videoPlayer.triggerEvent("playRequest")},500)})})}this.components.video.content.videoPlayer.addListener("playerEnd",function(){d.videoEnded=!0,d.components.video.content.videoPlayer.triggerEvent("replayRequest")}),this.components.video.content.videoPlayer.addListener("play",function(){d.videoEnded?(d.components.video.content.videoPlayer.triggerEvent("pauseRequest"),d.videoEnded=!1):a.helper.Tracker.fire(c.config.tracking.callbacks.engagement,{},[],!0)})},b.prototype.showVideoFullScreen=function(){this.isFullScreen=!0,a.helper.Context.isMobile()&&this.components.video.content.videoPlayer.triggerEvent("playRequest"),a.helper.Dom.removeCssClass(this.components.video.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT_HIDE]),a.helper.Dom.addCssClass(this.components.video.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT]),a.helper.Dom.removeCssClass(this.components.closeButton.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT_CLOSE_BUTTON_HIDE]),a.helper.Dom.addCssClass(this.components.closeButton.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT_CLOSE_BUTTON]),this.components.closeButton.content.setSize(30),this.components.closeButton.container.style.width=this.components.closeButton.container.style.height=this.components.closeButton.content.getSize()+"px"},b.prototype.hideVideoFullScreen=function(){this.isFullScreen=!1,a.helper.Context.isMobile()&&this.components.video.content.videoPlayer.triggerEvent("pauseRequest"),a.helper.Dom.removeCssClass(this.components.video.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT]),a.helper.Dom.addCssClass(this.components.video.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT_HIDE]),a.helper.Dom.removeCssClass(this.components.closeButton.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT_CLOSE_BUTTON]),this.components.closeButton.content.setSize(25),this.components.closeButton.container.style.width=this.components.closeButton.container.style.height=this.components.closeButton.content.getSize()+"px"},b.BACKGROUND_CLASS="ebz_adDisplay ebz_adDisplay_background",b.IFRAME_CLASS="ebz_adDisplay ebz_adDisplay_iframe",b.IMAGE_CLASS="ebz_adDisplay ebz_adDisplay_image",b.CLICK_OVER_CLASS="ebz_adDisplay ebz_adDisplay_clickOver",b.VIDEO_CLASS="ebz_adDisplay ebz_adDisplay_video",b.BT_SHARE_CLASS="ebz_adDisplay ebz_adDisplay_btShare",b.HEADER_CLASS="ebz_adDisplay ebz_adDisplay_header",b.CLOSE_BUTTON_CLASS="ebz_adDisplay ebz_adDisplay_closeButton",b.ZONE_CLICK_VIDEO_CLASS="ebz_zone_click_video",b}();b.AdDisplay=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(b){this.config=b,this.logger=new a.helper.ConsoleLogger("Footer"),this.videoEnded=!1,a.helper.Context.isMobile()&&!a.helper.Context.isMobile(3)&&(b.banner.forceResponsive||(b.banner.width=b.banner.width/2),b.banner.height=b.banner.height/2,b.banner.style&&b.banner.style.backgroundHeight&&(b.banner.style.backgroundHeight=b.banner.style.backgroundHeight/2)),3===a.helper.Dom.tagFromSrc(this.config.expand.src)&&(this.config.expand.logo?this.isVideoExpand=!0:this.isVideoClickToPlay=!0,this.isYoutubeVideo=-1!==this.config.expand.src.indexOf("youtube.com/watch?v=")),window&&"complete"!==document.readyState?(a.helper.Dom.addEvent("load",window,this.initOnLoad.bind(this)),this.timeoutWindowLoad=setTimeout(this.initOnLoad.bind(this),1e4)):"complete"===document.readyState&&this.initOnLoad()}return b.prototype.initOnLoad=function(c){"undefined"==typeof c&&(c=null),clearTimeout(this.timeoutWindowLoad),this.createBanner(),document.body.appendChild(this.bannerContainer),this.config.expand.preload&&!this.isVideoClickToPlay?this.createExpand():this.isVideoClickToPlay&&(a.helper.Context.isMraid()||this.createVideoClickToPlay()),this.config.fadeOnScroll&&a.helper.Dom.addEvent("scroll",window,this.fadeBanner.bind(this)),a.helper.Context.isMobile()&&(a.helper.Context.isAndroid()||a.helper.Dom.addEvent("scroll",window,this.updateContent.bind(this)),a.helper.Dom.addEvent("orientationchange",window,this.updateContent.bind(this))),a.helper.Context.isMraid()?(a.helper.Dom.addCssClass(this.bannerContainer,[b.MRAID_DISABLE_TRANSITION]),this.expandContainer&&a.helper.Dom.addCssClass(this.expandContainer,[b.MRAID_DISABLE_TRANSITION]),window.mraid.addEventListener("stateChange",this.mraidStateChange.bind(this))):(this.createBannerCloseButton(),a.helper.Dom.addEvent("resize",window,this.updateContent.bind(this))),a.helper.Tracker.fire(this.config.tracking.callbacks.impression,{},[],!0)},b.prototype.mraidStateChange=function(b){var c=this,d=a.helper.Context.isAndroid()?200:0;switch(b){case"expanded":this.expandAdDisplay.components.iframe.content&&setTimeout(function(){return a.helper.Dom.centerMe(c.expandAdDisplay.components.iframe.container,0,2)},d);break;case"default":default:setTimeout(function(){return c.updateContent()},d)}},b.prototype.createBanner=function(){var c=this;this.bannerContainer=document.createElement("div"),a.helper.Dom.addCssClass(this.bannerContainer,[b.BANNER_CLASS,b.BANNER_HIDE_CLASS]),this.resizeBanner(),this.bannerAdDisplay=new a.component.AdDisplay(this.bannerContainer);var d="100%";switch(this.config.banner.style&&this.config.banner.style.background&&((this.config.banner.style.backgroundHeight||0===this.config.banner.style.backgroundHeight)&&(d=100*this.config.banner.style.backgroundHeight/this.config.banner.height+"%"),this.bannerAdDisplay.setBackground(this.config.banner.style.background,d)),a.helper.Dom.tagFromSrc(this.config.banner.src)){case 0:var e=this.bannerAdDisplay.loadImage(this.config.banner.src,function(){c.initialBannerWidth=e.content.width,c.initialBannerHeight=e.content.height,c.config.banner.width=2*e.content.width,a.helper.Context.isMobile(3)&&(e.content.style.width="100%"),c.resizeBanner(),c.showBanner(),a.helper.Dom.centerMe(e.content,0,2)});break;case 1:this.initialBannerWidth=this.config.banner.width,this.initialBannerHeight=this.config.banner.height;var f=this.bannerAdDisplay.loadIframe(this.config.banner.src,function(){c.config.banner.forceResponsive&&a.helper.Dom.centerMe(f.container,0,2),c.showBanner()});a.helper.Dom.addCssClass(f.container,[b.BANNER_IFRAME_CLASS]),f.container.style.width=this.config.banner.width+"px",this.resizeBanner(),this.resizeBannerIframe();break;default:this.logger.error("banner - unrecognized source")}this.bannerAdDisplay.setRedirectCallback(this.showExpand.bind(this))},b.prototype.createBannerCloseButton=function(){var c=this.bannerAdDisplay.createCloseButton();a.helper.Context.isMobile()&&-1!==this.config.mobileCloseButtonPosition.indexOf("outBanner")?("outBannerLeft"===this.config.mobileCloseButtonPosition?a.helper.Dom.addCssClass(c.container,[b.BANNER_CLOSEBTN_OUT_LEFT]):"outBannerRight"===this.config.mobileCloseButtonPosition&&a.helper.Dom.addCssClass(c.container,[b.BANNER_CLOSEBTN_OUT_RIGHT]),c.content.setBackgroundShape(1)):("inBannerLeft"===this.config.mobileCloseButtonPosition?a.helper.Dom.addCssClass(c.container,[a.helper.CommonCss.TOP_LEFT_POSITION_CLASS,b.BANNER_CLOSEBTN_IN]):"inBannerRight"===this.config.mobileCloseButtonPosition&&a.helper.Dom.addCssClass(c.container,[a.helper.CommonCss.TOP_RIGHT_POSITION_CLASS,b.BANNER_CLOSEBTN_IN]),c.content.setBackgroundColor("#FFF"),c.content.setIconColor("#000")),this.bannerAdDisplay.setCloseCallback(this.hideBanner.bind(this,!0))},b.prototype.createExpand=function(c){"undefined"==typeof c&&(c=null);var d=this;if(this.expandContainer=document.createElement("div"),this.expandContainer.style.visibility="hidden",a.helper.Dom.addCssClass(this.expandContainer,[b.EXPAND_CLASS,b.EXPAND_HIDE_CLASS]),this.expandAdDisplay=new a.component.AdDisplay(this.expandContainer),this.isVideoExpand){var e=this.expandAdDisplay.createSharebar(),f=(this.expandAdDisplay.createVideo(this.config.expand.src,this.hideExpand.bind(this),this.config.tracking.callbacks,1),this.expandAdDisplay.loadImage(this.config.expand.image,function(){f.content.style.width="100%",c&&c()}));e.content.setLogoCallback(this.config.expand.logo,function(){return a.helper.Dom.openExternalPage(d.config.tracking.openPageClicBackground)}),e.content.setFacebookCallback(function(){return a.helper.Dom.openExternalPage(d.config.tracking.socialRedirect.facebook)}),e.content.setTwitterCallback(function(){return a.helper.Dom.openExternalPage(d.config.tracking.socialRedirect.twitter)}),e.content.setGplusCallback(function(){return a.helper.Dom.openExternalPage(d.config.tracking.socialRedirect.gplus)}),this.expandAdDisplay.setRedirectCallback(function(){return a.helper.Dom.openExternalPage(d.config.tracking.openPageClicBackground)})}else{var g=this.expandAdDisplay.loadIframe(this.config.expand.src,function(){c?c():document.body.removeChild(d.expandContainer)});g.content.setScrolling(this.config.expand.scrollable)}this.config.expand.style&&this.config.expand.style.background&&this.expandAdDisplay.setBackground(this.config.expand.style.background,"100%"),this.config.expand.forcePortrait&&a.helper.Dom.forceOrientation(this.expandContainer),setTimeout(this.updateContent.bind(this),a.helper.Context.isAndroid()?200:0),this.createExpandCloseButton(),document.body.appendChild(this.expandContainer)},b.prototype.createExpandCloseButton=function(){var b;this.config.expand.closeButton.customButton&&""!==this.config.expand.closeButton.customButton?b=this.expandAdDisplay.createCloseButtonCustom(this.config.expand.closeButton.customButton):(b=this.expandAdDisplay.createCloseButton(),b.content.setSize(this.config.expand.closeButton.size),b.container.style.width=b.container.style.height=b.content.getSize()+"px",b.content.setBackgroundColor("#FFF"),b.content.setIconColor("#000")),a.helper.Dom.addCssClass(b.container,[a.helper.CommonCss.choosePositionClass(this.config.expand.closeButton.position)]),this.expandAdDisplay.setCloseCallback(this.hideExpand.bind(this))},b.prototype.createVideoClickToPlay=function(){this.bannerAdDisplay.createVideo(this.config.expand.src,null,this.config.tracking.callbacks,1,function(a){a.videoConfig.displaySettings.hideFooter=!0,a.videoConfig.displaySettings.hideHeader=!0,a.videoConfig.displaySettings.alwaysHideShareButtons=!0,a.videoConfig.displaySettings.disableExternalLinks=!0});this.bannerAdDisplay.clickToPlayMode(this)},b.prototype.updateContent=function(){var b=1===a.helper.Dom.getOrientation(),c=this.expandAdDisplay?this.expandAdDisplay.components:null,d=this.bannerAdDisplay.components;if(b?(d.closeButton.content&&d.closeButton.content.setSize(20),c&&c.closeButton.content&&c.closeButton.content.setSize(a.helper.Context.isViewport()?this.config.expand.closeButton.size:this.config.expand.closeButton.size/2)):(d.closeButton.content&&d.closeButton.content.setSize(25),c&&c.closeButton.content&&c.closeButton.content.setSize(this.config.expand.closeButton.size)),d.closeButton.content&&(d.closeButton.container.style.width=d.closeButton.container.style.height=d.closeButton.content.getSize()+"px"),c&&c.closeButton.content&&(c.closeButton.container.style.width=c.closeButton.container.style.height=c.closeButton.content.getSize()+"px"),c&&c.iframe.content&&(b?this.config.expand.forcePortrait?(c.iframe.content.setIframeHeight(window.innerWidth+"px"),c.iframe.content.setIframeWidth(window.innerHeight+"px")):c.iframe.content.setIframeHeight(window.innerHeight+"px"):(c.iframe.content.setIframeHeight("100%"),c.iframe.content.setIframeWidth("100%"))),this.isVideoExpand&&c&&c.video.content){var e=a.helper.Dom.getWindowSize()[0],f=9*e/16;c.video.container.style.width=e+"px",c.video.container.style.height=f+"px",a.helper.Dom.centerMe(c.video.container,0,2),c.btShare.content&&!b?(c.btShare.container.style.top=c.video.container.offsetTop+f+"px",c.btShare.container.style.bottom="auto"):c.btShare.content&&(c.btShare.container.style.top="auto",c.btShare.container.style.bottom=c.btShare.content.getHeight())}if(d.image.content&&a.helper.Dom.centerMe(d.image.content,0,2),this.resizeBanner(),d.iframe.content&&this.resizeBannerIframe(),this.config.banner.floatingInLandscape&&b){var g,h;d.iframe.content?(h=parseFloat(d.iframe.container.style.transform.substr(6)),g=parseInt(d.iframe.container.style.width,10)*h+"px",this.bannerContainer.style.height=parseInt(d.iframe.container.style.height,10)*h+"px"):g=d.image.content.offsetWidth+"px",this.bannerContainer.style.width=g,a.helper.Dom.centerMe(this.bannerContainer,1,0)}else this.bannerContainer.style.width="100%",this.bannerContainer.style.left="0",this.bannerContainer.style.marginLeft="0"},b.prototype.resizeBannerIframe=function(){var b=this.bannerAdDisplay.components.iframe;if(a.helper.Context.isMobile()&&!a.helper.Context.isViewport()&&this.config.banner.forceResponsive&&!a.helper.Context.isMobile(3)){var c=a.helper.Dom.convertToDeviceSize({height:1,convertInPercent:!1}).height,d=1===a.helper.Dom.getOrientation()?parseFloat("0."+this.bannerContainer.style.height)*window.innerHeight/(2*this.config.banner.height):c/2;a.helper.Dom.applyVendorProperties(b.container,"transform","scale("+d+")"),b.container.style.height=2*this.config.banner.height+"px"}else a.helper.Context.isMobile(3)&&this.config.banner.forceResponsive?(b.container.style.width=this.config.banner.width+"px",b.container.style.height=this.config.banner.height+"px",d=window.innerWidth/this.config.banner.width,a.helper.Dom.applyVendorProperties(b.container,"transform","scale("+d+")")):a.helper.Context.isViewport()&&this.config.banner.forceResponsive?(d=1===a.helper.Dom.getOrientation()?.25:.5,a.helper.Dom.applyVendorProperties(b.container,"transform","scale("+d+")"),b.container.style.height=2*this.config.banner.height+"px"):b.container.style.width="100%";this.config.banner.forceResponsive&&a.helper.Dom.centerMe(b.container,0,2)},b.prototype.resizeBanner=function(){a.helper.Context.isMraid()||(a.helper.Context.isMobile()&&!a.helper.Context.isViewport()?this.bannerContainer.style.height=a.helper.Context.isMobile(3)?this.config.banner.height+"px":a.helper.Context.isAndroid()&&1===a.helper.Dom.getOrientation()?a.helper.Dom.convertToDeviceSize({width:this.config.banner.height,convertInPercent:!0}).width+"%":a.helper.Dom.convertToDeviceSize({height:this.config.banner.height,convertInPercent:!0}).height+"%":a.helper.Context.isMobile()&&a.helper.Context.isViewport()&&(a.helper.Context.isMobile(3)?this.initialBannerWidth&&(this.bannerContainer.style.height=100*window.innerWidth/this.initialBannerWidth+"px"):this.bannerContainer.style.height=this.config.banner.height+"px"))},b.prototype.fadeBanner=function(){var a=this;this.bannerContainer.style.opacity="0.5",clearTimeout(this.timeoutScroll),this.timeoutScroll=setTimeout(function(){return a.bannerContainer.style.opacity="1"},100)},b.prototype.showBanner=function(){this.updateContent(),a.helper.Dom.removeCssClass(this.bannerContainer,[b.BANNER_HIDE_CLASS]),a.helper.Dom.addCssClass(this.bannerContainer,[b.BANNER_SHOW_CLASS])},b.prototype.hideBanner=function(c){a.helper.Dom.removeCssClass(this.bannerContainer,[b.BANNER_SHOW_CLASS]),a.helper.Dom.addCssClass(this.bannerContainer,[b.BANNER_HIDE_CLASS]),c&&(a.helper.Dom.addEvent("transitionend",this.bannerContainer,this.killFooter.bind(this),!0),a.helper.Tracker.fire(this.config.tracking.callbacks.closeAd,{},[],!0))},b.prototype.killFooter=function(b){"undefined"==typeof b&&(b=null),this.bannerContainer.parentNode&&this.bannerContainer.parentNode.removeChild(this.bannerContainer),this.expandContainer&&this.expandContainer.parentNode&&this.expandContainer.parentNode.removeChild(this.expandContainer),this.config.fadeOnScroll&&a.helper.Dom.removeEvent("scroll",window,this.fadeBanner.bind(this)),this.videoPlayerContainer&&this.videoPlayerContainer.parentNode&&this.videoPlayerContainer.parentNode.removeChild(this.videoPlayerContainer),a.helper.Context.isMobile()&&(a.helper.Dom.removeEvent("scroll",window,this.updateContent.bind(this)),a.helper.Dom.removeEvent("orientationchange",window,this.updateContent.bind(this))),a.helper.Dom.removeEvent("resize",window,this.updateContent.bind(this))},b.prototype.showExpand=function(){var c=this;this.config.expand.openInNewTab?(this.killFooter(),this.openExternalPage(this.config.expand.src)):this.isVideoClickToPlay?a.helper.Context.isMraid()&&window.mraid.playVideo&&!this.isYoutubeVideo?window.mraid.playVideo(this.config.expand.src):a.helper.Context.isMraid()||!a.helper.Context.isAndroid()&&!a.helper.Context.isMobile(3)||this.bannerAdDisplay.showVideoFullScreen():(this.config.expand.preload||this.expandContainer?(this.expandContainer.parentNode||document.body.appendChild(this.expandContainer),setTimeout(function(){a.helper.Dom.removeCssClass(c.expandContainer,[b.EXPAND_HIDE_CLASS]),a.helper.Dom.addCssClass(c.expandContainer,[b.EXPAND_SHOW_CLASS])},100)):this.createExpand(function(){a.helper.Dom.removeCssClass(c.expandContainer,[b.EXPAND_HIDE_CLASS]),a.helper.Dom.addCssClass(c.expandContainer,[b.EXPAND_SHOW_CLASS])}),a.helper.Context.isMobile()&&window.scrollTo(0,1),this.hideBanner(!1),this.expandContainer.style.visibility="visible",a.helper.Context.isMraid()&&"default"===window.mraid.getState()&&(window.mraid.setExpandProperties({useCustomClose:!0}),window.mraid.expand())),a.helper.Tracker.fire(this.config.tracking.callbacks.engagement,{},[],!0)},b.prototype.hideExpand=function(){a.helper.Dom.removeCssClass(this.expandContainer,[b.EXPAND_SHOW_CLASS]),a.helper.Dom.addCssClass(this.expandContainer,[b.EXPAND_HIDE_CLASS]),this.showBanner(),a.helper.Context.isMraid()&&"expanded"===window.mraid.getState()?window.mraid.close():a.helper.Dom.addEvent("transitionend",this.expandContainer,this.killExpand.bind(this),!0),a.helper.Tracker.fire(this.config.tracking.callbacks.collapse,{},[],!0)},b.prototype.killExpand=function(){this.expandContainer.parentNode&&this.expandContainer.parentNode.removeChild(this.expandContainer)
},b.prototype.openExternalPage=function(b){""!==b&&(a.helper.Context.isMraid()?window.mraid.open(b):a.helper.Context.isSdk()?EbzSDK.openBrowser({url:b}):window.open(b,"_blank"))},b.BANNER_CLASS="ebz_footer_banner",b.BANNER_SHOW_CLASS="ebz_footer_banner_show",b.BANNER_HIDE_CLASS="ebz_footer_banner_hide",b.BANNER_CLOSEBTN_OUT_LEFT="ebz_footer_banner_close_out_left",b.BANNER_CLOSEBTN_OUT_RIGHT="ebz_footer_banner_close_out_right",b.BANNER_CLOSEBTN_IN="ebz_footer_banner_close_in",b.BANNER_IFRAME_CLASS="ebz_footer_banner_iframe",b.EXPAND_CLASS="ebz_footer_expand",b.EXPAND_SHOW_CLASS="ebz_footer_expand_show",b.EXPAND_HIDE_CLASS="ebz_footer_expand_hide",b.ZONE_CLICK_VIDEO_CLASS="ebz_zone_click_video",b.MRAID_DISABLE_TRANSITION="ebz_mraid_disabled_transition",b}();b.Footer=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){!function(a){a[a.START_RECT=0]="START_RECT",a[a.FINAL_RECT=1]="FINAL_RECT",a[a.BOTH=2]="BOTH"}(b.WebviewRect||(b.WebviewRect={}));b.WebviewRect;!function(a){a[a.PORTRAIT=0]="PORTRAIT",a[a.LANDSCAPE=1]="LANDSCAPE",a[a.ALL=2]="ALL"}(b.WebviewOrientation||(b.WebviewOrientation={}));var c=(b.WebviewOrientation,function(){function b(){var c=this;if(this.logger=new a.helper.ConsoleLogger("NativeVideoPlayer"),this.firstPlay=!0,this.isReallyLoad=!1,this.nativeVideoPlayerParams={url:"",closeButton:!1,chromeLess:!0,onProgressJs:"playerProgress(%s)",onPlaybackStateChangedJs:'dispatchEvent("videoPlayer", "playbackState:" + %s.playbackState)',onLoadStateChangedJs:'dispatchEvent("videoPlayer", "loadState:" + %s.loadState)',onBackgroundModeJs:'dispatchEvent("videoPlayer", "backgroundMode")',onTouchJs:'dispatchEvent("videoPlayer", "onTouchJs")',autoplay:!1,poster:""},this.nativeVideoPlayerWebview={viewId:"videoPlayer",webViewUrl:"http://"+window.location.host+"/mobile/sdk_defaultWebView_v2.htm?appId="+(window.$bundleId||""),closeButtonPos:"0",autoresizing:58,zindex:2,animation:"style1",orientation:"all",scrollable:!1,active:!1},!a.helper.Context.isSdk())return void this.logger.error("Not in SDK, can't call SdkPlayer");this.setRect(2);var d=this.nativeVideoPlayerWebview.viewId;EbzSDK.addEventListener(d,b.VIDEO_START,function(){c.isReallyLoad=!0,c.activityIndicator(!1),c.dispatchEvent(b.VIDEO_START)}),EbzSDK.addEventListener(d,b.VIDEO_25,function(){return c.dispatchEvent(b.VIDEO_25)}),EbzSDK.addEventListener(d,b.VIDEO_50,function(){return c.dispatchEvent(b.VIDEO_50)}),EbzSDK.addEventListener(d,b.VIDEO_75,function(){return c.dispatchEvent(b.VIDEO_75)}),EbzSDK.addEventListener(d,b.VIDEO_90,function(){return c.dispatchEvent(b.VIDEO_90)}),EbzSDK.addEventListener(d,b.VIDEO_END,function(){return c.dispatchEvent(b.VIDEO_END)}),EbzSDK.addEventListener(d,b.TOUCH,function(){return c.dispatchEvent(b.TOUCH)}),EbzSDK.addEventListener(d,b.BILLABLE,function(){return c.dispatchEvent(b.BILLABLE)}),EbzSDK.addEventListener(d,b.PLAYING,function(){return c.playbackState(b.PLAYING)}),EbzSDK.addEventListener(d,b.PAUSED,function(){return c.playbackState(b.PAUSED)}),EbzSDK.addEventListener(d,b.LOAD_STATE_0,function(){return c.loadState(0)}),EbzSDK.addEventListener(d,b.LOAD_STATE_1,function(){return c.loadState(1)}),EbzSDK.addEventListener(d,b.LOAD_STATE_2,function(){return c.loadState(2)}),EbzSDK.addEventListener(d,b.LOAD_STATE_3,function(){return c.loadState(3)}),EbzSDK.addEventListener(d,b.LOAD_STATE_4,function(){return c.loadState(4)}),EbzSDK.addEventListener(d,b.LOAD_STATE_5,function(){return c.loadState(5)}),EbzSDK.addEventListener(d,b.LOAD_STATE_6,function(){return c.loadState(6)}),EbzSDK.addEventListener(d,b.LOAD_STATE_7,function(){return c.loadState(7)}),EbzSDK.addEventListener(d,b.BACKGROUND_MODE,function(){return c.showPlayBtn()})}return b.prototype.dispatchEvent=function(a){this.externalCallback&&this.externalCallback(a)},b.prototype.playerAction=function(a){EbzSDK.webView({viewId:this.nativeVideoPlayerWebview.viewId,javascript:this.convertToString(a)})},b.prototype.activityIndicator=function(a){EbzSDK.webView({viewId:this.nativeVideoPlayerWebview.viewId,javascript:"EbzSDK.activityIndicator({show: '"+a+"'});"})},b.prototype.convertToString=function(b){return"EbzSDK.SDKPlayer("+a.helper.Json.stringify(b)+");"},b.prototype.playbackState=function(a){switch(a){case b.PLAYING:this.nativeVideoPlayerParams.autoplay===!1&&this.firstPlay&&(this.playerAction({playerAction:"pause"}),this.firstPlay=!1);break;case b.PAUSED:}},b.prototype.loadState=function(a){switch(a){case b.LOAD_STATE_UNKNOW:break;case b.LOAD_STATE_PLAYABLE:this.isReallyLoad&&this.activityIndicator(!1);break;case b.LOAD_STATE_PLAY_THROUGHT_OK:this.isReallyLoad&&this.activityIndicator(!1);break;case b.LOAD_STATE_PLAYABLE+b.LOAD_STATE_PLAY_THROUGHT_OK:this.isReallyLoad&&this.activityIndicator(!1);break;case b.LOAD_STATE_STALLED:this.activityIndicator(!0);break;case b.LOAD_STATE_STALLED+b.LOAD_STATE_PLAYABLE:this.activityIndicator(!0);break;case b.LOAD_STATE_STALLED+b.LOAD_STATE_PLAY_THROUGHT_OK:this.activityIndicator(!0);break;case b.LOAD_STATE_STALLED+b.LOAD_STATE_PLAYABLE+b.LOAD_STATE_PLAY_THROUGHT_OK:this.activityIndicator(!0)}},b.prototype.callPosterWebview=function(){this.createPosterWebview(),this.createPlayWebview()},b.prototype.createPosterWebview=function(){var a=this,c=this.nativeVideoPlayerWebview.viewId+"_poster";this.poster={viewId:c,webViewUrl:"http://"+window.location.host+"/mobile/sdk_defaultWebView_v2.htm?appId="+(window.$bundleId||""),closeButtonPos:"0",scrollable:!1,startRect:this.nativeVideoPlayerWebview.startRect,finalRect:this.nativeVideoPlayerWebview.finalRect,autoresizing:this.nativeVideoPlayerWebview.autoresizing,orientation:this.nativeVideoPlayerWebview.orientation,zindex:this.nativeVideoPlayerWebview.zindex+1,bodyHtml:"<img src='"+this.nativeVideoPlayerParams.poster+"' width='100%' height='100%'>",onTouchJs:'dispatchEvent("'+c+'", "'+b.TOUCH+'")',active:!0},EbzSDK.webView(this.poster),EbzSDK.addEventListener(c,b.TOUCH,function(){return a.hidePosterAndPlay()})},b.prototype.createPlayWebview=function(){var a,c=this,d=window.innerWidth>window.innerHeight,e=this.nativeVideoPlayerWebview.viewId+"_btPlay",f=["","0",b.BT_PLAY_WIDTH,b.BT_PLAY_HEIGHT,"","","50%"],g=this.nativeVideoPlayerWebview.finalRect.split(","),h=parseInt(g[3],10),i=-1!==g[3].indexOf("%")?h*(d?window.innerWidth:window.innerHeight)/100:h;g.length>=8&&""!==g[7]?f.push(","+g[7]):""!==g[5]?(a=-1!==g[5].indexOf("%")?parseInt(g[5],10)*(d?window.innerWidth:window.innerHeight)/100:parseInt(g[5],10),f[5]=i/2-parseInt(b.BT_PLAY_HEIGHT,10)/2+"px"):""!==g[1]&&(a=-1!==g[1].indexOf("%")?parseInt(g[1],10)*(d?window.innerWidth:window.innerHeight)/100:parseInt(g[1],10),f[1]=a+i/2-parseInt(b.BT_PLAY_HEIGHT,10)/2+"px"),this.btPlay={viewId:e,webViewUrl:"http://"+window.location.host+"/mobile/sdk_defaultWebView_v2.htm?appId="+(window.$bundleId||""),closeButtonPos:"0",scrollable:!1,startRect:f.join(","),finalRect:f.join(","),autoresizing:45,orientation:this.nativeVideoPlayerWebview.orientation,zindex:this.nativeVideoPlayerWebview.zindex+2,bodyHtml:"<img src='"+(window.location.origin+b.BT_PLAY_PATH)+"' width='"+b.BT_PLAY_WIDTH+"' height='"+b.BT_PLAY_HEIGHT+"'>",onTouchJs:'dispatchEvent("'+e+'", "'+b.TOUCH+'")',active:!0},EbzSDK.webView(this.btPlay),EbzSDK.addEventListener(e,b.TOUCH,function(){return c.hidePosterAndPlay()})},b.prototype.hidePlayBtn=function(){this.btPlay&&EbzSDK.webView({viewId:this.btPlay.viewId,zindex:0})},b.prototype.showPlayBtn=function(){this.btPlay?EbzSDK.webView({viewId:this.btPlay.viewId,zindex:this.nativeVideoPlayerWebview.zindex+2}):this.createPlayWebview()},b.prototype.hidePosterAndPlay=function(){this.poster&&this.poster.active&&(EbzSDK.webView({viewId:this.poster.viewId,javascript:"EbzSDK.close()"}),this.poster.active=!1),this.hidePlayBtn(),this.firstPlay=!1,this.playerAction({playerAction:"play"})},b.prototype.setAutoplay=function(a){this.nativeVideoPlayerParams.autoplay=a},b.prototype.getAutoplay=function(){return this.nativeVideoPlayerParams.autoplay},b.prototype.setAutoresizing=function(a){this.nativeVideoPlayerWebview.autoresizing=a},b.prototype.getAutoresizing=function(){return this.nativeVideoPlayerWebview.autoresizing},b.prototype.setPoster=function(a){this.nativeVideoPlayerParams.poster=a},b.prototype.getPoster=function(){return this.nativeVideoPlayerParams.poster},b.prototype.setBillingDelay=function(a){this.billingDelay=a},b.prototype.getBillingDelay=function(){return this.billingDelay},b.prototype.setOrientation=function(a){switch(a){case 0:this.nativeVideoPlayerWebview.orientation="portrait";break;case 1:this.nativeVideoPlayerWebview.orientation="landscape";break;case 2:this.nativeVideoPlayerWebview.orientation="all"}},b.prototype.getOrientation=function(){var a;switch(this.nativeVideoPlayerWebview.orientation){case"portrait":a=0;break;case"landscape":a=1;break;case"all":a=2}return a},b.prototype.setRect=function(a,b,c,d,e,f,g,h,i,j,k){"undefined"==typeof b&&(b="0"),"undefined"==typeof c&&(c="0"),"undefined"==typeof d&&(d="100%"),"undefined"==typeof e&&(e="100%"),"undefined"==typeof f&&(f=""),"undefined"==typeof g&&(g=""),"undefined"==typeof h&&(h=""),"undefined"==typeof i&&(i=""),"undefined"==typeof j&&(j=""),"undefined"==typeof k&&(k=""),(0===a||2===a)&&(this.nativeVideoPlayerWebview.startRect=b+","+c+","+d+","+e+","+f+","+g+","+h+","+i+","+j+","+k,this.nativeVideoPlayerWebview.active&&EbzSDK.webView({viewId:this.nativeVideoPlayerWebview.viewId,startRect:this.nativeVideoPlayerWebview.startRect})),(1===a||2===a)&&(this.nativeVideoPlayerWebview.finalRect=b+","+c+","+d+","+e+","+f+","+g+","+h+","+i+","+j+","+k,this.nativeVideoPlayerWebview.active&&EbzSDK.webView({viewId:this.nativeVideoPlayerWebview.viewId,finalRect:this.nativeVideoPlayerWebview.finalRect}))},b.prototype.seek=function(){},b.prototype.load=function(a,b){this.nativeVideoPlayerWebview.active||(this.nativeVideoPlayerParams.url=a,this.externalCallback=b,this.nativeVideoPlayerWebview.onLoadJs=this.convertToString(this.nativeVideoPlayerParams),this.nativeVideoPlayerWebview.onLoadJs+="EbzSDK.activityIndicator({show: 'true'});",this.nativeVideoPlayerWebview.onLoadJs+=this.billingDelay?"var billingDelay = "+this.billingDelay:"",this.nativeVideoPlayerWebview.active=!0,EbzSDK.webView(this.nativeVideoPlayerWebview),!this.nativeVideoPlayerParams.autoplay&&this.firstPlay&&this.callPosterWebview())},b.prototype.play=function(){this.nativeVideoPlayerWebview.active&&this.playerAction({playerAction:"play"})},b.prototype.pause=function(){this.nativeVideoPlayerWebview.active&&this.playerAction({playerAction:"pause"})},b.prototype.stop=function(){this.nativeVideoPlayerWebview.active&&this.playerAction({playerAction:"stop"})},b.prototype.remove=function(){this.nativeVideoPlayerWebview.active&&(EbzSDK.webView({viewId:this.nativeVideoPlayerWebview.viewId,javascript:"EbzSDK.close()"}),this.nativeVideoPlayerWebview.active=!1)},b.LOAD_STATE_UNKNOW=0,b.LOAD_STATE_PLAYABLE=1,b.LOAD_STATE_PLAY_THROUGHT_OK=2,b.LOAD_STATE_STALLED=4,b.VIDEO_START="0.1",b.VIDEO_25="25",b.VIDEO_50="50",b.VIDEO_75="75",b.VIDEO_90="90",b.VIDEO_END="99",b.TOUCH="onTouchJs",b.BACKGROUND_MODE="backgroundMode",b.BILLABLE="billingDelay",b.PLAYING="playbackState:1",b.PAUSED="playbackState:2",b.BT_PLAY_PATH="/ebzFormats/assets/img/native_play.png",b.BT_PLAY_WIDTH="100px",b.BT_PLAY_HEIGHT="100px",b.LOAD_STATE_0="loadState:0",b.LOAD_STATE_1="loadState:1",b.LOAD_STATE_2="loadState:2",b.LOAD_STATE_3="loadState:3",b.LOAD_STATE_4="loadState:4",b.LOAD_STATE_5="loadState:5",b.LOAD_STATE_6="loadState:6",b.LOAD_STATE_7="loadState:7",b}());b.NativeVideoPlayer=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(b){this.config=b,this.logger=new a.helper.ConsoleLogger("Flow"),this.sdkCloseReason=[0,7],this.isTypeVideo=this.config.expand.video?!0:!1,this.config.expand&&(this.createExpand(),a.helper.Dom.addEvent("resize",window,this.updateContent.bind(this)),a.helper.Dom.addEvent("orientationchange",window,this.updateContent.bind(this)),a.helper.Dom.addEvent("load",window.document,this.updateContent.bind(this)),this.isTypeVideo&&(this.createVideoPlayer(),a.helper.Context.isMobile(3)&&a.helper.Dom.addEvent("orientationchange",window,this.updateContent.bind(this))))}return b.prototype.createExpand=function(){var c=this;switch(this.container=document.createElement("div"),a.helper.Dom.addCssClass(this.container,[b.EXPAND_CLASS]),document.body.appendChild(this.container),a.helper.Dom.tagFromSrc(this.config.expand.src)){case 0:this.image=document.createElement("img"),this.image.src=this.config.expand.src,this.container.appendChild(this.image),a.helper.Dom.addEvent("load",this.image,function(){c.updateContent(),c.showExpand()},!0),a.helper.Dom.addEvent("click",this.image,function(){a.helper.Tracker.fire(c.config.tracking.callbacks.clicBackground,{},[],!0),a.helper.Dom.openExternalPage(c.config.tracking.openPageClicBackground)});break;case 1:this.iframe=new a.component.Iframe(this.container,this.showExpand.bind(this)),this.iframe.load(this.config.expand.src,this.showExpand.bind(this)),this.iframe.setScrolling(!1),this.updateContent();break;default:this.logger.error("expand - unrecognized source")}this.closeButtonContainer=document.createElement("div"),a.helper.Dom.addCssClass(this.closeButtonContainer,[b.EXPAND_CLOSEBUTTON_CLASS,a.helper.CommonCss.choosePositionClass(this.config.expand.closeButton.position)]),this.container.appendChild(this.closeButtonContainer),this.closeButton=new a.component.CloseButton(this.closeButtonContainer,this.closeExpand.bind(this)),this.closeButton.setSize(26),this.closeButton.setBackgroundColor("#FFF"),this.closeButton.setIconColor("#000"),this.closeButton.setDelay(1e3*this.config.expand.closeButton.delayDisplay)},b.prototype.createVideoPlayer=function(){if(a.helper.Context.isSdk())this.nativeVideoPlayer=new a.component.NativeVideoPlayer,this.handleVideoPosition(this.config.expand.video.position),a.helper.Context.isMobile(3)?(this.nativeVideoPlayer.setAutoresizing(45),this.nativeVideoPlayer.setOrientation(2)):(this.nativeVideoPlayer.setAutoresizing(58),this.nativeVideoPlayer.setOrientation(0)),this.nativeVideoPlayer.setBillingDelay(this.config.tracking.billingDelay?this.config.tracking.billingDelay:0),this.nativeVideoPlayer.setAutoplay(!0),this.nativeVideoPlayer.load(this.config.expand.video.videoUrl,this.onNativeVideoStatus.bind(this));else{this.videoPlayerContainer=document.createElement("div"),a.helper.Dom.addCssClass(this.videoPlayerContainer,[b.EXPAND_VIDEOPLAYER_CLASS]),this.container.appendChild(this.videoPlayerContainer),this.handleVideoPosition(this.config.expand.video.position),this.updateContent();var c=3;(a.helper.Context.isMobile(2)||a.helper.Context.isMobile(3))&&(c=1),this.videoPlayer=new a.component.MobileVideoController(this.config.expand.video.videoUrl,this.config.tracking.callbacks,c),this.videoPlayer.append(this.videoPlayerContainer,this.closeExpand.bind(this))}},b.prototype.onNativeVideoStatus=function(b){switch(b){case a.component.NativeVideoPlayer.BILLABLE:this.sdkCloseReason=[1,2];break;case a.component.NativeVideoPlayer.VIDEO_START:a.helper.Tracker.fire(this.config.tracking.callbacks.videoStart,{},[],!0);break;case a.component.NativeVideoPlayer.VIDEO_25:a.helper.Tracker.fire(this.config.tracking.callbacks.video25,{},[],!0);break;case a.component.NativeVideoPlayer.VIDEO_50:a.helper.Tracker.fire(this.config.tracking.callbacks.video50,{},[],!0);break;case a.component.NativeVideoPlayer.VIDEO_75:a.helper.Tracker.fire(this.config.tracking.callbacks.video75,{},[],!0);break;case a.component.NativeVideoPlayer.VIDEO_90:a.helper.Tracker.fire(this.config.tracking.callbacks.video90,{},[],!0);break;case a.component.NativeVideoPlayer.VIDEO_END:a.helper.Tracker.fire(this.config.tracking.callbacks.videoEnd,{},[],!0),this.closeExpand();break;case a.component.NativeVideoPlayer.TOUCH:a.helper.Tracker.fire(this.config.tracking.callbacks.clicVideo,{},[],!0),a.helper.Dom.openExternalPage(this.config.tracking.openPageClicVideo)}},b.prototype.showExpand=function(){a.helper.Dom.useCustomClose(),a.helper.Tracker.fire(this.config.tracking.callbacks.impression,{},[],!0),a.helper.Tracker.fire(this.config.tracking.callbacks.engagement,{},[],!0),!this.isTypeVideo&&this.config.expand.closeButton.delayAutomaticCall&&(this.sdkCloseReason=[1,2],this.timerAutoClose=setTimeout(this.closeExpand.bind(this),1e3*this.config.expand.closeButton.delayAutomaticCall))},b.prototype.closeExpand=function(){a.helper.Tracker.fire(this.config.tracking.callbacks.closeAd,{},[],!0),this.videoPlayer&&this.videoPlayer.pauseVideo(),a.helper.Context.isMraid()?window.mraid.close():a.helper.Context.isSdk()?EbzSDK.close(this.sdkCloseReason[0],this.sdkCloseReason[1]):a.helper.Dom.addCssClass(this.container,[b.EXPAND_CLASS_HIDE])},b.prototype.updateContent=function(){var b=1===a.helper.Dom.getOrientation(),c=a.helper.Context.isMobile(3);if(this.isTypeVideo&&this.videoPlayerContainer){var d=b&&c?a.helper.Dom.getWindowSize()[1]+20:a.helper.Dom.getWindowSize()[0],e=9*d/16;this.videoPlayerContainer.style.width=d+"px",this.videoPlayerContainer.style.height=e+"px",(b&&c||"MIDDLE"===this.config.expand.video.position)&&a.helper.Dom.centerMe(this.videoPlayerContainer,0,c?2:1)}this.iframe&&(this.iframe.setIframeWidth(a.helper.Dom.getWindowSize()[0]+"px"),this.iframe.setIframeHeight(a.helper.Dom.getWindowSize()[1]+"px")),this.image&&(c?(b?(this.image.style.width=a.helper.Dom.getWindowSize()[0]+"px",this.image.style.height="auto"):(this.image.style.height=a.helper.Dom.getWindowSize()[1]+"px",this.image.style.width="auto"),a.helper.Dom.centerMe(this.image,0,2)):this.image.style.width="100%")},b.prototype.handleVideoPosition=function(c){if(a.helper.Context.isSdk()){var d=9*a.helper.Dom.getWindowSize()[0]/16,e=a.helper.Dom.convertToDeviceSize({height:d,convertInPercent:!0}).height+"%",f=a.helper.Dom.getWindowSize()[1],g=1===a.helper.Dom.getOrientation();switch(a.helper.Context.isMobile(3)?(g?(d=9*(a.helper.Dom.getWindowSize()[1]+20)/16,f=a.helper.Dom.getWindowSize()[0]):f+=20,e=d+"px"):g&&(e=a.helper.Dom.convertToDeviceSize({width:d,convertInPercent:!0}).width+"%"),c.toUpperCase()){case"TOP":this.nativeVideoPlayer.setRect(0,"-100%","0","100%",e),this.nativeVideoPlayer.setRect(1,"0","0","100%",e);break;case"MIDDLE":this.nativeVideoPlayer.setRect(0,"-100%",f/2-d/2+"px","100%",e),this.nativeVideoPlayer.setRect(1,"0",f/2-d/2+"px","100%",e);break;case"BOTTOM":this.nativeVideoPlayer.setRect(0,"-100%","","100%",e,"","0"),this.nativeVideoPlayer.setRect(1,"0","","100%",e,"","0")}}else switch(c.toUpperCase()){case"BOTTOM":a.helper.Dom.addCssClass(this.videoPlayerContainer,[b.VIDEO_BOTTOM_CLASS]);break;case"TOP":a.helper.Dom.addCssClass(this.videoPlayerContainer,[b.VIDEO_TOP_CLASS]);break;default:a.helper.Dom.addCssClass(this.videoPlayerContainer,[b.VIDEO_MIDDLE_CLASS])}},b.EXPAND_CLASS="ebz_flow",b.EXPAND_CLASS_HIDE="ebz_flow_hide",b.EXPAND_CLOSEBUTTON_CLASS="ebz_closeButton",b.EXPAND_VIDEOPLAYER_CLASS="ebz_videoPlayer",b.VIDEO_BOTTOM_CLASS="ebz_BOTTOM",b.VIDEO_MIDDLE_CLASS="ebz_MIDDLE",b.VIDEO_TOP_CLASS="ebz_TOP",b}();b.Flow=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(b){var c=this;if(this.config=b,this.logger=new a.helper.ConsoleLogger("Social"),this.sdkCloseReason=[0,7],a.helper.Context.isMraid()){var d=a.helper.Context.isAndroid()?200:0;window.mraid.addEventListener("ready",function(){return setTimeout(c.init.bind(c),d)}),window.mraid.addEventListener("viewableChange",this.mraidViewableChange.bind(this))}else this.init()}return b.prototype.init=function(){a.helper.Dom.useCustomClose(),this.expandContainer=document.createElement("div"),this.expandContainer.className=b.EXPAND_SHOW,document.body.appendChild(this.expandContainer),this.createVideo(),this.createHeader(),a.helper.Tracker.fire(this.config.tracking.callbacks.impression,{},[],!0)},b.prototype.mraidViewableChange=function(b){var c=this;"true"===b?this.intervalResize=setInterval(function(){c.videoPlayerContainer.style.height=a.helper.Dom.getWindowSize()[1]-32+"px"},500):clearInterval(this.intervalResize)},b.prototype.createVideo=function(){a.helper.Dom.getWindowSize()[0];this.videoPlayerContainer=document.createElement("div"),this.videoPlayerContainer.style.height=a.helper.Dom.getWindowSize()[1]-32+"px",this.videoPlayerContainer.className="ebz_videoPlayer",this.expandContainer.appendChild(this.videoPlayerContainer),this.videoPlayer=new a.component.MobileVideoController(this.config.expand.video.videoUrl,this.config.tracking.callbacks,1),this.videoPlayer.setPoster(this.config.expand.video.poster),a.helper.Context.isMobile(2)&&this.videoPlayer.setCanPlayInline(!0),this.videoPlayer.append(this.videoPlayerContainer,this.close.bind(this)),this.config.tracking.billingDelay&&this.videoPlayer.setCuePointCallback(this.config.tracking.billingDelay,this.billableDelayPassed.bind(this))},b.prototype.onNativeVideoStatus=function(b){switch(b){case a.component.NativeVideoPlayer.BILLABLE:this.billableDelayPassed();break;case a.component.NativeVideoPlayer.VIDEO_START:a.helper.Tracker.fire(this.config.tracking.callbacks.videoStart,{},[],!0);break;case a.component.NativeVideoPlayer.VIDEO_25:a.helper.Tracker.fire(this.config.tracking.callbacks.video25,{},[],!0);break;case a.component.NativeVideoPlayer.VIDEO_50:a.helper.Tracker.fire(this.config.tracking.callbacks.video50,{},[],!0);break;case a.component.NativeVideoPlayer.VIDEO_75:a.helper.Tracker.fire(this.config.tracking.callbacks.video75,{},[],!0);break;case a.component.NativeVideoPlayer.VIDEO_90:a.helper.Tracker.fire(this.config.tracking.callbacks.video90,{},[],!0);break;case a.component.NativeVideoPlayer.VIDEO_END:a.helper.Tracker.fire(this.config.tracking.callbacks.videoEnd,{},[],!0),this.close()}},b.prototype.billableDelayPassed=function(){a.helper.Context.isSdk()?this.sdkCloseReason=[1,2]:a.helper.Context.isMraid()&&window.mraid.reward&&window.mraid.reward(),this.expandHeader.setState(1),a.helper.Tracker.fire(this.config.tracking.callbacks.engagement,{},[],!0)},b.prototype.createHeader=function(){var b=this;this.expandHeader=new a.component.Header(this.expandContainer,function(c){b.close(c),a.helper.Tracker.fire(b.config.tracking.callbacks.closeAd,{},[],!0)}),this.expandHeader.setLogo(this.config.expand.header.logo),this.expandHeader.setText(this.config.expand.header.text)},b.prototype.close=function(c){"undefined"==typeof c&&(c=null),this.expandContainer.className=b.EXPAND_HIDE,a.helper.Context.isSdk()?EbzSDK.close(this.sdkCloseReason[0],this.sdkCloseReason[1]):a.helper.Context.isMraid()&&window.mraid.close()},b.EXPAND_SHOW="ebz_social ebz_social_show",b.EXPAND_HIDE="ebz_social ebz_social_hide",b}();b.Social=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){a.PREFIX="ebz";var b=function(){function b(b){this.logger=new a.helper.ConsoleLogger("App"),b&&(b=a.core.updateConfigUrls(b),a.config=a.helper.Util.merge(b,a.config));try{a.isIframed=window!==window.top,a.page.url=window.top.location.href}catch(c){}a.page.url||(a.page.url=a.isIframed&&document.referrer?document.referrer:window.location.href),a.page.referer=document.referrer,a.page.title=document.title,this.logger.info("Framework initialized",this)}return b.prototype.init=function(b,c){c=a.core.updateConfigUrls(c);var d;switch(b){case"footer":d=new a.format.Footer(c);break;case"flow":d=new a.format.Flow(c);break;case"social":d=new a.format.Social(c);break;case"playlist":d=new a.core.Playlist(c.campaigns,c.targetId,c.userData),d.next();break;case"native":d=new a.core.Native(c.channelId,c.campaignId,c.nativeSelectors,c.nativeInBoardSelectors),d.init();break;case"roll":d=new a.core.Roll(c.channelId,c.preroll,c.postroll),d.init();break;case"distribution":d=new a.core.Distribution(c.legacy);break;default:this.logger.error("Unknown format type: "+b),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.APP_UNKNOWN_FORMAT,b)}return this.logger.info("Initialized "+b+":",d),d},b}();a.App=b,window.EbuzzingLibraryCallback&&(window.EbuzzingLibraryCallback(),window.EbuzzingLibraryCallback=null),window._ebz=window._ebz||[];for(var c in window._ebz)window._ebz.hasOwnProperty(c)&&window._ebz[c]&&("boot"===window._ebz[c].type||"lib"===window._ebz[c].name)&&(window._ebz[c].callback(),window._ebz[c]=void 0)}(ebz||(ebz={}));
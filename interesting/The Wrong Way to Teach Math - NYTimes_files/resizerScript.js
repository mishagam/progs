/**
 * @preserve LaziestLoader - v0.7.3 - 2016-01-03
 * A responsive lazy loader for jQuery.
 * http://sjwilliams.github.io/laziestloader/
 * Copyright (c) 2016 Josh Williams; Licensed MIT
 */

define("node_modules/nytg-resizer/script",["jquery/nyt","underscore/nyt","foundation/views/base-view","foundation/views/page-manager"],function(e,t,n,r){var i=n.extend({sizes:{v1:{180:".g-show-xsmall",300:".g-show-small",460:".g-show-smallplus",600:".g-show-submedium",720:".g-show-medium",945:".g-show-large",1050:".g-show-xlarge"},v2:{180:".g-show-xsmall",300:".g-show-small",460:".g-show-smallplus",495:".g-text-width",600:".g-show-submedium",720:".g-show-medium",945:".g-show-large",1050:".g-show-xlarge",1400:".g-show-xxlarge"}},initialize:function(n){if(e("html").hasClass("g-resizer-init"))return!1;this.selector=t.values(this.sizes.v2).join(", "),t.bindAll(this,"render","selectElements"),this.selectElements(),this.pageManager.on("nyt:page-resize",this.render),this.render(),e("html").addClass("g-resizer-init"),e(document).ready(this.selectElements)},render:function(){var n=this;n.elements.each(function(){var r=e(this),i="v1";r.hasClass("g-resizer-v2")&&(i="v2");var s=t.map(t.keys(n.sizes[i]),Number),o=r.parent().width(),u=t.max(t.filter(s,function(e){return e<=o})),a=n.sizes[i][u]||"",f=r.hasClass(a.replace(".",""));r.toggle(f)})},selectElements:function(){this.elements=e(this.selector),this.elements.hide(),this.render()}});return new i}),define("jquery",["jquery/nyt"],function(e){return e}),function(e){typeof define=="function"&&define.amd?define("node_modules/laziestloader/jquery.laziestloader",["jquery"],e):e(jQuery)}(function(e){var t=function(n,r){function l(t){var r,i,s=t.data();return s.pattern&&s.widths&&e.isArray(s.widths)?(r=u?s.patternRetina:s.pattern,r=r||s.pattern,typeof s.widths[0]=="object"?(i=function(){var n=e.map(s.widths,function(e){return e.size}),r=d(t.width(),n);for(var i=s.widths.length-1;i>=0;i--)if(s.widths[i].size===r)return s.widths[i].slug}(),r=r.replace(n.sizePattern,i)):r=r.replace(n.sizePattern,d(t.width(),s.widths))):(r=u?s.srcRetina:s.src,r=r||s.src),r}function c(e){e.addClass("ll-loaded").removeClass("ll-notloaded"),e.trigger("loaded"),typeof r=="function"&&r.call(e)}function h(){s.one("laziestloader",function(){var t=e(this),r;t.data().ratio&&m.call(this),n.setSourceMode&&(r=n.getSource(t),r&&this.getAttribute("src")!==r&&this.setAttribute("src",r)),t.addClass("ll-loadstarted"),!n.setSourceMode||this.nodeName!=="IMG"&&this.nodeName!=="VIDEO"&&this.nodeName!=="AUDIO"?c(t):this.nodeName==="IMG"?this.onload=function(){c(t)}:this.onloadstart=function(){c(t)}})}function p(){s.off("laziestloader")}function v(){var t=document.documentElement,r=window.innerHeight||t.clientHeight,i=window.innerWidth||t.clientWidth,u=n.threshold,a=s.not(o).filter(function(){if(e(this).is(":hidden"))return;var t=e(this)[0].getBoundingClientRect();return t.bottom+u>0&&t.right+u>0&&t.left<i+u&&t.top<r+u});a.trigger("laziestloader"),o.add(a)}function m(){var t=e(this),n=t.data();n.ratio=n.ratio||n.heightMultiplier,n.ratio&&t.css({height:Math.round(t.width()*n.ratio)})}var i=e(window),s=this,o=e(),u=window.devicePixelRatio>1,a=!1;n=e.extend(!0,{threshold:0,sizePattern:/{{SIZE}}/ig,getSource:l,event:"scroll",scrollThrottle:250,sizeOffsetPercent:0,setSourceMode:!0},n);var f=typeof n.event=="string"&&n.event.indexOf("scroll")===0,d=t.bestFit=function(e,t){var r=t[t.length-1],i=t.length,s=e*(n.sizeOffsetPercent/100);t.sort(function(e,t){return e-t});while(i--)e-s<=t[i]&&(r=t[i]);return r};return s.addClass("ll-init ll-notloaded").each(m),h(),f?(i.scroll(function(){a=!0}),setInterval(function(){a&&(a=!1,v())},n.scrollThrottle)):typeof n.event=="function"?n.event(v):i.on(n.event,function(){v()}),i.resize(function(){o=e(),p(),h(),v()}),e(document).ready(function(){v()}),this};e.fn.laziestloader=t}),require(["foundation/main"],function(){require(["jquery/nyt","node_modules/nytg-resizer/script","node_modules/laziestloader/jquery.laziestloader"],function(e){e(".g-aiImg").laziestloader({threshold:1e3});var t=e("html").hasClass("page-interactive-embedded");if(t){var n=e(window).width();require(["shared/interactive/instances/app-communicator","foundation/views/page-manager"],function(t,r){t.triggerResize(),r.on("nyt:page-resize",function(){var r=e(window).width();n!=r&&(n=r,setTimeout(function(){t.triggerResize()},500))})})}})}),define("script",function(){});
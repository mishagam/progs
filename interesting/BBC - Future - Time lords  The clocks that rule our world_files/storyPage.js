/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/**
 * @license RequireJS order 1.0.5 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/*!
 * js-logger - http://github.com/jonnyreeves/js-logger 
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license. 
 */

/**
* jQuery Cookie plugin
*
* Copyright (c) 2010 Klaus Hartl (stilbuero.de)
* Dual licensed under the MIT and GPL licenses:
* http://www.opensource.org/licenses/mit-license.php
* http://www.gnu.org/licenses/gpl.html
*
*/

define("ecmaScript5",[],function(){"bind"in Function.prototype||(Function.prototype.bind=function(e){var t=this;if(arguments.length<=1)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,arguments.length===0?n:n.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,t){t===undefined&&(t=0),t<0&&(t+=this.length),t<0&&(t=0);for(var n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(e,t){t===undefined&&(t=this.length-1),t<0&&(t+=this.length),t>this.length-1&&(t=this.length-1);for(t++;t-->0;)if(t in this&&this[t]===e)return t;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(e,t){for(var n=0,r=this.length;n<r;n++)n in this&&e.call(t,this[n],n,this)}),"map"in Array.prototype||(Array.prototype.map=function(e,t){var n=new Array(this.length);for(var r=0,i=this.length;r<i;r++)r in this&&(n[r]=e.call(t,this[r],r,this));return n}),"filter"in Array.prototype||(Array.prototype.filter=function(e,t){var n=[],r;for(var i=0,s=this.length;i<s;i++)i in this&&e.call(t,r=this[i],i,this)&&n.push(r);return n}),"every"in Array.prototype||(Array.prototype.every=function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&e.call(t,this[n],n,this))return!0;return!1})}),define("domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),require([],function(){return String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String}),define("extensions/String",function(){}),define("lib/jquery.inview",["jquery-1"],function(e){(function(e){function a(){var t,n,r={height:s.innerHeight,width:s.innerWidth};if(!r.height){t=i.compatMode;if(t||!e.support.boxModel)n=t==="CSS1Compat"?o:i.body,r={height:n.clientHeight,width:n.clientWidth}}return r}function f(){return{top:s.pageYOffset||o.scrollTop||i.body.scrollTop,left:s.pageXOffset||o.scrollLeft||i.body.scrollLeft}}function l(){var i=e(),s,u=0;e.each(t,function(e,t){var n=t.data.selector,r=t.$element;i=i.add(n?r.find(n):r)}),s=i.length;if(s){n=n||a(),r=r||f();for(;u<s;u++){if(!e.contains(o,i[u]))continue;var l=e(i[u]),c={height:l.height(),width:l.width()},h=l.offset(),p=l.data("inview"),d,v,m;if(!r||!n)return;h.top+c.height>r.top&&h.top<r.top+n.height&&h.left+c.width>r.left&&h.left<r.left+n.width?(d=r.left>h.left?"right":r.left+n.width<h.left+c.width?"left":"both",v=r.top>h.top?"bottom":r.top+n.height<h.top+c.height?"top":"both",m=d+"-"+v,(!p||p!==m)&&l.data("inview",m).trigger("inview",[!0,d,v])):p&&l.data("inview",!1).trigger("inview",[!1])}}}var t={},n,r,i=document,s=window,o=i.documentElement,u=e.expando;e.event.special.inview={add:function(n){t[n.guid+"-"+this[u]]={data:n,$element:e(this)}},remove:function(e){try{delete t[e.guid+"-"+this[u]]}catch(n){}}},e(s).bind("scroll resize",function(){n=r=null}),!o.addEventListener&&o.attachEvent&&o.attachEvent("onfocusin",function(){r=null}),setInterval(l,250)})(e)}),define("lib/jquery.getSelector",["jquery-1"],function(e){(function(e){get_selector=function(e){pieces=[];for(;e&&e.tagName!==undefined;e=e.parentNode){if(e.className){var t=e.className.split(" ");for(var n in t)t.hasOwnProperty(n)&&t[n]&&(pieces.unshift(t[n]),pieces.unshift("."))}e.id&&!/\s/.test(e.id)&&(pieces.unshift(e.id),pieces.unshift("#")),pieces.unshift(e.tagName),pieces.unshift(" > ")}return pieces.slice(1).join("")},e.fn.getSelector=function(t){return!0===t?get_selector(this[0]):e.map(this,function(e){return get_selector(e)})}})(e)}),define("lib/jquery.dataDom",["jquery-1","extensions/String"],function(e,t){(function(e){e.fn.dataDom=function(e,t){var n="",r,i;if(typeof t!="undefined"){r=e.split("-");for(i in r)i!=0?n+=r[i].ucfirst():n+=r[i];e="data-"+e,this.data(n,t),this.attr(e,t)}}})(e)}),define("analytics/omniture",[],function(){function r(){if(scw.c_r("s_mtc")&&e.doTracking("ck")){var t=decodeURIComponent(scw.c_r("s_mtc"));t=t.split("*");if(t.length==2){scw.hier3=t[0],scw.eVar52="D=h3";var n=[];scw.events&&(n=scw.events.split(",")),n.push(t[1].split(",")),scw.events=n.join(",")}return document.cookie="s_mtc=; path=/; domain=."+document.location.hostname.replace("www.","")+"; expires=Thu, 01 Jan 1970 00:00:01 GMT;",!1}return!1}function i(e){e=e||scw.destination_lnk,e.getAttribute("target")=="_blank"?window.open(e.href):document.location=e.href}var e=e||{},t=function(e){return typeof Array.prototype.indexOf=="function"?t=Array.prototype.indexOf:t=function(e){var t=-1,n=-1;for(t=0;t<this.length;t++)if(this[t]===e){n=t;break}return n},t.call(this,e)},n={global_switch:!1,tracking_type:[]};return e.doTracking=function(e){return n.global_switch?(console.log("Tracking Disabled: Global Switch"),!1):t.call(n.tracking_type,e)!=-1?(console.log("Tracking Disabled: Tracking Type Blacklisted"),!1):!0},e.trackModule=function(t,n,r,s,o,u,a,f,l,c,h,p,d,v){c=c||"cl";if(e.doTracking(c)){lnk_type="o",t=t||"null",n=n||"null",r=r||"null",s=s||"null",o=o||"null",u=u||"null",a=a||"null",f=f||"null",l=l||"null",d=d||"null",p=p||!1;var m="null",g="null",y="null";scw.prop7="null",scw.prop7&&(scw.prop7!=""||scw.prop7!="undefined")&&(m=scw.prop7),scw.prop6&&(scw.prop6!=""||scw.prop6!="undefined")&&(g=scw.prop6),scw.prop5&&(scw.prop5!=""||scw.prop5!="undefined")&&(y=scw.prop5),e.hierarr=[],e.hierarr.push(t,g,m,y,n,r,s,o,u,a,f,l,c,d),e.eventstotrack=[],e.eventstotrack.push("event22"),(p==1||p==1)&&e.eventstotrack.push("event34"),s.match(/share/i)&&(e.eventstotrack.push("event23"),scw.eVar35=l+"-share",m=="null"?scw.eVar39=scw.prop6+"_"+scw.prop3+"_"+f:scw.eVar39=m+"_"+f),r&&r!="null"?e.linkname=scw.prop6+"_"+r:e.linkname=t+"_"+scw.prop6+"_"+s,c=="ck"&&(e.eventstotrack.push("event36"),scw.c_w("s_mtc",e.hierarr.join("|")+"*"+e.eventstotrack.join(",")),v&&v.href&&(scw.destination_lnk=v,i()));if(c=="pl"){var b=b||scw.pageName;e.eventstotrack.push("event2"),scw.hier3=e.hierarr.join("|"),scw.hier3&&(scw.eVar52="D=h3"),scw.events=e.eventstotrack.join(","),scw.pageName=b+" | "+f,scw.t(),c=="pl"&&v&&v.href&&(scw.destination_lnk=v,i()),scw.pageName=b}else if(c=="aj"){var b=b||scw.pageName;e.eventstotrack.push("event2"),scw.hier3=e.hierarr.join("|"),scw.hier3&&(scw.eVar52="D=h3"),scw.events=e.eventstotrack.join(","),typeof h!="undefined"&&(scw.page.title=h),scw.t()}else e.eventstotrack.push("event35"),scw.hier3=e.hierarr.join("|"),scw.hier3&&(scw.eVar52="D=h3"),scw.linkTrackVars="events,hier3,eVar52",scw.linkTrackEvents=scw.events=e.eventstotrack.join(","),v&&v.href?(scw.destination_lnk=v,scw.tl(!0,lnk_type,e.linkname,null,i)):scw.tl(!0,lnk_type,e.linkname)}},e}),define("getQuadrentOfCoordinateInContainer",["jquery-1"],function(e){var t=function(e,t,n){return e>=t&&e<=n?!0:!1},n=function(e,n){return t(e.x,n.left,n.right)&&t(e.y,n.top,n.bottom)?!0:!1},r=function(e){var t={left:e.left,right:e.left+(e.right-e.left)/3,top:e.top,bottom:e.top+(e.bottom-e.top)/3},n={left:t.right,right:t.right+(e.right-e.left)/3,top:e.top,bottom:t.bottom},r={left:n.right,right:e.right,top:e.top,bottom:t.bottom},i={left:t.left,right:t.right,top:t.bottom,bottom:t.bottom+(e.bottom-e.top)/3},s={left:n.left,right:n.right,top:i.top,bottom:i.bottom},o={left:r.left,right:r.right,top:i.top,bottom:i.bottom},u={left:t.left,right:t.right,top:i.bottom,bottom:e.bottom},a={left:n.left,right:n.right,top:u.top,bottom:u.bottom},f={left:r.left,right:r.right,top:u.top,bottom:u.bottom};return{"top-left":t,"top-center":n,"top-right":r,"mid-left":i,"mid-center":s,"mid-right":o,"bottom-left":u,"bottom-center":a,"bottom-right":f}},i=function(e,t){var i=r(t);for(var s in i){var o=i[s];if(n(e,o))return s}return!1};return i}),define("youtubeHelper",["jquery-1","ecmaScript5","jssignals-1"],function(e,t,n){return function(){var e,t,r=new n.Signal,i=1;this.setPlayerId=function(e){t=e,this.loadAPI(),window.onYouTubePlayerAPIReady=this.setupPlayer.bind(this)},this.stateChanged=function(e){e.data==i&&r.dispatch()},this.setupPlayer=function(){var n=this.getFrameID(t);n&&(e=new YT.Player(n,{events:{onStateChange:this.stateChanged.bind(this)}}))},this.getFrameID=function(e){var t=document.getElementById(e);if(t){if(/^iframe$/i.test(t.tagName))return e;var n=t.getElementsByTagName("iframe");if(!n.length)return null;for(var r=0;r<n.length;r++)if(/^https?:\/\/(?:www\.)?youtube(?:-nocookie)?\.com(\/|$)/i.test(n[r].src))break;t=n[r];if(t.id)return t.id;do e+="-frame";while(document.getElementById(e));return t.id=e,e}return null},this.loadAPI=function(){(function(){var e=document.createElement("script");e.src=(location.protocol=="https:"?"https":"http")+"://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()},this.subscribe=function(e,t){switch(e){case"play":r.add(t)}}}}),define("analytics/main",["ecmaScript5","extensions/String","domReady","jquery-1","lib/jquery.inview","lib/jquery.getSelector","lib/jquery.dataDom","analytics/omniture","getQuadrentOfCoordinateInContainer","youtubeHelper"],function(e,t,n,r,s,o,u,a,f,l){var c=function(){var e=this,t,s,o={news:"bbc.co.uk/news/",culture:"/culture/",travel:"/travel/",capital:"/capital/",autos:"/autos/",future:"/future/",earth:"/earth/"},u=!1,c="link",h="click",p="#content-wrapper",d="#wwfeatures-container";supportedEvents=["click","inview","mouseover","submit","track","youtube"],eventNamespace="analytics",this.init=function(){r(p).length?this.setContentSelector(p):this.setContentSelector(d),this.setContentContainer(),this.addEventListeners()},this.addEventListeners=function(){var e,t,n;for(i in this.getSupportedEvents())e=this.getSupportedEvents()[i],t="[data-sc-event='"+e+"']",r(document).on(this.getNamespacedEvent(e),t,this.trackInteraction.bind(this));this.simulateYoutubeEvents()},this.simulateYoutubeEvents=function(){r(document).find("[data-sc-event='youtube']").each(function(){e.simulateYoutubeEventForElement(r(this))})},this.simulateYoutubeEventForElement=function(e){var t=new l;t.subscribe("play",function(){e.trigger(this.getNamespacedEvent("youtube"))}),t.setPlayerId(e.attr("id"))},this.getNamespacedEvent=function(e){return namespacedEvent=e+"."+this.getEventNamespace()},this.trackInteraction=function(e){var t=r(e.currentTarget),n=t.data("scType"),i=t.data("scTestCampaign"),s=t.data("scEvent"),o=t.data("scTestRecipe"),a=t.data("scId"),f=t.data("scAdditionalData"),l=t.data("scChannel"),c=t.data("scInteractionType")||this.getDefaultInteractionType(),h=t.data("scPageName"),p=this.getTrackingMethod(t.data("scTrackingMethod")),d=this.isUserTracked(t.data("scTrackUser")),i,o,v,m,g,y,b,w;u&&e.preventDefault(),(v=t.closest("div[data-sc-module],section[data-sc-module]"))&&v.length!=0&&(m=v.data("scModule"),this.setContentContainer(),g=this.getModulePagePlacement(v),y=this.getTargetPosition(t,v),i=v.data("scTestCampaign"),o=v.data("scTestRecipe")),c=="link"&&(t.is("a")||t.find("a:first-child").length>0&&(t=t.find("a:first-child")),l=this.getChannel(t,l),w=t.get(0)),this.track(l,g,m,n,y,i,o,a,f,p,h,d,b,w)},this.track=function(e,t,n,r,i,s,o,f,l,c,h,p,d,v){u&&(console.log("channel::"+e),console.log("modulePlacement::"+t),console.log("moduleName::"+n),console.log("type::"+r),console.log("position::"+i),console.log("testCampaign::"+s),console.log("testRecipe::"+o),console.log("id::"+f),console.log("additionalData::"+l),console.log("trackingMethod::"+c),console.log("pageName::"+h),console.log("trackUserBehaviour::"+p),console.log("trackInterval::"+d),console.log("domElement::"+v)),a.trackModule(e,t,n,r,i,s,o,f,l,c,h,p,d,v)},this.addTrackingForSelector=function(e,t){var n=r(e),i=t.event||"click",s=t.trackUser||!1;this.addTrackingAttribute(n,"id",t.id,!0),this.addTrackingAttribute(n,"event",i,!0),this.addTrackingAttribute(n,"channel",t.channel),this.addTrackingAttribute(n,"page-name",t.pageName),this.addTrackingAttribute(n,"type",t.type),this.addTrackingAttribute(n,"additional-data",t.additionalData),this.addTrackingAttribute(n,"track-user",s.toString()),this.addTrackingAttribute(n,"interaction-type",t.interactionType),this.addTrackingAttribute(n,"tracking-method",t.trackingMethod),i=="youtube"&&this.simulateYoutubeEventForElement(n)},this.addTrackingForModule=function(e,t){var n=r(e);this.addTrackingAttribute(n,"module",t.module,!0),this.addTrackingAttribute(n,"test-campaign",t.campaign),this.addTrackingAttribute(n,"test-recipe",t.recipe)},this.addTrackingAttribute=function(e,t,n,r){typeof n!="undefined"&&(t="sc-"+t,r?e.dataDom(t,n):e.data(t,n))},this.getChannel=function(e,t){var n;if(typeof t=="undefined"){n=e.attr("href");for(var r in this.getChannels())if(n.indexOf(o[r])!=-1)return r}return t},this.setContentContainer=function(){var e=t.offset();s={left:e.left,right:e.left+t.width(),top:e.top,bottom:e.top+t.height()}},this.getModulePagePlacement=function(e){var t=this.getContentContainer(),n=e.offset();return coordinate={x:n.left+e.width()/2,y:n.top+e.height()/2},f(coordinate,t)},this.getTargetPosition=function(e,t){var n=t.find("[data-sc-id]"),i=0,s=0,o="";return n.each(function(t,n){o!=r(n).data("scId")&&(s++,o=r(n).data("scId")),o==e.data("scId")&&(i=s)}),i+"of"+s},this.getTrackingMethod=function(e){switch(e){case"cookie":return"ck";case"page-load":return"pl";case"ajax":return"aj";default:return"cl"}},this.trackPageImpression=function(){"undefined"!=typeof scw&&"undefined"!=typeof scw.t&&scw.t(),"undefined"!=typeof COMSCORE&&"undefined"!=typeof COMSCORE.beacon&&COMSCORE.beacon({c1:2,c2:"6035051",c3:"",c4:window.location.host+window.location.pathname,c5:"",c6:"",c15:""})},this.isUserTracked=function(e){return e==="true"?!0:!1},this.getEventNamespace=function(){return eventNamespace},this.setContentSelector=function(e){t=r(e)},this.getContentSelector=function(){return t},this.getSupportedEvents=function(){return supportedEvents},this.getContentContainer=function(){return s},this.getChannels=function(){return o},this.getDefaultInteractionType=function(){return c},this.getDefaultEventType=function(){return h},this.formatMultiOptionVariable=function(e){return e.length>0?e.replace(",","/"):"na"},this.setupMagnifyTracking=function(){},n(this.init.bind(this))};return new c}),define("magnify",["jquery-1","domReady","magnify"],function(e,t,n){return function(n){this.init=function(){var t,r,i="",s=0,o=0,u=!1,a,f,l,c;iframe=e(n).find("iframe");if(iframe.length!=0&&typeof scw!="undefined"){l=scw.prop63||"",c=scw.prop65||"",f={channel:scw.channel,geofiltered:"none",pagename:scw.pageName,headline:scw.pageName,parenturl:window.document.URL,bizunit:"bbc.com",v63:l,v65:c},a=iframe.get(0),a.style.visibility="false",t=a.src,r=t.split("?"),r[1]?i=t+"&":i=r[0]+"?",u=!1;for(var h in f)u&&(i+="&"),i=i+h+"="+f[h],u=!0;a.src=i,a.style.visibility="true"}},t(this.init.bind(this))}}),function(){function a(e){var t=e.currentTarget||e.srcElement,n,o,u;if(e.type==="load"||r.test(t.readyState)){o=t.getAttribute("data-requiremodule"),s[o]=!0;for(n=0;u=i[n];n++){if(!s[u.name])break;u.req([u.name],u.onLoad)}n>0&&i.splice(0,n),setTimeout(function(){t.parentNode.removeChild(t)},15)}}function f(e){var t,n,r;e.setAttribute("data-orderloaded","loaded");for(t=0;r=u[t];t++){n=o[r];if(!n||n.getAttribute("data-orderloaded")!=="loaded")break;delete o[r],require.addScriptToDom(n)}t>0&&u.splice(0,t)}var e=typeof document!="undefined"&&typeof window!="undefined"&&document.createElement("script"),t=e&&(e.async||window.opera&&Object.prototype.toString.call(window.opera)==="[object Opera]"||"MozAppearance"in document.documentElement.style),n=e&&e.readyState==="uninitialized",r=/^(complete|loaded)$/,i=[],s={},o={},u=[];e=null,define("order",{version:"1.0.5",load:function(e,r,s,l){var c=!!r.nameToUrl,h,p,d;if(!c){r([e],s);return}h=r.nameToUrl(e,null),require.s.skipAsync[h]=!0,t||l.isBuild?r([e],s):n?(d=require.s.contexts._,!d.urlFetched[h]&&!d.loaded[e]&&(d.urlFetched[h]=!0,require.resourcesReady(!1),d.scriptCount+=1,p=require.attach(h,d,e,null,null,f),o[e]=p,u.push(e)),r([e],s)):r.specified(e)?r([e],s):(i.push({name:e,req:r,onLoad:s}),require.attach(h,null,e,a,"script/cache"))}})}(),define("customEmbed",["jquery-1","ecmaScript5","domReady","analytics/main","magnify","order!http://admin.brightcove.com/js/BrightcoveExperiences.js"],function(e,t,n,r,i){return function(t){var s,o;this.init=function(){this.setSelector(t),this.isYoutube()?r.addTrackingForSelector(this.getSelector(),{id:this.getElement().data("trackingId"),channel:"youtube",type:"video-play",event:"youtube"}):this.isMagnify()&&new i(this.getSelector())},this.isMediaPlayer=function(){return this.isMagnify()||this.isYoutube()?!0:!1},this.isMagnify=function(){return this.frameHrefContainString("magnify.net")},this.isYoutube=function(){return this.frameHrefContainString("youtube.com")},this.frameHrefContainString=function(e){var t,n;if(t=this.getElement().find("iframe"))if(n=t.attr("src"))if(n.search(e)!=-1)return!0;return!1},this.setSelector=function(t){o=e(t),s=t},this.getElement=function(){return o},this.getSelector=function(){return s},this.getSelector=function(){return s},n(this.init.bind(this))}}),function(e){var t={};t.VERSION="0.9.2";var n,r={},i=function(e,t){return function(){return t.apply(e,arguments)}},s=function(){var e=arguments,t=e[0],n,r;for(r=1;r<e.length;r++)for(n in e[r])!(n in t)&&e[r].hasOwnProperty(n)&&(t[n]=e[r][n]);return t},o=function(e,t){return{value:e,name:t}};t.DEBUG=o(1,"DEBUG"),t.INFO=o(2,"INFO"),t.WARN=o(4,"WARN"),t.ERROR=o(8,"ERROR"),t.OFF=o(99,"OFF");var u=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};u.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(t.DEBUG,arguments)},info:function(){this.invoke(t.INFO,arguments)},warn:function(){this.invoke(t.WARN,arguments)},error:function(){this.invoke(t.ERROR,arguments)},invoke:function(e,t){n&&this.enabledFor(e)&&n(t,s({level:e},this.context))}};var a=new u({filterLevel:t.OFF});(function(){var e=t;e.enabledFor=i(a,a.enabledFor),e.debug=i(a,a.debug),e.info=i(a,a.info),e.warn=i(a,a.warn),e.error=i(a,a.error),e.log=e.info})(),t.setHandler=function(e){n=e},t.setLevel=function(e){a.setLevel(e);for(var t in r)r.hasOwnProperty(t)&&r[t].setLevel(e)},t.get=function(e){return r[e]||(r[e]=new u(s({name:e},a.context)))},t.useDefaults=function(n){if(!("console"in e))return;t.setLevel(n||t.DEBUG),t.setHandler(function(n,r){var i=e.console,s=i.log;r.name&&(n[0]="["+r.name+"] "+n[0]),r.level===t.WARN&&i.warn?s=i.warn:r.level===t.ERROR&&i.error?s=i.error:r.level===t.INFO&&i.info&&(s=i.info),s.apply(i,n)})},typeof define=="function"&&define.amd?define("logger",t):typeof module!="undefined"&&module.exports?module.exports=t:e.Logger=t}(window),define("jquery-cookie",["jquery-1"],function(e){return e.cookie=function(t,n,r){if(arguments.length>1&&String(n)!=="[object Object]"){r=e.extend({},r);if(n===null||n===undefined)r.expires=-1;if(typeof r.expires=="number"){var i=r.expires,s=r.expires=new Date;s.setDate(s.getDate()+i)}return n=String(n),document.cookie=[encodeURIComponent(t),"=",r.raw?n:encodeURIComponent(n),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}r=n||{};var o,u=r.raw?function(e){return e}:decodeURIComponent;return(o=(new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)")).exec(document.cookie))?u(o[1]):null},e}),define("responsive/modules/video/adPolicyplaylistSelector",["jquery-cookie","logger"],function(e,t){var n=function(){var t=this,n="/adpolicy/policy/journalism-flash-mobile/",r=!1,i=!1,s=new Array,o=!1,u="";this.getPlaylist=function(e){var n;r?(this.isAdpolicyPlaylistRequired()?n=e.adpolicyPlaylist:n=e.playlist,e.callback.apply(null,[n]),t.checkQueue()):this.addToQueue(e)},this.setAdpolicyPlaylistRequired=function(e){i=e},this.isAdpolicyPlaylistRequired=function(){return i},this.setSite=function(e){u=e},this.getSite=function(){return u},this.checkQueue=function(){var e;s.length>0&&(e=s[0],s.shift(),this.getPlaylist(e))},this.addToQueue=function(e){s.push(e)},this.getAdpolicyURL=function(){return"/"+this.getSite()+n+this.getSite()+"/"},this.setupAdpolicyData=function(n){r=!1,o=!0,this.setSite(n),this.isAdpolicyFrequencySet()?this.setupAdpolicyDataComplete():e.ajax({url:this.getAdpolicyURL(),success:function(e){e.policy!="undefined"&&e.policy.adpolicy_required!="undefined"&&t.setAdDisplayFrequency(e.policy.adpolicy_required.ad_display_frequency),t.setupAdpolicyDataComplete()},error:function(e,t,n){},dataType:"json"})},this.isAdpolicyDataRequested=function(){return o},this.setupAdpolicyDataComplete=function(){r=!0,this.checkQueue()},this.isAdpolicyFrequencySet=function(){return e.cookie("adpolicyAdDisplayFrequency")!=null?!0:!1},this.setAdDisplayFrequency=function(t){if(!this.isAdpolicyFrequencySet()){this.setAdpolicyPlaylistRequired(!0);var n=new Date;n.setSeconds(n.getSeconds()+t),e.cookie("adpolicyAdDisplayFrequency",t,{expires:n,path:this.getSite()})}}};return new n}),define("responsive/config",[],function(){var e=function(){var e;this.setup=function(t){e=t},this.getConfig=function(){return e}};return new e}),define("bbcdotcomMediator",["bbcdotcom/av/emp/adverts","responsive/modules/video/adPolicyplaylistSelector","logger","responsive/config"],function(e,t,n,r){var i=function(){this.init=function(){this.enableCompanions()},this.addVideo=function(i,s){try{t.isAdpolicyDataRequested()||t.setupAdpolicyData(r.getConfig().domain),e.addSmpPlugin(i,s)}catch(o){n.warn(o)}},this.layoutAds=function(){try{bbcdotcom.adverts.layout.reset()}catch(e){n.warn(e)}},this.enableCompanions=function(){try{e.enableCompanions()}catch(t){n.warn(t)}}};return new i}),define("analytics/SMPVideoMediator",[],function(){var e=function(){var e=!1,t=!1;this.callback=function(e,t){switch(e){case"mediaStarted":scw.startMovie(t);break;case"mediaPlaying":scw.playMovie(t);break;case"mediaCompleted":scw.stopMovie(t);break;case"playlistCompleted":scw.endMovie(t)}},this.addEventListeners=function(n){function a(e){var t=e.settings();return i.mediaType=e.kind(),i.mediaOffset=e.currentTime(),i.mediaLength=e.duration(),i.mediaPlayerName=e.name(),i.adId=null,i.mediaId=bbcdotcom.objects("settings.container.0.id"),i}function f(){var e=Math.round(i.mediaOffset/i.mediaLength*100);return u.indexOf(e)!==-1&&i.milestones.indexOf(e)===-1?(i.milestones.push(e),!1):!0}var r=this,i={},s=!1,o=!1,u=[10,50];n.bind("playlistLoaded",function(t){t.playlist!==undefined&&(i.mediaName=t.playlist.title,i.milestones=[],e=!0)}),n.bind("userPlay",function(e){t=!0}),n.bind("adStarted",function(e){}),n.bind("adEnded",function(e){}),n.bind("timeupdate",function(u){a(n),!s&&e&&(n.decide()==="smp-flash"||t)?(i.mediaType="programme",r.callback("mediaStarted",i),s=!0):e&&(n.decide()==="smp-flash"||t)&&(o||(o=!0,r.callback("mediaPlaying",i)))}),n.bind("ended",function(e){a(n),r.callback("mediaCompleted",i),i.milestones=[],o=!1}),n.bind("playlistEnded",function(e){a(n),r.callback("playlistCompleted",i)})}};return e}),define("responsive/models/isBBCVerticalURL",[],function(){var e=["autos","capital","culture","future","travel","earth","earth"];return function(t){var n=/\.rss|\.atom/,r,i=!1,t=t||"";for(var s in e){verticaPattern="/"+e[s];if(window.document.referrer.indexOf(verticaPattern)!=-1){i=!0;break}}return i&&!n.test(t)}}),define("responsive/models/geolocation",[],function(){var e=!1,t=["culture","travel","autos","capital"];return typeof orb!="undefined"&&typeof orb.fig!="undefined"&&orb.fig("uk")==1&&(e=!0),{isUK:function(){return e},isURLAvailableInCurrentRegion:function(t){return e&&(!isDomesticViewableSite(t)||isSponsored(t))?!1:!0},isDomesticViewableSite:function(e){for(site in t)if(e.search("/"+$site)!==-1)return!1;return!0},isSponsored:function(e){return e.search("sponsored")!==-1?!0:!1}}}),define("responsive/models/breakpoints",[],function(){var e={0:{s:0,f:319},1:{s:320,f:399},2:{s:400,f:599},3:{s:600,f:1007},4:{s:1008,f:1e4}};return e}),define("responsive/models/mediaQuery",["ecmaScript5","domReady","responsive/models/breakpoints","jssignals-1","orb/api"],function(e,t,n,r,i){var s=function(){var e,s=!1,o=new r.Signal,u=function(){return window.innerWidth};this.init=function(){e=this.getGroup(),i.layout(this.checkGroup.bind(this))},this.checkGroup=function(){var t=this.getGroup();t!=this.getCurrentGroup()&&(e=t,o.dispatch(t))},this.subscribe=function(e,t){switch(e){case"groupChanged":o.add(t)}},this.getCurrentGroup=function(){return e},this.isMobileDevice=function(){return isMobileDevice()},this.isTablet=function(e){var t=this.getGroup();return t==3&&e==0?!0:t!=3&&t!=4||!e?!1:!0},this.getGroup=function(){if(this.isFixedWidthLayout())return 4;var e=u();for(var t in n)if(e>=n[t].s&&e<=n[t].f)return Number(t)},this.isCurrentGroupInPermittedGroupString=function(e){var t;return typeof e=="undefined"||e==""?!0:(typeof e=="number"&&(e=e.toString()),t=e.split("_"),typeof t!="object"&&(t=[e]),typeof this.getGroup()!="undefined"&&typeof this.getGroup().toString=="function"&&t.indexOf(this.getGroup().toString())!=-1?!0:!1)},this.setFixedWidthLayout=function(e){s=e},this.isFixedWidthLayout=function(){return s},t(this.init.bind(this))};return new s}),define("responsive/modules/responsiveImages/responsiveImage",["ecmaScript5","jquery-1","responsive/models/mediaQuery"],function(e,t,n){var r=function(e,t,n){this.loadedImages={},this.el=e,this.arrFormats=t,this.imageReplacedCallback=n,this.isInitalise=!1,this.setInitalFormat()};return r.prototype.setInitalFormat=function(){var e,n,r=t(this.el).attr("src");for(e in this.arrFormats){n=this.arrFormats[e];if(n.src==r){this.objCurrentFormat=n,this.isInitalise=!0;break}}},r.prototype.respond=function(){var e,r,i=t(this.el).parent().width();this.isInitalise&&(t(this.el).data("fixedWidthFormat")&&n.isFixedWidthLayout()?this.loadFormat(this.getFormatByName(t(this.el).data("fixedWidthFormat"))):(r=this.getFormatForWidth(i),(this.isLargerFormat(r)||this.hasRatioChanged(r))&&this.loadFormat(r)))},r.prototype.getFormatForWidth=function(e){var t;for(i in this.arrFormats){t=this.arrFormats[i];if(typeof t.dimensions!="undefined"&&t.dimensions.width>e)break}return t},r.prototype.hasRatioChanged=function(e){return this.getRatioOfFormat(e)!=this.getRatioOfFormat(this.objCurrentFormat)?!0:!1},r.prototype.getFormatByName=function(e){for(i in this.arrFormats)if(typeof this.arrFormats[i].name!="undefined"&&this.arrFormats[i].name==e)return this.arrFormats[i];return!1},r.prototype.loadFormat=function(e){e.name!==this.objCurrentFormat.name&&(this.objCurrentFormat=e,this.loadedImages[e.name]=!0,typeof e.preload=="string"&&!this.isFormatLoaded(e.name)?this.loadImage(e.preload,this.loadImage.bind(this,e.src)):this.loadImage(e.src),this.setFormatLoaded(e))},r.prototype.setFormatLoaded=function(e){this.loadedImages[e.name]=!0},r.prototype.isFormatLoaded=function(e){return typeof this.loadedImages[e.name]!="undefined"?!0:!1},r.prototype.loadImage=function(e,t){var n=this;this.el.onload=function(){typeof n.imageReplacedCallback!="undefined"&&n.imageReplacedCallback(this),typeof t=="function"&&t.apply(this)},this.el.src=e},r.prototype.isLargerFormat=function(e){return e.dimensions.width>this.objCurrentFormat.dimensions.width?!0:!1},r.prototype.getRatioOfFormat=function(e){return e.dimensions.height/e.dimensions.width},r}),define("responsive/modules/responsiveImages/formats/wwfeatures16x9",["jquery-1"],function(e){var t=function(e,t){this.image=e,this.requiredRatio=t,this.imageNamespace="wwfeatures",this.arrFormats=[{name:"wwfeatures-130-73",dimensions:{width:130,height:73}},{name:"wwfeatures-160-90",dimensions:{width:160,height:90}},{name:"wwfeatures-224-126",dimensions:{width:224,height:126}},{name:"wwfeatures-384-216",dimensions:{width:384,height:216}},{name:"wwfeatures-464-261",dimensions:{width:464,height:261}},{name:"wwfeatures-624-351",dimensions:{width:624,height:351}},{name:"wwfeatures-1280-720",dimensions:{width:1280,height:720}},{name:"wwfeatures-1600-900",dimensions:{width:1600,height:900}},{name:"wwfeatures-976-549",dimensions:{width:976,height:549}}]};return t.prototype.isImageCompliant=function(e){return e[3]==this.imageNamespace?!0:!1},t.prototype.getFormatsForImage=function(){var t,n=e(this.image).attr("src").replace(/\/\s*$/,"").split("/"),r=[],i;if(!this.isImageCompliant(n))return[];n.shift();for(t in this.arrFormats)typeof this.arrFormats[t].dimensions!="undefined"&&(n[3]=this.arrFormats[t].dimensions.width+"_"+this.arrFormats[t].dimensions.height,i=this.arrFormats[t].dimensions.height/this.arrFormats[t].dimensions.width,this.arrFormats[t].src="http:/"+n.join("/"),typeof this.arrFormats[t].preload!="undefined"&&(n[3]=this.arrFormats[t].preload.width+"_"+this.arrFormats[t].preload.height,this.arrFormats[t].preload="http:/"+n.join("/")),(typeof this.requiredRatio=="undefined"||this.requiredRatio==i.toFixed(2))&&r.push(this.arrFormats[t]));return r},t}),define("responsive/modules/video/SMPPlayer",["logger","ecmaScript5","domReady","bump-3","responsive/modules/video/adPolicyplaylistSelector","bbcdotcomMediator","analytics/SMPVideoMediator","responsive/models/isBBCVerticalURL","responsive/models/geolocation","responsive/modules/responsiveImages/responsiveImage","responsive/modules/responsiveImages/formats/wwfeatures16x9","jssignals-1"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=function(e,t){this.mp,this.playlistLoadedSignal=new c.Signal,this.videoPlayingSignal=new c.Signal,this.errorSignal=new c.Signal,n(this.init.bind(this,e,t))};return h.prototype.init=function(e,t){this.strSelector=e,this.setConfig(t),this.setSelector(e)&&this.setupPlayer()},h.prototype.setConfig=function(e){var t=["canAutoplay"];typeof e=="undefined"&&(e={});for(var n in t)typeof e[t[n]]=="undefined"&&(e[t[n]]=!1);this.config=e},h.prototype.getConfig=function(){return this.config},h.prototype.subscribe=function(e,t){switch(e){case"playlistLoaded":this.playlistLoadedSignal.add(t);break;case"videoPlaying":this.videoPlayingSignal.add(t);break;case"error":this.errorSignal.add(t)}},h.prototype.playlistLoaded=function(){this.playlistLoadedSignal.dispatch(this.getPlayer())},h.prototype.videoPlaying=function(){this.videoPlayingSignal.dispatch(this.getPlayer())},h.prototype.error=function(t){e.error(t),this.errorSignal.dispatch(this.getPlayer(),t)},h.prototype.setupPlayer=function(){var e=this.getVideoPlayerDimensions(),t={product:"news",ui:{colour:this.getSelector().data("brandColor")},autoplay:this.isAutoplay(),playerProfile:"smp",mediaProfile:this.getSelector().data("videoPlayerMediator"),mediator:{host:"open.live.bbc.co.uk"},responsive:!0},n={playlist:this.getSelector().data("videoPlayerPlaylistUrl"),adpolicyPlaylist:this.getSelector().data("videoPlayerAdpolicyPlaylistUrl"),callback:this.loadPlaylist.bind(this)},r;this.getSelector().data("videoPlayerImageUrl")!==""&&(t.overrideHoldingImage=this.getHoldingImage(this.getSelector().data("videoPlayerImageUrl"))),r=this.getSelector().player(t),this.setPlayer(r),this.resize(),s.addVideo(this.getSelector().attr("id"),r),this.addEventListeners(),i.getPlaylist(n)},h.prototype.addEventListeners=function(){var e=new o;e.addEventListeners(this.getPlayer()),this.getPlayer().bind("playlistLoaded",this.playlistLoaded.bind(this)),this.getPlayer().bind("playing",this.videoPlaying.bind(this)),this.getPlayer().bind("error",this.error.bind(this))},h.prototype.isAutoplay=function(){return this.getConfig().canAutoplay&&u(window.document.referrer)&&!a.isUK()?!0:!1},h.prototype.getHoldingImage=function(e){if(typeof e!="undefined"){var t=new Image,n,r,i=this.getVideoPlayerDimensions(),s=new l(t);t.src=e,n=new f(t,s.getFormatsForImage()),r=n.getFormatForWidth(i.width);if(typeof r!="undefined")return r.src}return e},h.prototype.loadPlaylist=function(e){this.getPlayer().load(e)},h.prototype.setPlayer=function(e){this.mp=e},h.prototype.getPlayer=function(){return this.mp},h.prototype.play=function(){this.getPlayer().play()},h.prototype.resize=function(){var e=this.getVideoPlayerDimensions();this.getSelector().width(e.width),this.getSelector().height(e.height)},h.prototype.getVideoPlayerDimensions=function(){var e=r(this.strSelector).parent();return width=Math.round(e.width()),height=Math.round(width/16*9),{width:width.toString(),height:height.toString()}},h.prototype.setSelector=function(e){return this.selector=r(e),this.selector.length>0?!0:!1},h.prototype.getSelector=function(){return this.selector},h}),define("storyPage",["ecmaScript5","jquery-1","domReady","customEmbed","responsive/modules/video/SMPPlayer"],function(e,t,n,r,i){return function(e){var s,o=this,u="#custom-embed",a="#emp.smp-player",f=".inline-video.video-player";this.init=function(){this.setSelector(e),this.setupMedia()},this.setupMedia=function(){new i(t(a),{canAutoplay:!0}),this.setupCustomEmbed(),this.setupInlineVideos()},this.setupInlineVideos=function(){this.getSelector().find(f).each(this.embedVideo.bind())},this.embedVideo=function(e,t){var n=new i(t,{})},this.setupCustomEmbed=function(){var e=this.getElement(u);e&&new r(u)},this.getElement=function(e){var t=this.getSelector().find(e);return t.length>0?t:!1},this.setSelector=function(e){s=t(e)},this.getSelector=function(){return s},n(this.init.bind(this))}});
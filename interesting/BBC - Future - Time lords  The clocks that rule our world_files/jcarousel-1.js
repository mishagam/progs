/*
 * jCarousel v@VERSION - Riding carousels with jQuery
 * http://sorgalla.com/jcarousel/
 *
 * Copyright 2011, Jan Sorgalla
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * or GPL Version 2 (http://www.opensource.org/licenses/gpl-2.0.php) licenses.
 *
 * Date: @DATE
 */
define("jcarousel-1",function(){return function(A){(function(D,C,F){var B=/^([+\-]=)?(.+)$/;var E=D.jcarousel={intval:function(G){G=parseInt(G,10);return isNaN(G)?0:G},parseTarget:function(I){var G=false,H=typeof I!=="object"?B.exec(I):null;if(H){I=E.intval(H[2]);if(H[1]){G=true;if(H[1]==="-="){I*=-1}}}else{if(typeof I!=="object"){I=E.intval(I)}}return{target:I,relative:G}},base:{version:"@VERSION",options:{},_options:D.noop,_init:D.noop,option:function(G,H){if(arguments.length===0){return D.extend({},this.options)}if(typeof G==="string"){if(H===F){return this.options[G]===F?null:this.options[G]}this.options[G]=H}else{if(D.isFunction(G)){G=G.call(this)}this.options=D.extend({},this.options,G)}return this},carousel:function(G){var H=G||this.element,I=H.filter(".jcarousel");if(I.length){return I}while(H.size()>0){I=H.find(".jcarousel");if(I.length){return I}H=H.parent()}return D()},_trigger:function(I,H,K,J){H=H||this.element;J=D.Event(J);J.type=(this._event+I).toLowerCase();K=[this].concat(K||[]);if(J.originalEvent){for(var G=D.event.props.length,L;G;){L=D.event.props[--G];J[L]=J.originalEvent[L]}}H.trigger(J,K);return !J.isDefaultPrevented()}},create:function(I,H){var J=I.split("."),G,K;if(J.length>1){G=(J[0]+"-"+J[1]).toLowerCase();K=(J[0]+J[1]).toLowerCase();I=J[0]+J[1].charAt(0).toUpperCase()+J[1].slice(1)}else{G=K=I.toLowerCase()}E[I]=function(M,L){if(!this._init){return new E[I](M,L)}this.element=D(M).data(G,this).addClass(G);this.options=D.extend({},this.options,this._options(),L);this._init()};E[I].prototype=D.extend({},E.base,{_selector:G,_event:K},H);D.fn[I]=function(M){var L=Array.prototype.slice.call(arguments,1),N=this;if(typeof M==="string"){this.each(function(){var O=D.data(this,G);if(!O){return D.error("Cannot call methods on "+I+' prior to initialization; attempted to call method "'+M+'"')}if(!D.isFunction(O[M])||M.charAt(0)==="_"){return D.error('No such method "'+M+'" for '+I+" instance")}var P=O[M].apply(O,L);if(P!==O&&P!==F){N=P;return false}})}else{this.each(function(){var O=D.data(this,G);if(O){if(M){O.option(M)}}else{E[I](this,M)}})}return N}}};E.create("jcarousel",{options:{list:">ul:eq(0)",items:">li",animation:"normal",wrap:null,vertical:null,rtl:null,center:false},list:null,animating:false,tail:0,inTail:false,resizeTimer:null,lt:null,vertical:false,rtl:false,circular:false,_init:function(){if(false===this._trigger("init")){return this}this.list=this.element.find(this.options.list);this._reload();var G=this;this.onWindowResize=function(){if(G.resizeTimer){clearTimeout(G.resizeTimer)}G.resizeTimer=setTimeout(function(){G.reload()},100)};D(C).bind("resize.jcarousel",this.onWindowResize);this.onAnimationComplete=function(I){G.animating=false;var H=G.list.find(".jcarousel-clone");if(H.size()>0){H.remove();G.reload()}G._trigger("animateEnd");if(D.isFunction(I)){I.call(G,true)}};this._trigger("initEnd");return this},destroy:function(){if(false===this._trigger("destroy")){return this}var G=this.items().unbind(".jcarousel");D.each(["first","last","visible","fullyvisible"],function(I,H){G.removeData("jcarousel-item-"+H)});D(C).unbind("resize.jcarousel",this.onWindowResize);this.element.unbind(".jcarousel").removeData("jcarousel");this._trigger("destroyEnd");return this},reload:function(){if(false===this._trigger("reload")){return this}this._reload();this._trigger("reloadEnd");return this},items:function(){return this.list.find(this.options.items).not(".jcarousel-clone")},hasNext:function(){var I=this.option("wrap"),H=this.items(),G=H.size()-1;return G>=0&&((I&&I!=="first")||(H.filter(".jcarousel-item-last").index()<G)||(this.tail&&!this.inTail))?true:false},hasPrev:function(){var H=this.option("wrap"),G=this.items();return G.size()>0&&((H&&H!=="last")||(G.filter(".jcarousel-item-first").index()>0)||(this.tail&&this.inTail))?true:false},scroll:function(O,G,T){if(this.animating){return this}if(false===this._trigger("scroll",null,[O,G])){return this}if(D.isFunction(G)){T=G;G=true}var U=this,H=function(W){U._trigger("scrollEnd",null,[W]);if(D.isFunction(T)){T.call(U)}},Q=E.parseTarget(O);if(Q.relative){var P=this.items(),I=P.size()-1,R=Math.abs(Q.target),M,N,V,K;if(Q.target>0){var S=P.filter(".jcarousel-item-last").index();if(S>=I&&this.tail){if(!this.inTail){this._scrollTail(G,H)}else{if(this.options.wrap=="both"||this.options.wrap=="last"){this._scroll(0,G,H)}else{this._scroll(I,G,H)}}}else{if(S===I&&(this.options.wrap=="both"||this.options.wrap=="last")){return this._scroll(0,G,H)}else{M=P.filter(".jcarousel-item-first").index();N=M+R;if(this.circular&&N>I){K=I;V=P.get(-1);while(K++<N){V=this.items().eq(0);V.after(V.clone(true).addClass("jcarousel-clone"));this.list.append(V)}this._scroll(V,G,H)}else{this._scroll(Math.min(N,I),G,H)}}}}else{M=P.filter(".jcarousel-item-first").index();N=M-R;if(this.inTail){this._scroll(Math.max(N+1,0),G,H)}else{if(M===0&&(this.options.wrap=="both"||this.options.wrap=="first")){this._scroll(I,G,H)}else{if(this.circular&&N<0){K=N;V=P.get(0);while(K++<0){V=this.items().eq(-1);V.after(V.clone(true).addClass("jcarousel-clone"));this.list.prepend(V);var J=E.intval(this.list.css(this.lt)),L=this._dimension(V);this.rtl?J+=L:J-=L;this.list.css(this.lt,J+"px")}this._scroll(V,G,H)}else{this._scroll(Math.max(M-R,0),G,H)}}}}}else{this._scroll(Q.target,G,H)}return this},_reload:function(){this.vertical=this.options.vertical==null?(""+this.element.attr("class")).toLowerCase().indexOf("jcarousel-vertical")>-1:this.options.vertical;this.rtl=this.options.rtl==null?(""+this.element.attr("dir")).toLowerCase()==="rtl"||this.element.parents("[dir]").filter(function(){return(/rtl/i).test(D(this).attr("dir"))}).size()>0:this.options.rtl;this.lt=this.vertical?"top":"left";var H=this.items(),I=H.filter(".jcarousel-item-first"),G=H.size()-1;if(I.size()===0){I=H.eq(0)}this.circular=false;this.list.css({left:0,top:0});if(I.size()>0){this._prepare(I);this.list.find(".jcarousel-clone").remove();H=this.items();this.circular=this.options.wrap=="circular"&&(H.filter(".jcarousel-item-first").index()>0||H.filter(".jcarousel-item-last").index()<G);this.list.css(this.lt,this._position(I)+"px")}return this},_scroll:function(I,G,K){if(this.animating){return this}if(typeof I!=="object"){I=this.items().eq(I)}if(I.size()===0){K(false);return this}this.inTail=false;this._prepare(I);var J=this._position(I);if(J==E.intval(this.list.css(this.lt))){K(false);return this}var H={};H[this.lt]=J+"px";this._animate(H,G,K);return this},_scrollTail:function(G,J){if(this.animating||!this.tail){return this}var I=this.list.position()[this.lt];this.rtl?I+=this.tail:I-=this.tail;this.inTail=true;var H={};H[this.lt]=I+"px";this._animate(H,G,J);return this},_animate:function(I,H,L){if(this.animating){return this}if(false===this._trigger("animate")){return this}this.animating=true;if(!this.options.animation||H===false){this.list.css(I);this.onAnimationComplete(L)}else{var G=this,K=typeof this.options.animation==="object"?this.options.animation:{duration:this.options.animation},J=K.complete;K.complete=function(){G.onAnimationComplete(L);if(D.isFunction(J)){J.call(this)}};this.list.animate(I,K)}return this},_prepare:function(N){var L=this.items(),K=L.index(N),M=K,G=this._dimension(N),H=this._clipping(),I={first:N,last:N,visible:N,fullyvisible:G<=H?N:D()},O;if(this.options.center){G/=2;H/=2}if(G<H){while(true){O=this.items().eq(++M);if(O.size()===0){if(this.circular){O=this.items().eq(0);O.after(O.clone(true).addClass("jcarousel-clone"));this.list.append(O)}else{break}}G+=this._dimension(O);I.last=O;I.visible=I.visible.add(O);if(G<=H){I.fullyvisible=I.fullyvisible.add(O)}if(G>=H){break}}}if(G<H){M=K;while(true){if(--M<0){break}O=this.items().eq(M);if(O.size()===0){break}G+=this._dimension(O);I.first=O;I.visible=I.visible.add(O);if(G<=H){I.fullyvisible=I.fullyvisible.add(O)}if(G>=H){break}}}this._update(I);this.tail=0;if(this.options.wrap!=="circular"&&this.options.wrap!=="custom"&&I.last.index()===(this.items().size()-1)){var J=this.vertical?"bottom":(this.rtl?"left":"right");G-=E.intval(I.last.css("margin-"+J));if(G>H){this.tail=G-H}}return this},_position:function(H){var G=this.items(),I=G.filter(".jcarousel-item-first"),J=I.position()[this.lt];if(this.rtl&&!this.vertical){J-=this._clipping()-this._dimension(I)}if(this.options.center){J-=(this._clipping()/2)-(this._dimension(I)/2)}if((G.index(H)>G.index(I)||this.inTail)&&this.tail){J=this.rtl?J-this.tail:J+this.tail;this.inTail=true}else{this.inTail=false}return -J},_update:function(L){var I=this,H=this.items(),K=H.filter(".jcarousel-item-first"),J=H.filter(".jcarousel-item-last"),G={visible:H.filter(".jcarousel-item-visible"),fullyvisible:H.filter(".jcarousel-item-fullyvisible")};D.each(["first","last","visible","fullyvisible"],function(N,M){H.removeClass("jcarousel-item-"+M);L[M].addClass("jcarousel-item-"+M)});if(L.first.get(0)!==K.get(0)){this._trigger("itemfirstin",L.first);this._trigger("itemfirstout",K)}if(L.last.get(0)!==J.get(0)){this._trigger("itemlastin",L.last);this._trigger("itemlastout",J)}D.each(["visible","fullyvisible"],function(Q,P){var N=L[P].filter(function(){return D.inArray(this,G[P])<0}),M=G[P].filter(function(){return D.inArray(this,L[P])<0}),O=K.size()>0?K.index():0;if(H.index(L.first)>=O){M=D().pushStack(M.get().reverse())}else{N=D().pushStack(N.get().reverse())}I._trigger("item"+P+"in",N);I._trigger("item"+P+"out",M)});return this},_clipping:function(){return this.element["inner"+(this.vertical?"Height":"Width")]()},_dimension:function(G){return this.vertical?G.innerHeight()+E.intval(G.css("margin-top"))+E.intval(G.css("margin-bottom"))+E.intval(G.css("border-top-width"))+E.intval(G.css("border-bottom-width")):G.innerWidth()+E.intval(G.css("margin-left"))+E.intval(G.css("margin-right"))+E.intval(G.css("border-left-width"))+E.intval(G.css("border-right-width"))}})})(A,window);return A}});